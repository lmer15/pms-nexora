function pX(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Xa(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var TN={exports:{}},Hm={},CN={exports:{}},Rt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TO;function mX(){if(TO)return Rt;TO=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;function m(q){return q===null||typeof q!="object"?null:(q=p&&q[p]||q["@@iterator"],typeof q=="function"?q:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,_={};function w(q,Z,ge){this.props=q,this.context=Z,this.refs=_,this.updater=ge||y}w.prototype.isReactComponent={},w.prototype.setState=function(q,Z){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,Z,"setState")},w.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function N(){}N.prototype=w.prototype;function k(q,Z,ge){this.props=q,this.context=Z,this.refs=_,this.updater=ge||y}var S=k.prototype=new N;S.constructor=k,x(S,w.prototype),S.isPureReactComponent=!0;var O=Array.isArray,R=Object.prototype.hasOwnProperty,M={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function C(q,Z,ge){var Le,Pe={},Ue=null,V=null;if(Z!=null)for(Le in Z.ref!==void 0&&(V=Z.ref),Z.key!==void 0&&(Ue=""+Z.key),Z)R.call(Z,Le)&&!P.hasOwnProperty(Le)&&(Pe[Le]=Z[Le]);var ee=arguments.length-2;if(ee===1)Pe.children=ge;else if(1<ee){for(var X=Array(ee),te=0;te<ee;te++)X[te]=arguments[te+2];Pe.children=X}if(q&&q.defaultProps)for(Le in ee=q.defaultProps,ee)Pe[Le]===void 0&&(Pe[Le]=ee[Le]);return{$$typeof:t,type:q,key:Ue,ref:V,props:Pe,_owner:M.current}}function D(q,Z){return{$$typeof:t,type:q.type,key:Z,ref:q.ref,props:q.props,_owner:q._owner}}function $(q){return typeof q=="object"&&q!==null&&q.$$typeof===t}function F(q){var Z={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(ge){return Z[ge]})}var U=/\/+/g;function I(q,Z){return typeof q=="object"&&q!==null&&q.key!=null?F(""+q.key):Z.toString(36)}function z(q,Z,ge,Le,Pe){var Ue=typeof q;(Ue==="undefined"||Ue==="boolean")&&(q=null);var V=!1;if(q===null)V=!0;else switch(Ue){case"string":case"number":V=!0;break;case"object":switch(q.$$typeof){case t:case e:V=!0}}if(V)return V=q,Pe=Pe(V),q=Le===""?"."+I(V,0):Le,O(Pe)?(ge="",q!=null&&(ge=q.replace(U,"$&/")+"/"),z(Pe,Z,ge,"",function(te){return te})):Pe!=null&&($(Pe)&&(Pe=D(Pe,ge+(!Pe.key||V&&V.key===Pe.key?"":(""+Pe.key).replace(U,"$&/")+"/")+q)),Z.push(Pe)),1;if(V=0,Le=Le===""?".":Le+":",O(q))for(var ee=0;ee<q.length;ee++){Ue=q[ee];var X=Le+I(Ue,ee);V+=z(Ue,Z,ge,X,Pe)}else if(X=m(q),typeof X=="function")for(q=X.call(q),ee=0;!(Ue=q.next()).done;)Ue=Ue.value,X=Le+I(Ue,ee++),V+=z(Ue,Z,ge,X,Pe);else if(Ue==="object")throw Z=String(q),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.");return V}function Q(q,Z,ge){if(q==null)return q;var Le=[],Pe=0;return z(q,Le,"","",function(Ue){return Z.call(ge,Ue,Pe++)}),Le}function ne(q){if(q._status===-1){var Z=q._result;Z=Z(),Z.then(function(ge){(q._status===0||q._status===-1)&&(q._status=1,q._result=ge)},function(ge){(q._status===0||q._status===-1)&&(q._status=2,q._result=ge)}),q._status===-1&&(q._status=0,q._result=Z)}if(q._status===1)return q._result.default;throw q._result}var W={current:null},K={transition:null},Y={ReactCurrentDispatcher:W,ReactCurrentBatchConfig:K,ReactCurrentOwner:M};function G(){throw Error("act(...) is not supported in production builds of React.")}return Rt.Children={map:Q,forEach:function(q,Z,ge){Q(q,function(){Z.apply(this,arguments)},ge)},count:function(q){var Z=0;return Q(q,function(){Z++}),Z},toArray:function(q){return Q(q,function(Z){return Z})||[]},only:function(q){if(!$(q))throw Error("React.Children.only expected to receive a single React element child.");return q}},Rt.Component=w,Rt.Fragment=n,Rt.Profiler=s,Rt.PureComponent=k,Rt.StrictMode=r,Rt.Suspense=c,Rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y,Rt.act=G,Rt.cloneElement=function(q,Z,ge){if(q==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+q+".");var Le=x({},q.props),Pe=q.key,Ue=q.ref,V=q._owner;if(Z!=null){if(Z.ref!==void 0&&(Ue=Z.ref,V=M.current),Z.key!==void 0&&(Pe=""+Z.key),q.type&&q.type.defaultProps)var ee=q.type.defaultProps;for(X in Z)R.call(Z,X)&&!P.hasOwnProperty(X)&&(Le[X]=Z[X]===void 0&&ee!==void 0?ee[X]:Z[X])}var X=arguments.length-2;if(X===1)Le.children=ge;else if(1<X){ee=Array(X);for(var te=0;te<X;te++)ee[te]=arguments[te+2];Le.children=ee}return{$$typeof:t,type:q.type,key:Pe,ref:Ue,props:Le,_owner:V}},Rt.createContext=function(q){return q={$$typeof:a,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},q.Provider={$$typeof:i,_context:q},q.Consumer=q},Rt.createElement=C,Rt.createFactory=function(q){var Z=C.bind(null,q);return Z.type=q,Z},Rt.createRef=function(){return{current:null}},Rt.forwardRef=function(q){return{$$typeof:o,render:q}},Rt.isValidElement=$,Rt.lazy=function(q){return{$$typeof:h,_payload:{_status:-1,_result:q},_init:ne}},Rt.memo=function(q,Z){return{$$typeof:d,type:q,compare:Z===void 0?null:Z}},Rt.startTransition=function(q){var Z=K.transition;K.transition={};try{q()}finally{K.transition=Z}},Rt.unstable_act=G,Rt.useCallback=function(q,Z){return W.current.useCallback(q,Z)},Rt.useContext=function(q){return W.current.useContext(q)},Rt.useDebugValue=function(){},Rt.useDeferredValue=function(q){return W.current.useDeferredValue(q)},Rt.useEffect=function(q,Z){return W.current.useEffect(q,Z)},Rt.useId=function(){return W.current.useId()},Rt.useImperativeHandle=function(q,Z,ge){return W.current.useImperativeHandle(q,Z,ge)},Rt.useInsertionEffect=function(q,Z){return W.current.useInsertionEffect(q,Z)},Rt.useLayoutEffect=function(q,Z){return W.current.useLayoutEffect(q,Z)},Rt.useMemo=function(q,Z){return W.current.useMemo(q,Z)},Rt.useReducer=function(q,Z,ge){return W.current.useReducer(q,Z,ge)},Rt.useRef=function(q){return W.current.useRef(q)},Rt.useState=function(q){return W.current.useState(q)},Rt.useSyncExternalStore=function(q,Z,ge){return W.current.useSyncExternalStore(q,Z,ge)},Rt.useTransition=function(){return W.current.useTransition()},Rt.version="18.3.1",Rt}var CO;function Lp(){return CO||(CO=1,CN.exports=mX()),CN.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jO;function gX(){if(jO)return Hm;jO=1;var t=Lp(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function a(o,c,d){var h,p={},m=null,y=null;d!==void 0&&(m=""+d),c.key!==void 0&&(m=""+c.key),c.ref!==void 0&&(y=c.ref);for(h in c)r.call(c,h)&&!i.hasOwnProperty(h)&&(p[h]=c[h]);if(o&&o.defaultProps)for(h in c=o.defaultProps,c)p[h]===void 0&&(p[h]=c[h]);return{$$typeof:e,type:o,key:m,ref:y,props:p,_owner:s.current}}return Hm.Fragment=n,Hm.jsx=a,Hm.jsxs=a,Hm}var PO;function yX(){return PO||(PO=1,TN.exports=gX()),TN.exports}var l=yX(),Uv={},jN={exports:{}},ei={},PN={exports:{}},AN={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AO;function vX(){return AO||(AO=1,(function(t){function e(K,Y){var G=K.length;K.push(Y);e:for(;0<G;){var q=G-1>>>1,Z=K[q];if(0<s(Z,Y))K[q]=Y,K[G]=Z,G=q;else break e}}function n(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var Y=K[0],G=K.pop();if(G!==Y){K[0]=G;e:for(var q=0,Z=K.length,ge=Z>>>1;q<ge;){var Le=2*(q+1)-1,Pe=K[Le],Ue=Le+1,V=K[Ue];if(0>s(Pe,G))Ue<Z&&0>s(V,Pe)?(K[q]=V,K[Ue]=G,q=Ue):(K[q]=Pe,K[Le]=G,q=Le);else if(Ue<Z&&0>s(V,G))K[q]=V,K[Ue]=G,q=Ue;else break e}}return Y}function s(K,Y){var G=K.sortIndex-Y.sortIndex;return G!==0?G:K.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var c=[],d=[],h=1,p=null,m=3,y=!1,x=!1,_=!1,w=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(K){for(var Y=n(d);Y!==null;){if(Y.callback===null)r(d);else if(Y.startTime<=K)r(d),Y.sortIndex=Y.expirationTime,e(c,Y);else break;Y=n(d)}}function O(K){if(_=!1,S(K),!x)if(n(c)!==null)x=!0,ne(R);else{var Y=n(d);Y!==null&&W(O,Y.startTime-K)}}function R(K,Y){x=!1,_&&(_=!1,N(C),C=-1),y=!0;var G=m;try{for(S(Y),p=n(c);p!==null&&(!(p.expirationTime>Y)||K&&!F());){var q=p.callback;if(typeof q=="function"){p.callback=null,m=p.priorityLevel;var Z=q(p.expirationTime<=Y);Y=t.unstable_now(),typeof Z=="function"?p.callback=Z:p===n(c)&&r(c),S(Y)}else r(c);p=n(c)}if(p!==null)var ge=!0;else{var Le=n(d);Le!==null&&W(O,Le.startTime-Y),ge=!1}return ge}finally{p=null,m=G,y=!1}}var M=!1,P=null,C=-1,D=5,$=-1;function F(){return!(t.unstable_now()-$<D)}function U(){if(P!==null){var K=t.unstable_now();$=K;var Y=!0;try{Y=P(!0,K)}finally{Y?I():(M=!1,P=null)}}else M=!1}var I;if(typeof k=="function")I=function(){k(U)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,Q=z.port2;z.port1.onmessage=U,I=function(){Q.postMessage(null)}}else I=function(){w(U,0)};function ne(K){P=K,M||(M=!0,I())}function W(K,Y){C=w(function(){K(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(K){K.callback=null},t.unstable_continueExecution=function(){x||y||(x=!0,ne(R))},t.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<K?Math.floor(1e3/K):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(K){switch(m){case 1:case 2:case 3:var Y=3;break;default:Y=m}var G=m;m=Y;try{return K()}finally{m=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(K,Y){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var G=m;m=K;try{return Y()}finally{m=G}},t.unstable_scheduleCallback=function(K,Y,G){var q=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?q+G:q):G=q,K){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=G+Z,K={id:h++,callback:Y,priorityLevel:K,startTime:G,expirationTime:Z,sortIndex:-1},G>q?(K.sortIndex=G,e(d,K),n(c)===null&&K===n(d)&&(_?(N(C),C=-1):_=!0,W(O,G-q))):(K.sortIndex=Z,e(c,K),x||y||(x=!0,ne(R))),K},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(K){var Y=m;return function(){var G=m;m=Y;try{return K.apply(this,arguments)}finally{m=G}}}})(AN)),AN}var IO;function xX(){return IO||(IO=1,PN.exports=vX()),PN.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DO;function bX(){if(DO)return ei;DO=1;var t=Lp(),e=xX();function n(u){for(var f="https://reactjs.org/docs/error-decoder.html?invariant="+u,g=1;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g]);return"Minified React error #"+u+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function i(u,f){a(u,f),a(u+"Capture",f)}function a(u,f){for(s[u]=f,u=0;u<f.length;u++)r.add(f[u])}var o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},p={};function m(u){return c.call(p,u)?!0:c.call(h,u)?!1:d.test(u)?p[u]=!0:(h[u]=!0,!1)}function y(u,f,g,E){if(g!==null&&g.type===0)return!1;switch(typeof f){case"function":case"symbol":return!0;case"boolean":return E?!1:g!==null?!g.acceptsBooleans:(u=u.toLowerCase().slice(0,5),u!=="data-"&&u!=="aria-");default:return!1}}function x(u,f,g,E){if(f===null||typeof f>"u"||y(u,f,g,E))return!0;if(E)return!1;if(g!==null)switch(g.type){case 3:return!f;case 4:return f===!1;case 5:return isNaN(f);case 6:return isNaN(f)||1>f}return!1}function _(u,f,g,E,T,A,B){this.acceptsBooleans=f===2||f===3||f===4,this.attributeName=E,this.attributeNamespace=T,this.mustUseProperty=g,this.propertyName=u,this.type=f,this.sanitizeURL=A,this.removeEmptyString=B}var w={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(u){w[u]=new _(u,0,!1,u,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(u){var f=u[0];w[f]=new _(f,1,!1,u[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(u){w[u]=new _(u,2,!1,u.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(u){w[u]=new _(u,2,!1,u,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(u){w[u]=new _(u,3,!1,u.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(u){w[u]=new _(u,3,!0,u,null,!1,!1)}),["capture","download"].forEach(function(u){w[u]=new _(u,4,!1,u,null,!1,!1)}),["cols","rows","size","span"].forEach(function(u){w[u]=new _(u,6,!1,u,null,!1,!1)}),["rowSpan","start"].forEach(function(u){w[u]=new _(u,5,!1,u.toLowerCase(),null,!1,!1)});var N=/[\-:]([a-z])/g;function k(u){return u[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(u){var f=u.replace(N,k);w[f]=new _(f,1,!1,u,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(u){var f=u.replace(N,k);w[f]=new _(f,1,!1,u,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(u){var f=u.replace(N,k);w[f]=new _(f,1,!1,u,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(u){w[u]=new _(u,1,!1,u.toLowerCase(),null,!1,!1)}),w.xlinkHref=new _("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(u){w[u]=new _(u,1,!1,u.toLowerCase(),null,!0,!0)});function S(u,f,g,E){var T=w.hasOwnProperty(f)?w[f]:null;(T!==null?T.type!==0:E||!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(x(f,g,T,E)&&(g=null),E||T===null?m(f)&&(g===null?u.removeAttribute(f):u.setAttribute(f,""+g)):T.mustUseProperty?u[T.propertyName]=g===null?T.type===3?!1:"":g:(f=T.attributeName,E=T.attributeNamespace,g===null?u.removeAttribute(f):(T=T.type,g=T===3||T===4&&g===!0?"":""+g,E?u.setAttributeNS(E,f,g):u.setAttribute(f,g))))}var O=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,R=Symbol.for("react.element"),M=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),$=Symbol.for("react.provider"),F=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),Q=Symbol.for("react.memo"),ne=Symbol.for("react.lazy"),W=Symbol.for("react.offscreen"),K=Symbol.iterator;function Y(u){return u===null||typeof u!="object"?null:(u=K&&u[K]||u["@@iterator"],typeof u=="function"?u:null)}var G=Object.assign,q;function Z(u){if(q===void 0)try{throw Error()}catch(g){var f=g.stack.trim().match(/\n( *(at )?)/);q=f&&f[1]||""}return`
`+q+u}var ge=!1;function Le(u,f){if(!u||ge)return"";ge=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(f)if(f=function(){throw Error()},Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(xe){var E=xe}Reflect.construct(u,[],f)}else{try{f.call()}catch(xe){E=xe}u.call(f.prototype)}else{try{throw Error()}catch(xe){E=xe}u()}}catch(xe){if(xe&&E&&typeof xe.stack=="string"){for(var T=xe.stack.split(`
`),A=E.stack.split(`
`),B=T.length-1,J=A.length-1;1<=B&&0<=J&&T[B]!==A[J];)J--;for(;1<=B&&0<=J;B--,J--)if(T[B]!==A[J]){if(B!==1||J!==1)do if(B--,J--,0>J||T[B]!==A[J]){var re=`
`+T[B].replace(" at new "," at ");return u.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",u.displayName)),re}while(1<=B&&0<=J);break}}}finally{ge=!1,Error.prepareStackTrace=g}return(u=u?u.displayName||u.name:"")?Z(u):""}function Pe(u){switch(u.tag){case 5:return Z(u.type);case 16:return Z("Lazy");case 13:return Z("Suspense");case 19:return Z("SuspenseList");case 0:case 2:case 15:return u=Le(u.type,!1),u;case 11:return u=Le(u.type.render,!1),u;case 1:return u=Le(u.type,!0),u;default:return""}}function Ue(u){if(u==null)return null;if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case P:return"Fragment";case M:return"Portal";case D:return"Profiler";case C:return"StrictMode";case I:return"Suspense";case z:return"SuspenseList"}if(typeof u=="object")switch(u.$$typeof){case F:return(u.displayName||"Context")+".Consumer";case $:return(u._context.displayName||"Context")+".Provider";case U:var f=u.render;return u=u.displayName,u||(u=f.displayName||f.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case Q:return f=u.displayName||null,f!==null?f:Ue(u.type)||"Memo";case ne:f=u._payload,u=u._init;try{return Ue(u(f))}catch{}}return null}function V(u){var f=u.type;switch(u.tag){case 24:return"Cache";case 9:return(f.displayName||"Context")+".Consumer";case 10:return(f._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return u=f.render,u=u.displayName||u.name||"",f.displayName||(u!==""?"ForwardRef("+u+")":"ForwardRef");case 7:return"Fragment";case 5:return f;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ue(f);case 8:return f===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f}return null}function ee(u){switch(typeof u){case"boolean":case"number":case"string":case"undefined":return u;case"object":return u;default:return""}}function X(u){var f=u.type;return(u=u.nodeName)&&u.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function te(u){var f=X(u)?"checked":"value",g=Object.getOwnPropertyDescriptor(u.constructor.prototype,f),E=""+u[f];if(!u.hasOwnProperty(f)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var T=g.get,A=g.set;return Object.defineProperty(u,f,{configurable:!0,get:function(){return T.call(this)},set:function(B){E=""+B,A.call(this,B)}}),Object.defineProperty(u,f,{enumerable:g.enumerable}),{getValue:function(){return E},setValue:function(B){E=""+B},stopTracking:function(){u._valueTracker=null,delete u[f]}}}}function he(u){u._valueTracker||(u._valueTracker=te(u))}function ie(u){if(!u)return!1;var f=u._valueTracker;if(!f)return!0;var g=f.getValue(),E="";return u&&(E=X(u)?u.checked?"true":"false":u.value),u=E,u!==g?(f.setValue(u),!0):!1}function le(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}function Ne(u,f){var g=f.checked;return G({},f,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:g??u._wrapperState.initialChecked})}function Se(u,f){var g=f.defaultValue==null?"":f.defaultValue,E=f.checked!=null?f.checked:f.defaultChecked;g=ee(f.value!=null?f.value:g),u._wrapperState={initialChecked:E,initialValue:g,controlled:f.type==="checkbox"||f.type==="radio"?f.checked!=null:f.value!=null}}function ae(u,f){f=f.checked,f!=null&&S(u,"checked",f,!1)}function ke(u,f){ae(u,f);var g=ee(f.value),E=f.type;if(g!=null)E==="number"?(g===0&&u.value===""||u.value!=g)&&(u.value=""+g):u.value!==""+g&&(u.value=""+g);else if(E==="submit"||E==="reset"){u.removeAttribute("value");return}f.hasOwnProperty("value")?Ee(u,f.type,g):f.hasOwnProperty("defaultValue")&&Ee(u,f.type,ee(f.defaultValue)),f.checked==null&&f.defaultChecked!=null&&(u.defaultChecked=!!f.defaultChecked)}function ce(u,f,g){if(f.hasOwnProperty("value")||f.hasOwnProperty("defaultValue")){var E=f.type;if(!(E!=="submit"&&E!=="reset"||f.value!==void 0&&f.value!==null))return;f=""+u._wrapperState.initialValue,g||f===u.value||(u.value=f),u.defaultValue=f}g=u.name,g!==""&&(u.name=""),u.defaultChecked=!!u._wrapperState.initialChecked,g!==""&&(u.name=g)}function Ee(u,f,g){(f!=="number"||le(u.ownerDocument)!==u)&&(g==null?u.defaultValue=""+u._wrapperState.initialValue:u.defaultValue!==""+g&&(u.defaultValue=""+g))}var Fe=Array.isArray;function ut(u,f,g,E){if(u=u.options,f){f={};for(var T=0;T<g.length;T++)f["$"+g[T]]=!0;for(g=0;g<u.length;g++)T=f.hasOwnProperty("$"+u[g].value),u[g].selected!==T&&(u[g].selected=T),T&&E&&(u[g].defaultSelected=!0)}else{for(g=""+ee(g),f=null,T=0;T<u.length;T++){if(u[T].value===g){u[T].selected=!0,E&&(u[T].defaultSelected=!0);return}f!==null||u[T].disabled||(f=u[T])}f!==null&&(f.selected=!0)}}function Pt(u,f){if(f.dangerouslySetInnerHTML!=null)throw Error(n(91));return G({},f,{value:void 0,defaultValue:void 0,children:""+u._wrapperState.initialValue})}function Dt(u,f){var g=f.value;if(g==null){if(g=f.children,f=f.defaultValue,g!=null){if(f!=null)throw Error(n(92));if(Fe(g)){if(1<g.length)throw Error(n(93));g=g[0]}f=g}f==null&&(f=""),g=f}u._wrapperState={initialValue:ee(g)}}function xn(u,f){var g=ee(f.value),E=ee(f.defaultValue);g!=null&&(g=""+g,g!==u.value&&(u.value=g),f.defaultValue==null&&u.defaultValue!==g&&(u.defaultValue=g)),E!=null&&(u.defaultValue=""+E)}function gr(u){var f=u.textContent;f===u._wrapperState.initialValue&&f!==""&&f!==null&&(u.value=f)}function Wt(u){switch(u){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function at(u,f){return u==null||u==="http://www.w3.org/1999/xhtml"?Wt(f):u==="http://www.w3.org/2000/svg"&&f==="foreignObject"?"http://www.w3.org/1999/xhtml":u}var ln,pe=(function(u){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(f,g,E,T){MSApp.execUnsafeLocalFunction(function(){return u(f,g,E,T)})}:u})(function(u,f){if(u.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in u)u.innerHTML=f;else{for(ln=ln||document.createElement("div"),ln.innerHTML="<svg>"+f.valueOf().toString()+"</svg>",f=ln.firstChild;u.firstChild;)u.removeChild(u.firstChild);for(;f.firstChild;)u.appendChild(f.firstChild)}});function we(u,f){if(f){var g=u.firstChild;if(g&&g===u.lastChild&&g.nodeType===3){g.nodeValue=f;return}}u.textContent=f}var Te={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ve=["Webkit","ms","Moz","O"];Object.keys(Te).forEach(function(u){ve.forEach(function(f){f=f+u.charAt(0).toUpperCase()+u.substring(1),Te[f]=Te[u]})});function Re(u,f,g){return f==null||typeof f=="boolean"||f===""?"":g||typeof f!="number"||f===0||Te.hasOwnProperty(u)&&Te[u]?(""+f).trim():f+"px"}function Qe(u,f){u=u.style;for(var g in f)if(f.hasOwnProperty(g)){var E=g.indexOf("--")===0,T=Re(g,f[g],E);g==="float"&&(g="cssFloat"),E?u.setProperty(g,T):u[g]=T}}var Ke=G({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function At(u,f){if(f){if(Ke[u]&&(f.children!=null||f.dangerouslySetInnerHTML!=null))throw Error(n(137,u));if(f.dangerouslySetInnerHTML!=null){if(f.children!=null)throw Error(n(60));if(typeof f.dangerouslySetInnerHTML!="object"||!("__html"in f.dangerouslySetInnerHTML))throw Error(n(61))}if(f.style!=null&&typeof f.style!="object")throw Error(n(62))}}function bn(u,f){if(u.indexOf("-")===-1)return typeof f.is=="string";switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ms=null;function gs(u){return u=u.target||u.srcElement||window,u.correspondingUseElement&&(u=u.correspondingUseElement),u.nodeType===3?u.parentNode:u}var Wn=null,hn=null,St=null;function Qt(u){if(u=Pm(u)){if(typeof Wn!="function")throw Error(n(280));var f=u.stateNode;f&&(f=rv(f),Wn(u.stateNode,u.type,f))}}function wn(u){hn?St?St.push(u):St=[u]:hn=u}function ys(){if(hn){var u=hn,f=St;if(St=hn=null,Qt(u),f)for(u=0;u<f.length;u++)Qt(f[u])}}function Xn(u,f){return u(f)}function ar(){}var Jn=!1;function Hs(u,f,g){if(Jn)return u(f,g);Jn=!0;try{return Xn(u,f,g)}finally{Jn=!1,(hn!==null||St!==null)&&(ar(),ys())}}function jt(u,f){var g=u.stateNode;if(g===null)return null;var E=rv(g);if(E===null)return null;g=E[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(E=!E.disabled)||(u=u.type,E=!(u==="button"||u==="input"||u==="select"||u==="textarea")),u=!E;break e;default:u=!1}if(u)return null;if(g&&typeof g!="function")throw Error(n(231,f,typeof g));return g}var es=!1;if(o)try{var In={};Object.defineProperty(In,"passive",{get:function(){es=!0}}),window.addEventListener("test",In,In),window.removeEventListener("test",In,In)}catch{es=!1}function Sr(u,f,g,E,T,A,B,J,re){var xe=Array.prototype.slice.call(arguments,3);try{f.apply(g,xe)}catch(Ae){this.onError(Ae)}}var Ds=!1,qs=null,Zn=!1,vi=null,Ho={onError:function(u){Ds=!0,qs=u}};function rc(u,f,g,E,T,A,B,J,re){Ds=!1,qs=null,Sr.apply(Ho,arguments)}function bh(u,f,g,E,T,A,B,J,re){if(rc.apply(this,arguments),Ds){if(Ds){var xe=qs;Ds=!1,qs=null}else throw Error(n(198));Zn||(Zn=!0,vi=xe)}}function xi(u){var f=u,g=u;if(u.alternate)for(;f.return;)f=f.return;else{u=f;do f=u,(f.flags&4098)!==0&&(g=f.return),u=f.return;while(u)}return f.tag===3?g:null}function qo(u){if(u.tag===13){var f=u.memoizedState;if(f===null&&(u=u.alternate,u!==null&&(f=u.memoizedState)),f!==null)return f.dehydrated}return null}function bi(u){if(xi(u)!==u)throw Error(n(188))}function wh(u){var f=u.alternate;if(!f){if(f=xi(u),f===null)throw Error(n(188));return f!==u?null:u}for(var g=u,E=f;;){var T=g.return;if(T===null)break;var A=T.alternate;if(A===null){if(E=T.return,E!==null){g=E;continue}break}if(T.child===A.child){for(A=T.child;A;){if(A===g)return bi(T),u;if(A===E)return bi(T),f;A=A.sibling}throw Error(n(188))}if(g.return!==E.return)g=T,E=A;else{for(var B=!1,J=T.child;J;){if(J===g){B=!0,g=T,E=A;break}if(J===E){B=!0,E=T,g=A;break}J=J.sibling}if(!B){for(J=A.child;J;){if(J===g){B=!0,g=A,E=T;break}if(J===E){B=!0,E=A,g=T;break}J=J.sibling}if(!B)throw Error(n(189))}}if(g.alternate!==E)throw Error(n(190))}if(g.tag!==3)throw Error(n(188));return g.stateNode.current===g?u:f}function Cu(u){return u=wh(u),u!==null?sc(u):null}function sc(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){var f=sc(u);if(f!==null)return f;u=u.sibling}return null}var ic=e.unstable_scheduleCallback,ju=e.unstable_cancelCallback,_h=e.unstable_shouldYield,pm=e.unstable_requestPaint,tn=e.unstable_now,ro=e.unstable_getCurrentPriorityLevel,We=e.unstable_ImmediatePriority,Ye=e.unstable_UserBlockingPriority,Ze=e.unstable_NormalPriority,Me=e.unstable_LowPriority,yt=e.unstable_IdlePriority,Tt=null,ot=null;function kt(u){if(ot&&typeof ot.onCommitFiberRoot=="function")try{ot.onCommitFiberRoot(Tt,u,void 0,(u.current.flags&128)===128)}catch{}}var cn=Math.clz32?Math.clz32:Nh,ac=Math.log,Eh=Math.LN2;function Nh(u){return u>>>=0,u===0?32:31-(ac(u)/Eh|0)|0}var Pu=64,Hi=4194304;function oc(u){switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return u&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return u}}function Au(u,f){var g=u.pendingLanes;if(g===0)return 0;var E=0,T=u.suspendedLanes,A=u.pingedLanes,B=g&268435455;if(B!==0){var J=B&~T;J!==0?E=oc(J):(A&=B,A!==0&&(E=oc(A)))}else B=g&~T,B!==0?E=oc(B):A!==0&&(E=oc(A));if(E===0)return 0;if(f!==0&&f!==E&&(f&T)===0&&(T=E&-E,A=f&-f,T>=A||T===16&&(A&4194240)!==0))return f;if((E&4)!==0&&(E|=g&16),f=u.entangledLanes,f!==0)for(u=u.entanglements,f&=E;0<f;)g=31-cn(f),T=1<<g,E|=u[g],f&=~T;return E}function rE(u,f){switch(u){case 1:case 2:case 4:return f+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ko(u,f){for(var g=u.suspendedLanes,E=u.pingedLanes,T=u.expirationTimes,A=u.pendingLanes;0<A;){var B=31-cn(A),J=1<<B,re=T[B];re===-1?((J&g)===0||(J&E)!==0)&&(T[B]=rE(J,f)):re<=f&&(u.expiredLanes|=J),A&=~J}}function wi(u){return u=u.pendingLanes&-1073741825,u!==0?u:u&1073741824?1073741824:0}function Iu(){var u=Pu;return Pu<<=1,(Pu&4194240)===0&&(Pu=64),u}function lc(u){for(var f=[],g=0;31>g;g++)f.push(u);return f}function cc(u,f,g){u.pendingLanes|=f,f!==536870912&&(u.suspendedLanes=0,u.pingedLanes=0),u=u.eventTimes,f=31-cn(f),u[f]=g}function fn(u,f){var g=u.pendingLanes&~f;u.pendingLanes=f,u.suspendedLanes=0,u.pingedLanes=0,u.expiredLanes&=f,u.mutableReadLanes&=f,u.entangledLanes&=f,f=u.entanglements;var E=u.eventTimes;for(u=u.expirationTimes;0<g;){var T=31-cn(g),A=1<<T;f[T]=0,E[T]=-1,u[T]=-1,g&=~A}}function uc(u,f){var g=u.entangledLanes|=f;for(u=u.entanglements;g;){var E=31-cn(g),T=1<<E;T&f|u[E]&f&&(u[E]|=f),g&=~T}}var Ut=0;function dc(u){return u&=-u,1<u?4<u?(u&268435455)!==0?16:536870912:4:1}var My,Sh,Ly,Fy,$y,mm=!1,so=[],ts=null,va=null,xa=null,hc=new Map,qi=new Map,io=[],sE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Vy(u,f){switch(u){case"focusin":case"focusout":ts=null;break;case"dragenter":case"dragleave":va=null;break;case"mouseover":case"mouseout":xa=null;break;case"pointerover":case"pointerout":hc.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":qi.delete(f.pointerId)}}function Ks(u,f,g,E,T,A){return u===null||u.nativeEvent!==A?(u={blockedOn:f,domEventName:g,eventSystemFlags:E,nativeEvent:A,targetContainers:[T]},f!==null&&(f=Pm(f),f!==null&&Sh(f)),u):(u.eventSystemFlags|=E,f=u.targetContainers,T!==null&&f.indexOf(T)===-1&&f.push(T),u)}function iE(u,f,g,E,T){switch(f){case"focusin":return ts=Ks(ts,u,f,g,E,T),!0;case"dragenter":return va=Ks(va,u,f,g,E,T),!0;case"mouseover":return xa=Ks(xa,u,f,g,E,T),!0;case"pointerover":var A=T.pointerId;return hc.set(A,Ks(hc.get(A)||null,u,f,g,E,T)),!0;case"gotpointercapture":return A=T.pointerId,qi.set(A,Ks(qi.get(A)||null,u,f,g,E,T)),!0}return!1}function By(u){var f=Lu(u.target);if(f!==null){var g=xi(f);if(g!==null){if(f=g.tag,f===13){if(f=qo(g),f!==null){u.blockedOn=f,$y(u.priority,function(){Ly(g)});return}}else if(f===3&&g.stateNode.current.memoizedState.isDehydrated){u.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}u.blockedOn=null}function Yo(u){if(u.blockedOn!==null)return!1;for(var f=u.targetContainers;0<f.length;){var g=kh(u.domEventName,u.eventSystemFlags,f[0],u.nativeEvent);if(g===null){g=u.nativeEvent;var E=new g.constructor(g.type,g);ms=E,g.target.dispatchEvent(E),ms=null}else return f=Pm(g),f!==null&&Sh(f),u.blockedOn=g,!1;f.shift()}return!0}function Du(u,f,g){Yo(u)&&g.delete(f)}function Uy(){mm=!1,ts!==null&&Yo(ts)&&(ts=null),va!==null&&Yo(va)&&(va=null),xa!==null&&Yo(xa)&&(xa=null),hc.forEach(Du),qi.forEach(Du)}function ba(u,f){u.blockedOn===f&&(u.blockedOn=null,mm||(mm=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Uy)))}function wa(u){function f(T){return ba(T,u)}if(0<so.length){ba(so[0],u);for(var g=1;g<so.length;g++){var E=so[g];E.blockedOn===u&&(E.blockedOn=null)}}for(ts!==null&&ba(ts,u),va!==null&&ba(va,u),xa!==null&&ba(xa,u),hc.forEach(f),qi.forEach(f),g=0;g<io.length;g++)E=io[g],E.blockedOn===u&&(E.blockedOn=null);for(;0<io.length&&(g=io[0],g.blockedOn===null);)By(g),g.blockedOn===null&&io.shift()}var Go=O.ReactCurrentBatchConfig,fc=!0;function Dn(u,f,g,E){var T=Ut,A=Go.transition;Go.transition=null;try{Ut=1,gm(u,f,g,E)}finally{Ut=T,Go.transition=A}}function aE(u,f,g,E){var T=Ut,A=Go.transition;Go.transition=null;try{Ut=4,gm(u,f,g,E)}finally{Ut=T,Go.transition=A}}function gm(u,f,g,E){if(fc){var T=kh(u,f,g,E);if(T===null)yE(u,f,E,Ru,g),Vy(u,E);else if(iE(T,u,f,g,E))E.stopPropagation();else if(Vy(u,E),f&4&&-1<sE.indexOf(u)){for(;T!==null;){var A=Pm(T);if(A!==null&&My(A),A=kh(u,f,g,E),A===null&&yE(u,f,E,Ru,g),A===T)break;T=A}T!==null&&E.stopPropagation()}else yE(u,f,E,null,g)}}var Ru=null;function kh(u,f,g,E){if(Ru=null,u=gs(E),u=Lu(u),u!==null)if(f=xi(u),f===null)u=null;else if(g=f.tag,g===13){if(u=qo(f),u!==null)return u;u=null}else if(g===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;u=null}else f!==u&&(u=null);return Ru=u,null}function ym(u){switch(u){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ro()){case We:return 1;case Ye:return 4;case Ze:case Me:return 16;case yt:return 536870912;default:return 16}default:return 16}}var _i=null,Th=null,Ys=null;function vm(){if(Ys)return Ys;var u,f=Th,g=f.length,E,T="value"in _i?_i.value:_i.textContent,A=T.length;for(u=0;u<g&&f[u]===T[u];u++);var B=g-u;for(E=1;E<=B&&f[g-E]===T[A-E];E++);return Ys=T.slice(u,1<E?1-E:void 0)}function Ch(u){var f=u.keyCode;return"charCode"in u?(u=u.charCode,u===0&&f===13&&(u=13)):u=f,u===10&&(u=13),32<=u||u===13?u:0}function ao(){return!0}function xm(){return!1}function ns(u){function f(g,E,T,A,B){this._reactName=g,this._targetInst=T,this.type=E,this.nativeEvent=A,this.target=B,this.currentTarget=null;for(var J in u)u.hasOwnProperty(J)&&(g=u[J],this[J]=g?g(A):A[J]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?ao:xm,this.isPropagationStopped=xm,this}return G(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=ao)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=ao)},persist:function(){},isPersistent:ao}),f}var _a={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jh=ns(_a),oo=G({},_a,{view:0,detail:0}),oE=ns(oo),Ph,Qo,pc,Ou=G({},oo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lo,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(u!==pc&&(pc&&u.type==="mousemove"?(Ph=u.screenX-pc.screenX,Qo=u.screenY-pc.screenY):Qo=Ph=0,pc=u),Ph)},movementY:function(u){return"movementY"in u?u.movementY:Qo}}),Ah=ns(Ou),bm=G({},Ou,{dataTransfer:0}),zy=ns(bm),Ih=G({},oo,{relatedTarget:0}),Dh=ns(Ih),Wy=G({},_a,{animationName:0,elapsedTime:0,pseudoElement:0}),Xo=ns(Wy),Hy=G({},_a,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),qy=ns(Hy),Ky=G({},_a,{data:0}),wm=ns(Ky),Rh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Rs={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gy(u){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(u):(u=Yy[u])?!!f[u]:!1}function lo(){return Gy}var b=G({},oo,{key:function(u){if(u.key){var f=Rh[u.key]||u.key;if(f!=="Unidentified")return f}return u.type==="keypress"?(u=Ch(u),u===13?"Enter":String.fromCharCode(u)):u.type==="keydown"||u.type==="keyup"?Rs[u.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lo,charCode:function(u){return u.type==="keypress"?Ch(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?Ch(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),j=ns(b),L=G({},Ou,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),H=ns(L),ue=G({},oo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lo}),_e=ns(ue),ze=G({},_a,{propertyName:0,elapsedTime:0,pseudoElement:0}),rn=ns(ze),kr=G({},Ou,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),Ht=ns(kr),$r=[9,13,27,32],yr=o&&"CompositionEvent"in window,Ki=null;o&&"documentMode"in document&&(Ki=document.documentMode);var Ei=o&&"TextEvent"in window&&!Ki,Mu=o&&(!yr||Ki&&8<Ki&&11>=Ki),Oh=" ",wD=!1;function _D(u,f){switch(u){case"keyup":return $r.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ED(u){return u=u.detail,typeof u=="object"&&"data"in u?u.data:null}var Mh=!1;function dQ(u,f){switch(u){case"compositionend":return ED(f);case"keypress":return f.which!==32?null:(wD=!0,Oh);case"textInput":return u=f.data,u===Oh&&wD?null:u;default:return null}}function hQ(u,f){if(Mh)return u==="compositionend"||!yr&&_D(u,f)?(u=vm(),Ys=Th=_i=null,Mh=!1,u):null;switch(u){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return Mu&&f.locale!=="ko"?null:f.data;default:return null}}var fQ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ND(u){var f=u&&u.nodeName&&u.nodeName.toLowerCase();return f==="input"?!!fQ[u.type]:f==="textarea"}function SD(u,f,g,E){wn(E),f=ev(f,"onChange"),0<f.length&&(g=new jh("onChange","change",null,g,E),u.push({event:g,listeners:f}))}var _m=null,Em=null;function pQ(u){zD(u,0)}function Qy(u){var f=Bh(u);if(ie(f))return u}function mQ(u,f){if(u==="change")return f}var kD=!1;if(o){var lE;if(o){var cE="oninput"in document;if(!cE){var TD=document.createElement("div");TD.setAttribute("oninput","return;"),cE=typeof TD.oninput=="function"}lE=cE}else lE=!1;kD=lE&&(!document.documentMode||9<document.documentMode)}function CD(){_m&&(_m.detachEvent("onpropertychange",jD),Em=_m=null)}function jD(u){if(u.propertyName==="value"&&Qy(Em)){var f=[];SD(f,Em,u,gs(u)),Hs(pQ,f)}}function gQ(u,f,g){u==="focusin"?(CD(),_m=f,Em=g,_m.attachEvent("onpropertychange",jD)):u==="focusout"&&CD()}function yQ(u){if(u==="selectionchange"||u==="keyup"||u==="keydown")return Qy(Em)}function vQ(u,f){if(u==="click")return Qy(f)}function xQ(u,f){if(u==="input"||u==="change")return Qy(f)}function bQ(u,f){return u===f&&(u!==0||1/u===1/f)||u!==u&&f!==f}var Ea=typeof Object.is=="function"?Object.is:bQ;function Nm(u,f){if(Ea(u,f))return!0;if(typeof u!="object"||u===null||typeof f!="object"||f===null)return!1;var g=Object.keys(u),E=Object.keys(f);if(g.length!==E.length)return!1;for(E=0;E<g.length;E++){var T=g[E];if(!c.call(f,T)||!Ea(u[T],f[T]))return!1}return!0}function PD(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function AD(u,f){var g=PD(u);u=0;for(var E;g;){if(g.nodeType===3){if(E=u+g.textContent.length,u<=f&&E>=f)return{node:g,offset:f-u};u=E}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=PD(g)}}function ID(u,f){return u&&f?u===f?!0:u&&u.nodeType===3?!1:f&&f.nodeType===3?ID(u,f.parentNode):"contains"in u?u.contains(f):u.compareDocumentPosition?!!(u.compareDocumentPosition(f)&16):!1:!1}function DD(){for(var u=window,f=le();f instanceof u.HTMLIFrameElement;){try{var g=typeof f.contentWindow.location.href=="string"}catch{g=!1}if(g)u=f.contentWindow;else break;f=le(u.document)}return f}function uE(u){var f=u&&u.nodeName&&u.nodeName.toLowerCase();return f&&(f==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||f==="textarea"||u.contentEditable==="true")}function wQ(u){var f=DD(),g=u.focusedElem,E=u.selectionRange;if(f!==g&&g&&g.ownerDocument&&ID(g.ownerDocument.documentElement,g)){if(E!==null&&uE(g)){if(f=E.start,u=E.end,u===void 0&&(u=f),"selectionStart"in g)g.selectionStart=f,g.selectionEnd=Math.min(u,g.value.length);else if(u=(f=g.ownerDocument||document)&&f.defaultView||window,u.getSelection){u=u.getSelection();var T=g.textContent.length,A=Math.min(E.start,T);E=E.end===void 0?A:Math.min(E.end,T),!u.extend&&A>E&&(T=E,E=A,A=T),T=AD(g,A);var B=AD(g,E);T&&B&&(u.rangeCount!==1||u.anchorNode!==T.node||u.anchorOffset!==T.offset||u.focusNode!==B.node||u.focusOffset!==B.offset)&&(f=f.createRange(),f.setStart(T.node,T.offset),u.removeAllRanges(),A>E?(u.addRange(f),u.extend(B.node,B.offset)):(f.setEnd(B.node,B.offset),u.addRange(f)))}}for(f=[],u=g;u=u.parentNode;)u.nodeType===1&&f.push({element:u,left:u.scrollLeft,top:u.scrollTop});for(typeof g.focus=="function"&&g.focus(),g=0;g<f.length;g++)u=f[g],u.element.scrollLeft=u.left,u.element.scrollTop=u.top}}var _Q=o&&"documentMode"in document&&11>=document.documentMode,Lh=null,dE=null,Sm=null,hE=!1;function RD(u,f,g){var E=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;hE||Lh==null||Lh!==le(E)||(E=Lh,"selectionStart"in E&&uE(E)?E={start:E.selectionStart,end:E.selectionEnd}:(E=(E.ownerDocument&&E.ownerDocument.defaultView||window).getSelection(),E={anchorNode:E.anchorNode,anchorOffset:E.anchorOffset,focusNode:E.focusNode,focusOffset:E.focusOffset}),Sm&&Nm(Sm,E)||(Sm=E,E=ev(dE,"onSelect"),0<E.length&&(f=new jh("onSelect","select",null,f,g),u.push({event:f,listeners:E}),f.target=Lh)))}function Xy(u,f){var g={};return g[u.toLowerCase()]=f.toLowerCase(),g["Webkit"+u]="webkit"+f,g["Moz"+u]="moz"+f,g}var Fh={animationend:Xy("Animation","AnimationEnd"),animationiteration:Xy("Animation","AnimationIteration"),animationstart:Xy("Animation","AnimationStart"),transitionend:Xy("Transition","TransitionEnd")},fE={},OD={};o&&(OD=document.createElement("div").style,"AnimationEvent"in window||(delete Fh.animationend.animation,delete Fh.animationiteration.animation,delete Fh.animationstart.animation),"TransitionEvent"in window||delete Fh.transitionend.transition);function Jy(u){if(fE[u])return fE[u];if(!Fh[u])return u;var f=Fh[u],g;for(g in f)if(f.hasOwnProperty(g)&&g in OD)return fE[u]=f[g];return u}var MD=Jy("animationend"),LD=Jy("animationiteration"),FD=Jy("animationstart"),$D=Jy("transitionend"),VD=new Map,BD="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function mc(u,f){VD.set(u,f),i(f,[u])}for(var pE=0;pE<BD.length;pE++){var mE=BD[pE],EQ=mE.toLowerCase(),NQ=mE[0].toUpperCase()+mE.slice(1);mc(EQ,"on"+NQ)}mc(MD,"onAnimationEnd"),mc(LD,"onAnimationIteration"),mc(FD,"onAnimationStart"),mc("dblclick","onDoubleClick"),mc("focusin","onFocus"),mc("focusout","onBlur"),mc($D,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var km="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),SQ=new Set("cancel close invalid load scroll toggle".split(" ").concat(km));function UD(u,f,g){var E=u.type||"unknown-event";u.currentTarget=g,bh(E,f,void 0,u),u.currentTarget=null}function zD(u,f){f=(f&4)!==0;for(var g=0;g<u.length;g++){var E=u[g],T=E.event;E=E.listeners;e:{var A=void 0;if(f)for(var B=E.length-1;0<=B;B--){var J=E[B],re=J.instance,xe=J.currentTarget;if(J=J.listener,re!==A&&T.isPropagationStopped())break e;UD(T,J,xe),A=re}else for(B=0;B<E.length;B++){if(J=E[B],re=J.instance,xe=J.currentTarget,J=J.listener,re!==A&&T.isPropagationStopped())break e;UD(T,J,xe),A=re}}}if(Zn)throw u=vi,Zn=!1,vi=null,u}function kn(u,f){var g=f[EE];g===void 0&&(g=f[EE]=new Set);var E=u+"__bubble";g.has(E)||(WD(f,u,2,!1),g.add(E))}function gE(u,f,g){var E=0;f&&(E|=4),WD(g,u,E,f)}var Zy="_reactListening"+Math.random().toString(36).slice(2);function Tm(u){if(!u[Zy]){u[Zy]=!0,r.forEach(function(g){g!=="selectionchange"&&(SQ.has(g)||gE(g,!1,u),gE(g,!0,u))});var f=u.nodeType===9?u:u.ownerDocument;f===null||f[Zy]||(f[Zy]=!0,gE("selectionchange",!1,f))}}function WD(u,f,g,E){switch(ym(f)){case 1:var T=Dn;break;case 4:T=aE;break;default:T=gm}g=T.bind(null,f,g,u),T=void 0,!es||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(T=!0),E?T!==void 0?u.addEventListener(f,g,{capture:!0,passive:T}):u.addEventListener(f,g,!0):T!==void 0?u.addEventListener(f,g,{passive:T}):u.addEventListener(f,g,!1)}function yE(u,f,g,E,T){var A=E;if((f&1)===0&&(f&2)===0&&E!==null)e:for(;;){if(E===null)return;var B=E.tag;if(B===3||B===4){var J=E.stateNode.containerInfo;if(J===T||J.nodeType===8&&J.parentNode===T)break;if(B===4)for(B=E.return;B!==null;){var re=B.tag;if((re===3||re===4)&&(re=B.stateNode.containerInfo,re===T||re.nodeType===8&&re.parentNode===T))return;B=B.return}for(;J!==null;){if(B=Lu(J),B===null)return;if(re=B.tag,re===5||re===6){E=A=B;continue e}J=J.parentNode}}E=E.return}Hs(function(){var xe=A,Ae=gs(g),Oe=[];e:{var Ce=VD.get(u);if(Ce!==void 0){var Ge=jh,et=u;switch(u){case"keypress":if(Ch(g)===0)break e;case"keydown":case"keyup":Ge=j;break;case"focusin":et="focus",Ge=Dh;break;case"focusout":et="blur",Ge=Dh;break;case"beforeblur":case"afterblur":Ge=Dh;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ge=Ah;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ge=zy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ge=_e;break;case MD:case LD:case FD:Ge=Xo;break;case $D:Ge=rn;break;case"scroll":Ge=oE;break;case"wheel":Ge=Ht;break;case"copy":case"cut":case"paste":Ge=qy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ge=H}var tt=(f&4)!==0,or=!tt&&u==="scroll",de=tt?Ce!==null?Ce+"Capture":null:Ce;tt=[];for(var se=xe,fe;se!==null;){fe=se;var $e=fe.stateNode;if(fe.tag===5&&$e!==null&&(fe=$e,de!==null&&($e=jt(se,de),$e!=null&&tt.push(Cm(se,$e,fe)))),or)break;se=se.return}0<tt.length&&(Ce=new Ge(Ce,et,null,g,Ae),Oe.push({event:Ce,listeners:tt}))}}if((f&7)===0){e:{if(Ce=u==="mouseover"||u==="pointerover",Ge=u==="mouseout"||u==="pointerout",Ce&&g!==ms&&(et=g.relatedTarget||g.fromElement)&&(Lu(et)||et[Jo]))break e;if((Ge||Ce)&&(Ce=Ae.window===Ae?Ae:(Ce=Ae.ownerDocument)?Ce.defaultView||Ce.parentWindow:window,Ge?(et=g.relatedTarget||g.toElement,Ge=xe,et=et?Lu(et):null,et!==null&&(or=xi(et),et!==or||et.tag!==5&&et.tag!==6)&&(et=null)):(Ge=null,et=xe),Ge!==et)){if(tt=Ah,$e="onMouseLeave",de="onMouseEnter",se="mouse",(u==="pointerout"||u==="pointerover")&&(tt=H,$e="onPointerLeave",de="onPointerEnter",se="pointer"),or=Ge==null?Ce:Bh(Ge),fe=et==null?Ce:Bh(et),Ce=new tt($e,se+"leave",Ge,g,Ae),Ce.target=or,Ce.relatedTarget=fe,$e=null,Lu(Ae)===xe&&(tt=new tt(de,se+"enter",et,g,Ae),tt.target=fe,tt.relatedTarget=or,$e=tt),or=$e,Ge&&et)t:{for(tt=Ge,de=et,se=0,fe=tt;fe;fe=$h(fe))se++;for(fe=0,$e=de;$e;$e=$h($e))fe++;for(;0<se-fe;)tt=$h(tt),se--;for(;0<fe-se;)de=$h(de),fe--;for(;se--;){if(tt===de||de!==null&&tt===de.alternate)break t;tt=$h(tt),de=$h(de)}tt=null}else tt=null;Ge!==null&&HD(Oe,Ce,Ge,tt,!1),et!==null&&or!==null&&HD(Oe,or,et,tt,!0)}}e:{if(Ce=xe?Bh(xe):window,Ge=Ce.nodeName&&Ce.nodeName.toLowerCase(),Ge==="select"||Ge==="input"&&Ce.type==="file")var rt=mQ;else if(ND(Ce))if(kD)rt=xQ;else{rt=yQ;var ft=gQ}else(Ge=Ce.nodeName)&&Ge.toLowerCase()==="input"&&(Ce.type==="checkbox"||Ce.type==="radio")&&(rt=vQ);if(rt&&(rt=rt(u,xe))){SD(Oe,rt,g,Ae);break e}ft&&ft(u,Ce,xe),u==="focusout"&&(ft=Ce._wrapperState)&&ft.controlled&&Ce.type==="number"&&Ee(Ce,"number",Ce.value)}switch(ft=xe?Bh(xe):window,u){case"focusin":(ND(ft)||ft.contentEditable==="true")&&(Lh=ft,dE=xe,Sm=null);break;case"focusout":Sm=dE=Lh=null;break;case"mousedown":hE=!0;break;case"contextmenu":case"mouseup":case"dragend":hE=!1,RD(Oe,g,Ae);break;case"selectionchange":if(_Q)break;case"keydown":case"keyup":RD(Oe,g,Ae)}var pt;if(yr)e:{switch(u){case"compositionstart":var Nt="onCompositionStart";break e;case"compositionend":Nt="onCompositionEnd";break e;case"compositionupdate":Nt="onCompositionUpdate";break e}Nt=void 0}else Mh?_D(u,g)&&(Nt="onCompositionEnd"):u==="keydown"&&g.keyCode===229&&(Nt="onCompositionStart");Nt&&(Mu&&g.locale!=="ko"&&(Mh||Nt!=="onCompositionStart"?Nt==="onCompositionEnd"&&Mh&&(pt=vm()):(_i=Ae,Th="value"in _i?_i.value:_i.textContent,Mh=!0)),ft=ev(xe,Nt),0<ft.length&&(Nt=new wm(Nt,u,null,g,Ae),Oe.push({event:Nt,listeners:ft}),pt?Nt.data=pt:(pt=ED(g),pt!==null&&(Nt.data=pt)))),(pt=Ei?dQ(u,g):hQ(u,g))&&(xe=ev(xe,"onBeforeInput"),0<xe.length&&(Ae=new wm("onBeforeInput","beforeinput",null,g,Ae),Oe.push({event:Ae,listeners:xe}),Ae.data=pt))}zD(Oe,f)})}function Cm(u,f,g){return{instance:u,listener:f,currentTarget:g}}function ev(u,f){for(var g=f+"Capture",E=[];u!==null;){var T=u,A=T.stateNode;T.tag===5&&A!==null&&(T=A,A=jt(u,g),A!=null&&E.unshift(Cm(u,A,T)),A=jt(u,f),A!=null&&E.push(Cm(u,A,T))),u=u.return}return E}function $h(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==5);return u||null}function HD(u,f,g,E,T){for(var A=f._reactName,B=[];g!==null&&g!==E;){var J=g,re=J.alternate,xe=J.stateNode;if(re!==null&&re===E)break;J.tag===5&&xe!==null&&(J=xe,T?(re=jt(g,A),re!=null&&B.unshift(Cm(g,re,J))):T||(re=jt(g,A),re!=null&&B.push(Cm(g,re,J)))),g=g.return}B.length!==0&&u.push({event:f,listeners:B})}var kQ=/\r\n?/g,TQ=/\u0000|\uFFFD/g;function qD(u){return(typeof u=="string"?u:""+u).replace(kQ,`
`).replace(TQ,"")}function tv(u,f,g){if(f=qD(f),qD(u)!==f&&g)throw Error(n(425))}function nv(){}var vE=null,xE=null;function bE(u,f){return u==="textarea"||u==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var wE=typeof setTimeout=="function"?setTimeout:void 0,CQ=typeof clearTimeout=="function"?clearTimeout:void 0,KD=typeof Promise=="function"?Promise:void 0,jQ=typeof queueMicrotask=="function"?queueMicrotask:typeof KD<"u"?function(u){return KD.resolve(null).then(u).catch(PQ)}:wE;function PQ(u){setTimeout(function(){throw u})}function _E(u,f){var g=f,E=0;do{var T=g.nextSibling;if(u.removeChild(g),T&&T.nodeType===8)if(g=T.data,g==="/$"){if(E===0){u.removeChild(T),wa(f);return}E--}else g!=="$"&&g!=="$?"&&g!=="$!"||E++;g=T}while(g);wa(f)}function gc(u){for(;u!=null;u=u.nextSibling){var f=u.nodeType;if(f===1||f===3)break;if(f===8){if(f=u.data,f==="$"||f==="$!"||f==="$?")break;if(f==="/$")return null}}return u}function YD(u){u=u.previousSibling;for(var f=0;u;){if(u.nodeType===8){var g=u.data;if(g==="$"||g==="$!"||g==="$?"){if(f===0)return u;f--}else g==="/$"&&f++}u=u.previousSibling}return null}var Vh=Math.random().toString(36).slice(2),co="__reactFiber$"+Vh,jm="__reactProps$"+Vh,Jo="__reactContainer$"+Vh,EE="__reactEvents$"+Vh,AQ="__reactListeners$"+Vh,IQ="__reactHandles$"+Vh;function Lu(u){var f=u[co];if(f)return f;for(var g=u.parentNode;g;){if(f=g[Jo]||g[co]){if(g=f.alternate,f.child!==null||g!==null&&g.child!==null)for(u=YD(u);u!==null;){if(g=u[co])return g;u=YD(u)}return f}u=g,g=u.parentNode}return null}function Pm(u){return u=u[co]||u[Jo],!u||u.tag!==5&&u.tag!==6&&u.tag!==13&&u.tag!==3?null:u}function Bh(u){if(u.tag===5||u.tag===6)return u.stateNode;throw Error(n(33))}function rv(u){return u[jm]||null}var NE=[],Uh=-1;function yc(u){return{current:u}}function Tn(u){0>Uh||(u.current=NE[Uh],NE[Uh]=null,Uh--)}function _n(u,f){Uh++,NE[Uh]=u.current,u.current=f}var vc={},vs=yc(vc),Gs=yc(!1),Fu=vc;function zh(u,f){var g=u.type.contextTypes;if(!g)return vc;var E=u.stateNode;if(E&&E.__reactInternalMemoizedUnmaskedChildContext===f)return E.__reactInternalMemoizedMaskedChildContext;var T={},A;for(A in g)T[A]=f[A];return E&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=f,u.__reactInternalMemoizedMaskedChildContext=T),T}function Qs(u){return u=u.childContextTypes,u!=null}function sv(){Tn(Gs),Tn(vs)}function GD(u,f,g){if(vs.current!==vc)throw Error(n(168));_n(vs,f),_n(Gs,g)}function QD(u,f,g){var E=u.stateNode;if(f=f.childContextTypes,typeof E.getChildContext!="function")return g;E=E.getChildContext();for(var T in E)if(!(T in f))throw Error(n(108,V(u)||"Unknown",T));return G({},g,E)}function iv(u){return u=(u=u.stateNode)&&u.__reactInternalMemoizedMergedChildContext||vc,Fu=vs.current,_n(vs,u),_n(Gs,Gs.current),!0}function XD(u,f,g){var E=u.stateNode;if(!E)throw Error(n(169));g?(u=QD(u,f,Fu),E.__reactInternalMemoizedMergedChildContext=u,Tn(Gs),Tn(vs),_n(vs,u)):Tn(Gs),_n(Gs,g)}var Zo=null,av=!1,SE=!1;function JD(u){Zo===null?Zo=[u]:Zo.push(u)}function DQ(u){av=!0,JD(u)}function xc(){if(!SE&&Zo!==null){SE=!0;var u=0,f=Ut;try{var g=Zo;for(Ut=1;u<g.length;u++){var E=g[u];do E=E(!0);while(E!==null)}Zo=null,av=!1}catch(T){throw Zo!==null&&(Zo=Zo.slice(u+1)),ic(We,xc),T}finally{Ut=f,SE=!1}}return null}var Wh=[],Hh=0,ov=null,lv=0,Yi=[],Gi=0,$u=null,el=1,tl="";function Vu(u,f){Wh[Hh++]=lv,Wh[Hh++]=ov,ov=u,lv=f}function ZD(u,f,g){Yi[Gi++]=el,Yi[Gi++]=tl,Yi[Gi++]=$u,$u=u;var E=el;u=tl;var T=32-cn(E)-1;E&=~(1<<T),g+=1;var A=32-cn(f)+T;if(30<A){var B=T-T%5;A=(E&(1<<B)-1).toString(32),E>>=B,T-=B,el=1<<32-cn(f)+T|g<<T|E,tl=A+u}else el=1<<A|g<<T|E,tl=u}function kE(u){u.return!==null&&(Vu(u,1),ZD(u,1,0))}function TE(u){for(;u===ov;)ov=Wh[--Hh],Wh[Hh]=null,lv=Wh[--Hh],Wh[Hh]=null;for(;u===$u;)$u=Yi[--Gi],Yi[Gi]=null,tl=Yi[--Gi],Yi[Gi]=null,el=Yi[--Gi],Yi[Gi]=null}var Ni=null,Si=null,Rn=!1,Na=null;function eR(u,f){var g=Zi(5,null,null,0);g.elementType="DELETED",g.stateNode=f,g.return=u,f=u.deletions,f===null?(u.deletions=[g],u.flags|=16):f.push(g)}function tR(u,f){switch(u.tag){case 5:var g=u.type;return f=f.nodeType!==1||g.toLowerCase()!==f.nodeName.toLowerCase()?null:f,f!==null?(u.stateNode=f,Ni=u,Si=gc(f.firstChild),!0):!1;case 6:return f=u.pendingProps===""||f.nodeType!==3?null:f,f!==null?(u.stateNode=f,Ni=u,Si=null,!0):!1;case 13:return f=f.nodeType!==8?null:f,f!==null?(g=$u!==null?{id:el,overflow:tl}:null,u.memoizedState={dehydrated:f,treeContext:g,retryLane:1073741824},g=Zi(18,null,null,0),g.stateNode=f,g.return=u,u.child=g,Ni=u,Si=null,!0):!1;default:return!1}}function CE(u){return(u.mode&1)!==0&&(u.flags&128)===0}function jE(u){if(Rn){var f=Si;if(f){var g=f;if(!tR(u,f)){if(CE(u))throw Error(n(418));f=gc(g.nextSibling);var E=Ni;f&&tR(u,f)?eR(E,g):(u.flags=u.flags&-4097|2,Rn=!1,Ni=u)}}else{if(CE(u))throw Error(n(418));u.flags=u.flags&-4097|2,Rn=!1,Ni=u}}}function nR(u){for(u=u.return;u!==null&&u.tag!==5&&u.tag!==3&&u.tag!==13;)u=u.return;Ni=u}function cv(u){if(u!==Ni)return!1;if(!Rn)return nR(u),Rn=!0,!1;var f;if((f=u.tag!==3)&&!(f=u.tag!==5)&&(f=u.type,f=f!=="head"&&f!=="body"&&!bE(u.type,u.memoizedProps)),f&&(f=Si)){if(CE(u))throw rR(),Error(n(418));for(;f;)eR(u,f),f=gc(f.nextSibling)}if(nR(u),u.tag===13){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(n(317));e:{for(u=u.nextSibling,f=0;u;){if(u.nodeType===8){var g=u.data;if(g==="/$"){if(f===0){Si=gc(u.nextSibling);break e}f--}else g!=="$"&&g!=="$!"&&g!=="$?"||f++}u=u.nextSibling}Si=null}}else Si=Ni?gc(u.stateNode.nextSibling):null;return!0}function rR(){for(var u=Si;u;)u=gc(u.nextSibling)}function qh(){Si=Ni=null,Rn=!1}function PE(u){Na===null?Na=[u]:Na.push(u)}var RQ=O.ReactCurrentBatchConfig;function Am(u,f,g){if(u=g.ref,u!==null&&typeof u!="function"&&typeof u!="object"){if(g._owner){if(g=g._owner,g){if(g.tag!==1)throw Error(n(309));var E=g.stateNode}if(!E)throw Error(n(147,u));var T=E,A=""+u;return f!==null&&f.ref!==null&&typeof f.ref=="function"&&f.ref._stringRef===A?f.ref:(f=function(B){var J=T.refs;B===null?delete J[A]:J[A]=B},f._stringRef=A,f)}if(typeof u!="string")throw Error(n(284));if(!g._owner)throw Error(n(290,u))}return u}function uv(u,f){throw u=Object.prototype.toString.call(f),Error(n(31,u==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":u))}function sR(u){var f=u._init;return f(u._payload)}function iR(u){function f(de,se){if(u){var fe=de.deletions;fe===null?(de.deletions=[se],de.flags|=16):fe.push(se)}}function g(de,se){if(!u)return null;for(;se!==null;)f(de,se),se=se.sibling;return null}function E(de,se){for(de=new Map;se!==null;)se.key!==null?de.set(se.key,se):de.set(se.index,se),se=se.sibling;return de}function T(de,se){return de=Tc(de,se),de.index=0,de.sibling=null,de}function A(de,se,fe){return de.index=fe,u?(fe=de.alternate,fe!==null?(fe=fe.index,fe<se?(de.flags|=2,se):fe):(de.flags|=2,se)):(de.flags|=1048576,se)}function B(de){return u&&de.alternate===null&&(de.flags|=2),de}function J(de,se,fe,$e){return se===null||se.tag!==6?(se=wN(fe,de.mode,$e),se.return=de,se):(se=T(se,fe),se.return=de,se)}function re(de,se,fe,$e){var rt=fe.type;return rt===P?Ae(de,se,fe.props.children,$e,fe.key):se!==null&&(se.elementType===rt||typeof rt=="object"&&rt!==null&&rt.$$typeof===ne&&sR(rt)===se.type)?($e=T(se,fe.props),$e.ref=Am(de,se,fe),$e.return=de,$e):($e=Rv(fe.type,fe.key,fe.props,null,de.mode,$e),$e.ref=Am(de,se,fe),$e.return=de,$e)}function xe(de,se,fe,$e){return se===null||se.tag!==4||se.stateNode.containerInfo!==fe.containerInfo||se.stateNode.implementation!==fe.implementation?(se=_N(fe,de.mode,$e),se.return=de,se):(se=T(se,fe.children||[]),se.return=de,se)}function Ae(de,se,fe,$e,rt){return se===null||se.tag!==7?(se=Yu(fe,de.mode,$e,rt),se.return=de,se):(se=T(se,fe),se.return=de,se)}function Oe(de,se,fe){if(typeof se=="string"&&se!==""||typeof se=="number")return se=wN(""+se,de.mode,fe),se.return=de,se;if(typeof se=="object"&&se!==null){switch(se.$$typeof){case R:return fe=Rv(se.type,se.key,se.props,null,de.mode,fe),fe.ref=Am(de,null,se),fe.return=de,fe;case M:return se=_N(se,de.mode,fe),se.return=de,se;case ne:var $e=se._init;return Oe(de,$e(se._payload),fe)}if(Fe(se)||Y(se))return se=Yu(se,de.mode,fe,null),se.return=de,se;uv(de,se)}return null}function Ce(de,se,fe,$e){var rt=se!==null?se.key:null;if(typeof fe=="string"&&fe!==""||typeof fe=="number")return rt!==null?null:J(de,se,""+fe,$e);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case R:return fe.key===rt?re(de,se,fe,$e):null;case M:return fe.key===rt?xe(de,se,fe,$e):null;case ne:return rt=fe._init,Ce(de,se,rt(fe._payload),$e)}if(Fe(fe)||Y(fe))return rt!==null?null:Ae(de,se,fe,$e,null);uv(de,fe)}return null}function Ge(de,se,fe,$e,rt){if(typeof $e=="string"&&$e!==""||typeof $e=="number")return de=de.get(fe)||null,J(se,de,""+$e,rt);if(typeof $e=="object"&&$e!==null){switch($e.$$typeof){case R:return de=de.get($e.key===null?fe:$e.key)||null,re(se,de,$e,rt);case M:return de=de.get($e.key===null?fe:$e.key)||null,xe(se,de,$e,rt);case ne:var ft=$e._init;return Ge(de,se,fe,ft($e._payload),rt)}if(Fe($e)||Y($e))return de=de.get(fe)||null,Ae(se,de,$e,rt,null);uv(se,$e)}return null}function et(de,se,fe,$e){for(var rt=null,ft=null,pt=se,Nt=se=0,Ur=null;pt!==null&&Nt<fe.length;Nt++){pt.index>Nt?(Ur=pt,pt=null):Ur=pt.sibling;var Xt=Ce(de,pt,fe[Nt],$e);if(Xt===null){pt===null&&(pt=Ur);break}u&&pt&&Xt.alternate===null&&f(de,pt),se=A(Xt,se,Nt),ft===null?rt=Xt:ft.sibling=Xt,ft=Xt,pt=Ur}if(Nt===fe.length)return g(de,pt),Rn&&Vu(de,Nt),rt;if(pt===null){for(;Nt<fe.length;Nt++)pt=Oe(de,fe[Nt],$e),pt!==null&&(se=A(pt,se,Nt),ft===null?rt=pt:ft.sibling=pt,ft=pt);return Rn&&Vu(de,Nt),rt}for(pt=E(de,pt);Nt<fe.length;Nt++)Ur=Ge(pt,de,Nt,fe[Nt],$e),Ur!==null&&(u&&Ur.alternate!==null&&pt.delete(Ur.key===null?Nt:Ur.key),se=A(Ur,se,Nt),ft===null?rt=Ur:ft.sibling=Ur,ft=Ur);return u&&pt.forEach(function(Cc){return f(de,Cc)}),Rn&&Vu(de,Nt),rt}function tt(de,se,fe,$e){var rt=Y(fe);if(typeof rt!="function")throw Error(n(150));if(fe=rt.call(fe),fe==null)throw Error(n(151));for(var ft=rt=null,pt=se,Nt=se=0,Ur=null,Xt=fe.next();pt!==null&&!Xt.done;Nt++,Xt=fe.next()){pt.index>Nt?(Ur=pt,pt=null):Ur=pt.sibling;var Cc=Ce(de,pt,Xt.value,$e);if(Cc===null){pt===null&&(pt=Ur);break}u&&pt&&Cc.alternate===null&&f(de,pt),se=A(Cc,se,Nt),ft===null?rt=Cc:ft.sibling=Cc,ft=Cc,pt=Ur}if(Xt.done)return g(de,pt),Rn&&Vu(de,Nt),rt;if(pt===null){for(;!Xt.done;Nt++,Xt=fe.next())Xt=Oe(de,Xt.value,$e),Xt!==null&&(se=A(Xt,se,Nt),ft===null?rt=Xt:ft.sibling=Xt,ft=Xt);return Rn&&Vu(de,Nt),rt}for(pt=E(de,pt);!Xt.done;Nt++,Xt=fe.next())Xt=Ge(pt,de,Nt,Xt.value,$e),Xt!==null&&(u&&Xt.alternate!==null&&pt.delete(Xt.key===null?Nt:Xt.key),se=A(Xt,se,Nt),ft===null?rt=Xt:ft.sibling=Xt,ft=Xt);return u&&pt.forEach(function(fX){return f(de,fX)}),Rn&&Vu(de,Nt),rt}function or(de,se,fe,$e){if(typeof fe=="object"&&fe!==null&&fe.type===P&&fe.key===null&&(fe=fe.props.children),typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case R:e:{for(var rt=fe.key,ft=se;ft!==null;){if(ft.key===rt){if(rt=fe.type,rt===P){if(ft.tag===7){g(de,ft.sibling),se=T(ft,fe.props.children),se.return=de,de=se;break e}}else if(ft.elementType===rt||typeof rt=="object"&&rt!==null&&rt.$$typeof===ne&&sR(rt)===ft.type){g(de,ft.sibling),se=T(ft,fe.props),se.ref=Am(de,ft,fe),se.return=de,de=se;break e}g(de,ft);break}else f(de,ft);ft=ft.sibling}fe.type===P?(se=Yu(fe.props.children,de.mode,$e,fe.key),se.return=de,de=se):($e=Rv(fe.type,fe.key,fe.props,null,de.mode,$e),$e.ref=Am(de,se,fe),$e.return=de,de=$e)}return B(de);case M:e:{for(ft=fe.key;se!==null;){if(se.key===ft)if(se.tag===4&&se.stateNode.containerInfo===fe.containerInfo&&se.stateNode.implementation===fe.implementation){g(de,se.sibling),se=T(se,fe.children||[]),se.return=de,de=se;break e}else{g(de,se);break}else f(de,se);se=se.sibling}se=_N(fe,de.mode,$e),se.return=de,de=se}return B(de);case ne:return ft=fe._init,or(de,se,ft(fe._payload),$e)}if(Fe(fe))return et(de,se,fe,$e);if(Y(fe))return tt(de,se,fe,$e);uv(de,fe)}return typeof fe=="string"&&fe!==""||typeof fe=="number"?(fe=""+fe,se!==null&&se.tag===6?(g(de,se.sibling),se=T(se,fe),se.return=de,de=se):(g(de,se),se=wN(fe,de.mode,$e),se.return=de,de=se),B(de)):g(de,se)}return or}var Kh=iR(!0),aR=iR(!1),dv=yc(null),hv=null,Yh=null,AE=null;function IE(){AE=Yh=hv=null}function DE(u){var f=dv.current;Tn(dv),u._currentValue=f}function RE(u,f,g){for(;u!==null;){var E=u.alternate;if((u.childLanes&f)!==f?(u.childLanes|=f,E!==null&&(E.childLanes|=f)):E!==null&&(E.childLanes&f)!==f&&(E.childLanes|=f),u===g)break;u=u.return}}function Gh(u,f){hv=u,AE=Yh=null,u=u.dependencies,u!==null&&u.firstContext!==null&&((u.lanes&f)!==0&&(Xs=!0),u.firstContext=null)}function Qi(u){var f=u._currentValue;if(AE!==u)if(u={context:u,memoizedValue:f,next:null},Yh===null){if(hv===null)throw Error(n(308));Yh=u,hv.dependencies={lanes:0,firstContext:u}}else Yh=Yh.next=u;return f}var Bu=null;function OE(u){Bu===null?Bu=[u]:Bu.push(u)}function oR(u,f,g,E){var T=f.interleaved;return T===null?(g.next=g,OE(f)):(g.next=T.next,T.next=g),f.interleaved=g,nl(u,E)}function nl(u,f){u.lanes|=f;var g=u.alternate;for(g!==null&&(g.lanes|=f),g=u,u=u.return;u!==null;)u.childLanes|=f,g=u.alternate,g!==null&&(g.childLanes|=f),g=u,u=u.return;return g.tag===3?g.stateNode:null}var bc=!1;function ME(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lR(u,f){u=u.updateQueue,f.updateQueue===u&&(f.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,effects:u.effects})}function rl(u,f){return{eventTime:u,lane:f,tag:0,payload:null,callback:null,next:null}}function wc(u,f,g){var E=u.updateQueue;if(E===null)return null;if(E=E.shared,(Gt&2)!==0){var T=E.pending;return T===null?f.next=f:(f.next=T.next,T.next=f),E.pending=f,nl(u,g)}return T=E.interleaved,T===null?(f.next=f,OE(E)):(f.next=T.next,T.next=f),E.interleaved=f,nl(u,g)}function fv(u,f,g){if(f=f.updateQueue,f!==null&&(f=f.shared,(g&4194240)!==0)){var E=f.lanes;E&=u.pendingLanes,g|=E,f.lanes=g,uc(u,g)}}function cR(u,f){var g=u.updateQueue,E=u.alternate;if(E!==null&&(E=E.updateQueue,g===E)){var T=null,A=null;if(g=g.firstBaseUpdate,g!==null){do{var B={eventTime:g.eventTime,lane:g.lane,tag:g.tag,payload:g.payload,callback:g.callback,next:null};A===null?T=A=B:A=A.next=B,g=g.next}while(g!==null);A===null?T=A=f:A=A.next=f}else T=A=f;g={baseState:E.baseState,firstBaseUpdate:T,lastBaseUpdate:A,shared:E.shared,effects:E.effects},u.updateQueue=g;return}u=g.lastBaseUpdate,u===null?g.firstBaseUpdate=f:u.next=f,g.lastBaseUpdate=f}function pv(u,f,g,E){var T=u.updateQueue;bc=!1;var A=T.firstBaseUpdate,B=T.lastBaseUpdate,J=T.shared.pending;if(J!==null){T.shared.pending=null;var re=J,xe=re.next;re.next=null,B===null?A=xe:B.next=xe,B=re;var Ae=u.alternate;Ae!==null&&(Ae=Ae.updateQueue,J=Ae.lastBaseUpdate,J!==B&&(J===null?Ae.firstBaseUpdate=xe:J.next=xe,Ae.lastBaseUpdate=re))}if(A!==null){var Oe=T.baseState;B=0,Ae=xe=re=null,J=A;do{var Ce=J.lane,Ge=J.eventTime;if((E&Ce)===Ce){Ae!==null&&(Ae=Ae.next={eventTime:Ge,lane:0,tag:J.tag,payload:J.payload,callback:J.callback,next:null});e:{var et=u,tt=J;switch(Ce=f,Ge=g,tt.tag){case 1:if(et=tt.payload,typeof et=="function"){Oe=et.call(Ge,Oe,Ce);break e}Oe=et;break e;case 3:et.flags=et.flags&-65537|128;case 0:if(et=tt.payload,Ce=typeof et=="function"?et.call(Ge,Oe,Ce):et,Ce==null)break e;Oe=G({},Oe,Ce);break e;case 2:bc=!0}}J.callback!==null&&J.lane!==0&&(u.flags|=64,Ce=T.effects,Ce===null?T.effects=[J]:Ce.push(J))}else Ge={eventTime:Ge,lane:Ce,tag:J.tag,payload:J.payload,callback:J.callback,next:null},Ae===null?(xe=Ae=Ge,re=Oe):Ae=Ae.next=Ge,B|=Ce;if(J=J.next,J===null){if(J=T.shared.pending,J===null)break;Ce=J,J=Ce.next,Ce.next=null,T.lastBaseUpdate=Ce,T.shared.pending=null}}while(!0);if(Ae===null&&(re=Oe),T.baseState=re,T.firstBaseUpdate=xe,T.lastBaseUpdate=Ae,f=T.shared.interleaved,f!==null){T=f;do B|=T.lane,T=T.next;while(T!==f)}else A===null&&(T.shared.lanes=0);Wu|=B,u.lanes=B,u.memoizedState=Oe}}function uR(u,f,g){if(u=f.effects,f.effects=null,u!==null)for(f=0;f<u.length;f++){var E=u[f],T=E.callback;if(T!==null){if(E.callback=null,E=g,typeof T!="function")throw Error(n(191,T));T.call(E)}}}var Im={},uo=yc(Im),Dm=yc(Im),Rm=yc(Im);function Uu(u){if(u===Im)throw Error(n(174));return u}function LE(u,f){switch(_n(Rm,f),_n(Dm,u),_n(uo,Im),u=f.nodeType,u){case 9:case 11:f=(f=f.documentElement)?f.namespaceURI:at(null,"");break;default:u=u===8?f.parentNode:f,f=u.namespaceURI||null,u=u.tagName,f=at(f,u)}Tn(uo),_n(uo,f)}function Qh(){Tn(uo),Tn(Dm),Tn(Rm)}function dR(u){Uu(Rm.current);var f=Uu(uo.current),g=at(f,u.type);f!==g&&(_n(Dm,u),_n(uo,g))}function FE(u){Dm.current===u&&(Tn(uo),Tn(Dm))}var Hn=yc(0);function mv(u){for(var f=u;f!==null;){if(f.tag===13){var g=f.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||g.data==="$!"))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===u)break;for(;f.sibling===null;){if(f.return===null||f.return===u)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}var $E=[];function VE(){for(var u=0;u<$E.length;u++)$E[u]._workInProgressVersionPrimary=null;$E.length=0}var gv=O.ReactCurrentDispatcher,BE=O.ReactCurrentBatchConfig,zu=0,qn=null,Tr=null,Vr=null,yv=!1,Om=!1,Mm=0,OQ=0;function xs(){throw Error(n(321))}function UE(u,f){if(f===null)return!1;for(var g=0;g<f.length&&g<u.length;g++)if(!Ea(u[g],f[g]))return!1;return!0}function zE(u,f,g,E,T,A){if(zu=A,qn=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,gv.current=u===null||u.memoizedState===null?$Q:VQ,u=g(E,T),Om){A=0;do{if(Om=!1,Mm=0,25<=A)throw Error(n(301));A+=1,Vr=Tr=null,f.updateQueue=null,gv.current=BQ,u=g(E,T)}while(Om)}if(gv.current=bv,f=Tr!==null&&Tr.next!==null,zu=0,Vr=Tr=qn=null,yv=!1,f)throw Error(n(300));return u}function WE(){var u=Mm!==0;return Mm=0,u}function ho(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vr===null?qn.memoizedState=Vr=u:Vr=Vr.next=u,Vr}function Xi(){if(Tr===null){var u=qn.alternate;u=u!==null?u.memoizedState:null}else u=Tr.next;var f=Vr===null?qn.memoizedState:Vr.next;if(f!==null)Vr=f,Tr=u;else{if(u===null)throw Error(n(310));Tr=u,u={memoizedState:Tr.memoizedState,baseState:Tr.baseState,baseQueue:Tr.baseQueue,queue:Tr.queue,next:null},Vr===null?qn.memoizedState=Vr=u:Vr=Vr.next=u}return Vr}function Lm(u,f){return typeof f=="function"?f(u):f}function HE(u){var f=Xi(),g=f.queue;if(g===null)throw Error(n(311));g.lastRenderedReducer=u;var E=Tr,T=E.baseQueue,A=g.pending;if(A!==null){if(T!==null){var B=T.next;T.next=A.next,A.next=B}E.baseQueue=T=A,g.pending=null}if(T!==null){A=T.next,E=E.baseState;var J=B=null,re=null,xe=A;do{var Ae=xe.lane;if((zu&Ae)===Ae)re!==null&&(re=re.next={lane:0,action:xe.action,hasEagerState:xe.hasEagerState,eagerState:xe.eagerState,next:null}),E=xe.hasEagerState?xe.eagerState:u(E,xe.action);else{var Oe={lane:Ae,action:xe.action,hasEagerState:xe.hasEagerState,eagerState:xe.eagerState,next:null};re===null?(J=re=Oe,B=E):re=re.next=Oe,qn.lanes|=Ae,Wu|=Ae}xe=xe.next}while(xe!==null&&xe!==A);re===null?B=E:re.next=J,Ea(E,f.memoizedState)||(Xs=!0),f.memoizedState=E,f.baseState=B,f.baseQueue=re,g.lastRenderedState=E}if(u=g.interleaved,u!==null){T=u;do A=T.lane,qn.lanes|=A,Wu|=A,T=T.next;while(T!==u)}else T===null&&(g.lanes=0);return[f.memoizedState,g.dispatch]}function qE(u){var f=Xi(),g=f.queue;if(g===null)throw Error(n(311));g.lastRenderedReducer=u;var E=g.dispatch,T=g.pending,A=f.memoizedState;if(T!==null){g.pending=null;var B=T=T.next;do A=u(A,B.action),B=B.next;while(B!==T);Ea(A,f.memoizedState)||(Xs=!0),f.memoizedState=A,f.baseQueue===null&&(f.baseState=A),g.lastRenderedState=A}return[A,E]}function hR(){}function fR(u,f){var g=qn,E=Xi(),T=f(),A=!Ea(E.memoizedState,T);if(A&&(E.memoizedState=T,Xs=!0),E=E.queue,KE(gR.bind(null,g,E,u),[u]),E.getSnapshot!==f||A||Vr!==null&&Vr.memoizedState.tag&1){if(g.flags|=2048,Fm(9,mR.bind(null,g,E,T,f),void 0,null),Br===null)throw Error(n(349));(zu&30)!==0||pR(g,f,T)}return T}function pR(u,f,g){u.flags|=16384,u={getSnapshot:f,value:g},f=qn.updateQueue,f===null?(f={lastEffect:null,stores:null},qn.updateQueue=f,f.stores=[u]):(g=f.stores,g===null?f.stores=[u]:g.push(u))}function mR(u,f,g,E){f.value=g,f.getSnapshot=E,yR(f)&&vR(u)}function gR(u,f,g){return g(function(){yR(f)&&vR(u)})}function yR(u){var f=u.getSnapshot;u=u.value;try{var g=f();return!Ea(u,g)}catch{return!0}}function vR(u){var f=nl(u,1);f!==null&&Ca(f,u,1,-1)}function xR(u){var f=ho();return typeof u=="function"&&(u=u()),f.memoizedState=f.baseState=u,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Lm,lastRenderedState:u},f.queue=u,u=u.dispatch=FQ.bind(null,qn,u),[f.memoizedState,u]}function Fm(u,f,g,E){return u={tag:u,create:f,destroy:g,deps:E,next:null},f=qn.updateQueue,f===null?(f={lastEffect:null,stores:null},qn.updateQueue=f,f.lastEffect=u.next=u):(g=f.lastEffect,g===null?f.lastEffect=u.next=u:(E=g.next,g.next=u,u.next=E,f.lastEffect=u)),u}function bR(){return Xi().memoizedState}function vv(u,f,g,E){var T=ho();qn.flags|=u,T.memoizedState=Fm(1|f,g,void 0,E===void 0?null:E)}function xv(u,f,g,E){var T=Xi();E=E===void 0?null:E;var A=void 0;if(Tr!==null){var B=Tr.memoizedState;if(A=B.destroy,E!==null&&UE(E,B.deps)){T.memoizedState=Fm(f,g,A,E);return}}qn.flags|=u,T.memoizedState=Fm(1|f,g,A,E)}function wR(u,f){return vv(8390656,8,u,f)}function KE(u,f){return xv(2048,8,u,f)}function _R(u,f){return xv(4,2,u,f)}function ER(u,f){return xv(4,4,u,f)}function NR(u,f){if(typeof f=="function")return u=u(),f(u),function(){f(null)};if(f!=null)return u=u(),f.current=u,function(){f.current=null}}function SR(u,f,g){return g=g!=null?g.concat([u]):null,xv(4,4,NR.bind(null,f,u),g)}function YE(){}function kR(u,f){var g=Xi();f=f===void 0?null:f;var E=g.memoizedState;return E!==null&&f!==null&&UE(f,E[1])?E[0]:(g.memoizedState=[u,f],u)}function TR(u,f){var g=Xi();f=f===void 0?null:f;var E=g.memoizedState;return E!==null&&f!==null&&UE(f,E[1])?E[0]:(u=u(),g.memoizedState=[u,f],u)}function CR(u,f,g){return(zu&21)===0?(u.baseState&&(u.baseState=!1,Xs=!0),u.memoizedState=g):(Ea(g,f)||(g=Iu(),qn.lanes|=g,Wu|=g,u.baseState=!0),f)}function MQ(u,f){var g=Ut;Ut=g!==0&&4>g?g:4,u(!0);var E=BE.transition;BE.transition={};try{u(!1),f()}finally{Ut=g,BE.transition=E}}function jR(){return Xi().memoizedState}function LQ(u,f,g){var E=Sc(u);if(g={lane:E,action:g,hasEagerState:!1,eagerState:null,next:null},PR(u))AR(f,g);else if(g=oR(u,f,g,E),g!==null){var T=Ms();Ca(g,u,E,T),IR(g,f,E)}}function FQ(u,f,g){var E=Sc(u),T={lane:E,action:g,hasEagerState:!1,eagerState:null,next:null};if(PR(u))AR(f,T);else{var A=u.alternate;if(u.lanes===0&&(A===null||A.lanes===0)&&(A=f.lastRenderedReducer,A!==null))try{var B=f.lastRenderedState,J=A(B,g);if(T.hasEagerState=!0,T.eagerState=J,Ea(J,B)){var re=f.interleaved;re===null?(T.next=T,OE(f)):(T.next=re.next,re.next=T),f.interleaved=T;return}}catch{}finally{}g=oR(u,f,T,E),g!==null&&(T=Ms(),Ca(g,u,E,T),IR(g,f,E))}}function PR(u){var f=u.alternate;return u===qn||f!==null&&f===qn}function AR(u,f){Om=yv=!0;var g=u.pending;g===null?f.next=f:(f.next=g.next,g.next=f),u.pending=f}function IR(u,f,g){if((g&4194240)!==0){var E=f.lanes;E&=u.pendingLanes,g|=E,f.lanes=g,uc(u,g)}}var bv={readContext:Qi,useCallback:xs,useContext:xs,useEffect:xs,useImperativeHandle:xs,useInsertionEffect:xs,useLayoutEffect:xs,useMemo:xs,useReducer:xs,useRef:xs,useState:xs,useDebugValue:xs,useDeferredValue:xs,useTransition:xs,useMutableSource:xs,useSyncExternalStore:xs,useId:xs,unstable_isNewReconciler:!1},$Q={readContext:Qi,useCallback:function(u,f){return ho().memoizedState=[u,f===void 0?null:f],u},useContext:Qi,useEffect:wR,useImperativeHandle:function(u,f,g){return g=g!=null?g.concat([u]):null,vv(4194308,4,NR.bind(null,f,u),g)},useLayoutEffect:function(u,f){return vv(4194308,4,u,f)},useInsertionEffect:function(u,f){return vv(4,2,u,f)},useMemo:function(u,f){var g=ho();return f=f===void 0?null:f,u=u(),g.memoizedState=[u,f],u},useReducer:function(u,f,g){var E=ho();return f=g!==void 0?g(f):f,E.memoizedState=E.baseState=f,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:f},E.queue=u,u=u.dispatch=LQ.bind(null,qn,u),[E.memoizedState,u]},useRef:function(u){var f=ho();return u={current:u},f.memoizedState=u},useState:xR,useDebugValue:YE,useDeferredValue:function(u){return ho().memoizedState=u},useTransition:function(){var u=xR(!1),f=u[0];return u=MQ.bind(null,u[1]),ho().memoizedState=u,[f,u]},useMutableSource:function(){},useSyncExternalStore:function(u,f,g){var E=qn,T=ho();if(Rn){if(g===void 0)throw Error(n(407));g=g()}else{if(g=f(),Br===null)throw Error(n(349));(zu&30)!==0||pR(E,f,g)}T.memoizedState=g;var A={value:g,getSnapshot:f};return T.queue=A,wR(gR.bind(null,E,A,u),[u]),E.flags|=2048,Fm(9,mR.bind(null,E,A,g,f),void 0,null),g},useId:function(){var u=ho(),f=Br.identifierPrefix;if(Rn){var g=tl,E=el;g=(E&~(1<<32-cn(E)-1)).toString(32)+g,f=":"+f+"R"+g,g=Mm++,0<g&&(f+="H"+g.toString(32)),f+=":"}else g=OQ++,f=":"+f+"r"+g.toString(32)+":";return u.memoizedState=f},unstable_isNewReconciler:!1},VQ={readContext:Qi,useCallback:kR,useContext:Qi,useEffect:KE,useImperativeHandle:SR,useInsertionEffect:_R,useLayoutEffect:ER,useMemo:TR,useReducer:HE,useRef:bR,useState:function(){return HE(Lm)},useDebugValue:YE,useDeferredValue:function(u){var f=Xi();return CR(f,Tr.memoizedState,u)},useTransition:function(){var u=HE(Lm)[0],f=Xi().memoizedState;return[u,f]},useMutableSource:hR,useSyncExternalStore:fR,useId:jR,unstable_isNewReconciler:!1},BQ={readContext:Qi,useCallback:kR,useContext:Qi,useEffect:KE,useImperativeHandle:SR,useInsertionEffect:_R,useLayoutEffect:ER,useMemo:TR,useReducer:qE,useRef:bR,useState:function(){return qE(Lm)},useDebugValue:YE,useDeferredValue:function(u){var f=Xi();return Tr===null?f.memoizedState=u:CR(f,Tr.memoizedState,u)},useTransition:function(){var u=qE(Lm)[0],f=Xi().memoizedState;return[u,f]},useMutableSource:hR,useSyncExternalStore:fR,useId:jR,unstable_isNewReconciler:!1};function Sa(u,f){if(u&&u.defaultProps){f=G({},f),u=u.defaultProps;for(var g in u)f[g]===void 0&&(f[g]=u[g]);return f}return f}function GE(u,f,g,E){f=u.memoizedState,g=g(E,f),g=g==null?f:G({},f,g),u.memoizedState=g,u.lanes===0&&(u.updateQueue.baseState=g)}var wv={isMounted:function(u){return(u=u._reactInternals)?xi(u)===u:!1},enqueueSetState:function(u,f,g){u=u._reactInternals;var E=Ms(),T=Sc(u),A=rl(E,T);A.payload=f,g!=null&&(A.callback=g),f=wc(u,A,T),f!==null&&(Ca(f,u,T,E),fv(f,u,T))},enqueueReplaceState:function(u,f,g){u=u._reactInternals;var E=Ms(),T=Sc(u),A=rl(E,T);A.tag=1,A.payload=f,g!=null&&(A.callback=g),f=wc(u,A,T),f!==null&&(Ca(f,u,T,E),fv(f,u,T))},enqueueForceUpdate:function(u,f){u=u._reactInternals;var g=Ms(),E=Sc(u),T=rl(g,E);T.tag=2,f!=null&&(T.callback=f),f=wc(u,T,E),f!==null&&(Ca(f,u,E,g),fv(f,u,E))}};function DR(u,f,g,E,T,A,B){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(E,A,B):f.prototype&&f.prototype.isPureReactComponent?!Nm(g,E)||!Nm(T,A):!0}function RR(u,f,g){var E=!1,T=vc,A=f.contextType;return typeof A=="object"&&A!==null?A=Qi(A):(T=Qs(f)?Fu:vs.current,E=f.contextTypes,A=(E=E!=null)?zh(u,T):vc),f=new f(g,A),u.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=wv,u.stateNode=f,f._reactInternals=u,E&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=T,u.__reactInternalMemoizedMaskedChildContext=A),f}function OR(u,f,g,E){u=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(g,E),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(g,E),f.state!==u&&wv.enqueueReplaceState(f,f.state,null)}function QE(u,f,g,E){var T=u.stateNode;T.props=g,T.state=u.memoizedState,T.refs={},ME(u);var A=f.contextType;typeof A=="object"&&A!==null?T.context=Qi(A):(A=Qs(f)?Fu:vs.current,T.context=zh(u,A)),T.state=u.memoizedState,A=f.getDerivedStateFromProps,typeof A=="function"&&(GE(u,f,A,g),T.state=u.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(f=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),f!==T.state&&wv.enqueueReplaceState(T,T.state,null),pv(u,g,T,E),T.state=u.memoizedState),typeof T.componentDidMount=="function"&&(u.flags|=4194308)}function Xh(u,f){try{var g="",E=f;do g+=Pe(E),E=E.return;while(E);var T=g}catch(A){T=`
Error generating stack: `+A.message+`
`+A.stack}return{value:u,source:f,stack:T,digest:null}}function XE(u,f,g){return{value:u,source:null,stack:g??null,digest:f??null}}function JE(u,f){try{console.error(f.value)}catch(g){setTimeout(function(){throw g})}}var UQ=typeof WeakMap=="function"?WeakMap:Map;function MR(u,f,g){g=rl(-1,g),g.tag=3,g.payload={element:null};var E=f.value;return g.callback=function(){Cv||(Cv=!0,fN=E),JE(u,f)},g}function LR(u,f,g){g=rl(-1,g),g.tag=3;var E=u.type.getDerivedStateFromError;if(typeof E=="function"){var T=f.value;g.payload=function(){return E(T)},g.callback=function(){JE(u,f)}}var A=u.stateNode;return A!==null&&typeof A.componentDidCatch=="function"&&(g.callback=function(){JE(u,f),typeof E!="function"&&(Ec===null?Ec=new Set([this]):Ec.add(this));var B=f.stack;this.componentDidCatch(f.value,{componentStack:B!==null?B:""})}),g}function FR(u,f,g){var E=u.pingCache;if(E===null){E=u.pingCache=new UQ;var T=new Set;E.set(f,T)}else T=E.get(f),T===void 0&&(T=new Set,E.set(f,T));T.has(g)||(T.add(g),u=nX.bind(null,u,f,g),f.then(u,u))}function $R(u){do{var f;if((f=u.tag===13)&&(f=u.memoizedState,f=f!==null?f.dehydrated!==null:!0),f)return u;u=u.return}while(u!==null);return null}function VR(u,f,g,E,T){return(u.mode&1)===0?(u===f?u.flags|=65536:(u.flags|=128,g.flags|=131072,g.flags&=-52805,g.tag===1&&(g.alternate===null?g.tag=17:(f=rl(-1,1),f.tag=2,wc(g,f,1))),g.lanes|=1),u):(u.flags|=65536,u.lanes=T,u)}var zQ=O.ReactCurrentOwner,Xs=!1;function Os(u,f,g,E){f.child=u===null?aR(f,null,g,E):Kh(f,u.child,g,E)}function BR(u,f,g,E,T){g=g.render;var A=f.ref;return Gh(f,T),E=zE(u,f,g,E,A,T),g=WE(),u!==null&&!Xs?(f.updateQueue=u.updateQueue,f.flags&=-2053,u.lanes&=~T,sl(u,f,T)):(Rn&&g&&kE(f),f.flags|=1,Os(u,f,E,T),f.child)}function UR(u,f,g,E,T){if(u===null){var A=g.type;return typeof A=="function"&&!bN(A)&&A.defaultProps===void 0&&g.compare===null&&g.defaultProps===void 0?(f.tag=15,f.type=A,zR(u,f,A,E,T)):(u=Rv(g.type,null,E,f,f.mode,T),u.ref=f.ref,u.return=f,f.child=u)}if(A=u.child,(u.lanes&T)===0){var B=A.memoizedProps;if(g=g.compare,g=g!==null?g:Nm,g(B,E)&&u.ref===f.ref)return sl(u,f,T)}return f.flags|=1,u=Tc(A,E),u.ref=f.ref,u.return=f,f.child=u}function zR(u,f,g,E,T){if(u!==null){var A=u.memoizedProps;if(Nm(A,E)&&u.ref===f.ref)if(Xs=!1,f.pendingProps=E=A,(u.lanes&T)!==0)(u.flags&131072)!==0&&(Xs=!0);else return f.lanes=u.lanes,sl(u,f,T)}return ZE(u,f,g,E,T)}function WR(u,f,g){var E=f.pendingProps,T=E.children,A=u!==null?u.memoizedState:null;if(E.mode==="hidden")if((f.mode&1)===0)f.memoizedState={baseLanes:0,cachePool:null,transitions:null},_n(Zh,ki),ki|=g;else{if((g&1073741824)===0)return u=A!==null?A.baseLanes|g:g,f.lanes=f.childLanes=1073741824,f.memoizedState={baseLanes:u,cachePool:null,transitions:null},f.updateQueue=null,_n(Zh,ki),ki|=u,null;f.memoizedState={baseLanes:0,cachePool:null,transitions:null},E=A!==null?A.baseLanes:g,_n(Zh,ki),ki|=E}else A!==null?(E=A.baseLanes|g,f.memoizedState=null):E=g,_n(Zh,ki),ki|=E;return Os(u,f,T,g),f.child}function HR(u,f){var g=f.ref;(u===null&&g!==null||u!==null&&u.ref!==g)&&(f.flags|=512,f.flags|=2097152)}function ZE(u,f,g,E,T){var A=Qs(g)?Fu:vs.current;return A=zh(f,A),Gh(f,T),g=zE(u,f,g,E,A,T),E=WE(),u!==null&&!Xs?(f.updateQueue=u.updateQueue,f.flags&=-2053,u.lanes&=~T,sl(u,f,T)):(Rn&&E&&kE(f),f.flags|=1,Os(u,f,g,T),f.child)}function qR(u,f,g,E,T){if(Qs(g)){var A=!0;iv(f)}else A=!1;if(Gh(f,T),f.stateNode===null)Ev(u,f),RR(f,g,E),QE(f,g,E,T),E=!0;else if(u===null){var B=f.stateNode,J=f.memoizedProps;B.props=J;var re=B.context,xe=g.contextType;typeof xe=="object"&&xe!==null?xe=Qi(xe):(xe=Qs(g)?Fu:vs.current,xe=zh(f,xe));var Ae=g.getDerivedStateFromProps,Oe=typeof Ae=="function"||typeof B.getSnapshotBeforeUpdate=="function";Oe||typeof B.UNSAFE_componentWillReceiveProps!="function"&&typeof B.componentWillReceiveProps!="function"||(J!==E||re!==xe)&&OR(f,B,E,xe),bc=!1;var Ce=f.memoizedState;B.state=Ce,pv(f,E,B,T),re=f.memoizedState,J!==E||Ce!==re||Gs.current||bc?(typeof Ae=="function"&&(GE(f,g,Ae,E),re=f.memoizedState),(J=bc||DR(f,g,J,E,Ce,re,xe))?(Oe||typeof B.UNSAFE_componentWillMount!="function"&&typeof B.componentWillMount!="function"||(typeof B.componentWillMount=="function"&&B.componentWillMount(),typeof B.UNSAFE_componentWillMount=="function"&&B.UNSAFE_componentWillMount()),typeof B.componentDidMount=="function"&&(f.flags|=4194308)):(typeof B.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=E,f.memoizedState=re),B.props=E,B.state=re,B.context=xe,E=J):(typeof B.componentDidMount=="function"&&(f.flags|=4194308),E=!1)}else{B=f.stateNode,lR(u,f),J=f.memoizedProps,xe=f.type===f.elementType?J:Sa(f.type,J),B.props=xe,Oe=f.pendingProps,Ce=B.context,re=g.contextType,typeof re=="object"&&re!==null?re=Qi(re):(re=Qs(g)?Fu:vs.current,re=zh(f,re));var Ge=g.getDerivedStateFromProps;(Ae=typeof Ge=="function"||typeof B.getSnapshotBeforeUpdate=="function")||typeof B.UNSAFE_componentWillReceiveProps!="function"&&typeof B.componentWillReceiveProps!="function"||(J!==Oe||Ce!==re)&&OR(f,B,E,re),bc=!1,Ce=f.memoizedState,B.state=Ce,pv(f,E,B,T);var et=f.memoizedState;J!==Oe||Ce!==et||Gs.current||bc?(typeof Ge=="function"&&(GE(f,g,Ge,E),et=f.memoizedState),(xe=bc||DR(f,g,xe,E,Ce,et,re)||!1)?(Ae||typeof B.UNSAFE_componentWillUpdate!="function"&&typeof B.componentWillUpdate!="function"||(typeof B.componentWillUpdate=="function"&&B.componentWillUpdate(E,et,re),typeof B.UNSAFE_componentWillUpdate=="function"&&B.UNSAFE_componentWillUpdate(E,et,re)),typeof B.componentDidUpdate=="function"&&(f.flags|=4),typeof B.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof B.componentDidUpdate!="function"||J===u.memoizedProps&&Ce===u.memoizedState||(f.flags|=4),typeof B.getSnapshotBeforeUpdate!="function"||J===u.memoizedProps&&Ce===u.memoizedState||(f.flags|=1024),f.memoizedProps=E,f.memoizedState=et),B.props=E,B.state=et,B.context=re,E=xe):(typeof B.componentDidUpdate!="function"||J===u.memoizedProps&&Ce===u.memoizedState||(f.flags|=4),typeof B.getSnapshotBeforeUpdate!="function"||J===u.memoizedProps&&Ce===u.memoizedState||(f.flags|=1024),E=!1)}return eN(u,f,g,E,A,T)}function eN(u,f,g,E,T,A){HR(u,f);var B=(f.flags&128)!==0;if(!E&&!B)return T&&XD(f,g,!1),sl(u,f,A);E=f.stateNode,zQ.current=f;var J=B&&typeof g.getDerivedStateFromError!="function"?null:E.render();return f.flags|=1,u!==null&&B?(f.child=Kh(f,u.child,null,A),f.child=Kh(f,null,J,A)):Os(u,f,J,A),f.memoizedState=E.state,T&&XD(f,g,!0),f.child}function KR(u){var f=u.stateNode;f.pendingContext?GD(u,f.pendingContext,f.pendingContext!==f.context):f.context&&GD(u,f.context,!1),LE(u,f.containerInfo)}function YR(u,f,g,E,T){return qh(),PE(T),f.flags|=256,Os(u,f,g,E),f.child}var tN={dehydrated:null,treeContext:null,retryLane:0};function nN(u){return{baseLanes:u,cachePool:null,transitions:null}}function GR(u,f,g){var E=f.pendingProps,T=Hn.current,A=!1,B=(f.flags&128)!==0,J;if((J=B)||(J=u!==null&&u.memoizedState===null?!1:(T&2)!==0),J?(A=!0,f.flags&=-129):(u===null||u.memoizedState!==null)&&(T|=1),_n(Hn,T&1),u===null)return jE(f),u=f.memoizedState,u!==null&&(u=u.dehydrated,u!==null)?((f.mode&1)===0?f.lanes=1:u.data==="$!"?f.lanes=8:f.lanes=1073741824,null):(B=E.children,u=E.fallback,A?(E=f.mode,A=f.child,B={mode:"hidden",children:B},(E&1)===0&&A!==null?(A.childLanes=0,A.pendingProps=B):A=Ov(B,E,0,null),u=Yu(u,E,g,null),A.return=f,u.return=f,A.sibling=u,f.child=A,f.child.memoizedState=nN(g),f.memoizedState=tN,u):rN(f,B));if(T=u.memoizedState,T!==null&&(J=T.dehydrated,J!==null))return WQ(u,f,B,E,J,T,g);if(A){A=E.fallback,B=f.mode,T=u.child,J=T.sibling;var re={mode:"hidden",children:E.children};return(B&1)===0&&f.child!==T?(E=f.child,E.childLanes=0,E.pendingProps=re,f.deletions=null):(E=Tc(T,re),E.subtreeFlags=T.subtreeFlags&14680064),J!==null?A=Tc(J,A):(A=Yu(A,B,g,null),A.flags|=2),A.return=f,E.return=f,E.sibling=A,f.child=E,E=A,A=f.child,B=u.child.memoizedState,B=B===null?nN(g):{baseLanes:B.baseLanes|g,cachePool:null,transitions:B.transitions},A.memoizedState=B,A.childLanes=u.childLanes&~g,f.memoizedState=tN,E}return A=u.child,u=A.sibling,E=Tc(A,{mode:"visible",children:E.children}),(f.mode&1)===0&&(E.lanes=g),E.return=f,E.sibling=null,u!==null&&(g=f.deletions,g===null?(f.deletions=[u],f.flags|=16):g.push(u)),f.child=E,f.memoizedState=null,E}function rN(u,f){return f=Ov({mode:"visible",children:f},u.mode,0,null),f.return=u,u.child=f}function _v(u,f,g,E){return E!==null&&PE(E),Kh(f,u.child,null,g),u=rN(f,f.pendingProps.children),u.flags|=2,f.memoizedState=null,u}function WQ(u,f,g,E,T,A,B){if(g)return f.flags&256?(f.flags&=-257,E=XE(Error(n(422))),_v(u,f,B,E)):f.memoizedState!==null?(f.child=u.child,f.flags|=128,null):(A=E.fallback,T=f.mode,E=Ov({mode:"visible",children:E.children},T,0,null),A=Yu(A,T,B,null),A.flags|=2,E.return=f,A.return=f,E.sibling=A,f.child=E,(f.mode&1)!==0&&Kh(f,u.child,null,B),f.child.memoizedState=nN(B),f.memoizedState=tN,A);if((f.mode&1)===0)return _v(u,f,B,null);if(T.data==="$!"){if(E=T.nextSibling&&T.nextSibling.dataset,E)var J=E.dgst;return E=J,A=Error(n(419)),E=XE(A,E,void 0),_v(u,f,B,E)}if(J=(B&u.childLanes)!==0,Xs||J){if(E=Br,E!==null){switch(B&-B){case 4:T=2;break;case 16:T=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:T=32;break;case 536870912:T=268435456;break;default:T=0}T=(T&(E.suspendedLanes|B))!==0?0:T,T!==0&&T!==A.retryLane&&(A.retryLane=T,nl(u,T),Ca(E,u,T,-1))}return xN(),E=XE(Error(n(421))),_v(u,f,B,E)}return T.data==="$?"?(f.flags|=128,f.child=u.child,f=rX.bind(null,u),T._reactRetry=f,null):(u=A.treeContext,Si=gc(T.nextSibling),Ni=f,Rn=!0,Na=null,u!==null&&(Yi[Gi++]=el,Yi[Gi++]=tl,Yi[Gi++]=$u,el=u.id,tl=u.overflow,$u=f),f=rN(f,E.children),f.flags|=4096,f)}function QR(u,f,g){u.lanes|=f;var E=u.alternate;E!==null&&(E.lanes|=f),RE(u.return,f,g)}function sN(u,f,g,E,T){var A=u.memoizedState;A===null?u.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:E,tail:g,tailMode:T}:(A.isBackwards=f,A.rendering=null,A.renderingStartTime=0,A.last=E,A.tail=g,A.tailMode=T)}function XR(u,f,g){var E=f.pendingProps,T=E.revealOrder,A=E.tail;if(Os(u,f,E.children,g),E=Hn.current,(E&2)!==0)E=E&1|2,f.flags|=128;else{if(u!==null&&(u.flags&128)!==0)e:for(u=f.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&QR(u,g,f);else if(u.tag===19)QR(u,g,f);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===f)break e;for(;u.sibling===null;){if(u.return===null||u.return===f)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}E&=1}if(_n(Hn,E),(f.mode&1)===0)f.memoizedState=null;else switch(T){case"forwards":for(g=f.child,T=null;g!==null;)u=g.alternate,u!==null&&mv(u)===null&&(T=g),g=g.sibling;g=T,g===null?(T=f.child,f.child=null):(T=g.sibling,g.sibling=null),sN(f,!1,T,g,A);break;case"backwards":for(g=null,T=f.child,f.child=null;T!==null;){if(u=T.alternate,u!==null&&mv(u)===null){f.child=T;break}u=T.sibling,T.sibling=g,g=T,T=u}sN(f,!0,g,null,A);break;case"together":sN(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function Ev(u,f){(f.mode&1)===0&&u!==null&&(u.alternate=null,f.alternate=null,f.flags|=2)}function sl(u,f,g){if(u!==null&&(f.dependencies=u.dependencies),Wu|=f.lanes,(g&f.childLanes)===0)return null;if(u!==null&&f.child!==u.child)throw Error(n(153));if(f.child!==null){for(u=f.child,g=Tc(u,u.pendingProps),f.child=g,g.return=f;u.sibling!==null;)u=u.sibling,g=g.sibling=Tc(u,u.pendingProps),g.return=f;g.sibling=null}return f.child}function HQ(u,f,g){switch(f.tag){case 3:KR(f),qh();break;case 5:dR(f);break;case 1:Qs(f.type)&&iv(f);break;case 4:LE(f,f.stateNode.containerInfo);break;case 10:var E=f.type._context,T=f.memoizedProps.value;_n(dv,E._currentValue),E._currentValue=T;break;case 13:if(E=f.memoizedState,E!==null)return E.dehydrated!==null?(_n(Hn,Hn.current&1),f.flags|=128,null):(g&f.child.childLanes)!==0?GR(u,f,g):(_n(Hn,Hn.current&1),u=sl(u,f,g),u!==null?u.sibling:null);_n(Hn,Hn.current&1);break;case 19:if(E=(g&f.childLanes)!==0,(u.flags&128)!==0){if(E)return XR(u,f,g);f.flags|=128}if(T=f.memoizedState,T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),_n(Hn,Hn.current),E)break;return null;case 22:case 23:return f.lanes=0,WR(u,f,g)}return sl(u,f,g)}var JR,iN,ZR,eO;JR=function(u,f){for(var g=f.child;g!==null;){if(g.tag===5||g.tag===6)u.appendChild(g.stateNode);else if(g.tag!==4&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===f)break;for(;g.sibling===null;){if(g.return===null||g.return===f)return;g=g.return}g.sibling.return=g.return,g=g.sibling}},iN=function(){},ZR=function(u,f,g,E){var T=u.memoizedProps;if(T!==E){u=f.stateNode,Uu(uo.current);var A=null;switch(g){case"input":T=Ne(u,T),E=Ne(u,E),A=[];break;case"select":T=G({},T,{value:void 0}),E=G({},E,{value:void 0}),A=[];break;case"textarea":T=Pt(u,T),E=Pt(u,E),A=[];break;default:typeof T.onClick!="function"&&typeof E.onClick=="function"&&(u.onclick=nv)}At(g,E);var B;g=null;for(xe in T)if(!E.hasOwnProperty(xe)&&T.hasOwnProperty(xe)&&T[xe]!=null)if(xe==="style"){var J=T[xe];for(B in J)J.hasOwnProperty(B)&&(g||(g={}),g[B]="")}else xe!=="dangerouslySetInnerHTML"&&xe!=="children"&&xe!=="suppressContentEditableWarning"&&xe!=="suppressHydrationWarning"&&xe!=="autoFocus"&&(s.hasOwnProperty(xe)?A||(A=[]):(A=A||[]).push(xe,null));for(xe in E){var re=E[xe];if(J=T?.[xe],E.hasOwnProperty(xe)&&re!==J&&(re!=null||J!=null))if(xe==="style")if(J){for(B in J)!J.hasOwnProperty(B)||re&&re.hasOwnProperty(B)||(g||(g={}),g[B]="");for(B in re)re.hasOwnProperty(B)&&J[B]!==re[B]&&(g||(g={}),g[B]=re[B])}else g||(A||(A=[]),A.push(xe,g)),g=re;else xe==="dangerouslySetInnerHTML"?(re=re?re.__html:void 0,J=J?J.__html:void 0,re!=null&&J!==re&&(A=A||[]).push(xe,re)):xe==="children"?typeof re!="string"&&typeof re!="number"||(A=A||[]).push(xe,""+re):xe!=="suppressContentEditableWarning"&&xe!=="suppressHydrationWarning"&&(s.hasOwnProperty(xe)?(re!=null&&xe==="onScroll"&&kn("scroll",u),A||J===re||(A=[])):(A=A||[]).push(xe,re))}g&&(A=A||[]).push("style",g);var xe=A;(f.updateQueue=xe)&&(f.flags|=4)}},eO=function(u,f,g,E){g!==E&&(f.flags|=4)};function $m(u,f){if(!Rn)switch(u.tailMode){case"hidden":f=u.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?u.tail=null:g.sibling=null;break;case"collapsed":g=u.tail;for(var E=null;g!==null;)g.alternate!==null&&(E=g),g=g.sibling;E===null?f||u.tail===null?u.tail=null:u.tail.sibling=null:E.sibling=null}}function bs(u){var f=u.alternate!==null&&u.alternate.child===u.child,g=0,E=0;if(f)for(var T=u.child;T!==null;)g|=T.lanes|T.childLanes,E|=T.subtreeFlags&14680064,E|=T.flags&14680064,T.return=u,T=T.sibling;else for(T=u.child;T!==null;)g|=T.lanes|T.childLanes,E|=T.subtreeFlags,E|=T.flags,T.return=u,T=T.sibling;return u.subtreeFlags|=E,u.childLanes=g,f}function qQ(u,f,g){var E=f.pendingProps;switch(TE(f),f.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bs(f),null;case 1:return Qs(f.type)&&sv(),bs(f),null;case 3:return E=f.stateNode,Qh(),Tn(Gs),Tn(vs),VE(),E.pendingContext&&(E.context=E.pendingContext,E.pendingContext=null),(u===null||u.child===null)&&(cv(f)?f.flags|=4:u===null||u.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,Na!==null&&(gN(Na),Na=null))),iN(u,f),bs(f),null;case 5:FE(f);var T=Uu(Rm.current);if(g=f.type,u!==null&&f.stateNode!=null)ZR(u,f,g,E,T),u.ref!==f.ref&&(f.flags|=512,f.flags|=2097152);else{if(!E){if(f.stateNode===null)throw Error(n(166));return bs(f),null}if(u=Uu(uo.current),cv(f)){E=f.stateNode,g=f.type;var A=f.memoizedProps;switch(E[co]=f,E[jm]=A,u=(f.mode&1)!==0,g){case"dialog":kn("cancel",E),kn("close",E);break;case"iframe":case"object":case"embed":kn("load",E);break;case"video":case"audio":for(T=0;T<km.length;T++)kn(km[T],E);break;case"source":kn("error",E);break;case"img":case"image":case"link":kn("error",E),kn("load",E);break;case"details":kn("toggle",E);break;case"input":Se(E,A),kn("invalid",E);break;case"select":E._wrapperState={wasMultiple:!!A.multiple},kn("invalid",E);break;case"textarea":Dt(E,A),kn("invalid",E)}At(g,A),T=null;for(var B in A)if(A.hasOwnProperty(B)){var J=A[B];B==="children"?typeof J=="string"?E.textContent!==J&&(A.suppressHydrationWarning!==!0&&tv(E.textContent,J,u),T=["children",J]):typeof J=="number"&&E.textContent!==""+J&&(A.suppressHydrationWarning!==!0&&tv(E.textContent,J,u),T=["children",""+J]):s.hasOwnProperty(B)&&J!=null&&B==="onScroll"&&kn("scroll",E)}switch(g){case"input":he(E),ce(E,A,!0);break;case"textarea":he(E),gr(E);break;case"select":case"option":break;default:typeof A.onClick=="function"&&(E.onclick=nv)}E=T,f.updateQueue=E,E!==null&&(f.flags|=4)}else{B=T.nodeType===9?T:T.ownerDocument,u==="http://www.w3.org/1999/xhtml"&&(u=Wt(g)),u==="http://www.w3.org/1999/xhtml"?g==="script"?(u=B.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild)):typeof E.is=="string"?u=B.createElement(g,{is:E.is}):(u=B.createElement(g),g==="select"&&(B=u,E.multiple?B.multiple=!0:E.size&&(B.size=E.size))):u=B.createElementNS(u,g),u[co]=f,u[jm]=E,JR(u,f,!1,!1),f.stateNode=u;e:{switch(B=bn(g,E),g){case"dialog":kn("cancel",u),kn("close",u),T=E;break;case"iframe":case"object":case"embed":kn("load",u),T=E;break;case"video":case"audio":for(T=0;T<km.length;T++)kn(km[T],u);T=E;break;case"source":kn("error",u),T=E;break;case"img":case"image":case"link":kn("error",u),kn("load",u),T=E;break;case"details":kn("toggle",u),T=E;break;case"input":Se(u,E),T=Ne(u,E),kn("invalid",u);break;case"option":T=E;break;case"select":u._wrapperState={wasMultiple:!!E.multiple},T=G({},E,{value:void 0}),kn("invalid",u);break;case"textarea":Dt(u,E),T=Pt(u,E),kn("invalid",u);break;default:T=E}At(g,T),J=T;for(A in J)if(J.hasOwnProperty(A)){var re=J[A];A==="style"?Qe(u,re):A==="dangerouslySetInnerHTML"?(re=re?re.__html:void 0,re!=null&&pe(u,re)):A==="children"?typeof re=="string"?(g!=="textarea"||re!=="")&&we(u,re):typeof re=="number"&&we(u,""+re):A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&A!=="autoFocus"&&(s.hasOwnProperty(A)?re!=null&&A==="onScroll"&&kn("scroll",u):re!=null&&S(u,A,re,B))}switch(g){case"input":he(u),ce(u,E,!1);break;case"textarea":he(u),gr(u);break;case"option":E.value!=null&&u.setAttribute("value",""+ee(E.value));break;case"select":u.multiple=!!E.multiple,A=E.value,A!=null?ut(u,!!E.multiple,A,!1):E.defaultValue!=null&&ut(u,!!E.multiple,E.defaultValue,!0);break;default:typeof T.onClick=="function"&&(u.onclick=nv)}switch(g){case"button":case"input":case"select":case"textarea":E=!!E.autoFocus;break e;case"img":E=!0;break e;default:E=!1}}E&&(f.flags|=4)}f.ref!==null&&(f.flags|=512,f.flags|=2097152)}return bs(f),null;case 6:if(u&&f.stateNode!=null)eO(u,f,u.memoizedProps,E);else{if(typeof E!="string"&&f.stateNode===null)throw Error(n(166));if(g=Uu(Rm.current),Uu(uo.current),cv(f)){if(E=f.stateNode,g=f.memoizedProps,E[co]=f,(A=E.nodeValue!==g)&&(u=Ni,u!==null))switch(u.tag){case 3:tv(E.nodeValue,g,(u.mode&1)!==0);break;case 5:u.memoizedProps.suppressHydrationWarning!==!0&&tv(E.nodeValue,g,(u.mode&1)!==0)}A&&(f.flags|=4)}else E=(g.nodeType===9?g:g.ownerDocument).createTextNode(E),E[co]=f,f.stateNode=E}return bs(f),null;case 13:if(Tn(Hn),E=f.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(Rn&&Si!==null&&(f.mode&1)!==0&&(f.flags&128)===0)rR(),qh(),f.flags|=98560,A=!1;else if(A=cv(f),E!==null&&E.dehydrated!==null){if(u===null){if(!A)throw Error(n(318));if(A=f.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(n(317));A[co]=f}else qh(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;bs(f),A=!1}else Na!==null&&(gN(Na),Na=null),A=!0;if(!A)return f.flags&65536?f:null}return(f.flags&128)!==0?(f.lanes=g,f):(E=E!==null,E!==(u!==null&&u.memoizedState!==null)&&E&&(f.child.flags|=8192,(f.mode&1)!==0&&(u===null||(Hn.current&1)!==0?Cr===0&&(Cr=3):xN())),f.updateQueue!==null&&(f.flags|=4),bs(f),null);case 4:return Qh(),iN(u,f),u===null&&Tm(f.stateNode.containerInfo),bs(f),null;case 10:return DE(f.type._context),bs(f),null;case 17:return Qs(f.type)&&sv(),bs(f),null;case 19:if(Tn(Hn),A=f.memoizedState,A===null)return bs(f),null;if(E=(f.flags&128)!==0,B=A.rendering,B===null)if(E)$m(A,!1);else{if(Cr!==0||u!==null&&(u.flags&128)!==0)for(u=f.child;u!==null;){if(B=mv(u),B!==null){for(f.flags|=128,$m(A,!1),E=B.updateQueue,E!==null&&(f.updateQueue=E,f.flags|=4),f.subtreeFlags=0,E=g,g=f.child;g!==null;)A=g,u=E,A.flags&=14680066,B=A.alternate,B===null?(A.childLanes=0,A.lanes=u,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=B.childLanes,A.lanes=B.lanes,A.child=B.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=B.memoizedProps,A.memoizedState=B.memoizedState,A.updateQueue=B.updateQueue,A.type=B.type,u=B.dependencies,A.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),g=g.sibling;return _n(Hn,Hn.current&1|2),f.child}u=u.sibling}A.tail!==null&&tn()>ef&&(f.flags|=128,E=!0,$m(A,!1),f.lanes=4194304)}else{if(!E)if(u=mv(B),u!==null){if(f.flags|=128,E=!0,g=u.updateQueue,g!==null&&(f.updateQueue=g,f.flags|=4),$m(A,!0),A.tail===null&&A.tailMode==="hidden"&&!B.alternate&&!Rn)return bs(f),null}else 2*tn()-A.renderingStartTime>ef&&g!==1073741824&&(f.flags|=128,E=!0,$m(A,!1),f.lanes=4194304);A.isBackwards?(B.sibling=f.child,f.child=B):(g=A.last,g!==null?g.sibling=B:f.child=B,A.last=B)}return A.tail!==null?(f=A.tail,A.rendering=f,A.tail=f.sibling,A.renderingStartTime=tn(),f.sibling=null,g=Hn.current,_n(Hn,E?g&1|2:g&1),f):(bs(f),null);case 22:case 23:return vN(),E=f.memoizedState!==null,u!==null&&u.memoizedState!==null!==E&&(f.flags|=8192),E&&(f.mode&1)!==0?(ki&1073741824)!==0&&(bs(f),f.subtreeFlags&6&&(f.flags|=8192)):bs(f),null;case 24:return null;case 25:return null}throw Error(n(156,f.tag))}function KQ(u,f){switch(TE(f),f.tag){case 1:return Qs(f.type)&&sv(),u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 3:return Qh(),Tn(Gs),Tn(vs),VE(),u=f.flags,(u&65536)!==0&&(u&128)===0?(f.flags=u&-65537|128,f):null;case 5:return FE(f),null;case 13:if(Tn(Hn),u=f.memoizedState,u!==null&&u.dehydrated!==null){if(f.alternate===null)throw Error(n(340));qh()}return u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 19:return Tn(Hn),null;case 4:return Qh(),null;case 10:return DE(f.type._context),null;case 22:case 23:return vN(),null;case 24:return null;default:return null}}var Nv=!1,ws=!1,YQ=typeof WeakSet=="function"?WeakSet:Set,Xe=null;function Jh(u,f){var g=u.ref;if(g!==null)if(typeof g=="function")try{g(null)}catch(E){er(u,f,E)}else g.current=null}function aN(u,f,g){try{g()}catch(E){er(u,f,E)}}var tO=!1;function GQ(u,f){if(vE=fc,u=DD(),uE(u)){if("selectionStart"in u)var g={start:u.selectionStart,end:u.selectionEnd};else e:{g=(g=u.ownerDocument)&&g.defaultView||window;var E=g.getSelection&&g.getSelection();if(E&&E.rangeCount!==0){g=E.anchorNode;var T=E.anchorOffset,A=E.focusNode;E=E.focusOffset;try{g.nodeType,A.nodeType}catch{g=null;break e}var B=0,J=-1,re=-1,xe=0,Ae=0,Oe=u,Ce=null;t:for(;;){for(var Ge;Oe!==g||T!==0&&Oe.nodeType!==3||(J=B+T),Oe!==A||E!==0&&Oe.nodeType!==3||(re=B+E),Oe.nodeType===3&&(B+=Oe.nodeValue.length),(Ge=Oe.firstChild)!==null;)Ce=Oe,Oe=Ge;for(;;){if(Oe===u)break t;if(Ce===g&&++xe===T&&(J=B),Ce===A&&++Ae===E&&(re=B),(Ge=Oe.nextSibling)!==null)break;Oe=Ce,Ce=Oe.parentNode}Oe=Ge}g=J===-1||re===-1?null:{start:J,end:re}}else g=null}g=g||{start:0,end:0}}else g=null;for(xE={focusedElem:u,selectionRange:g},fc=!1,Xe=f;Xe!==null;)if(f=Xe,u=f.child,(f.subtreeFlags&1028)!==0&&u!==null)u.return=f,Xe=u;else for(;Xe!==null;){f=Xe;try{var et=f.alternate;if((f.flags&1024)!==0)switch(f.tag){case 0:case 11:case 15:break;case 1:if(et!==null){var tt=et.memoizedProps,or=et.memoizedState,de=f.stateNode,se=de.getSnapshotBeforeUpdate(f.elementType===f.type?tt:Sa(f.type,tt),or);de.__reactInternalSnapshotBeforeUpdate=se}break;case 3:var fe=f.stateNode.containerInfo;fe.nodeType===1?fe.textContent="":fe.nodeType===9&&fe.documentElement&&fe.removeChild(fe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch($e){er(f,f.return,$e)}if(u=f.sibling,u!==null){u.return=f.return,Xe=u;break}Xe=f.return}return et=tO,tO=!1,et}function Vm(u,f,g){var E=f.updateQueue;if(E=E!==null?E.lastEffect:null,E!==null){var T=E=E.next;do{if((T.tag&u)===u){var A=T.destroy;T.destroy=void 0,A!==void 0&&aN(f,g,A)}T=T.next}while(T!==E)}}function Sv(u,f){if(f=f.updateQueue,f=f!==null?f.lastEffect:null,f!==null){var g=f=f.next;do{if((g.tag&u)===u){var E=g.create;g.destroy=E()}g=g.next}while(g!==f)}}function oN(u){var f=u.ref;if(f!==null){var g=u.stateNode;switch(u.tag){case 5:u=g;break;default:u=g}typeof f=="function"?f(u):f.current=u}}function nO(u){var f=u.alternate;f!==null&&(u.alternate=null,nO(f)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(f=u.stateNode,f!==null&&(delete f[co],delete f[jm],delete f[EE],delete f[AQ],delete f[IQ])),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}function rO(u){return u.tag===5||u.tag===3||u.tag===4}function sO(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||rO(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function lN(u,f,g){var E=u.tag;if(E===5||E===6)u=u.stateNode,f?g.nodeType===8?g.parentNode.insertBefore(u,f):g.insertBefore(u,f):(g.nodeType===8?(f=g.parentNode,f.insertBefore(u,g)):(f=g,f.appendChild(u)),g=g._reactRootContainer,g!=null||f.onclick!==null||(f.onclick=nv));else if(E!==4&&(u=u.child,u!==null))for(lN(u,f,g),u=u.sibling;u!==null;)lN(u,f,g),u=u.sibling}function cN(u,f,g){var E=u.tag;if(E===5||E===6)u=u.stateNode,f?g.insertBefore(u,f):g.appendChild(u);else if(E!==4&&(u=u.child,u!==null))for(cN(u,f,g),u=u.sibling;u!==null;)cN(u,f,g),u=u.sibling}var rs=null,ka=!1;function _c(u,f,g){for(g=g.child;g!==null;)iO(u,f,g),g=g.sibling}function iO(u,f,g){if(ot&&typeof ot.onCommitFiberUnmount=="function")try{ot.onCommitFiberUnmount(Tt,g)}catch{}switch(g.tag){case 5:ws||Jh(g,f);case 6:var E=rs,T=ka;rs=null,_c(u,f,g),rs=E,ka=T,rs!==null&&(ka?(u=rs,g=g.stateNode,u.nodeType===8?u.parentNode.removeChild(g):u.removeChild(g)):rs.removeChild(g.stateNode));break;case 18:rs!==null&&(ka?(u=rs,g=g.stateNode,u.nodeType===8?_E(u.parentNode,g):u.nodeType===1&&_E(u,g),wa(u)):_E(rs,g.stateNode));break;case 4:E=rs,T=ka,rs=g.stateNode.containerInfo,ka=!0,_c(u,f,g),rs=E,ka=T;break;case 0:case 11:case 14:case 15:if(!ws&&(E=g.updateQueue,E!==null&&(E=E.lastEffect,E!==null))){T=E=E.next;do{var A=T,B=A.destroy;A=A.tag,B!==void 0&&((A&2)!==0||(A&4)!==0)&&aN(g,f,B),T=T.next}while(T!==E)}_c(u,f,g);break;case 1:if(!ws&&(Jh(g,f),E=g.stateNode,typeof E.componentWillUnmount=="function"))try{E.props=g.memoizedProps,E.state=g.memoizedState,E.componentWillUnmount()}catch(J){er(g,f,J)}_c(u,f,g);break;case 21:_c(u,f,g);break;case 22:g.mode&1?(ws=(E=ws)||g.memoizedState!==null,_c(u,f,g),ws=E):_c(u,f,g);break;default:_c(u,f,g)}}function aO(u){var f=u.updateQueue;if(f!==null){u.updateQueue=null;var g=u.stateNode;g===null&&(g=u.stateNode=new YQ),f.forEach(function(E){var T=sX.bind(null,u,E);g.has(E)||(g.add(E),E.then(T,T))})}}function Ta(u,f){var g=f.deletions;if(g!==null)for(var E=0;E<g.length;E++){var T=g[E];try{var A=u,B=f,J=B;e:for(;J!==null;){switch(J.tag){case 5:rs=J.stateNode,ka=!1;break e;case 3:rs=J.stateNode.containerInfo,ka=!0;break e;case 4:rs=J.stateNode.containerInfo,ka=!0;break e}J=J.return}if(rs===null)throw Error(n(160));iO(A,B,T),rs=null,ka=!1;var re=T.alternate;re!==null&&(re.return=null),T.return=null}catch(xe){er(T,f,xe)}}if(f.subtreeFlags&12854)for(f=f.child;f!==null;)oO(f,u),f=f.sibling}function oO(u,f){var g=u.alternate,E=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:if(Ta(f,u),fo(u),E&4){try{Vm(3,u,u.return),Sv(3,u)}catch(tt){er(u,u.return,tt)}try{Vm(5,u,u.return)}catch(tt){er(u,u.return,tt)}}break;case 1:Ta(f,u),fo(u),E&512&&g!==null&&Jh(g,g.return);break;case 5:if(Ta(f,u),fo(u),E&512&&g!==null&&Jh(g,g.return),u.flags&32){var T=u.stateNode;try{we(T,"")}catch(tt){er(u,u.return,tt)}}if(E&4&&(T=u.stateNode,T!=null)){var A=u.memoizedProps,B=g!==null?g.memoizedProps:A,J=u.type,re=u.updateQueue;if(u.updateQueue=null,re!==null)try{J==="input"&&A.type==="radio"&&A.name!=null&&ae(T,A),bn(J,B);var xe=bn(J,A);for(B=0;B<re.length;B+=2){var Ae=re[B],Oe=re[B+1];Ae==="style"?Qe(T,Oe):Ae==="dangerouslySetInnerHTML"?pe(T,Oe):Ae==="children"?we(T,Oe):S(T,Ae,Oe,xe)}switch(J){case"input":ke(T,A);break;case"textarea":xn(T,A);break;case"select":var Ce=T._wrapperState.wasMultiple;T._wrapperState.wasMultiple=!!A.multiple;var Ge=A.value;Ge!=null?ut(T,!!A.multiple,Ge,!1):Ce!==!!A.multiple&&(A.defaultValue!=null?ut(T,!!A.multiple,A.defaultValue,!0):ut(T,!!A.multiple,A.multiple?[]:"",!1))}T[jm]=A}catch(tt){er(u,u.return,tt)}}break;case 6:if(Ta(f,u),fo(u),E&4){if(u.stateNode===null)throw Error(n(162));T=u.stateNode,A=u.memoizedProps;try{T.nodeValue=A}catch(tt){er(u,u.return,tt)}}break;case 3:if(Ta(f,u),fo(u),E&4&&g!==null&&g.memoizedState.isDehydrated)try{wa(f.containerInfo)}catch(tt){er(u,u.return,tt)}break;case 4:Ta(f,u),fo(u);break;case 13:Ta(f,u),fo(u),T=u.child,T.flags&8192&&(A=T.memoizedState!==null,T.stateNode.isHidden=A,!A||T.alternate!==null&&T.alternate.memoizedState!==null||(hN=tn())),E&4&&aO(u);break;case 22:if(Ae=g!==null&&g.memoizedState!==null,u.mode&1?(ws=(xe=ws)||Ae,Ta(f,u),ws=xe):Ta(f,u),fo(u),E&8192){if(xe=u.memoizedState!==null,(u.stateNode.isHidden=xe)&&!Ae&&(u.mode&1)!==0)for(Xe=u,Ae=u.child;Ae!==null;){for(Oe=Xe=Ae;Xe!==null;){switch(Ce=Xe,Ge=Ce.child,Ce.tag){case 0:case 11:case 14:case 15:Vm(4,Ce,Ce.return);break;case 1:Jh(Ce,Ce.return);var et=Ce.stateNode;if(typeof et.componentWillUnmount=="function"){E=Ce,g=Ce.return;try{f=E,et.props=f.memoizedProps,et.state=f.memoizedState,et.componentWillUnmount()}catch(tt){er(E,g,tt)}}break;case 5:Jh(Ce,Ce.return);break;case 22:if(Ce.memoizedState!==null){uO(Oe);continue}}Ge!==null?(Ge.return=Ce,Xe=Ge):uO(Oe)}Ae=Ae.sibling}e:for(Ae=null,Oe=u;;){if(Oe.tag===5){if(Ae===null){Ae=Oe;try{T=Oe.stateNode,xe?(A=T.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none"):(J=Oe.stateNode,re=Oe.memoizedProps.style,B=re!=null&&re.hasOwnProperty("display")?re.display:null,J.style.display=Re("display",B))}catch(tt){er(u,u.return,tt)}}}else if(Oe.tag===6){if(Ae===null)try{Oe.stateNode.nodeValue=xe?"":Oe.memoizedProps}catch(tt){er(u,u.return,tt)}}else if((Oe.tag!==22&&Oe.tag!==23||Oe.memoizedState===null||Oe===u)&&Oe.child!==null){Oe.child.return=Oe,Oe=Oe.child;continue}if(Oe===u)break e;for(;Oe.sibling===null;){if(Oe.return===null||Oe.return===u)break e;Ae===Oe&&(Ae=null),Oe=Oe.return}Ae===Oe&&(Ae=null),Oe.sibling.return=Oe.return,Oe=Oe.sibling}}break;case 19:Ta(f,u),fo(u),E&4&&aO(u);break;case 21:break;default:Ta(f,u),fo(u)}}function fo(u){var f=u.flags;if(f&2){try{e:{for(var g=u.return;g!==null;){if(rO(g)){var E=g;break e}g=g.return}throw Error(n(160))}switch(E.tag){case 5:var T=E.stateNode;E.flags&32&&(we(T,""),E.flags&=-33);var A=sO(u);cN(u,A,T);break;case 3:case 4:var B=E.stateNode.containerInfo,J=sO(u);lN(u,J,B);break;default:throw Error(n(161))}}catch(re){er(u,u.return,re)}u.flags&=-3}f&4096&&(u.flags&=-4097)}function QQ(u,f,g){Xe=u,lO(u)}function lO(u,f,g){for(var E=(u.mode&1)!==0;Xe!==null;){var T=Xe,A=T.child;if(T.tag===22&&E){var B=T.memoizedState!==null||Nv;if(!B){var J=T.alternate,re=J!==null&&J.memoizedState!==null||ws;J=Nv;var xe=ws;if(Nv=B,(ws=re)&&!xe)for(Xe=T;Xe!==null;)B=Xe,re=B.child,B.tag===22&&B.memoizedState!==null?dO(T):re!==null?(re.return=B,Xe=re):dO(T);for(;A!==null;)Xe=A,lO(A),A=A.sibling;Xe=T,Nv=J,ws=xe}cO(u)}else(T.subtreeFlags&8772)!==0&&A!==null?(A.return=T,Xe=A):cO(u)}}function cO(u){for(;Xe!==null;){var f=Xe;if((f.flags&8772)!==0){var g=f.alternate;try{if((f.flags&8772)!==0)switch(f.tag){case 0:case 11:case 15:ws||Sv(5,f);break;case 1:var E=f.stateNode;if(f.flags&4&&!ws)if(g===null)E.componentDidMount();else{var T=f.elementType===f.type?g.memoizedProps:Sa(f.type,g.memoizedProps);E.componentDidUpdate(T,g.memoizedState,E.__reactInternalSnapshotBeforeUpdate)}var A=f.updateQueue;A!==null&&uR(f,A,E);break;case 3:var B=f.updateQueue;if(B!==null){if(g=null,f.child!==null)switch(f.child.tag){case 5:g=f.child.stateNode;break;case 1:g=f.child.stateNode}uR(f,B,g)}break;case 5:var J=f.stateNode;if(g===null&&f.flags&4){g=J;var re=f.memoizedProps;switch(f.type){case"button":case"input":case"select":case"textarea":re.autoFocus&&g.focus();break;case"img":re.src&&(g.src=re.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(f.memoizedState===null){var xe=f.alternate;if(xe!==null){var Ae=xe.memoizedState;if(Ae!==null){var Oe=Ae.dehydrated;Oe!==null&&wa(Oe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}ws||f.flags&512&&oN(f)}catch(Ce){er(f,f.return,Ce)}}if(f===u){Xe=null;break}if(g=f.sibling,g!==null){g.return=f.return,Xe=g;break}Xe=f.return}}function uO(u){for(;Xe!==null;){var f=Xe;if(f===u){Xe=null;break}var g=f.sibling;if(g!==null){g.return=f.return,Xe=g;break}Xe=f.return}}function dO(u){for(;Xe!==null;){var f=Xe;try{switch(f.tag){case 0:case 11:case 15:var g=f.return;try{Sv(4,f)}catch(re){er(f,g,re)}break;case 1:var E=f.stateNode;if(typeof E.componentDidMount=="function"){var T=f.return;try{E.componentDidMount()}catch(re){er(f,T,re)}}var A=f.return;try{oN(f)}catch(re){er(f,A,re)}break;case 5:var B=f.return;try{oN(f)}catch(re){er(f,B,re)}}}catch(re){er(f,f.return,re)}if(f===u){Xe=null;break}var J=f.sibling;if(J!==null){J.return=f.return,Xe=J;break}Xe=f.return}}var XQ=Math.ceil,kv=O.ReactCurrentDispatcher,uN=O.ReactCurrentOwner,Ji=O.ReactCurrentBatchConfig,Gt=0,Br=null,vr=null,ss=0,ki=0,Zh=yc(0),Cr=0,Bm=null,Wu=0,Tv=0,dN=0,Um=null,Js=null,hN=0,ef=1/0,il=null,Cv=!1,fN=null,Ec=null,jv=!1,Nc=null,Pv=0,zm=0,pN=null,Av=-1,Iv=0;function Ms(){return(Gt&6)!==0?tn():Av!==-1?Av:Av=tn()}function Sc(u){return(u.mode&1)===0?1:(Gt&2)!==0&&ss!==0?ss&-ss:RQ.transition!==null?(Iv===0&&(Iv=Iu()),Iv):(u=Ut,u!==0||(u=window.event,u=u===void 0?16:ym(u.type)),u)}function Ca(u,f,g,E){if(50<zm)throw zm=0,pN=null,Error(n(185));cc(u,g,E),((Gt&2)===0||u!==Br)&&(u===Br&&((Gt&2)===0&&(Tv|=g),Cr===4&&kc(u,ss)),Zs(u,E),g===1&&Gt===0&&(f.mode&1)===0&&(ef=tn()+500,av&&xc()))}function Zs(u,f){var g=u.callbackNode;Ko(u,f);var E=Au(u,u===Br?ss:0);if(E===0)g!==null&&ju(g),u.callbackNode=null,u.callbackPriority=0;else if(f=E&-E,u.callbackPriority!==f){if(g!=null&&ju(g),f===1)u.tag===0?DQ(fO.bind(null,u)):JD(fO.bind(null,u)),jQ(function(){(Gt&6)===0&&xc()}),g=null;else{switch(dc(E)){case 1:g=We;break;case 4:g=Ye;break;case 16:g=Ze;break;case 536870912:g=yt;break;default:g=Ze}g=wO(g,hO.bind(null,u))}u.callbackPriority=f,u.callbackNode=g}}function hO(u,f){if(Av=-1,Iv=0,(Gt&6)!==0)throw Error(n(327));var g=u.callbackNode;if(tf()&&u.callbackNode!==g)return null;var E=Au(u,u===Br?ss:0);if(E===0)return null;if((E&30)!==0||(E&u.expiredLanes)!==0||f)f=Dv(u,E);else{f=E;var T=Gt;Gt|=2;var A=mO();(Br!==u||ss!==f)&&(il=null,ef=tn()+500,qu(u,f));do try{eX();break}catch(J){pO(u,J)}while(!0);IE(),kv.current=A,Gt=T,vr!==null?f=0:(Br=null,ss=0,f=Cr)}if(f!==0){if(f===2&&(T=wi(u),T!==0&&(E=T,f=mN(u,T))),f===1)throw g=Bm,qu(u,0),kc(u,E),Zs(u,tn()),g;if(f===6)kc(u,E);else{if(T=u.current.alternate,(E&30)===0&&!JQ(T)&&(f=Dv(u,E),f===2&&(A=wi(u),A!==0&&(E=A,f=mN(u,A))),f===1))throw g=Bm,qu(u,0),kc(u,E),Zs(u,tn()),g;switch(u.finishedWork=T,u.finishedLanes=E,f){case 0:case 1:throw Error(n(345));case 2:Ku(u,Js,il);break;case 3:if(kc(u,E),(E&130023424)===E&&(f=hN+500-tn(),10<f)){if(Au(u,0)!==0)break;if(T=u.suspendedLanes,(T&E)!==E){Ms(),u.pingedLanes|=u.suspendedLanes&T;break}u.timeoutHandle=wE(Ku.bind(null,u,Js,il),f);break}Ku(u,Js,il);break;case 4:if(kc(u,E),(E&4194240)===E)break;for(f=u.eventTimes,T=-1;0<E;){var B=31-cn(E);A=1<<B,B=f[B],B>T&&(T=B),E&=~A}if(E=T,E=tn()-E,E=(120>E?120:480>E?480:1080>E?1080:1920>E?1920:3e3>E?3e3:4320>E?4320:1960*XQ(E/1960))-E,10<E){u.timeoutHandle=wE(Ku.bind(null,u,Js,il),E);break}Ku(u,Js,il);break;case 5:Ku(u,Js,il);break;default:throw Error(n(329))}}}return Zs(u,tn()),u.callbackNode===g?hO.bind(null,u):null}function mN(u,f){var g=Um;return u.current.memoizedState.isDehydrated&&(qu(u,f).flags|=256),u=Dv(u,f),u!==2&&(f=Js,Js=g,f!==null&&gN(f)),u}function gN(u){Js===null?Js=u:Js.push.apply(Js,u)}function JQ(u){for(var f=u;;){if(f.flags&16384){var g=f.updateQueue;if(g!==null&&(g=g.stores,g!==null))for(var E=0;E<g.length;E++){var T=g[E],A=T.getSnapshot;T=T.value;try{if(!Ea(A(),T))return!1}catch{return!1}}}if(g=f.child,f.subtreeFlags&16384&&g!==null)g.return=f,f=g;else{if(f===u)break;for(;f.sibling===null;){if(f.return===null||f.return===u)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function kc(u,f){for(f&=~dN,f&=~Tv,u.suspendedLanes|=f,u.pingedLanes&=~f,u=u.expirationTimes;0<f;){var g=31-cn(f),E=1<<g;u[g]=-1,f&=~E}}function fO(u){if((Gt&6)!==0)throw Error(n(327));tf();var f=Au(u,0);if((f&1)===0)return Zs(u,tn()),null;var g=Dv(u,f);if(u.tag!==0&&g===2){var E=wi(u);E!==0&&(f=E,g=mN(u,E))}if(g===1)throw g=Bm,qu(u,0),kc(u,f),Zs(u,tn()),g;if(g===6)throw Error(n(345));return u.finishedWork=u.current.alternate,u.finishedLanes=f,Ku(u,Js,il),Zs(u,tn()),null}function yN(u,f){var g=Gt;Gt|=1;try{return u(f)}finally{Gt=g,Gt===0&&(ef=tn()+500,av&&xc())}}function Hu(u){Nc!==null&&Nc.tag===0&&(Gt&6)===0&&tf();var f=Gt;Gt|=1;var g=Ji.transition,E=Ut;try{if(Ji.transition=null,Ut=1,u)return u()}finally{Ut=E,Ji.transition=g,Gt=f,(Gt&6)===0&&xc()}}function vN(){ki=Zh.current,Tn(Zh)}function qu(u,f){u.finishedWork=null,u.finishedLanes=0;var g=u.timeoutHandle;if(g!==-1&&(u.timeoutHandle=-1,CQ(g)),vr!==null)for(g=vr.return;g!==null;){var E=g;switch(TE(E),E.tag){case 1:E=E.type.childContextTypes,E!=null&&sv();break;case 3:Qh(),Tn(Gs),Tn(vs),VE();break;case 5:FE(E);break;case 4:Qh();break;case 13:Tn(Hn);break;case 19:Tn(Hn);break;case 10:DE(E.type._context);break;case 22:case 23:vN()}g=g.return}if(Br=u,vr=u=Tc(u.current,null),ss=ki=f,Cr=0,Bm=null,dN=Tv=Wu=0,Js=Um=null,Bu!==null){for(f=0;f<Bu.length;f++)if(g=Bu[f],E=g.interleaved,E!==null){g.interleaved=null;var T=E.next,A=g.pending;if(A!==null){var B=A.next;A.next=T,E.next=B}g.pending=E}Bu=null}return u}function pO(u,f){do{var g=vr;try{if(IE(),gv.current=bv,yv){for(var E=qn.memoizedState;E!==null;){var T=E.queue;T!==null&&(T.pending=null),E=E.next}yv=!1}if(zu=0,Vr=Tr=qn=null,Om=!1,Mm=0,uN.current=null,g===null||g.return===null){Cr=1,Bm=f,vr=null;break}e:{var A=u,B=g.return,J=g,re=f;if(f=ss,J.flags|=32768,re!==null&&typeof re=="object"&&typeof re.then=="function"){var xe=re,Ae=J,Oe=Ae.tag;if((Ae.mode&1)===0&&(Oe===0||Oe===11||Oe===15)){var Ce=Ae.alternate;Ce?(Ae.updateQueue=Ce.updateQueue,Ae.memoizedState=Ce.memoizedState,Ae.lanes=Ce.lanes):(Ae.updateQueue=null,Ae.memoizedState=null)}var Ge=$R(B);if(Ge!==null){Ge.flags&=-257,VR(Ge,B,J,A,f),Ge.mode&1&&FR(A,xe,f),f=Ge,re=xe;var et=f.updateQueue;if(et===null){var tt=new Set;tt.add(re),f.updateQueue=tt}else et.add(re);break e}else{if((f&1)===0){FR(A,xe,f),xN();break e}re=Error(n(426))}}else if(Rn&&J.mode&1){var or=$R(B);if(or!==null){(or.flags&65536)===0&&(or.flags|=256),VR(or,B,J,A,f),PE(Xh(re,J));break e}}A=re=Xh(re,J),Cr!==4&&(Cr=2),Um===null?Um=[A]:Um.push(A),A=B;do{switch(A.tag){case 3:A.flags|=65536,f&=-f,A.lanes|=f;var de=MR(A,re,f);cR(A,de);break e;case 1:J=re;var se=A.type,fe=A.stateNode;if((A.flags&128)===0&&(typeof se.getDerivedStateFromError=="function"||fe!==null&&typeof fe.componentDidCatch=="function"&&(Ec===null||!Ec.has(fe)))){A.flags|=65536,f&=-f,A.lanes|=f;var $e=LR(A,J,f);cR(A,$e);break e}}A=A.return}while(A!==null)}yO(g)}catch(rt){f=rt,vr===g&&g!==null&&(vr=g=g.return);continue}break}while(!0)}function mO(){var u=kv.current;return kv.current=bv,u===null?bv:u}function xN(){(Cr===0||Cr===3||Cr===2)&&(Cr=4),Br===null||(Wu&268435455)===0&&(Tv&268435455)===0||kc(Br,ss)}function Dv(u,f){var g=Gt;Gt|=2;var E=mO();(Br!==u||ss!==f)&&(il=null,qu(u,f));do try{ZQ();break}catch(T){pO(u,T)}while(!0);if(IE(),Gt=g,kv.current=E,vr!==null)throw Error(n(261));return Br=null,ss=0,Cr}function ZQ(){for(;vr!==null;)gO(vr)}function eX(){for(;vr!==null&&!_h();)gO(vr)}function gO(u){var f=bO(u.alternate,u,ki);u.memoizedProps=u.pendingProps,f===null?yO(u):vr=f,uN.current=null}function yO(u){var f=u;do{var g=f.alternate;if(u=f.return,(f.flags&32768)===0){if(g=qQ(g,f,ki),g!==null){vr=g;return}}else{if(g=KQ(g,f),g!==null){g.flags&=32767,vr=g;return}if(u!==null)u.flags|=32768,u.subtreeFlags=0,u.deletions=null;else{Cr=6,vr=null;return}}if(f=f.sibling,f!==null){vr=f;return}vr=f=u}while(f!==null);Cr===0&&(Cr=5)}function Ku(u,f,g){var E=Ut,T=Ji.transition;try{Ji.transition=null,Ut=1,tX(u,f,g,E)}finally{Ji.transition=T,Ut=E}return null}function tX(u,f,g,E){do tf();while(Nc!==null);if((Gt&6)!==0)throw Error(n(327));g=u.finishedWork;var T=u.finishedLanes;if(g===null)return null;if(u.finishedWork=null,u.finishedLanes=0,g===u.current)throw Error(n(177));u.callbackNode=null,u.callbackPriority=0;var A=g.lanes|g.childLanes;if(fn(u,A),u===Br&&(vr=Br=null,ss=0),(g.subtreeFlags&2064)===0&&(g.flags&2064)===0||jv||(jv=!0,wO(Ze,function(){return tf(),null})),A=(g.flags&15990)!==0,(g.subtreeFlags&15990)!==0||A){A=Ji.transition,Ji.transition=null;var B=Ut;Ut=1;var J=Gt;Gt|=4,uN.current=null,GQ(u,g),oO(g,u),wQ(xE),fc=!!vE,xE=vE=null,u.current=g,QQ(g),pm(),Gt=J,Ut=B,Ji.transition=A}else u.current=g;if(jv&&(jv=!1,Nc=u,Pv=T),A=u.pendingLanes,A===0&&(Ec=null),kt(g.stateNode),Zs(u,tn()),f!==null)for(E=u.onRecoverableError,g=0;g<f.length;g++)T=f[g],E(T.value,{componentStack:T.stack,digest:T.digest});if(Cv)throw Cv=!1,u=fN,fN=null,u;return(Pv&1)!==0&&u.tag!==0&&tf(),A=u.pendingLanes,(A&1)!==0?u===pN?zm++:(zm=0,pN=u):zm=0,xc(),null}function tf(){if(Nc!==null){var u=dc(Pv),f=Ji.transition,g=Ut;try{if(Ji.transition=null,Ut=16>u?16:u,Nc===null)var E=!1;else{if(u=Nc,Nc=null,Pv=0,(Gt&6)!==0)throw Error(n(331));var T=Gt;for(Gt|=4,Xe=u.current;Xe!==null;){var A=Xe,B=A.child;if((Xe.flags&16)!==0){var J=A.deletions;if(J!==null){for(var re=0;re<J.length;re++){var xe=J[re];for(Xe=xe;Xe!==null;){var Ae=Xe;switch(Ae.tag){case 0:case 11:case 15:Vm(8,Ae,A)}var Oe=Ae.child;if(Oe!==null)Oe.return=Ae,Xe=Oe;else for(;Xe!==null;){Ae=Xe;var Ce=Ae.sibling,Ge=Ae.return;if(nO(Ae),Ae===xe){Xe=null;break}if(Ce!==null){Ce.return=Ge,Xe=Ce;break}Xe=Ge}}}var et=A.alternate;if(et!==null){var tt=et.child;if(tt!==null){et.child=null;do{var or=tt.sibling;tt.sibling=null,tt=or}while(tt!==null)}}Xe=A}}if((A.subtreeFlags&2064)!==0&&B!==null)B.return=A,Xe=B;else e:for(;Xe!==null;){if(A=Xe,(A.flags&2048)!==0)switch(A.tag){case 0:case 11:case 15:Vm(9,A,A.return)}var de=A.sibling;if(de!==null){de.return=A.return,Xe=de;break e}Xe=A.return}}var se=u.current;for(Xe=se;Xe!==null;){B=Xe;var fe=B.child;if((B.subtreeFlags&2064)!==0&&fe!==null)fe.return=B,Xe=fe;else e:for(B=se;Xe!==null;){if(J=Xe,(J.flags&2048)!==0)try{switch(J.tag){case 0:case 11:case 15:Sv(9,J)}}catch(rt){er(J,J.return,rt)}if(J===B){Xe=null;break e}var $e=J.sibling;if($e!==null){$e.return=J.return,Xe=$e;break e}Xe=J.return}}if(Gt=T,xc(),ot&&typeof ot.onPostCommitFiberRoot=="function")try{ot.onPostCommitFiberRoot(Tt,u)}catch{}E=!0}return E}finally{Ut=g,Ji.transition=f}}return!1}function vO(u,f,g){f=Xh(g,f),f=MR(u,f,1),u=wc(u,f,1),f=Ms(),u!==null&&(cc(u,1,f),Zs(u,f))}function er(u,f,g){if(u.tag===3)vO(u,u,g);else for(;f!==null;){if(f.tag===3){vO(f,u,g);break}else if(f.tag===1){var E=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(Ec===null||!Ec.has(E))){u=Xh(g,u),u=LR(f,u,1),f=wc(f,u,1),u=Ms(),f!==null&&(cc(f,1,u),Zs(f,u));break}}f=f.return}}function nX(u,f,g){var E=u.pingCache;E!==null&&E.delete(f),f=Ms(),u.pingedLanes|=u.suspendedLanes&g,Br===u&&(ss&g)===g&&(Cr===4||Cr===3&&(ss&130023424)===ss&&500>tn()-hN?qu(u,0):dN|=g),Zs(u,f)}function xO(u,f){f===0&&((u.mode&1)===0?f=1:(f=Hi,Hi<<=1,(Hi&130023424)===0&&(Hi=4194304)));var g=Ms();u=nl(u,f),u!==null&&(cc(u,f,g),Zs(u,g))}function rX(u){var f=u.memoizedState,g=0;f!==null&&(g=f.retryLane),xO(u,g)}function sX(u,f){var g=0;switch(u.tag){case 13:var E=u.stateNode,T=u.memoizedState;T!==null&&(g=T.retryLane);break;case 19:E=u.stateNode;break;default:throw Error(n(314))}E!==null&&E.delete(f),xO(u,g)}var bO;bO=function(u,f,g){if(u!==null)if(u.memoizedProps!==f.pendingProps||Gs.current)Xs=!0;else{if((u.lanes&g)===0&&(f.flags&128)===0)return Xs=!1,HQ(u,f,g);Xs=(u.flags&131072)!==0}else Xs=!1,Rn&&(f.flags&1048576)!==0&&ZD(f,lv,f.index);switch(f.lanes=0,f.tag){case 2:var E=f.type;Ev(u,f),u=f.pendingProps;var T=zh(f,vs.current);Gh(f,g),T=zE(null,f,E,u,T,g);var A=WE();return f.flags|=1,typeof T=="object"&&T!==null&&typeof T.render=="function"&&T.$$typeof===void 0?(f.tag=1,f.memoizedState=null,f.updateQueue=null,Qs(E)?(A=!0,iv(f)):A=!1,f.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,ME(f),T.updater=wv,f.stateNode=T,T._reactInternals=f,QE(f,E,u,g),f=eN(null,f,E,!0,A,g)):(f.tag=0,Rn&&A&&kE(f),Os(null,f,T,g),f=f.child),f;case 16:E=f.elementType;e:{switch(Ev(u,f),u=f.pendingProps,T=E._init,E=T(E._payload),f.type=E,T=f.tag=aX(E),u=Sa(E,u),T){case 0:f=ZE(null,f,E,u,g);break e;case 1:f=qR(null,f,E,u,g);break e;case 11:f=BR(null,f,E,u,g);break e;case 14:f=UR(null,f,E,Sa(E.type,u),g);break e}throw Error(n(306,E,""))}return f;case 0:return E=f.type,T=f.pendingProps,T=f.elementType===E?T:Sa(E,T),ZE(u,f,E,T,g);case 1:return E=f.type,T=f.pendingProps,T=f.elementType===E?T:Sa(E,T),qR(u,f,E,T,g);case 3:e:{if(KR(f),u===null)throw Error(n(387));E=f.pendingProps,A=f.memoizedState,T=A.element,lR(u,f),pv(f,E,null,g);var B=f.memoizedState;if(E=B.element,A.isDehydrated)if(A={element:E,isDehydrated:!1,cache:B.cache,pendingSuspenseBoundaries:B.pendingSuspenseBoundaries,transitions:B.transitions},f.updateQueue.baseState=A,f.memoizedState=A,f.flags&256){T=Xh(Error(n(423)),f),f=YR(u,f,E,g,T);break e}else if(E!==T){T=Xh(Error(n(424)),f),f=YR(u,f,E,g,T);break e}else for(Si=gc(f.stateNode.containerInfo.firstChild),Ni=f,Rn=!0,Na=null,g=aR(f,null,E,g),f.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling;else{if(qh(),E===T){f=sl(u,f,g);break e}Os(u,f,E,g)}f=f.child}return f;case 5:return dR(f),u===null&&jE(f),E=f.type,T=f.pendingProps,A=u!==null?u.memoizedProps:null,B=T.children,bE(E,T)?B=null:A!==null&&bE(E,A)&&(f.flags|=32),HR(u,f),Os(u,f,B,g),f.child;case 6:return u===null&&jE(f),null;case 13:return GR(u,f,g);case 4:return LE(f,f.stateNode.containerInfo),E=f.pendingProps,u===null?f.child=Kh(f,null,E,g):Os(u,f,E,g),f.child;case 11:return E=f.type,T=f.pendingProps,T=f.elementType===E?T:Sa(E,T),BR(u,f,E,T,g);case 7:return Os(u,f,f.pendingProps,g),f.child;case 8:return Os(u,f,f.pendingProps.children,g),f.child;case 12:return Os(u,f,f.pendingProps.children,g),f.child;case 10:e:{if(E=f.type._context,T=f.pendingProps,A=f.memoizedProps,B=T.value,_n(dv,E._currentValue),E._currentValue=B,A!==null)if(Ea(A.value,B)){if(A.children===T.children&&!Gs.current){f=sl(u,f,g);break e}}else for(A=f.child,A!==null&&(A.return=f);A!==null;){var J=A.dependencies;if(J!==null){B=A.child;for(var re=J.firstContext;re!==null;){if(re.context===E){if(A.tag===1){re=rl(-1,g&-g),re.tag=2;var xe=A.updateQueue;if(xe!==null){xe=xe.shared;var Ae=xe.pending;Ae===null?re.next=re:(re.next=Ae.next,Ae.next=re),xe.pending=re}}A.lanes|=g,re=A.alternate,re!==null&&(re.lanes|=g),RE(A.return,g,f),J.lanes|=g;break}re=re.next}}else if(A.tag===10)B=A.type===f.type?null:A.child;else if(A.tag===18){if(B=A.return,B===null)throw Error(n(341));B.lanes|=g,J=B.alternate,J!==null&&(J.lanes|=g),RE(B,g,f),B=A.sibling}else B=A.child;if(B!==null)B.return=A;else for(B=A;B!==null;){if(B===f){B=null;break}if(A=B.sibling,A!==null){A.return=B.return,B=A;break}B=B.return}A=B}Os(u,f,T.children,g),f=f.child}return f;case 9:return T=f.type,E=f.pendingProps.children,Gh(f,g),T=Qi(T),E=E(T),f.flags|=1,Os(u,f,E,g),f.child;case 14:return E=f.type,T=Sa(E,f.pendingProps),T=Sa(E.type,T),UR(u,f,E,T,g);case 15:return zR(u,f,f.type,f.pendingProps,g);case 17:return E=f.type,T=f.pendingProps,T=f.elementType===E?T:Sa(E,T),Ev(u,f),f.tag=1,Qs(E)?(u=!0,iv(f)):u=!1,Gh(f,g),RR(f,E,T),QE(f,E,T,g),eN(null,f,E,!0,u,g);case 19:return XR(u,f,g);case 22:return WR(u,f,g)}throw Error(n(156,f.tag))};function wO(u,f){return ic(u,f)}function iX(u,f,g,E){this.tag=u,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zi(u,f,g,E){return new iX(u,f,g,E)}function bN(u){return u=u.prototype,!(!u||!u.isReactComponent)}function aX(u){if(typeof u=="function")return bN(u)?1:0;if(u!=null){if(u=u.$$typeof,u===U)return 11;if(u===Q)return 14}return 2}function Tc(u,f){var g=u.alternate;return g===null?(g=Zi(u.tag,f,u.key,u.mode),g.elementType=u.elementType,g.type=u.type,g.stateNode=u.stateNode,g.alternate=u,u.alternate=g):(g.pendingProps=f,g.type=u.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=u.flags&14680064,g.childLanes=u.childLanes,g.lanes=u.lanes,g.child=u.child,g.memoizedProps=u.memoizedProps,g.memoizedState=u.memoizedState,g.updateQueue=u.updateQueue,f=u.dependencies,g.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},g.sibling=u.sibling,g.index=u.index,g.ref=u.ref,g}function Rv(u,f,g,E,T,A){var B=2;if(E=u,typeof u=="function")bN(u)&&(B=1);else if(typeof u=="string")B=5;else e:switch(u){case P:return Yu(g.children,T,A,f);case C:B=8,T|=8;break;case D:return u=Zi(12,g,f,T|2),u.elementType=D,u.lanes=A,u;case I:return u=Zi(13,g,f,T),u.elementType=I,u.lanes=A,u;case z:return u=Zi(19,g,f,T),u.elementType=z,u.lanes=A,u;case W:return Ov(g,T,A,f);default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case $:B=10;break e;case F:B=9;break e;case U:B=11;break e;case Q:B=14;break e;case ne:B=16,E=null;break e}throw Error(n(130,u==null?u:typeof u,""))}return f=Zi(B,g,f,T),f.elementType=u,f.type=E,f.lanes=A,f}function Yu(u,f,g,E){return u=Zi(7,u,E,f),u.lanes=g,u}function Ov(u,f,g,E){return u=Zi(22,u,E,f),u.elementType=W,u.lanes=g,u.stateNode={isHidden:!1},u}function wN(u,f,g){return u=Zi(6,u,null,f),u.lanes=g,u}function _N(u,f,g){return f=Zi(4,u.children!==null?u.children:[],u.key,f),f.lanes=g,f.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},f}function oX(u,f,g,E,T){this.tag=f,this.containerInfo=u,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=lc(0),this.expirationTimes=lc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=lc(0),this.identifierPrefix=E,this.onRecoverableError=T,this.mutableSourceEagerHydrationData=null}function EN(u,f,g,E,T,A,B,J,re){return u=new oX(u,f,g,J,re),f===1?(f=1,A===!0&&(f|=8)):f=0,A=Zi(3,null,null,f),u.current=A,A.stateNode=u,A.memoizedState={element:E,isDehydrated:g,cache:null,transitions:null,pendingSuspenseBoundaries:null},ME(A),u}function lX(u,f,g){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:M,key:E==null?null:""+E,children:u,containerInfo:f,implementation:g}}function _O(u){if(!u)return vc;u=u._reactInternals;e:{if(xi(u)!==u||u.tag!==1)throw Error(n(170));var f=u;do{switch(f.tag){case 3:f=f.stateNode.context;break e;case 1:if(Qs(f.type)){f=f.stateNode.__reactInternalMemoizedMergedChildContext;break e}}f=f.return}while(f!==null);throw Error(n(171))}if(u.tag===1){var g=u.type;if(Qs(g))return QD(u,g,f)}return f}function EO(u,f,g,E,T,A,B,J,re){return u=EN(g,E,!0,u,T,A,B,J,re),u.context=_O(null),g=u.current,E=Ms(),T=Sc(g),A=rl(E,T),A.callback=f??null,wc(g,A,T),u.current.lanes=T,cc(u,T,E),Zs(u,E),u}function Mv(u,f,g,E){var T=f.current,A=Ms(),B=Sc(T);return g=_O(g),f.context===null?f.context=g:f.pendingContext=g,f=rl(A,B),f.payload={element:u},E=E===void 0?null:E,E!==null&&(f.callback=E),u=wc(T,f,B),u!==null&&(Ca(u,T,B,A),fv(u,T,B)),B}function Lv(u){if(u=u.current,!u.child)return null;switch(u.child.tag){case 5:return u.child.stateNode;default:return u.child.stateNode}}function NO(u,f){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var g=u.retryLane;u.retryLane=g!==0&&g<f?g:f}}function NN(u,f){NO(u,f),(u=u.alternate)&&NO(u,f)}function cX(){return null}var SO=typeof reportError=="function"?reportError:function(u){console.error(u)};function SN(u){this._internalRoot=u}Fv.prototype.render=SN.prototype.render=function(u){var f=this._internalRoot;if(f===null)throw Error(n(409));Mv(u,f,null,null)},Fv.prototype.unmount=SN.prototype.unmount=function(){var u=this._internalRoot;if(u!==null){this._internalRoot=null;var f=u.containerInfo;Hu(function(){Mv(null,u,null,null)}),f[Jo]=null}};function Fv(u){this._internalRoot=u}Fv.prototype.unstable_scheduleHydration=function(u){if(u){var f=Fy();u={blockedOn:null,target:u,priority:f};for(var g=0;g<io.length&&f!==0&&f<io[g].priority;g++);io.splice(g,0,u),g===0&&By(u)}};function kN(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)}function $v(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11&&(u.nodeType!==8||u.nodeValue!==" react-mount-point-unstable "))}function kO(){}function uX(u,f,g,E,T){if(T){if(typeof E=="function"){var A=E;E=function(){var xe=Lv(B);A.call(xe)}}var B=EO(f,E,u,0,null,!1,!1,"",kO);return u._reactRootContainer=B,u[Jo]=B.current,Tm(u.nodeType===8?u.parentNode:u),Hu(),B}for(;T=u.lastChild;)u.removeChild(T);if(typeof E=="function"){var J=E;E=function(){var xe=Lv(re);J.call(xe)}}var re=EN(u,0,!1,null,null,!1,!1,"",kO);return u._reactRootContainer=re,u[Jo]=re.current,Tm(u.nodeType===8?u.parentNode:u),Hu(function(){Mv(f,re,g,E)}),re}function Vv(u,f,g,E,T){var A=g._reactRootContainer;if(A){var B=A;if(typeof T=="function"){var J=T;T=function(){var re=Lv(B);J.call(re)}}Mv(f,B,u,T)}else B=uX(g,f,u,T,E);return Lv(B)}My=function(u){switch(u.tag){case 3:var f=u.stateNode;if(f.current.memoizedState.isDehydrated){var g=oc(f.pendingLanes);g!==0&&(uc(f,g|1),Zs(f,tn()),(Gt&6)===0&&(ef=tn()+500,xc()))}break;case 13:Hu(function(){var E=nl(u,1);if(E!==null){var T=Ms();Ca(E,u,1,T)}}),NN(u,1)}},Sh=function(u){if(u.tag===13){var f=nl(u,134217728);if(f!==null){var g=Ms();Ca(f,u,134217728,g)}NN(u,134217728)}},Ly=function(u){if(u.tag===13){var f=Sc(u),g=nl(u,f);if(g!==null){var E=Ms();Ca(g,u,f,E)}NN(u,f)}},Fy=function(){return Ut},$y=function(u,f){var g=Ut;try{return Ut=u,f()}finally{Ut=g}},Wn=function(u,f,g){switch(f){case"input":if(ke(u,g),f=g.name,g.type==="radio"&&f!=null){for(g=u;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll("input[name="+JSON.stringify(""+f)+'][type="radio"]'),f=0;f<g.length;f++){var E=g[f];if(E!==u&&E.form===u.form){var T=rv(E);if(!T)throw Error(n(90));ie(E),ke(E,T)}}}break;case"textarea":xn(u,g);break;case"select":f=g.value,f!=null&&ut(u,!!g.multiple,f,!1)}},Xn=yN,ar=Hu;var dX={usingClientEntryPoint:!1,Events:[Pm,Bh,rv,wn,ys,yN]},Wm={findFiberByHostInstance:Lu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},hX={bundleType:Wm.bundleType,version:Wm.version,rendererPackageName:Wm.rendererPackageName,rendererConfig:Wm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:O.ReactCurrentDispatcher,findHostInstanceByFiber:function(u){return u=Cu(u),u===null?null:u.stateNode},findFiberByHostInstance:Wm.findFiberByHostInstance||cX,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bv.isDisabled&&Bv.supportsFiber)try{Tt=Bv.inject(hX),ot=Bv}catch{}}return ei.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dX,ei.createPortal=function(u,f){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!kN(f))throw Error(n(200));return lX(u,f,null,g)},ei.createRoot=function(u,f){if(!kN(u))throw Error(n(299));var g=!1,E="",T=SO;return f!=null&&(f.unstable_strictMode===!0&&(g=!0),f.identifierPrefix!==void 0&&(E=f.identifierPrefix),f.onRecoverableError!==void 0&&(T=f.onRecoverableError)),f=EN(u,1,!1,null,null,g,!1,E,T),u[Jo]=f.current,Tm(u.nodeType===8?u.parentNode:u),new SN(f)},ei.findDOMNode=function(u){if(u==null)return null;if(u.nodeType===1)return u;var f=u._reactInternals;if(f===void 0)throw typeof u.render=="function"?Error(n(188)):(u=Object.keys(u).join(","),Error(n(268,u)));return u=Cu(f),u=u===null?null:u.stateNode,u},ei.flushSync=function(u){return Hu(u)},ei.hydrate=function(u,f,g){if(!$v(f))throw Error(n(200));return Vv(null,u,f,!0,g)},ei.hydrateRoot=function(u,f,g){if(!kN(u))throw Error(n(405));var E=g!=null&&g.hydratedSources||null,T=!1,A="",B=SO;if(g!=null&&(g.unstable_strictMode===!0&&(T=!0),g.identifierPrefix!==void 0&&(A=g.identifierPrefix),g.onRecoverableError!==void 0&&(B=g.onRecoverableError)),f=EO(f,null,u,1,g??null,T,!1,A,B),u[Jo]=f.current,Tm(u),E)for(u=0;u<E.length;u++)g=E[u],T=g._getVersion,T=T(g._source),f.mutableSourceEagerHydrationData==null?f.mutableSourceEagerHydrationData=[g,T]:f.mutableSourceEagerHydrationData.push(g,T);return new Fv(f)},ei.render=function(u,f,g){if(!$v(f))throw Error(n(200));return Vv(null,u,f,!1,g)},ei.unmountComponentAtNode=function(u){if(!$v(u))throw Error(n(40));return u._reactRootContainer?(Hu(function(){Vv(null,null,u,!1,function(){u._reactRootContainer=null,u[Jo]=null})}),!0):!1},ei.unstable_batchedUpdates=yN,ei.unstable_renderSubtreeIntoContainer=function(u,f,g,E){if(!$v(g))throw Error(n(200));if(u==null||u._reactInternals===void 0)throw Error(n(38));return Vv(u,f,g,!1,E)},ei.version="18.3.1-next-f1338f8080-20240426",ei}var RO;function zV(){if(RO)return jN.exports;RO=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),jN.exports=bX(),jN.exports}var OO;function wX(){if(OO)return Uv;OO=1;var t=zV();return Uv.createRoot=t.createRoot,Uv.hydrateRoot=t.hydrateRoot,Uv}var _X=wX();const EX=Xa(_X);var v=Lp();const oe=Xa(v),Oj=pX({__proto__:null,default:oe},[v]);/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var MO="popstate";function NX(t={}){function e(r,s){let{pathname:i,search:a,hash:o}=r.location;return dT("",{pathname:i,search:a,hash:o},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Xg(s)}return kX(e,n,null,t)}function Bn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function qa(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function SX(){return Math.random().toString(36).substring(2,10)}function LO(t,e){return{usr:t.state,key:t.key,idx:e}}function dT(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Fp(e):e,state:n,key:e&&e.key||r||SX()}}function Xg({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Fp(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function kX(t,e,n,r={}){let{window:s=document.defaultView,v5Compat:i=!1}=r,a=s.history,o="POP",c=null,d=h();d==null&&(d=0,a.replaceState({...a.state,idx:d},""));function h(){return(a.state||{idx:null}).idx}function p(){o="POP";let w=h(),N=w==null?null:w-d;d=w,c&&c({action:o,location:_.location,delta:N})}function m(w,N){o="PUSH";let k=dT(_.location,w,N);d=h()+1;let S=LO(k,d),O=_.createHref(k);try{a.pushState(S,"",O)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;s.location.assign(O)}i&&c&&c({action:o,location:_.location,delta:1})}function y(w,N){o="REPLACE";let k=dT(_.location,w,N);d=h();let S=LO(k,d),O=_.createHref(k);a.replaceState(S,"",O),i&&c&&c({action:o,location:_.location,delta:0})}function x(w){return TX(w)}let _={get action(){return o},get location(){return t(s,a)},listen(w){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(MO,p),c=w,()=>{s.removeEventListener(MO,p),c=null}},createHref(w){return e(s,w)},createURL:x,encodeLocation(w){let N=x(w);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:m,replace:y,go(w){return a.go(w)}};return _}function TX(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Bn(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Xg(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function WV(t,e,n="/"){return CX(t,e,n,!1)}function CX(t,e,n,r){let s=typeof e=="string"?Fp(e):e,i=Ol(s.pathname||"/",n);if(i==null)return null;let a=HV(t);jX(a);let o=null;for(let c=0;o==null&&c<a.length;++c){let d=VX(i);o=FX(a[c],d,r)}return o}function HV(t,e=[],n=[],r="",s=!1){let i=(a,o,c=s,d)=>{let h={relativePath:d===void 0?a.path||"":d,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(r)&&c)return;Bn(h.relativePath.startsWith(r),`Absolute route path "${h.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(r.length)}let p=Nl([r,h.relativePath]),m=n.concat(h);a.children&&a.children.length>0&&(Bn(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),HV(a.children,e,m,p,c)),!(a.path==null&&!a.index)&&e.push({path:p,score:MX(p,a.index),routesMeta:m})};return t.forEach((a,o)=>{if(a.path===""||!a.path?.includes("?"))i(a,o);else for(let c of qV(a.path))i(a,o,!0,c)}),e}function qV(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let a=qV(r.join("/")),o=[];return o.push(...a.map(c=>c===""?i:[i,c].join("/"))),s&&o.push(...a),o.map(c=>t.startsWith("/")&&c===""?"/":c)}function jX(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:LX(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var PX=/^:[\w-]+$/,AX=3,IX=2,DX=1,RX=10,OX=-2,FO=t=>t==="*";function MX(t,e){let n=t.split("/"),r=n.length;return n.some(FO)&&(r+=OX),e&&(r+=IX),n.filter(s=>!FO(s)).reduce((s,i)=>s+(PX.test(i)?AX:i===""?DX:RX),r)}function LX(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function FX(t,e,n=!1){let{routesMeta:r}=t,s={},i="/",a=[];for(let o=0;o<r.length;++o){let c=r[o],d=o===r.length-1,h=i==="/"?e:e.slice(i.length)||"/",p=fb({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},h),m=c.route;if(!p&&d&&n&&!r[r.length-1].route.index&&(p=fb({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},h)),!p)return null;Object.assign(s,p.params),a.push({params:s,pathname:Nl([i,p.pathname]),pathnameBase:WX(Nl([i,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(i=Nl([i,p.pathnameBase]))}return a}function fb(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=$X(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:r.reduce((d,{paramName:h,isOptional:p},m)=>{if(h==="*"){let x=o[m]||"";a=i.slice(0,i.length-x.length).replace(/(.)\/+$/,"$1")}const y=o[m];return p&&!y?d[h]=void 0:d[h]=(y||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:a,pattern:t}}function $X(t,e=!1,n=!0){qa(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,c)=>(r.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function VX(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return qa(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Ol(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function BX(t,e="/"){let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Fp(t):t;return{pathname:n?n.startsWith("/")?n:UX(n,e):e,search:HX(r),hash:qX(s)}}function UX(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function IN(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function zX(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Mj(t){let e=zX(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function Lj(t,e,n,r=!1){let s;typeof t=="string"?s=Fp(t):(s={...t},Bn(!s.pathname||!s.pathname.includes("?"),IN("?","pathname","search",s)),Bn(!s.pathname||!s.pathname.includes("#"),IN("#","pathname","hash",s)),Bn(!s.search||!s.search.includes("#"),IN("#","search","hash",s)));let i=t===""||s.pathname==="",a=i?"/":s.pathname,o;if(a==null)o=n;else{let p=e.length-1;if(!r&&a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),p-=1;s.pathname=m.join("/")}o=p>=0?e[p]:"/"}let c=BX(s,o),d=a&&a!=="/"&&a.endsWith("/"),h=(i||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||h)&&(c.pathname+="/"),c}var Nl=t=>t.join("/").replace(/\/\/+/g,"/"),WX=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),HX=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,qX=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function KX(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var KV=["POST","PUT","PATCH","DELETE"];new Set(KV);var YX=["GET",...KV];new Set(YX);var $p=v.createContext(null);$p.displayName="DataRouter";var p1=v.createContext(null);p1.displayName="DataRouterState";v.createContext(!1);var YV=v.createContext({isTransitioning:!1});YV.displayName="ViewTransition";var GX=v.createContext(new Map);GX.displayName="Fetchers";var QX=v.createContext(null);QX.displayName="Await";var Ja=v.createContext(null);Ja.displayName="Navigation";var F0=v.createContext(null);F0.displayName="Location";var Za=v.createContext({outlet:null,matches:[],isDataRoute:!1});Za.displayName="Route";var Fj=v.createContext(null);Fj.displayName="RouteError";function XX(t,{relative:e}={}){Bn(Vp(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=v.useContext(Ja),{hash:s,pathname:i,search:a}=$0(t,{relative:e}),o=i;return n!=="/"&&(o=i==="/"?n:Nl([n,i])),r.createHref({pathname:o,search:a,hash:s})}function Vp(){return v.useContext(F0)!=null}function Bo(){return Bn(Vp(),"useLocation() may be used only in the context of a <Router> component."),v.useContext(F0).location}var GV="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function QV(t){v.useContext(Ja).static||v.useLayoutEffect(t)}function eo(){let{isDataRoute:t}=v.useContext(Za);return t?uJ():JX()}function JX(){Bn(Vp(),"useNavigate() may be used only in the context of a <Router> component.");let t=v.useContext($p),{basename:e,navigator:n}=v.useContext(Ja),{matches:r}=v.useContext(Za),{pathname:s}=Bo(),i=JSON.stringify(Mj(r)),a=v.useRef(!1);return QV(()=>{a.current=!0}),v.useCallback((c,d={})=>{if(qa(a.current,GV),!a.current)return;if(typeof c=="number"){n.go(c);return}let h=Lj(c,JSON.parse(i),s,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Nl([e,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[e,n,i,s,t])}v.createContext(null);function uh(){let{matches:t}=v.useContext(Za),e=t[t.length-1];return e?e.params:{}}function $0(t,{relative:e}={}){let{matches:n}=v.useContext(Za),{pathname:r}=Bo(),s=JSON.stringify(Mj(n));return v.useMemo(()=>Lj(t,JSON.parse(s),r,e==="path"),[t,s,r,e])}function ZX(t,e){return XV(t,e)}function XV(t,e,n,r,s){Bn(Vp(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=v.useContext(Ja),{matches:a}=v.useContext(Za),o=a[a.length-1],c=o?o.params:{},d=o?o.pathname:"/",h=o?o.pathnameBase:"/",p=o&&o.route;{let k=p&&p.path||"";JV(d,!p||k.endsWith("*")||k.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${k}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${k}"> to <Route path="${k==="/"?"*":`${k}/*`}">.`)}let m=Bo(),y;if(e){let k=typeof e=="string"?Fp(e):e;Bn(h==="/"||k.pathname?.startsWith(h),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${k.pathname}" was given in the \`location\` prop.`),y=k}else y=m;let x=y.pathname||"/",_=x;if(h!=="/"){let k=h.replace(/^\//,"").split("/");_="/"+x.replace(/^\//,"").split("/").slice(k.length).join("/")}let w=WV(t,{pathname:_});qa(p||w!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),qa(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let N=sJ(w&&w.map(k=>Object.assign({},k,{params:Object.assign({},c,k.params),pathname:Nl([h,i.encodeLocation?i.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?h:Nl([h,i.encodeLocation?i.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),a,n,r,s);return e&&N?v.createElement(F0.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},N):N}function eJ(){let t=cJ(),e=KX(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},a=null;return console.error("Error handled by React Router default ErrorBoundary:",t),a=v.createElement(v.Fragment,null,v.createElement("p",null,"💿 Hey developer 👋"),v.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",v.createElement("code",{style:i},"ErrorBoundary")," or"," ",v.createElement("code",{style:i},"errorElement")," prop on your route.")),v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},e),n?v.createElement("pre",{style:s},n):null,a)}var tJ=v.createElement(eJ,null),nJ=class extends v.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?v.createElement(Za.Provider,{value:this.props.routeContext},v.createElement(Fj.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function rJ({routeContext:t,match:e,children:n}){let r=v.useContext($p);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),v.createElement(Za.Provider,{value:t},n)}function sJ(t,e=[],n=null,r=null,s=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,a=n?.errors;if(a!=null){let d=i.findIndex(h=>h.route.id&&a?.[h.route.id]!==void 0);Bn(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),i=i.slice(0,Math.min(i.length,d+1))}let o=!1,c=-1;if(n)for(let d=0;d<i.length;d++){let h=i[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:p,errors:m}=n,y=h.route.loader&&!p.hasOwnProperty(h.route.id)&&(!m||m[h.route.id]===void 0);if(h.route.lazy||y){o=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}return i.reduceRight((d,h,p)=>{let m,y=!1,x=null,_=null;n&&(m=a&&h.route.id?a[h.route.id]:void 0,x=h.route.errorElement||tJ,o&&(c<0&&p===0?(JV("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,_=null):c===p&&(y=!0,_=h.route.hydrateFallbackElement||null)));let w=e.concat(i.slice(0,p+1)),N=()=>{let k;return m?k=x:y?k=_:h.route.Component?k=v.createElement(h.route.Component,null):h.route.element?k=h.route.element:k=d,v.createElement(rJ,{match:h,routeContext:{outlet:d,matches:w,isDataRoute:n!=null},children:k})};return n&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?v.createElement(nJ,{location:n.location,revalidation:n.revalidation,component:x,error:m,children:N(),routeContext:{outlet:null,matches:w,isDataRoute:!0},unstable_onError:r}):N()},null)}function $j(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function iJ(t){let e=v.useContext($p);return Bn(e,$j(t)),e}function aJ(t){let e=v.useContext(p1);return Bn(e,$j(t)),e}function oJ(t){let e=v.useContext(Za);return Bn(e,$j(t)),e}function Vj(t){let e=oJ(t),n=e.matches[e.matches.length-1];return Bn(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function lJ(){return Vj("useRouteId")}function cJ(){let t=v.useContext(Fj),e=aJ("useRouteError"),n=Vj("useRouteError");return t!==void 0?t:e.errors?.[n]}function uJ(){let{router:t}=iJ("useNavigate"),e=Vj("useNavigate"),n=v.useRef(!1);return QV(()=>{n.current=!0}),v.useCallback(async(s,i={})=>{qa(n.current,GV),n.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:e,...i}))},[t,e])}var $O={};function JV(t,e,n){!e&&!$O[t]&&($O[t]=!0,qa(!1,n))}v.memo(dJ);function dJ({routes:t,future:e,state:n,unstable_onError:r}){return XV(t,void 0,n,r,e)}function ZV({to:t,replace:e,state:n,relative:r}){Bn(Vp(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=v.useContext(Ja);qa(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=v.useContext(Za),{pathname:a}=Bo(),o=eo(),c=Lj(t,Mj(i),a,r==="path"),d=JSON.stringify(c);return v.useEffect(()=>{o(JSON.parse(d),{replace:e,state:n,relative:r})},[o,d,r,e,n]),null}function Ls(t){Bn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function hJ({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:s,static:i=!1}){Bn(!Vp(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=t.replace(/^\/*/,"/"),o=v.useMemo(()=>({basename:a,navigator:s,static:i,future:{}}),[a,s,i]);typeof n=="string"&&(n=Fp(n));let{pathname:c="/",search:d="",hash:h="",state:p=null,key:m="default"}=n,y=v.useMemo(()=>{let x=Ol(c,a);return x==null?null:{location:{pathname:x,search:d,hash:h,state:p,key:m},navigationType:r}},[a,c,d,h,p,m,r]);return qa(y!=null,`<Router basename="${a}"> is not able to match the URL "${c}${d}${h}" because it does not start with the basename, so the <Router> won't render anything.`),y==null?null:v.createElement(Ja.Provider,{value:o},v.createElement(F0.Provider,{children:e,value:y}))}function fJ({children:t,location:e}){return ZX(hT(t),e)}function hT(t,e=[]){let n=[];return v.Children.forEach(t,(r,s)=>{if(!v.isValidElement(r))return;let i=[...e,s];if(r.type===v.Fragment){n.push.apply(n,hT(r.props.children,i));return}Bn(r.type===Ls,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Bn(!r.props.index||!r.props.children,"An index route cannot have child routes.");let a={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=hT(r.props.children,i)),n.push(a)}),n}var Ix="get",Dx="application/x-www-form-urlencoded";function m1(t){return t!=null&&typeof t.tagName=="string"}function pJ(t){return m1(t)&&t.tagName.toLowerCase()==="button"}function mJ(t){return m1(t)&&t.tagName.toLowerCase()==="form"}function gJ(t){return m1(t)&&t.tagName.toLowerCase()==="input"}function yJ(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function vJ(t,e){return t.button===0&&(!e||e==="_self")&&!yJ(t)}var zv=null;function xJ(){if(zv===null)try{new FormData(document.createElement("form"),0),zv=!1}catch{zv=!0}return zv}var bJ=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function DN(t){return t!=null&&!bJ.has(t)?(qa(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Dx}"`),null):t}function wJ(t,e){let n,r,s,i,a;if(mJ(t)){let o=t.getAttribute("action");r=o?Ol(o,e):null,n=t.getAttribute("method")||Ix,s=DN(t.getAttribute("enctype"))||Dx,i=new FormData(t)}else if(pJ(t)||gJ(t)&&(t.type==="submit"||t.type==="image")){let o=t.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||o.getAttribute("action");if(r=c?Ol(c,e):null,n=t.getAttribute("formmethod")||o.getAttribute("method")||Ix,s=DN(t.getAttribute("formenctype"))||DN(o.getAttribute("enctype"))||Dx,i=new FormData(o,t),!xJ()){let{name:d,type:h,value:p}=t;if(h==="image"){let m=d?`${d}.`:"";i.append(`${m}x`,"0"),i.append(`${m}y`,"0")}else d&&i.append(d,p)}}else{if(m1(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Ix,r=null,s=Dx,a=t}return i&&s==="text/plain"&&(a=i,i=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:i,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Bj(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function _J(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&Ol(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function EJ(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function NJ(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function SJ(t,e,n){let r=await Promise.all(t.map(async s=>{let i=e.routes[s.route.id];if(i){let a=await EJ(i,n);return a.links?a.links():[]}return[]}));return jJ(r.flat(1).filter(NJ).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function VO(t,e,n,r,s,i){let a=(c,d)=>n[d]?c.route.id!==n[d].route.id:!0,o=(c,d)=>n[d].pathname!==c.pathname||n[d].route.path?.endsWith("*")&&n[d].params["*"]!==c.params["*"];return i==="assets"?e.filter((c,d)=>a(c,d)||o(c,d)):i==="data"?e.filter((c,d)=>{let h=r.routes[c.route.id];if(!h||!h.hasLoader)return!1;if(a(c,d)||o(c,d))return!0;if(c.route.shouldRevalidate){let p=c.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function kJ(t,e,{includeHydrateFallback:n}={}){return TJ(t.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function TJ(t){return[...new Set(t)]}function CJ(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function jJ(t,e){let n=new Set;return new Set(e),t.reduce((r,s)=>{let i=JSON.stringify(CJ(s));return n.has(i)||(n.add(i),r.push({key:i,link:s})),r},[])}function e9(){let t=v.useContext($p);return Bj(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function PJ(){let t=v.useContext(p1);return Bj(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Uj=v.createContext(void 0);Uj.displayName="FrameworkContext";function t9(){let t=v.useContext(Uj);return Bj(t,"You must render this element inside a <HydratedRouter> element"),t}function AJ(t,e){let n=v.useContext(Uj),[r,s]=v.useState(!1),[i,a]=v.useState(!1),{onFocus:o,onBlur:c,onMouseEnter:d,onMouseLeave:h,onTouchStart:p}=e,m=v.useRef(null);v.useEffect(()=>{if(t==="render"&&a(!0),t==="viewport"){let _=N=>{N.forEach(k=>{a(k.isIntersecting)})},w=new IntersectionObserver(_,{threshold:.5});return m.current&&w.observe(m.current),()=>{w.disconnect()}}},[t]),v.useEffect(()=>{if(r){let _=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(_)}}},[r]);let y=()=>{s(!0)},x=()=>{s(!1),a(!1)};return n?t!=="intent"?[i,m,{}]:[i,m,{onFocus:qm(o,y),onBlur:qm(c,x),onMouseEnter:qm(d,y),onMouseLeave:qm(h,x),onTouchStart:qm(p,y)}]:[!1,m,{}]}function qm(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function IJ({page:t,...e}){let{router:n}=e9(),r=v.useMemo(()=>WV(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?v.createElement(RJ,{page:t,matches:r,...e}):null}function DJ(t){let{manifest:e,routeModules:n}=t9(),[r,s]=v.useState([]);return v.useEffect(()=>{let i=!1;return SJ(t,e,n).then(a=>{i||s(a)}),()=>{i=!0}},[t,e,n]),r}function RJ({page:t,matches:e,...n}){let r=Bo(),{manifest:s,routeModules:i}=t9(),{basename:a}=e9(),{loaderData:o,matches:c}=PJ(),d=v.useMemo(()=>VO(t,e,c,s,r,"data"),[t,e,c,s,r]),h=v.useMemo(()=>VO(t,e,c,s,r,"assets"),[t,e,c,s,r]),p=v.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let x=new Set,_=!1;if(e.forEach(N=>{let k=s.routes[N.route.id];!k||!k.hasLoader||(!d.some(S=>S.route.id===N.route.id)&&N.route.id in o&&i[N.route.id]?.shouldRevalidate||k.hasClientLoader?_=!0:x.add(N.route.id))}),x.size===0)return[];let w=_J(t,a,"data");return _&&x.size>0&&w.searchParams.set("_routes",e.filter(N=>x.has(N.route.id)).map(N=>N.route.id).join(",")),[w.pathname+w.search]},[a,o,r,s,d,e,t,i]),m=v.useMemo(()=>kJ(h,s),[h,s]),y=DJ(h);return v.createElement(v.Fragment,null,p.map(x=>v.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...n})),m.map(x=>v.createElement("link",{key:x,rel:"modulepreload",href:x,...n})),y.map(({key:x,link:_})=>v.createElement("link",{key:x,nonce:n.nonce,..._})))}function OJ(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var n9=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{n9&&(window.__reactRouterVersion="7.8.2")}catch{}function MJ({basename:t,children:e,window:n}){let r=v.useRef();r.current==null&&(r.current=NX({window:n,v5Compat:!0}));let s=r.current,[i,a]=v.useState({action:s.action,location:s.location}),o=v.useCallback(c=>{v.startTransition(()=>a(c))},[a]);return v.useLayoutEffect(()=>s.listen(o),[s,o]),v.createElement(hJ,{basename:t,children:e,location:i.location,navigationType:i.action,navigator:s})}var r9=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,s9=v.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:s,reloadDocument:i,replace:a,state:o,target:c,to:d,preventScrollReset:h,viewTransition:p,...m},y){let{basename:x}=v.useContext(Ja),_=typeof d=="string"&&r9.test(d),w,N=!1;if(typeof d=="string"&&_&&(w=d,n9))try{let D=new URL(window.location.href),$=d.startsWith("//")?new URL(D.protocol+d):new URL(d),F=Ol($.pathname,x);$.origin===D.origin&&F!=null?d=F+$.search+$.hash:N=!0}catch{qa(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let k=XX(d,{relative:s}),[S,O,R]=AJ(r,m),M=$J(d,{replace:a,state:o,target:c,preventScrollReset:h,relative:s,viewTransition:p});function P(D){e&&e(D),D.defaultPrevented||M(D)}let C=v.createElement("a",{...m,...R,href:w||k,onClick:N||i?e:P,ref:OJ(y,O),target:c,"data-discover":!_&&n==="render"?"true":void 0});return S&&!_?v.createElement(v.Fragment,null,C,v.createElement(IJ,{page:k})):C});s9.displayName="Link";var ll=v.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:s=!1,style:i,to:a,viewTransition:o,children:c,...d},h){let p=$0(a,{relative:d.relative}),m=Bo(),y=v.useContext(p1),{navigator:x,basename:_}=v.useContext(Ja),w=y!=null&&WJ(p)&&o===!0,N=x.encodeLocation?x.encodeLocation(p).pathname:p.pathname,k=m.pathname,S=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;n||(k=k.toLowerCase(),S=S?S.toLowerCase():null,N=N.toLowerCase()),S&&_&&(S=Ol(S,_)||S);const O=N!=="/"&&N.endsWith("/")?N.length-1:N.length;let R=k===N||!s&&k.startsWith(N)&&k.charAt(O)==="/",M=S!=null&&(S===N||!s&&S.startsWith(N)&&S.charAt(N.length)==="/"),P={isActive:R,isPending:M,isTransitioning:w},C=R?e:void 0,D;typeof r=="function"?D=r(P):D=[r,R?"active":null,M?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let $=typeof i=="function"?i(P):i;return v.createElement(s9,{...d,"aria-current":C,className:D,ref:h,style:$,to:a,viewTransition:o},typeof c=="function"?c(P):c)});ll.displayName="NavLink";var LJ=v.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:s,state:i,method:a=Ix,action:o,onSubmit:c,relative:d,preventScrollReset:h,viewTransition:p,...m},y)=>{let x=UJ(),_=zJ(o,{relative:d}),w=a.toLowerCase()==="get"?"get":"post",N=typeof o=="string"&&r9.test(o),k=S=>{if(c&&c(S),S.defaultPrevented)return;S.preventDefault();let O=S.nativeEvent.submitter,R=O?.getAttribute("formmethod")||a;x(O||S.currentTarget,{fetcherKey:e,method:R,navigate:n,replace:s,state:i,relative:d,preventScrollReset:h,viewTransition:p})};return v.createElement("form",{ref:y,method:w,action:_,onSubmit:r?c:k,...m,"data-discover":!N&&t==="render"?"true":void 0})});LJ.displayName="Form";function FJ(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function i9(t){let e=v.useContext($p);return Bn(e,FJ(t)),e}function $J(t,{target:e,replace:n,state:r,preventScrollReset:s,relative:i,viewTransition:a}={}){let o=eo(),c=Bo(),d=$0(t,{relative:i});return v.useCallback(h=>{if(vJ(h,e)){h.preventDefault();let p=n!==void 0?n:Xg(c)===Xg(d);o(t,{replace:p,state:r,preventScrollReset:s,relative:i,viewTransition:a})}},[c,o,d,n,r,e,t,s,i,a])}var VJ=0,BJ=()=>`__${String(++VJ)}__`;function UJ(){let{router:t}=i9("useSubmit"),{basename:e}=v.useContext(Ja),n=lJ();return v.useCallback(async(r,s={})=>{let{action:i,method:a,encType:o,formData:c,body:d}=wJ(r,e);if(s.navigate===!1){let h=s.fetcherKey||BJ();await t.fetch(h,n,s.action||i,{preventScrollReset:s.preventScrollReset,formData:c,body:d,formMethod:s.method||a,formEncType:s.encType||o,flushSync:s.flushSync})}else await t.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:c,body:d,formMethod:s.method||a,formEncType:s.encType||o,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,e,n])}function zJ(t,{relative:e}={}){let{basename:n}=v.useContext(Ja),r=v.useContext(Za);Bn(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),i={...$0(t||".",{relative:e})},a=Bo();if(t==null){i.search=a.search;let o=new URLSearchParams(i.search),c=o.getAll("index");if(c.some(h=>h==="")){o.delete("index"),c.filter(p=>p).forEach(p=>o.append("index",p));let h=o.toString();i.search=h?`?${h}`:""}}return(!t||t===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:Nl([n,i.pathname])),Xg(i)}function WJ(t,{relative:e}={}){let n=v.useContext(YV);Bn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=i9("useViewTransitionState"),s=$0(t,{relative:e});if(!n.isTransitioning)return!1;let i=Ol(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=Ol(n.nextLocation.pathname,r)||n.nextLocation.pathname;return fb(s.pathname,a)!=null||fb(s.pathname,i)!=null}var ml=zV();const HJ=Xa(ml),qJ=()=>{};var BO={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a9={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Be=function(t,e){if(!t)throw Bp(e)},Bp=function(t){return new Error("Firebase Database ("+a9.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o9=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},KJ=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],a=t[n++],o=t[n++],c=((s&7)<<18|(i&63)<<12|(a&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},zj={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,o=a?t[s+1]:0,c=s+2<t.length,d=c?t[s+2]:0,h=i>>2,p=(i&3)<<4|o>>4;let m=(o&15)<<2|d>>6,y=d&63;c||(y=64,a||(m=64)),r.push(n[h],n[p],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(o9(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):KJ(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],o=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||o==null||d==null||p==null)throw new YJ;const m=i<<2|o>>4;if(r.push(m),d!==64){const y=o<<4&240|d>>2;if(r.push(y),p!==64){const x=d<<6&192|p;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class YJ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const l9=function(t){const e=o9(t);return zj.encodeByteArray(e,!0)},pb=function(t){return l9(t).replace(/\./g,"")},mb=function(t){try{return zj.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GJ(t){return c9(void 0,t)}function c9(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!QJ(n)||(t[n]=c9(t[n],e[n]));return t}function QJ(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u9(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XJ=()=>u9().__FIREBASE_DEFAULTS__,JJ=()=>{if(typeof process>"u"||typeof BO>"u")return;const t=BO.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},ZJ=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&mb(t[1]);return e&&JSON.parse(e)},g1=()=>{try{return qJ()||XJ()||JJ()||ZJ()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},d9=t=>g1()?.emulatorHosts?.[t],eZ=t=>{const e=d9(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},h9=()=>g1()?.config,f9=t=>g1()?.[`_${t}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wj{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yu(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Hj(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tZ(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[pb(JSON.stringify(n)),pb(JSON.stringify(a)),""].join(".")}const Sg={};function nZ(){const t={prod:[],emulator:[]};for(const e of Object.keys(Sg))Sg[e]?t.emulator.push(e):t.prod.push(e);return t}function rZ(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let UO=!1;function p9(t,e){if(typeof window>"u"||typeof document>"u"||!yu(window.location.host)||Sg[t]===e||Sg[t]||UO)return;Sg[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",i=nZ().prod.length>0;function a(){const m=document.getElementById(r);m&&m.remove()}function o(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function d(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{UO=!0,a()},m}function h(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){const m=rZ(r),y=n("text"),x=document.getElementById(y)||document.createElement("span"),_=n("learnmore"),w=document.getElementById(_)||document.createElement("a"),N=n("preprendIcon"),k=document.getElementById(N)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const S=m.element;o(S),h(w,_);const O=d();c(k,N),S.append(k,x,w,O),document.body.appendChild(S)}i?(x.innerText="Preview backend disconnected.",k.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(k.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function qj(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Rr())}function m9(){const t=g1()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function sZ(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function iZ(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function g9(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function aZ(){const t=Rr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function oZ(){return a9.NODE_ADMIN===!0}function y9(){return!m9()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function v9(){return!m9()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function x9(){try{return typeof indexedDB=="object"}catch{return!1}}function lZ(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cZ="FirebaseError";class Kl extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=cZ,Object.setPrototypeOf(this,Kl.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,V0.prototype.create)}}class V0{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?uZ(i,r):"Error",o=`${this.serviceName}: ${a} (${s}).`;return new Kl(s,o,r)}}function uZ(t,e){return t.replace(dZ,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const dZ=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jg(t){return JSON.parse(t)}function Yr(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b9=function(t){let e={},n={},r={},s="";try{const i=t.split(".");e=Jg(mb(i[0])||""),n=Jg(mb(i[1])||""),s=i[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:s}},hZ=function(t){const e=b9(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},fZ=function(t){const e=b9(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yl(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function qf(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function fT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function gb(t,e,n){const r={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=e.call(n,t[s],s,t));return r}function eu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],a=e[s];if(zO(i)&&zO(a)){if(!eu(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function zO(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Up(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function yg(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function vg(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pZ{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let p=0;p<16;p++)r[p]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let p=0;p<16;p++)r[p]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let p=16;p<80;p++){const m=r[p-3]^r[p-8]^r[p-14]^r[p-16];r[p]=(m<<1|m>>>31)&4294967295}let s=this.chain_[0],i=this.chain_[1],a=this.chain_[2],o=this.chain_[3],c=this.chain_[4],d,h;for(let p=0;p<80;p++){p<40?p<20?(d=o^i&(a^o),h=1518500249):(d=i^a^o,h=1859775393):p<60?(d=i&a|o&(i|a),h=2400959708):(d=i^a^o,h=3395469782);const m=(s<<5|s>>>27)+d+c+h+r[p]&4294967295;c=o,o=a,a=(i<<30|i>>>2)&4294967295,i=s,s=m}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+o&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let s=0;const i=this.buf_;let a=this.inbuf_;for(;s<n;){if(a===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(i[a]=e.charCodeAt(s),++a,++s,a===this.blockSize){this.compress_(i),a=0;break}}else for(;s<n;)if(i[a]=e[s],++a,++s,a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let i=24;i>=0;i-=8)e[r]=this.chain_[s]>>i&255,++r;return e}}function mZ(t,e){const n=new gZ(t,e);return n.subscribe.bind(n)}class gZ{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");yZ(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=RN),s.error===void 0&&(s.error=RN),s.complete===void 0&&(s.complete=RN);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function yZ(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function RN(){}function w9(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vZ=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);if(s>=55296&&s<=56319){const i=s-55296;r++,Be(r<t.length,"Surrogate pair missing trail surrogate.");const a=t.charCodeAt(r)-56320;s=65536+(i<<10)+a}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},y1=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mi(t){return t&&t._delegate?t._delegate:t}class tu{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ed="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xZ=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Wj;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(wZ(e))try{this.getOrInitializeService({instanceIdentifier:ed})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=ed){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ed){return this.instances.has(e)}getOptions(e=ed){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(i);r===o&&a.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:bZ(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ed){return this.component?this.component.multipleInstances?e:ed:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function bZ(t){return t===ed?void 0:t}function wZ(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Z{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new xZ(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Lt||(Lt={}));const EZ={debug:Lt.DEBUG,verbose:Lt.VERBOSE,info:Lt.INFO,warn:Lt.WARN,error:Lt.ERROR,silent:Lt.SILENT},NZ=Lt.INFO,SZ={[Lt.DEBUG]:"log",[Lt.VERBOSE]:"log",[Lt.INFO]:"info",[Lt.WARN]:"warn",[Lt.ERROR]:"error"},kZ=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=SZ[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class v1{constructor(e){this.name=e,this._logLevel=NZ,this._logHandler=kZ,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Lt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?EZ[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Lt.DEBUG,...e),this._logHandler(this,Lt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Lt.VERBOSE,...e),this._logHandler(this,Lt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Lt.INFO,...e),this._logHandler(this,Lt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Lt.WARN,...e),this._logHandler(this,Lt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Lt.ERROR,...e),this._logHandler(this,Lt.ERROR,...e)}}const TZ=(t,e)=>e.some(n=>t instanceof n);let WO,HO;function CZ(){return WO||(WO=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function jZ(){return HO||(HO=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const _9=new WeakMap,pT=new WeakMap,E9=new WeakMap,ON=new WeakMap,Kj=new WeakMap;function PZ(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(Hc(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&_9.set(n,t)}).catch(()=>{}),Kj.set(e,t),e}function AZ(t){if(pT.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});pT.set(t,e)}let mT={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return pT.get(t);if(e==="objectStoreNames")return t.objectStoreNames||E9.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Hc(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function IZ(t){mT=t(mT)}function DZ(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(MN(this),e,...n);return E9.set(r,e.sort?e.sort():[e]),Hc(r)}:jZ().includes(t)?function(...e){return t.apply(MN(this),e),Hc(_9.get(this))}:function(...e){return Hc(t.apply(MN(this),e))}}function RZ(t){return typeof t=="function"?DZ(t):(t instanceof IDBTransaction&&AZ(t),TZ(t,CZ())?new Proxy(t,mT):t)}function Hc(t){if(t instanceof IDBRequest)return PZ(t);if(ON.has(t))return ON.get(t);const e=RZ(t);return e!==t&&(ON.set(t,e),Kj.set(e,t)),e}const MN=t=>Kj.get(t);function OZ(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),o=Hc(a);return r&&a.addEventListener("upgradeneeded",c=>{r(Hc(a.result),c.oldVersion,c.newVersion,Hc(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),o.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),o}const MZ=["get","getKey","getAll","getAllKeys","count"],LZ=["put","add","delete","clear"],LN=new Map;function qO(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(LN.get(e))return LN.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=LZ.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||MZ.includes(n)))return;const i=async function(a,...o){const c=this.transaction(a,s?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(o.shift())),(await Promise.all([d[n](...o),s&&c.done]))[0]};return LN.set(e,i),i}IZ(t=>({...t,get:(e,n,r)=>qO(e,n)||t.get(e,n,r),has:(e,n)=>!!qO(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FZ{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if($Z(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function $Z(t){return t.getComponent()?.type==="VERSION"}const gT="@firebase/app",KO="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ml=new v1("@firebase/app"),VZ="@firebase/app-compat",BZ="@firebase/analytics-compat",UZ="@firebase/analytics",zZ="@firebase/app-check-compat",WZ="@firebase/app-check",HZ="@firebase/auth",qZ="@firebase/auth-compat",KZ="@firebase/database",YZ="@firebase/data-connect",GZ="@firebase/database-compat",QZ="@firebase/functions",XZ="@firebase/functions-compat",JZ="@firebase/installations",ZZ="@firebase/installations-compat",eee="@firebase/messaging",tee="@firebase/messaging-compat",nee="@firebase/performance",ree="@firebase/performance-compat",see="@firebase/remote-config",iee="@firebase/remote-config-compat",aee="@firebase/storage",oee="@firebase/storage-compat",lee="@firebase/firestore",cee="@firebase/ai",uee="@firebase/firestore-compat",dee="firebase",hee="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yT="[DEFAULT]",fee={[gT]:"fire-core",[VZ]:"fire-core-compat",[UZ]:"fire-analytics",[BZ]:"fire-analytics-compat",[WZ]:"fire-app-check",[zZ]:"fire-app-check-compat",[HZ]:"fire-auth",[qZ]:"fire-auth-compat",[KZ]:"fire-rtdb",[YZ]:"fire-data-connect",[GZ]:"fire-rtdb-compat",[QZ]:"fire-fn",[XZ]:"fire-fn-compat",[JZ]:"fire-iid",[ZZ]:"fire-iid-compat",[eee]:"fire-fcm",[tee]:"fire-fcm-compat",[nee]:"fire-perf",[ree]:"fire-perf-compat",[see]:"fire-rc",[iee]:"fire-rc-compat",[aee]:"fire-gcs",[oee]:"fire-gcs-compat",[lee]:"fire-fst",[uee]:"fire-fst-compat",[cee]:"fire-vertex","fire-js":"fire-js",[dee]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb=new Map,pee=new Map,vT=new Map;function YO(t,e){try{t.container.addComponent(e)}catch(n){Ml.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function zd(t){const e=t.name;if(vT.has(e))return Ml.debug(`There were multiple attempts to register component ${e}.`),!1;vT.set(e,t);for(const n of yb.values())YO(n,t);for(const n of pee.values())YO(n,t);return!0}function x1(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ii(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mee={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},qc=new V0("app","Firebase",mee);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gee{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new tu("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw qc.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dh=hee;function N9(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:yT,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw qc.create("bad-app-name",{appName:String(s)});if(n||(n=h9()),!n)throw qc.create("no-options");const i=yb.get(s);if(i){if(eu(n,i.options)&&eu(r,i.config))return i;throw qc.create("duplicate-app",{appName:s})}const a=new _Z(s);for(const c of vT.values())a.addComponent(c);const o=new gee(n,r,a);return yb.set(s,o),o}function S9(t=yT){const e=yb.get(t);if(!e&&t===yT&&h9())return N9();if(!e)throw qc.create("no-app",{appName:t});return e}function Po(t,e,n){let r=fee[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&a.push("and"),i&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ml.warn(a.join(" "));return}zd(new tu(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yee="firebase-heartbeat-database",vee=1,Zg="firebase-heartbeat-store";let FN=null;function k9(){return FN||(FN=OZ(yee,vee,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Zg)}catch(n){console.warn(n)}}}}).catch(t=>{throw qc.create("idb-open",{originalErrorMessage:t.message})})),FN}async function xee(t){try{const n=(await k9()).transaction(Zg),r=await n.objectStore(Zg).get(T9(t));return await n.done,r}catch(e){if(e instanceof Kl)Ml.warn(e.message);else{const n=qc.create("idb-get",{originalErrorMessage:e?.message});Ml.warn(n.message)}}}async function GO(t,e){try{const r=(await k9()).transaction(Zg,"readwrite");await r.objectStore(Zg).put(e,T9(t)),await r.done}catch(n){if(n instanceof Kl)Ml.warn(n.message);else{const r=qc.create("idb-set",{originalErrorMessage:n?.message});Ml.warn(r.message)}}}function T9(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bee=1024,wee=30;class _ee{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Nee(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=QO();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>wee){const s=See(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ml.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=QO(),{heartbeatsToSend:n,unsentEntries:r}=Eee(this._heartbeatsCache.heartbeats),s=pb(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return Ml.warn(e),""}}}function QO(){return new Date().toISOString().substring(0,10)}function Eee(t,e=bee){const n=[];let r=t.slice();for(const s of t){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),XO(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),XO(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Nee{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return x9()?lZ().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await xee(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return GO(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return GO(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function XO(t){return pb(JSON.stringify({version:2,heartbeats:t})).length}function See(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kee(t){zd(new tu("platform-logger",e=>new FZ(e),"PRIVATE")),zd(new tu("heartbeat",e=>new _ee(e),"PRIVATE")),Po(gT,KO,t),Po(gT,KO,"esm2020"),Po("fire-js","")}kee("");function C9(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Tee=C9,j9=new V0("auth","Firebase",C9());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vb=new v1("@firebase/auth");function Cee(t,...e){vb.logLevel<=Lt.WARN&&vb.warn(`Auth (${dh}): ${t}`,...e)}function Rx(t,...e){vb.logLevel<=Lt.ERROR&&vb.error(`Auth (${dh}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fa(t,...e){throw Gj(t,...e)}function Ba(t,...e){return Gj(t,...e)}function Yj(t,e,n){const r={...Tee(),[e]:n};return new V0("auth","Firebase",r).create(e,{appName:t.name})}function Sl(t){return Yj(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function jee(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&fa(t,"argument-error"),Yj(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Gj(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return j9.create(t,...e)}function xt(t,e,...n){if(!t)throw Gj(e,...n)}function gl(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Rx(e),new Error(e)}function Ll(t,e){t||gl(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xT(){return typeof self<"u"&&self.location?.href||""}function Pee(){return JO()==="http:"||JO()==="https:"}function JO(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aee(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Pee()||iZ()||"connection"in navigator)?navigator.onLine:!0}function Iee(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ll(n>e,"Short delay should be less than long delay!"),this.isMobile=qj()||g9()}get(){return Aee()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qj(t,e){Ll(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P9{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;gl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;gl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;gl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dee={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ree=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Oee=new B0(3e4,6e4);function Gl(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Uo(t,e,n,r,s={}){return A9(t,s,async()=>{let i={},a={};r&&(e==="GET"?a=r:i={body:JSON.stringify(r)});const o=Up({key:t.config.apiKey,...a}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:c,...i};return sZ()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&yu(t.emulatorConfig.host)&&(d.credentials="include"),P9.fetch()(await I9(t,t.config.apiHost,n,o),d)})}async function A9(t,e,n){t._canInitEmulator=!1;const r={...Dee,...e};try{const s=new Lee(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw Wv(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const o=i.ok?a.errorMessage:a.error.message,[c,d]=o.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wv(t,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw Wv(t,"email-already-in-use",a);if(c==="USER_DISABLED")throw Wv(t,"user-disabled",a);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Yj(t,h,d);fa(t,h)}}catch(s){if(s instanceof Kl)throw s;fa(t,"network-request-failed",{message:String(s)})}}async function U0(t,e,n,r,s={}){const i=await Uo(t,e,n,r,s);return"mfaPendingCredential"in i&&fa(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function I9(t,e,n,r){const s=`${e}${n}?${r}`,i=t,a=i.config.emulator?Qj(t.config,s):`${t.config.apiScheme}://${s}`;return Ree.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(a).toString():a}function Mee(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Lee{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ba(this.auth,"network-request-failed")),Oee.get())})}}function Wv(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Ba(t,e,r);return s.customData._tokenResponse=n,s}function ZO(t){return t!==void 0&&t.enterprise!==void 0}class Fee{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Mee(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function $ee(t,e){return Uo(t,"GET","/v2/recaptchaConfig",Gl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vee(t,e){return Uo(t,"POST","/v1/accounts:delete",e)}async function xb(t,e){return Uo(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kg(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Bee(t,e=!1){const n=mi(t),r=await n.getIdToken(e),s=Xj(r);xt(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i?.sign_in_provider;return{claims:s,token:r,authTime:kg($N(s.auth_time)),issuedAtTime:kg($N(s.iat)),expirationTime:kg($N(s.exp)),signInProvider:a||null,signInSecondFactor:i?.sign_in_second_factor||null}}function $N(t){return Number(t)*1e3}function Xj(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Rx("JWT malformed, contained fewer than 3 sections"),null;try{const s=mb(n);return s?JSON.parse(s):(Rx("Failed to decode base64 JWT payload"),null)}catch(s){return Rx("Caught error parsing JWT payload as JSON",s?.toString()),null}}function e4(t){const e=Xj(t);return xt(e,"internal-error"),xt(typeof e.exp<"u","internal-error"),xt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kf(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Kl&&Uee(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Uee({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zee{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=kg(this.lastLoginAt),this.creationTime=kg(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bb(t){const e=t.auth,n=await t.getIdToken(),r=await Kf(t,xb(e,{idToken:n}));xt(r?.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=s.providerUserInfo?.length?D9(s.providerUserInfo):[],a=Hee(t.providerData,i),o=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!a?.length,d=o?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new bT(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function Wee(t){const e=mi(t);await bb(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Hee(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function D9(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qee(t,e){const n=await A9(t,{},async()=>{const r=Up({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=await I9(t,s,"/v1/token",`key=${i}`),o=await t._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:o,body:r};return t.emulatorConfig&&yu(t.emulatorConfig.host)&&(c.credentials="include"),P9.fetch()(a,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Kee(t,e){return Uo(t,"POST","/v2/accounts:revokeToken",Gl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){xt(e.idToken,"internal-error"),xt(typeof e.idToken<"u","internal-error"),xt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):e4(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){xt(e.length!==0,"internal-error");const n=e4(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(xt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await qee(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,a=new If;return r&&(xt(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),s&&(xt(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(xt(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new If,this.toJSON())}_performRefresh(){return gl("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jc(t,e){xt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Oa{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new zee(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new bT(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Kf(this,this.stsTokenManager.getToken(this.auth,e));return xt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Bee(this,e)}reload(){return Wee(this)}_assign(e){this!==e&&(xt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Oa({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){xt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await bb(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ii(this.auth.app))return Promise.reject(Sl(this.auth));const e=await this.getIdToken();return await Kf(this,Vee(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,a=n.photoURL??void 0,o=n.tenantId??void 0,c=n._redirectEventId??void 0,d=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:p,emailVerified:m,isAnonymous:y,providerData:x,stsTokenManager:_}=n;xt(p&&_,e,"internal-error");const w=If.fromJSON(this.name,_);xt(typeof p=="string",e,"internal-error"),jc(r,e.name),jc(s,e.name),xt(typeof m=="boolean",e,"internal-error"),xt(typeof y=="boolean",e,"internal-error"),jc(i,e.name),jc(a,e.name),jc(o,e.name),jc(c,e.name),jc(d,e.name),jc(h,e.name);const N=new Oa({uid:p,auth:e,email:s,emailVerified:m,displayName:r,isAnonymous:y,photoURL:a,phoneNumber:i,tenantId:o,stsTokenManager:w,createdAt:d,lastLoginAt:h});return x&&Array.isArray(x)&&(N.providerData=x.map(k=>({...k}))),c&&(N._redirectEventId=c),N}static async _fromIdTokenResponse(e,n,r=!1){const s=new If;s.updateFromServerResponse(n);const i=new Oa({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await bb(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];xt(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?D9(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!i?.length,o=new If;o.updateFromIdToken(r);const c=new Oa({uid:s.localId,auth:e,stsTokenManager:o,isAnonymous:a}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new bT(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!i?.length};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t4=new Map;function yl(t){Ll(t instanceof Function,"Expected a class definition");let e=t4.get(t);return e?(Ll(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,t4.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R9{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}R9.type="NONE";const n4=R9;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ox(t,e,n){return`firebase:${t}:${e}:${n}`}class Df{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Ox(this.userKey,s.apiKey,i),this.fullPersistenceKey=Ox("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await xb(this.auth,{idToken:e}).catch(()=>{});return n?Oa._fromGetAccountInfoResponse(this.auth,n,e):null}return Oa._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Df(yl(n4),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||yl(n4);const a=Ox(r,e.config.apiKey,e.name);let o=null;for(const d of n)try{const h=await d._get(a);if(h){let p;if(typeof h=="string"){const m=await xb(e,{idToken:h}).catch(()=>{});if(!m)break;p=await Oa._fromGetAccountInfoResponse(e,m,h)}else p=Oa._fromJSON(e,h);d!==i&&(o=p),i=d;break}}catch{}const c=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Df(i,e,r):(i=c[0],o&&await i._set(a,o.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(a)}catch{}})),new Df(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r4(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(F9(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(O9(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(V9(e))return"Blackberry";if(B9(e))return"Webos";if(M9(e))return"Safari";if((e.includes("chrome/")||L9(e))&&!e.includes("edge/"))return"Chrome";if($9(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function O9(t=Rr()){return/firefox\//i.test(t)}function M9(t=Rr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function L9(t=Rr()){return/crios\//i.test(t)}function F9(t=Rr()){return/iemobile/i.test(t)}function $9(t=Rr()){return/android/i.test(t)}function V9(t=Rr()){return/blackberry/i.test(t)}function B9(t=Rr()){return/webos/i.test(t)}function Jj(t=Rr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Yee(t=Rr()){return Jj(t)&&!!window.navigator?.standalone}function Gee(){return aZ()&&document.documentMode===10}function U9(t=Rr()){return Jj(t)||$9(t)||B9(t)||V9(t)||/windows phone/i.test(t)||F9(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z9(t,e=[]){let n;switch(t){case"Browser":n=r4(Rr());break;case"Worker":n=`${r4(Rr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${dh}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qee{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((a,o)=>{try{const c=e(i);a(c)}catch(c){o(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xee(t,e={}){return Uo(t,"GET","/v2/passwordPolicy",Gl(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jee=6;class Zee{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Jee,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ete{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new s4(this),this.idTokenSubscription=new s4(this),this.beforeStateQueue=new Qee(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=j9,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=yl(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Df.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await xb(this,{idToken:e}),r=await Oa._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ii(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=this.redirectUser?._redirectEventId,a=r?._redirectEventId,o=await this.tryRedirectSignIn(e);(!i||i===a)&&o?.user&&(r=o.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(i){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return xt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await bb(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Iee()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ii(this.app))return Promise.reject(Sl(this));const n=e?mi(e):null;return n&&xt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&xt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ii(this.app)?Promise.reject(Sl(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ii(this.app)?Promise.reject(Sl(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(yl(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Xee(this),n=new Zee(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new V0("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Kee(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&yl(e)||this._popupRedirectResolver;xt(n,this,"argument-error"),this.redirectPersistenceManager=await Df.create(this,[yl(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(xt(o,this,"internal-error"),o.then(()=>{a||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{a=!0,c()}}else{const c=e.addObserver(n);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return xt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=z9(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(ii(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Cee(`Error while retrieving App Check token: ${e.error}`),e?.token}}function vu(t){return mi(t)}class s4{constructor(e){this.auth=e,this.observer=null,this.addObserver=mZ(n=>this.observer=n)}get next(){return xt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let b1={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function tte(t){b1=t}function W9(t){return b1.loadJS(t)}function nte(){return b1.recaptchaEnterpriseScript}function rte(){return b1.gapiScript}function ste(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class ite{constructor(){this.enterprise=new ate}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class ate{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const ote="recaptcha-enterprise",H9="NO_RECAPTCHA";class lte{constructor(e){this.type=ote,this.auth=vu(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,o)=>{$ee(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const d=new Fee(c);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,a(d.siteKey)}}).catch(c=>{o(c)})})}function s(i,a,o){const c=window.grecaptcha;ZO(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(d=>{a(d)}).catch(()=>{a(H9)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new ite().execute("siteKey",{action:"verify"}):new Promise((i,a)=>{r(this.auth).then(o=>{if(!n&&ZO(window.grecaptcha))s(o,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let c=nte();c.length!==0&&(c+=o),W9(c).then(()=>{s(o,i,a)}).catch(d=>{a(d)})}}).catch(o=>{a(o)})})}}async function i4(t,e,n,r=!1,s=!1){const i=new lte(t);let a;if(s)a=H9;else try{a=await i.verify(n)}catch{a=await i.verify(n,!0)}const o={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const c=o.phoneEnrollmentInfo.phoneNumber,d=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:d,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const c=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function wT(t,e,n,r,s){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await i4(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await i4(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cte(t,e){const n=x1(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(eu(i,e??{}))return s;fa(s,"already-initialized")}return n.initialize({options:e})}function ute(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(yl);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function dte(t,e,n){const r=vu(t);xt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=q9(e),{host:a,port:o}=hte(e),c=o===null?"":`:${o}`,d={url:`${i}//${a}${c}/`},h=Object.freeze({host:a,port:o,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){xt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),xt(eu(d,r.config.emulator)&&eu(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,yu(a)?(Hj(`${i}//${a}${c}`),p9("Auth",!0)):fte()}function q9(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function hte(t){const e=q9(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:a4(r.substr(i.length+1))}}else{const[i,a]=r.split(":");return{host:i,port:a4(a)}}}function a4(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function fte(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zj{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return gl("not implemented")}_getIdTokenResponse(e){return gl("not implemented")}_linkToIdToken(e,n){return gl("not implemented")}_getReauthenticationResolver(e){return gl("not implemented")}}async function pte(t,e){return Uo(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mte(t,e){return U0(t,"POST","/v1/accounts:signInWithPassword",Gl(t,e))}async function gte(t,e){return Uo(t,"POST","/v1/accounts:sendOobCode",Gl(t,e))}async function yte(t,e){return gte(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vte(t,e){return U0(t,"POST","/v1/accounts:signInWithEmailLink",Gl(t,e))}async function xte(t,e){return U0(t,"POST","/v1/accounts:signInWithEmailLink",Gl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0 extends Zj{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new e0(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new e0(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wT(e,n,"signInWithPassword",mte);case"emailLink":return vte(e,{email:this._email,oobCode:this._password});default:fa(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wT(e,r,"signUpPassword",pte);case"emailLink":return xte(e,{idToken:n,email:this._email,oobCode:this._password});default:fa(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rf(t,e){return U0(t,"POST","/v1/accounts:signInWithIdp",Gl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bte="http://localhost";class Wd extends Zj{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Wd(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):fa("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const a=new Wd(r,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Rf(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Rf(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Rf(e,n)}buildRequest(){const e={requestUri:bte,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Up(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wte(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function _te(t){const e=yg(vg(t)).link,n=e?yg(vg(e)).deep_link_id:null,r=yg(vg(t)).deep_link_id;return(r?yg(vg(r)).link:null)||r||n||e||t}class e2{constructor(e){const n=yg(vg(e)),r=n.apiKey??null,s=n.oobCode??null,i=wte(n.mode??null);xt(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=_te(e);try{return new e2(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(){this.providerId=zp.PROVIDER_ID}static credential(e,n){return e0._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=e2.parseLink(n);return xt(r,"argument-error"),e0._fromEmailAndCode(e,r.code,r.tenantId)}}zp.PROVIDER_ID="password";zp.EMAIL_PASSWORD_SIGN_IN_METHOD="password";zp.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0 extends t2{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc extends z0{constructor(){super("facebook.com")}static credential(e){return Wd._fromParams({providerId:Fc.PROVIDER_ID,signInMethod:Fc.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fc.credentialFromTaggedObject(e)}static credentialFromError(e){return Fc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fc.credential(e.oauthAccessToken)}catch{return null}}}Fc.FACEBOOK_SIGN_IN_METHOD="facebook.com";Fc.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul extends z0{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Wd._fromParams({providerId:ul.PROVIDER_ID,signInMethod:ul.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ul.credentialFromTaggedObject(e)}static credentialFromError(e){return ul.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ul.credential(n,r)}catch{return null}}}ul.GOOGLE_SIGN_IN_METHOD="google.com";ul.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c extends z0{constructor(){super("github.com")}static credential(e){return Wd._fromParams({providerId:$c.PROVIDER_ID,signInMethod:$c.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $c.credentialFromTaggedObject(e)}static credentialFromError(e){return $c.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $c.credential(e.oauthAccessToken)}catch{return null}}}$c.GITHUB_SIGN_IN_METHOD="github.com";$c.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc extends z0{constructor(){super("twitter.com")}static credential(e,n){return Wd._fromParams({providerId:Vc.PROVIDER_ID,signInMethod:Vc.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Vc.credentialFromTaggedObject(e)}static credentialFromError(e){return Vc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Vc.credential(n,r)}catch{return null}}}Vc.TWITTER_SIGN_IN_METHOD="twitter.com";Vc.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ete(t,e){return U0(t,"POST","/v1/accounts:signUp",Gl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Oa._fromIdTokenResponse(e,r,s),a=o4(r);return new Hd({user:i,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=o4(r);return new Hd({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function o4(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb extends Kl{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,wb.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new wb(e,n,r,s)}}function K9(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?wb._fromErrorAndOperation(t,i,e,r):i})}async function Nte(t,e,n=!1){const r=await Kf(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Hd._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ste(t,e,n=!1){const{auth:r}=t;if(ii(r.app))return Promise.reject(Sl(r));const s="reauthenticate";try{const i=await Kf(t,K9(r,s,e,t),n);xt(i.idToken,r,"internal-error");const a=Xj(i.idToken);xt(a,r,"internal-error");const{sub:o}=a;return xt(t.uid===o,r,"user-mismatch"),Hd._forOperation(t,s,i)}catch(i){throw i?.code==="auth/user-not-found"&&fa(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y9(t,e,n=!1){if(ii(t.app))return Promise.reject(Sl(t));const r="signIn",s=await K9(t,r,e),i=await Hd._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function kte(t,e){return Y9(vu(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G9(t){const e=vu(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Tte(t,e,n){if(ii(t.app))return Promise.reject(Sl(t));const r=vu(t),a=await wT(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ete).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&G9(t),c}),o=await Hd._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(o.user),o}function Cte(t,e,n){return ii(t.app)?Promise.reject(Sl(t)):kte(mi(t),zp.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&G9(t),r})}async function l4(t,e){const n=mi(t),s={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()},{email:i}=await yte(n.auth,s);i!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jte(t,e){return Uo(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pte(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=mi(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},a=await Kf(r,jte(r.auth,i));r.displayName=a.displayName||null,r.photoURL=a.photoUrl||null;const o=r.providerData.find(({providerId:c})=>c==="password");o&&(o.displayName=r.displayName,o.photoURL=r.photoURL),await r._updateTokensIfNecessary(a)}function Ate(t,e,n,r){return mi(t).onIdTokenChanged(e,n,r)}function Ite(t,e,n){return mi(t).beforeAuthStateChanged(e,n)}function VN(t){return mi(t).signOut()}const _b="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q9{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(_b,"1"),this.storage.removeItem(_b),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dte=1e3,Rte=10;class X9 extends Q9{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=U9(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,o,c)=>{this.notifyListeners(a,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},i=this.storage.getItem(r);Gee()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Rte):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Dte)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}X9.type="LOCAL";const Ote=X9;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J9 extends Q9{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}J9.type="SESSION";const Z9=J9;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mte(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new w1(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,a=this.handlersMap[s];if(!a?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const o=Array.from(a).map(async d=>d(n.origin,i)),c=await Mte(o);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}w1.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n2(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lte{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((o,c)=>{const d=n2("",20);s.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(p){const m=p;if(m.data.eventId===d)switch(m.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(m.data.response);break;default:clearTimeout(h),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ao(){return window}function Fte(t){Ao().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eB(){return typeof Ao().WorkerGlobalScope<"u"&&typeof Ao().importScripts=="function"}async function $te(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Vte(){return navigator?.serviceWorker?.controller||null}function Bte(){return eB()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tB="firebaseLocalStorageDb",Ute=1,Eb="firebaseLocalStorage",nB="fbase_key";class W0{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function _1(t,e){return t.transaction([Eb],e?"readwrite":"readonly").objectStore(Eb)}function zte(){const t=indexedDB.deleteDatabase(tB);return new W0(t).toPromise()}function _T(){const t=indexedDB.open(tB,Ute);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Eb,{keyPath:nB})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Eb)?e(r):(r.close(),await zte(),e(await _T()))})})}async function c4(t,e,n){const r=_1(t,!0).put({[nB]:e,value:n});return new W0(r).toPromise()}async function Wte(t,e){const n=_1(t,!1).get(e),r=await new W0(n).toPromise();return r===void 0?null:r.value}function u4(t,e){const n=_1(t,!0).delete(e);return new W0(n).toPromise()}const Hte=800,qte=3;class rB{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _T(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>qte)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return eB()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=w1._getInstance(Bte()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await $te(),!this.activeServiceWorker)return;this.sender=new Lte(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Vte()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await _T();return await c4(e,_b,"1"),await u4(e,_b),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>c4(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Wte(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>u4(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=_1(s,!1).getAll();return new W0(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Hte)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}rB.type="LOCAL";const Kte=rB;new B0(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sB(t,e){return e?yl(e):(xt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2 extends Zj{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Rf(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Rf(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Rf(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Yte(t){return Y9(t.auth,new r2(t),t.bypassAuthState)}function Gte(t){const{auth:e,user:n}=t;return xt(n,e,"internal-error"),Ste(n,new r2(t),t.bypassAuthState)}async function Qte(t){const{auth:e,user:n}=t;return xt(n,e,"internal-error"),Nte(n,new r2(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iB{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:a,type:o}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Yte;case"linkViaPopup":case"linkViaRedirect":return Qte;case"reauthViaPopup":case"reauthViaRedirect":return Gte;default:fa(this.auth,"internal-error")}}resolve(e){Ll(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ll(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xte=new B0(2e3,1e4);async function Jte(t,e,n){if(ii(t.app))return Promise.reject(Ba(t,"operation-not-supported-in-this-environment"));const r=vu(t);jee(t,e,t2);const s=sB(r,n);return new md(r,"signInViaPopup",e,s).executeNotNull()}class md extends iB{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,md.currentPopupAction&&md.currentPopupAction.cancel(),md.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return xt(e,this.auth,"internal-error"),e}async onExecution(){Ll(this.filter.length===1,"Popup operations only handle one event");const e=n2();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ba(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ba(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,md.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ba(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Xte.get())};e()}}md.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zte="pendingRedirect",Mx=new Map;class ene extends iB{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Mx.get(this.auth._key());if(!e){try{const r=await tne(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Mx.set(this.auth._key(),e)}return this.bypassAuthState||Mx.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function tne(t,e){const n=sne(e),r=rne(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function nne(t,e){Mx.set(t._key(),e)}function rne(t){return yl(t._redirectPersistence)}function sne(t){return Ox(Zte,t.config.apiKey,t.name)}async function ine(t,e,n=!1){if(ii(t.app))return Promise.reject(Sl(t));const r=vu(t),s=sB(r,e),a=await new ene(r,s,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ane=600*1e3;class one{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!lne(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!aB(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Ba(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=ane&&this.cachedEventUids.clear(),this.cachedEventUids.has(d4(e))}saveEventToCache(e){this.cachedEventUids.add(d4(e)),this.lastProcessedEventTime=Date.now()}}function d4(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function aB({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function lne(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return aB(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cne(t,e={}){return Uo(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const une=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,dne=/^https?/;async function hne(t){if(t.config.emulator)return;const{authorizedDomains:e}=await cne(t);for(const n of e)try{if(fne(n))return}catch{}fa(t,"unauthorized-domain")}function fne(t){const e=xT(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!dne.test(n))return!1;if(une.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pne=new B0(3e4,6e4);function h4(){const t=Ao().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function mne(t){return new Promise((e,n)=>{function r(){h4(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{h4(),n(Ba(t,"network-request-failed"))},timeout:pne.get()})}if(Ao().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ao().gapi?.load)r();else{const s=ste("iframefcb");return Ao()[s]=()=>{gapi.load?r():n(Ba(t,"network-request-failed"))},W9(`${rte()}?onload=${s}`).catch(i=>n(i))}}).catch(e=>{throw Lx=null,e})}let Lx=null;function gne(t){return Lx=Lx||mne(t),Lx}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yne=new B0(5e3,15e3),vne="__/auth/iframe",xne="emulator/auth/iframe",bne={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},wne=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _ne(t){const e=t.config;xt(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Qj(e,xne):`https://${t.config.authDomain}/${vne}`,r={apiKey:e.apiKey,appName:t.name,v:dh},s=wne.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Up(r).slice(1)}`}async function Ene(t){const e=await gne(t),n=Ao().gapi;return xt(n,t,"internal-error"),e.open({where:document.body,url:_ne(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:bne,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const a=Ba(t,"network-request-failed"),o=Ao().setTimeout(()=>{i(a)},yne.get());function c(){Ao().clearTimeout(o),s(r)}r.ping(c).then(c,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nne={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Sne=500,kne=600,Tne="_blank",Cne="http://localhost";class f4{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function jne(t,e,n,r=Sne,s=kne){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const c={...Nne,width:r.toString(),height:s.toString(),top:i,left:a},d=Rr().toLowerCase();n&&(o=L9(d)?Tne:n),O9(d)&&(e=e||Cne,c.scrollbars="yes");const h=Object.entries(c).reduce((m,[y,x])=>`${m}${y}=${x},`,"");if(Yee(d)&&o!=="_self")return Pne(e||"",o),new f4(null);const p=window.open(e||"",o,h);xt(p,t,"popup-blocked");try{p.focus()}catch{}return new f4(p)}function Pne(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ane="__/auth/handler",Ine="emulator/auth/handler",Dne=encodeURIComponent("fac");async function p4(t,e,n,r,s,i){xt(t.config.authDomain,t,"auth-domain-config-required"),xt(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:dh,eventId:s};if(e instanceof t2){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",fT(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,p]of Object.entries({}))a[h]=p}if(e instanceof z0){const h=e.getScopes().filter(p=>p!=="");h.length>0&&(a.scopes=h.join(","))}t.tenantId&&(a.tid=t.tenantId);const o=a;for(const h of Object.keys(o))o[h]===void 0&&delete o[h];const c=await t._getAppCheckToken(),d=c?`#${Dne}=${encodeURIComponent(c)}`:"";return`${Rne(t)}?${Up(o).slice(1)}${d}`}function Rne({config:t}){return t.emulator?Qj(t,Ine):`https://${t.authDomain}/${Ane}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BN="webStorageSupport";class One{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Z9,this._completeRedirectFn=ine,this._overrideRedirectResult=nne}async _openPopup(e,n,r,s){Ll(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const i=await p4(e,n,r,xT(),s);return jne(e,i,n2())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await p4(e,n,r,xT(),s);return Fte(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Ll(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Ene(e),r=new one(e);return n.register("authEvent",s=>(xt(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(BN,{type:BN},s=>{const i=s?.[0]?.[BN];i!==void 0&&n(!!i),fa(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=hne(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return U9()||M9()||Jj()}}const Mne=One;var m4="@firebase/auth",g4="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lne{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){xt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fne(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function $ne(t){zd(new tu("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;xt(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:a,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:z9(t)},d=new ete(r,s,i,c);return ute(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),zd(new tu("auth-internal",e=>{const n=vu(e.getProvider("auth").getImmediate());return(r=>new Lne(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Po(m4,g4,Fne(t)),Po(m4,g4,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vne=300,Bne=f9("authIdTokenMaxAge")||Vne;let y4=null;const Une=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Bne)return;const s=n?.token;y4!==s&&(y4=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function zne(t=S9()){const e=x1(t,"auth");if(e.isInitialized())return e.getImmediate();const n=cte(t,{popupRedirectResolver:Mne,persistence:[Kte,Ote,Z9]}),r=f9("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const a=Une(i.toString());Ite(n,a,()=>a(n.currentUser)),Ate(n,o=>a(o))}}const s=d9("auth");return s&&dte(n,`http://${s}`),n}function Wne(){return document.getElementsByTagName("head")?.[0]??document}tte({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Ba("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",Wne().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});$ne("Browser");var Hne="firebase",qne="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Po(Hne,qne,"app");var v4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var s2;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,C){function D(){}D.prototype=C.prototype,P.D=C.prototype,P.prototype=new D,P.prototype.constructor=P,P.C=function($,F,U){for(var I=Array(arguments.length-2),z=2;z<arguments.length;z++)I[z-2]=arguments[z];return C.prototype[F].apply($,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(P,C,D){D||(D=0);var $=Array(16);if(typeof C=="string")for(var F=0;16>F;++F)$[F]=C.charCodeAt(D++)|C.charCodeAt(D++)<<8|C.charCodeAt(D++)<<16|C.charCodeAt(D++)<<24;else for(F=0;16>F;++F)$[F]=C[D++]|C[D++]<<8|C[D++]<<16|C[D++]<<24;C=P.g[0],D=P.g[1],F=P.g[2];var U=P.g[3],I=C+(U^D&(F^U))+$[0]+3614090360&4294967295;C=D+(I<<7&4294967295|I>>>25),I=U+(F^C&(D^F))+$[1]+3905402710&4294967295,U=C+(I<<12&4294967295|I>>>20),I=F+(D^U&(C^D))+$[2]+606105819&4294967295,F=U+(I<<17&4294967295|I>>>15),I=D+(C^F&(U^C))+$[3]+3250441966&4294967295,D=F+(I<<22&4294967295|I>>>10),I=C+(U^D&(F^U))+$[4]+4118548399&4294967295,C=D+(I<<7&4294967295|I>>>25),I=U+(F^C&(D^F))+$[5]+1200080426&4294967295,U=C+(I<<12&4294967295|I>>>20),I=F+(D^U&(C^D))+$[6]+2821735955&4294967295,F=U+(I<<17&4294967295|I>>>15),I=D+(C^F&(U^C))+$[7]+4249261313&4294967295,D=F+(I<<22&4294967295|I>>>10),I=C+(U^D&(F^U))+$[8]+1770035416&4294967295,C=D+(I<<7&4294967295|I>>>25),I=U+(F^C&(D^F))+$[9]+2336552879&4294967295,U=C+(I<<12&4294967295|I>>>20),I=F+(D^U&(C^D))+$[10]+4294925233&4294967295,F=U+(I<<17&4294967295|I>>>15),I=D+(C^F&(U^C))+$[11]+2304563134&4294967295,D=F+(I<<22&4294967295|I>>>10),I=C+(U^D&(F^U))+$[12]+1804603682&4294967295,C=D+(I<<7&4294967295|I>>>25),I=U+(F^C&(D^F))+$[13]+4254626195&4294967295,U=C+(I<<12&4294967295|I>>>20),I=F+(D^U&(C^D))+$[14]+2792965006&4294967295,F=U+(I<<17&4294967295|I>>>15),I=D+(C^F&(U^C))+$[15]+1236535329&4294967295,D=F+(I<<22&4294967295|I>>>10),I=C+(F^U&(D^F))+$[1]+4129170786&4294967295,C=D+(I<<5&4294967295|I>>>27),I=U+(D^F&(C^D))+$[6]+3225465664&4294967295,U=C+(I<<9&4294967295|I>>>23),I=F+(C^D&(U^C))+$[11]+643717713&4294967295,F=U+(I<<14&4294967295|I>>>18),I=D+(U^C&(F^U))+$[0]+3921069994&4294967295,D=F+(I<<20&4294967295|I>>>12),I=C+(F^U&(D^F))+$[5]+3593408605&4294967295,C=D+(I<<5&4294967295|I>>>27),I=U+(D^F&(C^D))+$[10]+38016083&4294967295,U=C+(I<<9&4294967295|I>>>23),I=F+(C^D&(U^C))+$[15]+3634488961&4294967295,F=U+(I<<14&4294967295|I>>>18),I=D+(U^C&(F^U))+$[4]+3889429448&4294967295,D=F+(I<<20&4294967295|I>>>12),I=C+(F^U&(D^F))+$[9]+568446438&4294967295,C=D+(I<<5&4294967295|I>>>27),I=U+(D^F&(C^D))+$[14]+3275163606&4294967295,U=C+(I<<9&4294967295|I>>>23),I=F+(C^D&(U^C))+$[3]+4107603335&4294967295,F=U+(I<<14&4294967295|I>>>18),I=D+(U^C&(F^U))+$[8]+1163531501&4294967295,D=F+(I<<20&4294967295|I>>>12),I=C+(F^U&(D^F))+$[13]+2850285829&4294967295,C=D+(I<<5&4294967295|I>>>27),I=U+(D^F&(C^D))+$[2]+4243563512&4294967295,U=C+(I<<9&4294967295|I>>>23),I=F+(C^D&(U^C))+$[7]+1735328473&4294967295,F=U+(I<<14&4294967295|I>>>18),I=D+(U^C&(F^U))+$[12]+2368359562&4294967295,D=F+(I<<20&4294967295|I>>>12),I=C+(D^F^U)+$[5]+4294588738&4294967295,C=D+(I<<4&4294967295|I>>>28),I=U+(C^D^F)+$[8]+2272392833&4294967295,U=C+(I<<11&4294967295|I>>>21),I=F+(U^C^D)+$[11]+1839030562&4294967295,F=U+(I<<16&4294967295|I>>>16),I=D+(F^U^C)+$[14]+4259657740&4294967295,D=F+(I<<23&4294967295|I>>>9),I=C+(D^F^U)+$[1]+2763975236&4294967295,C=D+(I<<4&4294967295|I>>>28),I=U+(C^D^F)+$[4]+1272893353&4294967295,U=C+(I<<11&4294967295|I>>>21),I=F+(U^C^D)+$[7]+4139469664&4294967295,F=U+(I<<16&4294967295|I>>>16),I=D+(F^U^C)+$[10]+3200236656&4294967295,D=F+(I<<23&4294967295|I>>>9),I=C+(D^F^U)+$[13]+681279174&4294967295,C=D+(I<<4&4294967295|I>>>28),I=U+(C^D^F)+$[0]+3936430074&4294967295,U=C+(I<<11&4294967295|I>>>21),I=F+(U^C^D)+$[3]+3572445317&4294967295,F=U+(I<<16&4294967295|I>>>16),I=D+(F^U^C)+$[6]+76029189&4294967295,D=F+(I<<23&4294967295|I>>>9),I=C+(D^F^U)+$[9]+3654602809&4294967295,C=D+(I<<4&4294967295|I>>>28),I=U+(C^D^F)+$[12]+3873151461&4294967295,U=C+(I<<11&4294967295|I>>>21),I=F+(U^C^D)+$[15]+530742520&4294967295,F=U+(I<<16&4294967295|I>>>16),I=D+(F^U^C)+$[2]+3299628645&4294967295,D=F+(I<<23&4294967295|I>>>9),I=C+(F^(D|~U))+$[0]+4096336452&4294967295,C=D+(I<<6&4294967295|I>>>26),I=U+(D^(C|~F))+$[7]+1126891415&4294967295,U=C+(I<<10&4294967295|I>>>22),I=F+(C^(U|~D))+$[14]+2878612391&4294967295,F=U+(I<<15&4294967295|I>>>17),I=D+(U^(F|~C))+$[5]+4237533241&4294967295,D=F+(I<<21&4294967295|I>>>11),I=C+(F^(D|~U))+$[12]+1700485571&4294967295,C=D+(I<<6&4294967295|I>>>26),I=U+(D^(C|~F))+$[3]+2399980690&4294967295,U=C+(I<<10&4294967295|I>>>22),I=F+(C^(U|~D))+$[10]+4293915773&4294967295,F=U+(I<<15&4294967295|I>>>17),I=D+(U^(F|~C))+$[1]+2240044497&4294967295,D=F+(I<<21&4294967295|I>>>11),I=C+(F^(D|~U))+$[8]+1873313359&4294967295,C=D+(I<<6&4294967295|I>>>26),I=U+(D^(C|~F))+$[15]+4264355552&4294967295,U=C+(I<<10&4294967295|I>>>22),I=F+(C^(U|~D))+$[6]+2734768916&4294967295,F=U+(I<<15&4294967295|I>>>17),I=D+(U^(F|~C))+$[13]+1309151649&4294967295,D=F+(I<<21&4294967295|I>>>11),I=C+(F^(D|~U))+$[4]+4149444226&4294967295,C=D+(I<<6&4294967295|I>>>26),I=U+(D^(C|~F))+$[11]+3174756917&4294967295,U=C+(I<<10&4294967295|I>>>22),I=F+(C^(U|~D))+$[2]+718787259&4294967295,F=U+(I<<15&4294967295|I>>>17),I=D+(U^(F|~C))+$[9]+3951481745&4294967295,P.g[0]=P.g[0]+C&4294967295,P.g[1]=P.g[1]+(F+(I<<21&4294967295|I>>>11))&4294967295,P.g[2]=P.g[2]+F&4294967295,P.g[3]=P.g[3]+U&4294967295}r.prototype.u=function(P,C){C===void 0&&(C=P.length);for(var D=C-this.blockSize,$=this.B,F=this.h,U=0;U<C;){if(F==0)for(;U<=D;)s(this,P,U),U+=this.blockSize;if(typeof P=="string"){for(;U<C;)if($[F++]=P.charCodeAt(U++),F==this.blockSize){s(this,$),F=0;break}}else for(;U<C;)if($[F++]=P[U++],F==this.blockSize){s(this,$),F=0;break}}this.h=F,this.o+=C},r.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var C=1;C<P.length-8;++C)P[C]=0;var D=8*this.o;for(C=P.length-8;C<P.length;++C)P[C]=D&255,D/=256;for(this.u(P),P=Array(16),C=D=0;4>C;++C)for(var $=0;32>$;$+=8)P[D++]=this.g[C]>>>$&255;return P};function i(P,C){var D=o;return Object.prototype.hasOwnProperty.call(D,P)?D[P]:D[P]=C(P)}function a(P,C){this.h=C;for(var D=[],$=!0,F=P.length-1;0<=F;F--){var U=P[F]|0;$&&U==C||(D[F]=U,$=!1)}this.g=D}var o={};function c(P){return-128<=P&&128>P?i(P,function(C){return new a([C|0],0>C?-1:0)}):new a([P|0],0>P?-1:0)}function d(P){if(isNaN(P)||!isFinite(P))return p;if(0>P)return w(d(-P));for(var C=[],D=1,$=0;P>=D;$++)C[$]=P/D|0,D*=4294967296;return new a(C,0)}function h(P,C){if(P.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(P.charAt(0)=="-")return w(h(P.substring(1),C));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=d(Math.pow(C,8)),$=p,F=0;F<P.length;F+=8){var U=Math.min(8,P.length-F),I=parseInt(P.substring(F,F+U),C);8>U?(U=d(Math.pow(C,U)),$=$.j(U).add(d(I))):($=$.j(D),$=$.add(d(I)))}return $}var p=c(0),m=c(1),y=c(16777216);t=a.prototype,t.m=function(){if(_(this))return-w(this).m();for(var P=0,C=1,D=0;D<this.g.length;D++){var $=this.i(D);P+=(0<=$?$:4294967296+$)*C,C*=4294967296}return P},t.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(x(this))return"0";if(_(this))return"-"+w(this).toString(P);for(var C=d(Math.pow(P,6)),D=this,$="";;){var F=O(D,C).g;D=N(D,F.j(C));var U=((0<D.g.length?D.g[0]:D.h)>>>0).toString(P);if(D=F,x(D))return U+$;for(;6>U.length;)U="0"+U;$=U+$}},t.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function x(P){if(P.h!=0)return!1;for(var C=0;C<P.g.length;C++)if(P.g[C]!=0)return!1;return!0}function _(P){return P.h==-1}t.l=function(P){return P=N(this,P),_(P)?-1:x(P)?0:1};function w(P){for(var C=P.g.length,D=[],$=0;$<C;$++)D[$]=~P.g[$];return new a(D,~P.h).add(m)}t.abs=function(){return _(this)?w(this):this},t.add=function(P){for(var C=Math.max(this.g.length,P.g.length),D=[],$=0,F=0;F<=C;F++){var U=$+(this.i(F)&65535)+(P.i(F)&65535),I=(U>>>16)+(this.i(F)>>>16)+(P.i(F)>>>16);$=I>>>16,U&=65535,I&=65535,D[F]=I<<16|U}return new a(D,D[D.length-1]&-2147483648?-1:0)};function N(P,C){return P.add(w(C))}t.j=function(P){if(x(this)||x(P))return p;if(_(this))return _(P)?w(this).j(w(P)):w(w(this).j(P));if(_(P))return w(this.j(w(P)));if(0>this.l(y)&&0>P.l(y))return d(this.m()*P.m());for(var C=this.g.length+P.g.length,D=[],$=0;$<2*C;$++)D[$]=0;for($=0;$<this.g.length;$++)for(var F=0;F<P.g.length;F++){var U=this.i($)>>>16,I=this.i($)&65535,z=P.i(F)>>>16,Q=P.i(F)&65535;D[2*$+2*F]+=I*Q,k(D,2*$+2*F),D[2*$+2*F+1]+=U*Q,k(D,2*$+2*F+1),D[2*$+2*F+1]+=I*z,k(D,2*$+2*F+1),D[2*$+2*F+2]+=U*z,k(D,2*$+2*F+2)}for($=0;$<C;$++)D[$]=D[2*$+1]<<16|D[2*$];for($=C;$<2*C;$++)D[$]=0;return new a(D,0)};function k(P,C){for(;(P[C]&65535)!=P[C];)P[C+1]+=P[C]>>>16,P[C]&=65535,C++}function S(P,C){this.g=P,this.h=C}function O(P,C){if(x(C))throw Error("division by zero");if(x(P))return new S(p,p);if(_(P))return C=O(w(P),C),new S(w(C.g),w(C.h));if(_(C))return C=O(P,w(C)),new S(w(C.g),C.h);if(30<P.g.length){if(_(P)||_(C))throw Error("slowDivide_ only works with positive integers.");for(var D=m,$=C;0>=$.l(P);)D=R(D),$=R($);var F=M(D,1),U=M($,1);for($=M($,2),D=M(D,2);!x($);){var I=U.add($);0>=I.l(P)&&(F=F.add(D),U=I),$=M($,1),D=M(D,1)}return C=N(P,F.j(C)),new S(F,C)}for(F=p;0<=P.l(C);){for(D=Math.max(1,Math.floor(P.m()/C.m())),$=Math.ceil(Math.log(D)/Math.LN2),$=48>=$?1:Math.pow(2,$-48),U=d(D),I=U.j(C);_(I)||0<I.l(P);)D-=$,U=d(D),I=U.j(C);x(U)&&(U=m),F=F.add(U),P=N(P,I)}return new S(F,P)}t.A=function(P){return O(this,P).h},t.and=function(P){for(var C=Math.max(this.g.length,P.g.length),D=[],$=0;$<C;$++)D[$]=this.i($)&P.i($);return new a(D,this.h&P.h)},t.or=function(P){for(var C=Math.max(this.g.length,P.g.length),D=[],$=0;$<C;$++)D[$]=this.i($)|P.i($);return new a(D,this.h|P.h)},t.xor=function(P){for(var C=Math.max(this.g.length,P.g.length),D=[],$=0;$<C;$++)D[$]=this.i($)^P.i($);return new a(D,this.h^P.h)};function R(P){for(var C=P.g.length+1,D=[],$=0;$<C;$++)D[$]=P.i($)<<1|P.i($-1)>>>31;return new a(D,P.h)}function M(P,C){var D=C>>5;C%=32;for(var $=P.g.length-D,F=[],U=0;U<$;U++)F[U]=0<C?P.i(U+D)>>>C|P.i(U+D+1)<<32-C:P.i(U+D);return new a(F,P.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=h,s2=a}).apply(typeof v4<"u"?v4:typeof self<"u"?self:typeof window<"u"?window:{});var Hv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var oB,xg,lB,Fx,ET,cB,uB,dB;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(b,j,L){return b==Array.prototype||b==Object.prototype||(b[j]=L.value),b};function n(b){b=[typeof globalThis=="object"&&globalThis,b,typeof window=="object"&&window,typeof self=="object"&&self,typeof Hv=="object"&&Hv];for(var j=0;j<b.length;++j){var L=b[j];if(L&&L.Math==Math)return L}throw Error("Cannot find global object")}var r=n(this);function s(b,j){if(j)e:{var L=r;b=b.split(".");for(var H=0;H<b.length-1;H++){var ue=b[H];if(!(ue in L))break e;L=L[ue]}b=b[b.length-1],H=L[b],j=j(H),j!=H&&j!=null&&e(L,b,{configurable:!0,writable:!0,value:j})}}function i(b,j){b instanceof String&&(b+="");var L=0,H=!1,ue={next:function(){if(!H&&L<b.length){var _e=L++;return{value:j(_e,b[_e]),done:!1}}return H=!0,{done:!0,value:void 0}}};return ue[Symbol.iterator]=function(){return ue},ue}s("Array.prototype.values",function(b){return b||function(){return i(this,function(j,L){return L})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function c(b){var j=typeof b;return j=j!="object"?j:b?Array.isArray(b)?"array":j:"null",j=="array"||j=="object"&&typeof b.length=="number"}function d(b){var j=typeof b;return j=="object"&&b!=null||j=="function"}function h(b,j,L){return b.call.apply(b.bind,arguments)}function p(b,j,L){if(!b)throw Error();if(2<arguments.length){var H=Array.prototype.slice.call(arguments,2);return function(){var ue=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ue,H),b.apply(j,ue)}}return function(){return b.apply(j,arguments)}}function m(b,j,L){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function y(b,j){var L=Array.prototype.slice.call(arguments,1);return function(){var H=L.slice();return H.push.apply(H,arguments),b.apply(this,H)}}function x(b,j){function L(){}L.prototype=j.prototype,b.aa=j.prototype,b.prototype=new L,b.prototype.constructor=b,b.Qb=function(H,ue,_e){for(var ze=Array(arguments.length-2),rn=2;rn<arguments.length;rn++)ze[rn-2]=arguments[rn];return j.prototype[ue].apply(H,ze)}}function _(b){const j=b.length;if(0<j){const L=Array(j);for(let H=0;H<j;H++)L[H]=b[H];return L}return[]}function w(b,j){for(let L=1;L<arguments.length;L++){const H=arguments[L];if(c(H)){const ue=b.length||0,_e=H.length||0;b.length=ue+_e;for(let ze=0;ze<_e;ze++)b[ue+ze]=H[ze]}else b.push(H)}}class N{constructor(j,L){this.i=j,this.j=L,this.h=0,this.g=null}get(){let j;return 0<this.h?(this.h--,j=this.g,this.g=j.next,j.next=null):j=this.i(),j}}function k(b){return/^[\s\xa0]*$/.test(b)}function S(){var b=o.navigator;return b&&(b=b.userAgent)?b:""}function O(b){return O[" "](b),b}O[" "]=function(){};var R=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function M(b,j,L){for(const H in b)j.call(L,b[H],H,b)}function P(b,j){for(const L in b)j.call(void 0,b[L],L,b)}function C(b){const j={};for(const L in b)j[L]=b[L];return j}const D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function $(b,j){let L,H;for(let ue=1;ue<arguments.length;ue++){H=arguments[ue];for(L in H)b[L]=H[L];for(let _e=0;_e<D.length;_e++)L=D[_e],Object.prototype.hasOwnProperty.call(H,L)&&(b[L]=H[L])}}function F(b){var j=1;b=b.split(":");const L=[];for(;0<j&&b.length;)L.push(b.shift()),j--;return b.length&&L.push(b.join(":")),L}function U(b){o.setTimeout(()=>{throw b},0)}function I(){var b=Y;let j=null;return b.g&&(j=b.g,b.g=b.g.next,b.g||(b.h=null),j.next=null),j}class z{constructor(){this.h=this.g=null}add(j,L){const H=Q.get();H.set(j,L),this.h?this.h.next=H:this.g=H,this.h=H}}var Q=new N(()=>new ne,b=>b.reset());class ne{constructor(){this.next=this.g=this.h=null}set(j,L){this.h=j,this.g=L,this.next=null}reset(){this.next=this.g=this.h=null}}let W,K=!1,Y=new z,G=()=>{const b=o.Promise.resolve(void 0);W=()=>{b.then(q)}};var q=()=>{for(var b;b=I();){try{b.h.call(b.g)}catch(L){U(L)}var j=Q;j.j(b),100>j.h&&(j.h++,b.next=j.g,j.g=b)}K=!1};function Z(){this.s=this.s,this.C=this.C}Z.prototype.s=!1,Z.prototype.ma=function(){this.s||(this.s=!0,this.N())},Z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ge(b,j){this.type=b,this.g=this.target=j,this.defaultPrevented=!1}ge.prototype.h=function(){this.defaultPrevented=!0};var Le=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var b=!1,j=Object.defineProperty({},"passive",{get:function(){b=!0}});try{const L=()=>{};o.addEventListener("test",L,j),o.removeEventListener("test",L,j)}catch{}return b})();function Pe(b,j){if(ge.call(this,b?b.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,b){var L=this.type=b.type,H=b.changedTouches&&b.changedTouches.length?b.changedTouches[0]:null;if(this.target=b.target||b.srcElement,this.g=j,j=b.relatedTarget){if(R){e:{try{O(j.nodeName);var ue=!0;break e}catch{}ue=!1}ue||(j=null)}}else L=="mouseover"?j=b.fromElement:L=="mouseout"&&(j=b.toElement);this.relatedTarget=j,H?(this.clientX=H.clientX!==void 0?H.clientX:H.pageX,this.clientY=H.clientY!==void 0?H.clientY:H.pageY,this.screenX=H.screenX||0,this.screenY=H.screenY||0):(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0),this.button=b.button,this.key=b.key||"",this.ctrlKey=b.ctrlKey,this.altKey=b.altKey,this.shiftKey=b.shiftKey,this.metaKey=b.metaKey,this.pointerId=b.pointerId||0,this.pointerType=typeof b.pointerType=="string"?b.pointerType:Ue[b.pointerType]||"",this.state=b.state,this.i=b,b.defaultPrevented&&Pe.aa.h.call(this)}}x(Pe,ge);var Ue={2:"touch",3:"pen",4:"mouse"};Pe.prototype.h=function(){Pe.aa.h.call(this);var b=this.i;b.preventDefault?b.preventDefault():b.returnValue=!1};var V="closure_listenable_"+(1e6*Math.random()|0),ee=0;function X(b,j,L,H,ue){this.listener=b,this.proxy=null,this.src=j,this.type=L,this.capture=!!H,this.ha=ue,this.key=++ee,this.da=this.fa=!1}function te(b){b.da=!0,b.listener=null,b.proxy=null,b.src=null,b.ha=null}function he(b){this.src=b,this.g={},this.h=0}he.prototype.add=function(b,j,L,H,ue){var _e=b.toString();b=this.g[_e],b||(b=this.g[_e]=[],this.h++);var ze=le(b,j,H,ue);return-1<ze?(j=b[ze],L||(j.fa=!1)):(j=new X(j,this.src,_e,!!H,ue),j.fa=L,b.push(j)),j};function ie(b,j){var L=j.type;if(L in b.g){var H=b.g[L],ue=Array.prototype.indexOf.call(H,j,void 0),_e;(_e=0<=ue)&&Array.prototype.splice.call(H,ue,1),_e&&(te(j),b.g[L].length==0&&(delete b.g[L],b.h--))}}function le(b,j,L,H){for(var ue=0;ue<b.length;++ue){var _e=b[ue];if(!_e.da&&_e.listener==j&&_e.capture==!!L&&_e.ha==H)return ue}return-1}var Ne="closure_lm_"+(1e6*Math.random()|0),Se={};function ae(b,j,L,H,ue){if(Array.isArray(j)){for(var _e=0;_e<j.length;_e++)ae(b,j[_e],L,H,ue);return null}return L=gr(L),b&&b[V]?b.K(j,L,d(H)?!!H.capture:!1,ue):ke(b,j,L,!1,H,ue)}function ke(b,j,L,H,ue,_e){if(!j)throw Error("Invalid event type");var ze=d(ue)?!!ue.capture:!!ue,rn=Dt(b);if(rn||(b[Ne]=rn=new he(b)),L=rn.add(j,L,H,ze,_e),L.proxy)return L;if(H=ce(),L.proxy=H,H.src=b,H.listener=L,b.addEventListener)Le||(ue=ze),ue===void 0&&(ue=!1),b.addEventListener(j.toString(),H,ue);else if(b.attachEvent)b.attachEvent(ut(j.toString()),H);else if(b.addListener&&b.removeListener)b.addListener(H);else throw Error("addEventListener and attachEvent are unavailable.");return L}function ce(){function b(L){return j.call(b.src,b.listener,L)}const j=Pt;return b}function Ee(b,j,L,H,ue){if(Array.isArray(j))for(var _e=0;_e<j.length;_e++)Ee(b,j[_e],L,H,ue);else H=d(H)?!!H.capture:!!H,L=gr(L),b&&b[V]?(b=b.i,j=String(j).toString(),j in b.g&&(_e=b.g[j],L=le(_e,L,H,ue),-1<L&&(te(_e[L]),Array.prototype.splice.call(_e,L,1),_e.length==0&&(delete b.g[j],b.h--)))):b&&(b=Dt(b))&&(j=b.g[j.toString()],b=-1,j&&(b=le(j,L,H,ue)),(L=-1<b?j[b]:null)&&Fe(L))}function Fe(b){if(typeof b!="number"&&b&&!b.da){var j=b.src;if(j&&j[V])ie(j.i,b);else{var L=b.type,H=b.proxy;j.removeEventListener?j.removeEventListener(L,H,b.capture):j.detachEvent?j.detachEvent(ut(L),H):j.addListener&&j.removeListener&&j.removeListener(H),(L=Dt(j))?(ie(L,b),L.h==0&&(L.src=null,j[Ne]=null)):te(b)}}}function ut(b){return b in Se?Se[b]:Se[b]="on"+b}function Pt(b,j){if(b.da)b=!0;else{j=new Pe(j,this);var L=b.listener,H=b.ha||b.src;b.fa&&Fe(b),b=L.call(H,j)}return b}function Dt(b){return b=b[Ne],b instanceof he?b:null}var xn="__closure_events_fn_"+(1e9*Math.random()>>>0);function gr(b){return typeof b=="function"?b:(b[xn]||(b[xn]=function(j){return b.handleEvent(j)}),b[xn])}function Wt(){Z.call(this),this.i=new he(this),this.M=this,this.F=null}x(Wt,Z),Wt.prototype[V]=!0,Wt.prototype.removeEventListener=function(b,j,L,H){Ee(this,b,j,L,H)};function at(b,j){var L,H=b.F;if(H)for(L=[];H;H=H.F)L.push(H);if(b=b.M,H=j.type||j,typeof j=="string")j=new ge(j,b);else if(j instanceof ge)j.target=j.target||b;else{var ue=j;j=new ge(H,b),$(j,ue)}if(ue=!0,L)for(var _e=L.length-1;0<=_e;_e--){var ze=j.g=L[_e];ue=ln(ze,H,!0,j)&&ue}if(ze=j.g=b,ue=ln(ze,H,!0,j)&&ue,ue=ln(ze,H,!1,j)&&ue,L)for(_e=0;_e<L.length;_e++)ze=j.g=L[_e],ue=ln(ze,H,!1,j)&&ue}Wt.prototype.N=function(){if(Wt.aa.N.call(this),this.i){var b=this.i,j;for(j in b.g){for(var L=b.g[j],H=0;H<L.length;H++)te(L[H]);delete b.g[j],b.h--}}this.F=null},Wt.prototype.K=function(b,j,L,H){return this.i.add(String(b),j,!1,L,H)},Wt.prototype.L=function(b,j,L,H){return this.i.add(String(b),j,!0,L,H)};function ln(b,j,L,H){if(j=b.i.g[String(j)],!j)return!0;j=j.concat();for(var ue=!0,_e=0;_e<j.length;++_e){var ze=j[_e];if(ze&&!ze.da&&ze.capture==L){var rn=ze.listener,kr=ze.ha||ze.src;ze.fa&&ie(b.i,ze),ue=rn.call(kr,H)!==!1&&ue}}return ue&&!H.defaultPrevented}function pe(b,j,L){if(typeof b=="function")L&&(b=m(b,L));else if(b&&typeof b.handleEvent=="function")b=m(b.handleEvent,b);else throw Error("Invalid listener argument");return 2147483647<Number(j)?-1:o.setTimeout(b,j||0)}function we(b){b.g=pe(()=>{b.g=null,b.i&&(b.i=!1,we(b))},b.l);const j=b.h;b.h=null,b.m.apply(null,j)}class Te extends Z{constructor(j,L){super(),this.m=j,this.l=L,this.h=null,this.i=!1,this.g=null}j(j){this.h=arguments,this.g?this.i=!0:we(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ve(b){Z.call(this),this.h=b,this.g={}}x(ve,Z);var Re=[];function Qe(b){M(b.g,function(j,L){this.g.hasOwnProperty(L)&&Fe(j)},b),b.g={}}ve.prototype.N=function(){ve.aa.N.call(this),Qe(this)},ve.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ke=o.JSON.stringify,At=o.JSON.parse,bn=class{stringify(b){return o.JSON.stringify(b,void 0)}parse(b){return o.JSON.parse(b,void 0)}};function ms(){}ms.prototype.h=null;function gs(b){return b.h||(b.h=b.i())}function Wn(){}var hn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function St(){ge.call(this,"d")}x(St,ge);function Qt(){ge.call(this,"c")}x(Qt,ge);var wn={},ys=null;function Xn(){return ys=ys||new Wt}wn.La="serverreachability";function ar(b){ge.call(this,wn.La,b)}x(ar,ge);function Jn(b){const j=Xn();at(j,new ar(j))}wn.STAT_EVENT="statevent";function Hs(b,j){ge.call(this,wn.STAT_EVENT,b),this.stat=j}x(Hs,ge);function jt(b){const j=Xn();at(j,new Hs(j,b))}wn.Ma="timingevent";function es(b,j){ge.call(this,wn.Ma,b),this.size=j}x(es,ge);function In(b,j){if(typeof b!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){b()},j)}function Sr(){this.g=!0}Sr.prototype.xa=function(){this.g=!1};function Ds(b,j,L,H,ue,_e){b.info(function(){if(b.g)if(_e)for(var ze="",rn=_e.split("&"),kr=0;kr<rn.length;kr++){var Ht=rn[kr].split("=");if(1<Ht.length){var $r=Ht[0];Ht=Ht[1];var yr=$r.split("_");ze=2<=yr.length&&yr[1]=="type"?ze+($r+"="+Ht+"&"):ze+($r+"=redacted&")}}else ze=null;else ze=_e;return"XMLHTTP REQ ("+H+") [attempt "+ue+"]: "+j+`
`+L+`
`+ze})}function qs(b,j,L,H,ue,_e,ze){b.info(function(){return"XMLHTTP RESP ("+H+") [ attempt "+ue+"]: "+j+`
`+L+`
`+_e+" "+ze})}function Zn(b,j,L,H){b.info(function(){return"XMLHTTP TEXT ("+j+"): "+Ho(b,L)+(H?" "+H:"")})}function vi(b,j){b.info(function(){return"TIMEOUT: "+j})}Sr.prototype.info=function(){};function Ho(b,j){if(!b.g)return j;if(!j)return null;try{var L=JSON.parse(j);if(L){for(b=0;b<L.length;b++)if(Array.isArray(L[b])){var H=L[b];if(!(2>H.length)){var ue=H[1];if(Array.isArray(ue)&&!(1>ue.length)){var _e=ue[0];if(_e!="noop"&&_e!="stop"&&_e!="close")for(var ze=1;ze<ue.length;ze++)ue[ze]=""}}}}return Ke(L)}catch{return j}}var rc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},bh={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},xi;function qo(){}x(qo,ms),qo.prototype.g=function(){return new XMLHttpRequest},qo.prototype.i=function(){return{}},xi=new qo;function bi(b,j,L,H){this.j=b,this.i=j,this.l=L,this.R=H||1,this.U=new ve(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new wh}function wh(){this.i=null,this.g="",this.h=!1}var Cu={},sc={};function ic(b,j,L){b.L=1,b.v=uc(wi(j)),b.m=L,b.P=!0,ju(b,null)}function ju(b,j){b.F=Date.now(),tn(b),b.A=wi(b.v);var L=b.A,H=b.R;Array.isArray(H)||(H=[String(H)]),hc(L.i,"t",H),b.C=0,L=b.j.J,b.h=new wh,b.g=Ky(b.j,L?j:null,!b.m),0<b.O&&(b.M=new Te(m(b.Y,b,b.g),b.O)),j=b.U,L=b.g,H=b.ca;var ue="readystatechange";Array.isArray(ue)||(ue&&(Re[0]=ue.toString()),ue=Re);for(var _e=0;_e<ue.length;_e++){var ze=ae(L,ue[_e],H||j.handleEvent,!1,j.h||j);if(!ze)break;j.g[ze.key]=ze}j=b.H?C(b.H):{},b.m?(b.u||(b.u="POST"),j["Content-Type"]="application/x-www-form-urlencoded",b.g.ea(b.A,b.u,b.m,j)):(b.u="GET",b.g.ea(b.A,b.u,null,j)),Jn(),Ds(b.i,b.u,b.A,b.l,b.R,b.m)}bi.prototype.ca=function(b){b=b.target;const j=this.M;j&&Ys(b)==3?j.j():this.Y(b)},bi.prototype.Y=function(b){try{if(b==this.g)e:{const yr=Ys(this.g);var j=this.g.Ba();const Ki=this.g.Z();if(!(3>yr)&&(yr!=3||this.g&&(this.h.h||this.g.oa()||vm(this.g)))){this.J||yr!=4||j==7||(j==8||0>=Ki?Jn(3):Jn(2)),We(this);var L=this.g.Z();this.X=L;t:if(_h(this)){var H=vm(this.g);b="";var ue=H.length,_e=Ys(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ze(this),Ye(this);var ze="";break t}this.h.i=new o.TextDecoder}for(j=0;j<ue;j++)this.h.h=!0,b+=this.h.i.decode(H[j],{stream:!(_e&&j==ue-1)});H.length=0,this.h.g+=b,this.C=0,ze=this.h.g}else ze=this.g.oa();if(this.o=L==200,qs(this.i,this.u,this.A,this.l,this.R,yr,L),this.o){if(this.T&&!this.K){t:{if(this.g){var rn,kr=this.g;if((rn=kr.g?kr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(rn)){var Ht=rn;break t}}Ht=null}if(L=Ht)Zn(this.i,this.l,L,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Me(this,L);else{this.o=!1,this.s=3,jt(12),Ze(this),Ye(this);break e}}if(this.P){L=!0;let Ei;for(;!this.J&&this.C<ze.length;)if(Ei=pm(this,ze),Ei==sc){yr==4&&(this.s=4,jt(14),L=!1),Zn(this.i,this.l,null,"[Incomplete Response]");break}else if(Ei==Cu){this.s=4,jt(15),Zn(this.i,this.l,ze,"[Invalid Chunk]"),L=!1;break}else Zn(this.i,this.l,Ei,null),Me(this,Ei);if(_h(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),yr!=4||ze.length!=0||this.h.h||(this.s=1,jt(16),L=!1),this.o=this.o&&L,!L)Zn(this.i,this.l,ze,"[Invalid Chunked Response]"),Ze(this),Ye(this);else if(0<ze.length&&!this.W){this.W=!0;var $r=this.j;$r.g==this&&$r.ba&&!$r.M&&($r.j.info("Great, no buffering proxy detected. Bytes received: "+ze.length),bm($r),$r.M=!0,jt(11))}}else Zn(this.i,this.l,ze,null),Me(this,ze);yr==4&&Ze(this),this.o&&!this.J&&(yr==4?Dh(this.j,this):(this.o=!1,tn(this)))}else Ch(this.g),L==400&&0<ze.indexOf("Unknown SID")?(this.s=3,jt(12)):(this.s=0,jt(13)),Ze(this),Ye(this)}}}catch{}finally{}};function _h(b){return b.g?b.u=="GET"&&b.L!=2&&b.j.Ca:!1}function pm(b,j){var L=b.C,H=j.indexOf(`
`,L);return H==-1?sc:(L=Number(j.substring(L,H)),isNaN(L)?Cu:(H+=1,H+L>j.length?sc:(j=j.slice(H,H+L),b.C=H+L,j)))}bi.prototype.cancel=function(){this.J=!0,Ze(this)};function tn(b){b.S=Date.now()+b.I,ro(b,b.I)}function ro(b,j){if(b.B!=null)throw Error("WatchDog timer not null");b.B=In(m(b.ba,b),j)}function We(b){b.B&&(o.clearTimeout(b.B),b.B=null)}bi.prototype.ba=function(){this.B=null;const b=Date.now();0<=b-this.S?(vi(this.i,this.A),this.L!=2&&(Jn(),jt(17)),Ze(this),this.s=2,Ye(this)):ro(this,this.S-b)};function Ye(b){b.j.G==0||b.J||Dh(b.j,b)}function Ze(b){We(b);var j=b.M;j&&typeof j.ma=="function"&&j.ma(),b.M=null,Qe(b.U),b.g&&(j=b.g,b.g=null,j.abort(),j.ma())}function Me(b,j){try{var L=b.j;if(L.G!=0&&(L.g==b||cn(L.h,b))){if(!b.K&&cn(L.h,b)&&L.G==3){try{var H=L.Da.g.parse(j)}catch{H=null}if(Array.isArray(H)&&H.length==3){var ue=H;if(ue[0]==0){e:if(!L.u){if(L.g)if(L.g.F+3e3<b.F)Ih(L),_a(L);else break e;Ah(L),jt(18)}}else L.za=ue[1],0<L.za-L.T&&37500>ue[2]&&L.F&&L.v==0&&!L.C&&(L.C=In(m(L.Za,L),6e3));if(1>=kt(L.h)&&L.ca){try{L.ca()}catch{}L.ca=void 0}}else Xo(L,11)}else if((b.K||L.g==b)&&Ih(L),!k(j))for(ue=L.Da.g.parse(j),j=0;j<ue.length;j++){let Ht=ue[j];if(L.T=Ht[0],Ht=Ht[1],L.G==2)if(Ht[0]=="c"){L.K=Ht[1],L.ia=Ht[2];const $r=Ht[3];$r!=null&&(L.la=$r,L.j.info("VER="+L.la));const yr=Ht[4];yr!=null&&(L.Aa=yr,L.j.info("SVER="+L.Aa));const Ki=Ht[5];Ki!=null&&typeof Ki=="number"&&0<Ki&&(H=1.5*Ki,L.L=H,L.j.info("backChannelRequestTimeoutMs_="+H)),H=L;const Ei=b.g;if(Ei){const Mu=Ei.g?Ei.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Mu){var _e=H.h;_e.g||Mu.indexOf("spdy")==-1&&Mu.indexOf("quic")==-1&&Mu.indexOf("h2")==-1||(_e.j=_e.l,_e.g=new Set,_e.h&&(ac(_e,_e.h),_e.h=null))}if(H.D){const Oh=Ei.g?Ei.g.getResponseHeader("X-HTTP-Session-Id"):null;Oh&&(H.ya=Oh,fn(H.I,H.D,Oh))}}L.G=3,L.l&&L.l.ua(),L.ba&&(L.R=Date.now()-b.F,L.j.info("Handshake RTT: "+L.R+"ms")),H=L;var ze=b;if(H.qa=qy(H,H.J?H.ia:null,H.W),ze.K){Eh(H.h,ze);var rn=ze,kr=H.L;kr&&(rn.I=kr),rn.B&&(We(rn),tn(rn)),H.g=ze}else Ou(H);0<L.i.length&&oo(L)}else Ht[0]!="stop"&&Ht[0]!="close"||Xo(L,7);else L.G==3&&(Ht[0]=="stop"||Ht[0]=="close"?Ht[0]=="stop"?Xo(L,7):ns(L):Ht[0]!="noop"&&L.l&&L.l.ta(Ht),L.v=0)}}Jn(4)}catch{}}var yt=class{constructor(b,j){this.g=b,this.map=j}};function Tt(b){this.l=b||10,o.PerformanceNavigationTiming?(b=o.performance.getEntriesByType("navigation"),b=0<b.length&&(b[0].nextHopProtocol=="hq"||b[0].nextHopProtocol=="h2")):b=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=b?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ot(b){return b.h?!0:b.g?b.g.size>=b.j:!1}function kt(b){return b.h?1:b.g?b.g.size:0}function cn(b,j){return b.h?b.h==j:b.g?b.g.has(j):!1}function ac(b,j){b.g?b.g.add(j):b.h=j}function Eh(b,j){b.h&&b.h==j?b.h=null:b.g&&b.g.has(j)&&b.g.delete(j)}Tt.prototype.cancel=function(){if(this.i=Nh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const b of this.g.values())b.cancel();this.g.clear()}};function Nh(b){if(b.h!=null)return b.i.concat(b.h.D);if(b.g!=null&&b.g.size!==0){let j=b.i;for(const L of b.g.values())j=j.concat(L.D);return j}return _(b.i)}function Pu(b){if(b.V&&typeof b.V=="function")return b.V();if(typeof Map<"u"&&b instanceof Map||typeof Set<"u"&&b instanceof Set)return Array.from(b.values());if(typeof b=="string")return b.split("");if(c(b)){for(var j=[],L=b.length,H=0;H<L;H++)j.push(b[H]);return j}j=[],L=0;for(H in b)j[L++]=b[H];return j}function Hi(b){if(b.na&&typeof b.na=="function")return b.na();if(!b.V||typeof b.V!="function"){if(typeof Map<"u"&&b instanceof Map)return Array.from(b.keys());if(!(typeof Set<"u"&&b instanceof Set)){if(c(b)||typeof b=="string"){var j=[];b=b.length;for(var L=0;L<b;L++)j.push(L);return j}j=[],L=0;for(const H in b)j[L++]=H;return j}}}function oc(b,j){if(b.forEach&&typeof b.forEach=="function")b.forEach(j,void 0);else if(c(b)||typeof b=="string")Array.prototype.forEach.call(b,j,void 0);else for(var L=Hi(b),H=Pu(b),ue=H.length,_e=0;_e<ue;_e++)j.call(void 0,H[_e],L&&L[_e],b)}var Au=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function rE(b,j){if(b){b=b.split("&");for(var L=0;L<b.length;L++){var H=b[L].indexOf("="),ue=null;if(0<=H){var _e=b[L].substring(0,H);ue=b[L].substring(H+1)}else _e=b[L];j(_e,ue?decodeURIComponent(ue.replace(/\+/g," ")):"")}}}function Ko(b){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,b instanceof Ko){this.h=b.h,Iu(this,b.j),this.o=b.o,this.g=b.g,lc(this,b.s),this.l=b.l;var j=b.i,L=new so;L.i=j.i,j.g&&(L.g=new Map(j.g),L.h=j.h),cc(this,L),this.m=b.m}else b&&(j=String(b).match(Au))?(this.h=!1,Iu(this,j[1]||"",!0),this.o=Ut(j[2]||""),this.g=Ut(j[3]||"",!0),lc(this,j[4]),this.l=Ut(j[5]||"",!0),cc(this,j[6]||"",!0),this.m=Ut(j[7]||"")):(this.h=!1,this.i=new so(null,this.h))}Ko.prototype.toString=function(){var b=[],j=this.j;j&&b.push(dc(j,Sh,!0),":");var L=this.g;return(L||j=="file")&&(b.push("//"),(j=this.o)&&b.push(dc(j,Sh,!0),"@"),b.push(encodeURIComponent(String(L)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),L=this.s,L!=null&&b.push(":",String(L))),(L=this.l)&&(this.g&&L.charAt(0)!="/"&&b.push("/"),b.push(dc(L,L.charAt(0)=="/"?Fy:Ly,!0))),(L=this.i.toString())&&b.push("?",L),(L=this.m)&&b.push("#",dc(L,mm)),b.join("")};function wi(b){return new Ko(b)}function Iu(b,j,L){b.j=L?Ut(j,!0):j,b.j&&(b.j=b.j.replace(/:$/,""))}function lc(b,j){if(j){if(j=Number(j),isNaN(j)||0>j)throw Error("Bad port number "+j);b.s=j}else b.s=null}function cc(b,j,L){j instanceof so?(b.i=j,io(b.i,b.h)):(L||(j=dc(j,$y)),b.i=new so(j,b.h))}function fn(b,j,L){b.i.set(j,L)}function uc(b){return fn(b,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),b}function Ut(b,j){return b?j?decodeURI(b.replace(/%25/g,"%2525")):decodeURIComponent(b):""}function dc(b,j,L){return typeof b=="string"?(b=encodeURI(b).replace(j,My),L&&(b=b.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b):null}function My(b){return b=b.charCodeAt(0),"%"+(b>>4&15).toString(16)+(b&15).toString(16)}var Sh=/[#\/\?@]/g,Ly=/[#\?:]/g,Fy=/[#\?]/g,$y=/[#\?@]/g,mm=/#/g;function so(b,j){this.h=this.g=null,this.i=b||null,this.j=!!j}function ts(b){b.g||(b.g=new Map,b.h=0,b.i&&rE(b.i,function(j,L){b.add(decodeURIComponent(j.replace(/\+/g," ")),L)}))}t=so.prototype,t.add=function(b,j){ts(this),this.i=null,b=qi(this,b);var L=this.g.get(b);return L||this.g.set(b,L=[]),L.push(j),this.h+=1,this};function va(b,j){ts(b),j=qi(b,j),b.g.has(j)&&(b.i=null,b.h-=b.g.get(j).length,b.g.delete(j))}function xa(b,j){return ts(b),j=qi(b,j),b.g.has(j)}t.forEach=function(b,j){ts(this),this.g.forEach(function(L,H){L.forEach(function(ue){b.call(j,ue,H,this)},this)},this)},t.na=function(){ts(this);const b=Array.from(this.g.values()),j=Array.from(this.g.keys()),L=[];for(let H=0;H<j.length;H++){const ue=b[H];for(let _e=0;_e<ue.length;_e++)L.push(j[H])}return L},t.V=function(b){ts(this);let j=[];if(typeof b=="string")xa(this,b)&&(j=j.concat(this.g.get(qi(this,b))));else{b=Array.from(this.g.values());for(let L=0;L<b.length;L++)j=j.concat(b[L])}return j},t.set=function(b,j){return ts(this),this.i=null,b=qi(this,b),xa(this,b)&&(this.h-=this.g.get(b).length),this.g.set(b,[j]),this.h+=1,this},t.get=function(b,j){return b?(b=this.V(b),0<b.length?String(b[0]):j):j};function hc(b,j,L){va(b,j),0<L.length&&(b.i=null,b.g.set(qi(b,j),_(L)),b.h+=L.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const b=[],j=Array.from(this.g.keys());for(var L=0;L<j.length;L++){var H=j[L];const _e=encodeURIComponent(String(H)),ze=this.V(H);for(H=0;H<ze.length;H++){var ue=_e;ze[H]!==""&&(ue+="="+encodeURIComponent(String(ze[H]))),b.push(ue)}}return this.i=b.join("&")};function qi(b,j){return j=String(j),b.j&&(j=j.toLowerCase()),j}function io(b,j){j&&!b.j&&(ts(b),b.i=null,b.g.forEach(function(L,H){var ue=H.toLowerCase();H!=ue&&(va(this,H),hc(this,ue,L))},b)),b.j=j}function sE(b,j){const L=new Sr;if(o.Image){const H=new Image;H.onload=y(Ks,L,"TestLoadImage: loaded",!0,j,H),H.onerror=y(Ks,L,"TestLoadImage: error",!1,j,H),H.onabort=y(Ks,L,"TestLoadImage: abort",!1,j,H),H.ontimeout=y(Ks,L,"TestLoadImage: timeout",!1,j,H),o.setTimeout(function(){H.ontimeout&&H.ontimeout()},1e4),H.src=b}else j(!1)}function Vy(b,j){const L=new Sr,H=new AbortController,ue=setTimeout(()=>{H.abort(),Ks(L,"TestPingServer: timeout",!1,j)},1e4);fetch(b,{signal:H.signal}).then(_e=>{clearTimeout(ue),_e.ok?Ks(L,"TestPingServer: ok",!0,j):Ks(L,"TestPingServer: server error",!1,j)}).catch(()=>{clearTimeout(ue),Ks(L,"TestPingServer: error",!1,j)})}function Ks(b,j,L,H,ue){try{ue&&(ue.onload=null,ue.onerror=null,ue.onabort=null,ue.ontimeout=null),H(L)}catch{}}function iE(){this.g=new bn}function By(b,j,L){const H=L||"";try{oc(b,function(ue,_e){let ze=ue;d(ue)&&(ze=Ke(ue)),j.push(H+_e+"="+encodeURIComponent(ze))})}catch(ue){throw j.push(H+"type="+encodeURIComponent("_badmap")),ue}}function Yo(b){this.l=b.Ub||null,this.j=b.eb||!1}x(Yo,ms),Yo.prototype.g=function(){return new Du(this.l,this.j)},Yo.prototype.i=(function(b){return function(){return b}})({});function Du(b,j){Wt.call(this),this.D=b,this.o=j,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(Du,Wt),t=Du.prototype,t.open=function(b,j){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=b,this.A=j,this.readyState=1,wa(this)},t.send=function(b){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const j={headers:this.u,method:this.B,credentials:this.m,cache:void 0};b&&(j.body=b),(this.D||o).fetch(new Request(this.A,j)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ba(this)),this.readyState=0},t.Sa=function(b){if(this.g&&(this.l=b,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=b.headers,this.readyState=2,wa(this)),this.g&&(this.readyState=3,wa(this),this.g)))if(this.responseType==="arraybuffer")b.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in b){if(this.j=b.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Uy(this)}else b.text().then(this.Ra.bind(this),this.ga.bind(this))};function Uy(b){b.j.read().then(b.Pa.bind(b)).catch(b.ga.bind(b))}t.Pa=function(b){if(this.g){if(this.o&&b.value)this.response.push(b.value);else if(!this.o){var j=b.value?b.value:new Uint8Array(0);(j=this.v.decode(j,{stream:!b.done}))&&(this.response=this.responseText+=j)}b.done?ba(this):wa(this),this.readyState==3&&Uy(this)}},t.Ra=function(b){this.g&&(this.response=this.responseText=b,ba(this))},t.Qa=function(b){this.g&&(this.response=b,ba(this))},t.ga=function(){this.g&&ba(this)};function ba(b){b.readyState=4,b.l=null,b.j=null,b.v=null,wa(b)}t.setRequestHeader=function(b,j){this.u.append(b,j)},t.getResponseHeader=function(b){return this.h&&this.h.get(b.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const b=[],j=this.h.entries();for(var L=j.next();!L.done;)L=L.value,b.push(L[0]+": "+L[1]),L=j.next();return b.join(`\r
`)};function wa(b){b.onreadystatechange&&b.onreadystatechange.call(b)}Object.defineProperty(Du.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(b){this.m=b?"include":"same-origin"}});function Go(b){let j="";return M(b,function(L,H){j+=H,j+=":",j+=L,j+=`\r
`}),j}function fc(b,j,L){e:{for(H in L){var H=!1;break e}H=!0}H||(L=Go(L),typeof b=="string"?L!=null&&encodeURIComponent(String(L)):fn(b,j,L))}function Dn(b){Wt.call(this),this.headers=new Map,this.o=b||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(Dn,Wt);var aE=/^https?$/i,gm=["POST","PUT"];t=Dn.prototype,t.Ha=function(b){this.J=b},t.ea=function(b,j,L,H){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+b);j=j?j.toUpperCase():"GET",this.D=b,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():xi.g(),this.v=this.o?gs(this.o):gs(xi),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(j,String(b),!0),this.B=!1}catch(_e){Ru(this,_e);return}if(b=L||"",L=new Map(this.headers),H)if(Object.getPrototypeOf(H)===Object.prototype)for(var ue in H)L.set(ue,H[ue]);else if(typeof H.keys=="function"&&typeof H.get=="function")for(const _e of H.keys())L.set(_e,H.get(_e));else throw Error("Unknown input type for opt_headers: "+String(H));H=Array.from(L.keys()).find(_e=>_e.toLowerCase()=="content-type"),ue=o.FormData&&b instanceof o.FormData,!(0<=Array.prototype.indexOf.call(gm,j,void 0))||H||ue||L.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[_e,ze]of L)this.g.setRequestHeader(_e,ze);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Th(this),this.u=!0,this.g.send(b),this.u=!1}catch(_e){Ru(this,_e)}};function Ru(b,j){b.h=!1,b.g&&(b.j=!0,b.g.abort(),b.j=!1),b.l=j,b.m=5,kh(b),_i(b)}function kh(b){b.A||(b.A=!0,at(b,"complete"),at(b,"error"))}t.abort=function(b){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=b||7,at(this,"complete"),at(this,"abort"),_i(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_i(this,!0)),Dn.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?ym(this):this.bb())},t.bb=function(){ym(this)};function ym(b){if(b.h&&typeof a<"u"&&(!b.v[1]||Ys(b)!=4||b.Z()!=2)){if(b.u&&Ys(b)==4)pe(b.Ea,0,b);else if(at(b,"readystatechange"),Ys(b)==4){b.h=!1;try{const ze=b.Z();e:switch(ze){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var j=!0;break e;default:j=!1}var L;if(!(L=j)){var H;if(H=ze===0){var ue=String(b.D).match(Au)[1]||null;!ue&&o.self&&o.self.location&&(ue=o.self.location.protocol.slice(0,-1)),H=!aE.test(ue?ue.toLowerCase():"")}L=H}if(L)at(b,"complete"),at(b,"success");else{b.m=6;try{var _e=2<Ys(b)?b.g.statusText:""}catch{_e=""}b.l=_e+" ["+b.Z()+"]",kh(b)}}finally{_i(b)}}}}function _i(b,j){if(b.g){Th(b);const L=b.g,H=b.v[0]?()=>{}:null;b.g=null,b.v=null,j||at(b,"ready");try{L.onreadystatechange=H}catch{}}}function Th(b){b.I&&(o.clearTimeout(b.I),b.I=null)}t.isActive=function(){return!!this.g};function Ys(b){return b.g?b.g.readyState:0}t.Z=function(){try{return 2<Ys(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(b){if(this.g){var j=this.g.responseText;return b&&j.indexOf(b)==0&&(j=j.substring(b.length)),At(j)}};function vm(b){try{if(!b.g)return null;if("response"in b.g)return b.g.response;switch(b.H){case"":case"text":return b.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in b.g)return b.g.mozResponseArrayBuffer}return null}catch{return null}}function Ch(b){const j={};b=(b.g&&2<=Ys(b)&&b.g.getAllResponseHeaders()||"").split(`\r
`);for(let H=0;H<b.length;H++){if(k(b[H]))continue;var L=F(b[H]);const ue=L[0];if(L=L[1],typeof L!="string")continue;L=L.trim();const _e=j[ue]||[];j[ue]=_e,_e.push(L)}P(j,function(H){return H.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ao(b,j,L){return L&&L.internalChannelParams&&L.internalChannelParams[b]||j}function xm(b){this.Aa=0,this.i=[],this.j=new Sr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ao("failFast",!1,b),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ao("baseRetryDelayMs",5e3,b),this.cb=ao("retryDelaySeedMs",1e4,b),this.Wa=ao("forwardChannelMaxRetries",2,b),this.wa=ao("forwardChannelRequestTimeoutMs",2e4,b),this.pa=b&&b.xmlHttpFactory||void 0,this.Xa=b&&b.Tb||void 0,this.Ca=b&&b.useFetchStreams||!1,this.L=void 0,this.J=b&&b.supportsCrossDomainXhr||!1,this.K="",this.h=new Tt(b&&b.concurrentRequestLimit),this.Da=new iE,this.P=b&&b.fastHandshake||!1,this.O=b&&b.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=b&&b.Rb||!1,b&&b.xa&&this.j.xa(),b&&b.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&b&&b.detectBufferingProxy||!1,this.ja=void 0,b&&b.longPollingTimeout&&0<b.longPollingTimeout&&(this.ja=b.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=xm.prototype,t.la=8,t.G=1,t.connect=function(b,j,L,H){jt(0),this.W=b,this.H=j||{},L&&H!==void 0&&(this.H.OSID=L,this.H.OAID=H),this.F=this.X,this.I=qy(this,null,this.W),oo(this)};function ns(b){if(jh(b),b.G==3){var j=b.U++,L=wi(b.I);if(fn(L,"SID",b.K),fn(L,"RID",j),fn(L,"TYPE","terminate"),Qo(b,L),j=new bi(b,b.j,j),j.L=2,j.v=uc(wi(L)),L=!1,o.navigator&&o.navigator.sendBeacon)try{L=o.navigator.sendBeacon(j.v.toString(),"")}catch{}!L&&o.Image&&(new Image().src=j.v,L=!0),L||(j.g=Ky(j.j,null),j.g.ea(j.v)),j.F=Date.now(),tn(j)}Hy(b)}function _a(b){b.g&&(bm(b),b.g.cancel(),b.g=null)}function jh(b){_a(b),b.u&&(o.clearTimeout(b.u),b.u=null),Ih(b),b.h.cancel(),b.s&&(typeof b.s=="number"&&o.clearTimeout(b.s),b.s=null)}function oo(b){if(!ot(b.h)&&!b.s){b.s=!0;var j=b.Ga;W||G(),K||(W(),K=!0),Y.add(j,b),b.B=0}}function oE(b,j){return kt(b.h)>=b.h.j-(b.s?1:0)?!1:b.s?(b.i=j.D.concat(b.i),!0):b.G==1||b.G==2||b.B>=(b.Va?0:b.Wa)?!1:(b.s=In(m(b.Ga,b,j),Wy(b,b.B)),b.B++,!0)}t.Ga=function(b){if(this.s)if(this.s=null,this.G==1){if(!b){this.U=Math.floor(1e5*Math.random()),b=this.U++;const ue=new bi(this,this.j,b);let _e=this.o;if(this.S&&(_e?(_e=C(_e),$(_e,this.S)):_e=this.S),this.m!==null||this.O||(ue.H=_e,_e=null),this.P)e:{for(var j=0,L=0;L<this.i.length;L++){t:{var H=this.i[L];if("__data__"in H.map&&(H=H.map.__data__,typeof H=="string")){H=H.length;break t}H=void 0}if(H===void 0)break;if(j+=H,4096<j){j=L;break e}if(j===4096||L===this.i.length-1){j=L+1;break e}}j=1e3}else j=1e3;j=pc(this,ue,j),L=wi(this.I),fn(L,"RID",b),fn(L,"CVER",22),this.D&&fn(L,"X-HTTP-Session-Id",this.D),Qo(this,L),_e&&(this.O?j="headers="+encodeURIComponent(String(Go(_e)))+"&"+j:this.m&&fc(L,this.m,_e)),ac(this.h,ue),this.Ua&&fn(L,"TYPE","init"),this.P?(fn(L,"$req",j),fn(L,"SID","null"),ue.T=!0,ic(ue,L,null)):ic(ue,L,j),this.G=2}}else this.G==3&&(b?Ph(this,b):this.i.length==0||ot(this.h)||Ph(this))};function Ph(b,j){var L;j?L=j.l:L=b.U++;const H=wi(b.I);fn(H,"SID",b.K),fn(H,"RID",L),fn(H,"AID",b.T),Qo(b,H),b.m&&b.o&&fc(H,b.m,b.o),L=new bi(b,b.j,L,b.B+1),b.m===null&&(L.H=b.o),j&&(b.i=j.D.concat(b.i)),j=pc(b,L,1e3),L.I=Math.round(.5*b.wa)+Math.round(.5*b.wa*Math.random()),ac(b.h,L),ic(L,H,j)}function Qo(b,j){b.H&&M(b.H,function(L,H){fn(j,H,L)}),b.l&&oc({},function(L,H){fn(j,H,L)})}function pc(b,j,L){L=Math.min(b.i.length,L);var H=b.l?m(b.l.Na,b.l,b):null;e:{var ue=b.i;let _e=-1;for(;;){const ze=["count="+L];_e==-1?0<L?(_e=ue[0].g,ze.push("ofs="+_e)):_e=0:ze.push("ofs="+_e);let rn=!0;for(let kr=0;kr<L;kr++){let Ht=ue[kr].g;const $r=ue[kr].map;if(Ht-=_e,0>Ht)_e=Math.max(0,ue[kr].g-100),rn=!1;else try{By($r,ze,"req"+Ht+"_")}catch{H&&H($r)}}if(rn){H=ze.join("&");break e}}}return b=b.i.splice(0,L),j.D=b,H}function Ou(b){if(!b.g&&!b.u){b.Y=1;var j=b.Fa;W||G(),K||(W(),K=!0),Y.add(j,b),b.v=0}}function Ah(b){return b.g||b.u||3<=b.v?!1:(b.Y++,b.u=In(m(b.Fa,b),Wy(b,b.v)),b.v++,!0)}t.Fa=function(){if(this.u=null,zy(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var b=2*this.R;this.j.info("BP detection timer enabled: "+b),this.A=In(m(this.ab,this),b)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,jt(10),_a(this),zy(this))};function bm(b){b.A!=null&&(o.clearTimeout(b.A),b.A=null)}function zy(b){b.g=new bi(b,b.j,"rpc",b.Y),b.m===null&&(b.g.H=b.o),b.g.O=0;var j=wi(b.qa);fn(j,"RID","rpc"),fn(j,"SID",b.K),fn(j,"AID",b.T),fn(j,"CI",b.F?"0":"1"),!b.F&&b.ja&&fn(j,"TO",b.ja),fn(j,"TYPE","xmlhttp"),Qo(b,j),b.m&&b.o&&fc(j,b.m,b.o),b.L&&(b.g.I=b.L);var L=b.g;b=b.ia,L.L=1,L.v=uc(wi(j)),L.m=null,L.P=!0,ju(L,b)}t.Za=function(){this.C!=null&&(this.C=null,_a(this),Ah(this),jt(19))};function Ih(b){b.C!=null&&(o.clearTimeout(b.C),b.C=null)}function Dh(b,j){var L=null;if(b.g==j){Ih(b),bm(b),b.g=null;var H=2}else if(cn(b.h,j))L=j.D,Eh(b.h,j),H=1;else return;if(b.G!=0){if(j.o)if(H==1){L=j.m?j.m.length:0,j=Date.now()-j.F;var ue=b.B;H=Xn(),at(H,new es(H,L)),oo(b)}else Ou(b);else if(ue=j.s,ue==3||ue==0&&0<j.X||!(H==1&&oE(b,j)||H==2&&Ah(b)))switch(L&&0<L.length&&(j=b.h,j.i=j.i.concat(L)),ue){case 1:Xo(b,5);break;case 4:Xo(b,10);break;case 3:Xo(b,6);break;default:Xo(b,2)}}}function Wy(b,j){let L=b.Ta+Math.floor(Math.random()*b.cb);return b.isActive()||(L*=2),L*j}function Xo(b,j){if(b.j.info("Error code "+j),j==2){var L=m(b.fb,b),H=b.Xa;const ue=!H;H=new Ko(H||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Iu(H,"https"),uc(H),ue?sE(H.toString(),L):Vy(H.toString(),L)}else jt(2);b.G=0,b.l&&b.l.sa(j),Hy(b),jh(b)}t.fb=function(b){b?(this.j.info("Successfully pinged google.com"),jt(2)):(this.j.info("Failed to ping google.com"),jt(1))};function Hy(b){if(b.G=0,b.ka=[],b.l){const j=Nh(b.h);(j.length!=0||b.i.length!=0)&&(w(b.ka,j),w(b.ka,b.i),b.h.i.length=0,_(b.i),b.i.length=0),b.l.ra()}}function qy(b,j,L){var H=L instanceof Ko?wi(L):new Ko(L);if(H.g!="")j&&(H.g=j+"."+H.g),lc(H,H.s);else{var ue=o.location;H=ue.protocol,j=j?j+"."+ue.hostname:ue.hostname,ue=+ue.port;var _e=new Ko(null);H&&Iu(_e,H),j&&(_e.g=j),ue&&lc(_e,ue),L&&(_e.l=L),H=_e}return L=b.D,j=b.ya,L&&j&&fn(H,L,j),fn(H,"VER",b.la),Qo(b,H),H}function Ky(b,j,L){if(j&&!b.J)throw Error("Can't create secondary domain capable XhrIo object.");return j=b.Ca&&!b.pa?new Dn(new Yo({eb:L})):new Dn(b.pa),j.Ha(b.J),j}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function wm(){}t=wm.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Rh(){}Rh.prototype.g=function(b,j){return new Rs(b,j)};function Rs(b,j){Wt.call(this),this.g=new xm(j),this.l=b,this.h=j&&j.messageUrlParams||null,b=j&&j.messageHeaders||null,j&&j.clientProtocolHeaderRequired&&(b?b["X-Client-Protocol"]="webchannel":b={"X-Client-Protocol":"webchannel"}),this.g.o=b,b=j&&j.initMessageHeaders||null,j&&j.messageContentType&&(b?b["X-WebChannel-Content-Type"]=j.messageContentType:b={"X-WebChannel-Content-Type":j.messageContentType}),j&&j.va&&(b?b["X-WebChannel-Client-Profile"]=j.va:b={"X-WebChannel-Client-Profile":j.va}),this.g.S=b,(b=j&&j.Sb)&&!k(b)&&(this.g.m=b),this.v=j&&j.supportsCrossDomainXhr||!1,this.u=j&&j.sendRawJson||!1,(j=j&&j.httpSessionIdParam)&&!k(j)&&(this.g.D=j,b=this.h,b!==null&&j in b&&(b=this.h,j in b&&delete b[j])),this.j=new lo(this)}x(Rs,Wt),Rs.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Rs.prototype.close=function(){ns(this.g)},Rs.prototype.o=function(b){var j=this.g;if(typeof b=="string"){var L={};L.__data__=b,b=L}else this.u&&(L={},L.__data__=Ke(b),b=L);j.i.push(new yt(j.Ya++,b)),j.G==3&&oo(j)},Rs.prototype.N=function(){this.g.l=null,delete this.j,ns(this.g),delete this.g,Rs.aa.N.call(this)};function Yy(b){St.call(this),b.__headers__&&(this.headers=b.__headers__,this.statusCode=b.__status__,delete b.__headers__,delete b.__status__);var j=b.__sm__;if(j){e:{for(const L in j){b=L;break e}b=void 0}(this.i=b)&&(b=this.i,j=j!==null&&b in j?j[b]:void 0),this.data=j}else this.data=b}x(Yy,St);function Gy(){Qt.call(this),this.status=1}x(Gy,Qt);function lo(b){this.g=b}x(lo,wm),lo.prototype.ua=function(){at(this.g,"a")},lo.prototype.ta=function(b){at(this.g,new Yy(b))},lo.prototype.sa=function(b){at(this.g,new Gy)},lo.prototype.ra=function(){at(this.g,"b")},Rh.prototype.createWebChannel=Rh.prototype.g,Rs.prototype.send=Rs.prototype.o,Rs.prototype.open=Rs.prototype.m,Rs.prototype.close=Rs.prototype.close,dB=function(){return new Rh},uB=function(){return Xn()},cB=wn,ET={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},rc.NO_ERROR=0,rc.TIMEOUT=8,rc.HTTP_ERROR=6,Fx=rc,bh.COMPLETE="complete",lB=bh,Wn.EventType=hn,hn.OPEN="a",hn.CLOSE="b",hn.ERROR="c",hn.MESSAGE="d",Wt.prototype.listen=Wt.prototype.K,xg=Wn,Dn.prototype.listenOnce=Dn.prototype.L,Dn.prototype.getLastError=Dn.prototype.Ka,Dn.prototype.getLastErrorCode=Dn.prototype.Ba,Dn.prototype.getStatus=Dn.prototype.Z,Dn.prototype.getResponseJson=Dn.prototype.Oa,Dn.prototype.getResponseText=Dn.prototype.oa,Dn.prototype.send=Dn.prototype.ea,Dn.prototype.setWithCredentials=Dn.prototype.Ha,oB=Dn}).apply(typeof Hv<"u"?Hv:typeof self<"u"?self:typeof window<"u"?window:{});const x4="@firebase/firestore",b4="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ni=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ni.UNAUTHENTICATED=new ni(null),ni.GOOGLE_CREDENTIALS=new ni("google-credentials-uid"),ni.FIRST_PARTY=new ni("first-party-uid"),ni.MOCK_USER=new ni("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wp="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qd=new v1("@firebase/firestore");function mf(){return qd.logLevel}function He(t,...e){if(qd.logLevel<=Lt.DEBUG){const n=e.map(i2);qd.debug(`Firestore (${Wp}): ${t}`,...n)}}function ua(t,...e){if(qd.logLevel<=Lt.ERROR){const n=e.map(i2);qd.error(`Firestore (${Wp}): ${t}`,...n)}}function hB(t,...e){if(qd.logLevel<=Lt.WARN){const n=e.map(i2);qd.warn(`Firestore (${Wp}): ${t}`,...n)}}function i2(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mt(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,fB(t,r,n)}function fB(t,e,n){let r=`FIRESTORE (${Wp}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw ua(r),new Error(r)}function bt(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||fB(e,s,r)}function An(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const De={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class lt extends Kl{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kne{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Yne{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(ni.UNAUTHENTICATED)))}shutdown(){}}class Gne{constructor(e){this.t=e,this.currentUser=ni.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){bt(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new Of;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Of,e.enqueueRetryable((()=>s(this.currentUser)))};const a=()=>{const c=i;e.enqueueRetryable((async()=>{await c.promise,await s(this.currentUser)}))},o=c=>{He("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((c=>o(c))),setTimeout((()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?o(c):(He("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Of)}}),0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(He("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(bt(typeof r.accessToken=="string",31837,{l:r}),new Kne(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return bt(e===null||typeof e=="string",2055,{h:e}),new ni(e)}}class Qne{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=ni.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Xne{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new Qne(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(ni.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class w4{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Jne{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ii(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){bt(this.o===void 0,3512);const r=i=>{i.error!=null&&He("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,He("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>r(i)))};const s=i=>{He("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((i=>s(i))),setTimeout((()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):He("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new w4(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(bt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new w4(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zne(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ere{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=Zne(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function Ot(t,e){return t<e?-1:t>e?1:0}function NT(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return UN(s)===UN(i)?Ot(s,i):UN(s)?1:-1}return Ot(t.length,e.length)}const tre=55296,nre=57343;function UN(t){const e=t.charCodeAt(0);return e>=tre&&e<=nre}function Yf(t,e,n){return t.length===e.length&&t.every(((r,s)=>n(r,e[s])))}function pB(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _4="__name__";class vo{constructor(e,n,r){n===void 0?n=0:n>e.length&&mt(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&mt(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return vo.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof vo?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=vo.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return Ot(e.length,n.length)}static compareSegments(e,n){const r=vo.isNumericId(e),s=vo.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?vo.extractNumericId(e).compare(vo.extractNumericId(n)):NT(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return s2.fromString(e.substring(4,e.length-2))}}class Fn extends vo{construct(e,n,r){return new Fn(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new lt(De.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((s=>s.length>0)))}return new Fn(n)}static emptyPath(){return new Fn([])}}const rre=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ur extends vo{construct(e,n,r){return new ur(e,n,r)}static isValidIdentifier(e){return rre.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ur.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===_4}static keyField(){return new ur([_4])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new lt(De.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const o=e[s];if(o==="\\"){if(s+1===e.length)throw new lt(De.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new lt(De.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else o==="`"?(a=!a,s++):o!=="."||a?(r+=o,s++):(i(),s++)}if(i(),a)throw new lt(De.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ur(n)}static emptyPath(){return new ur([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e){this.path=e}static fromPath(e){return new nt(Fn.fromString(e))}static fromName(e){return new nt(Fn.fromString(e).popFirst(5))}static empty(){return new nt(Fn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Fn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Fn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new nt(new Fn(e.slice()))}}function sre(t,e,n,r){if(e===!0&&r===!0)throw new lt(De.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ire(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _r(t,e){const n={typeString:t};return e&&(n.value=e),n}function H0(t,e){if(!ire(t))throw new lt(De.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const a=t[r];if(s&&typeof a!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&a!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new lt(De.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E4=-62135596800,N4=1e6;class Kn{static now(){return Kn.fromMillis(Date.now())}static fromDate(e){return Kn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*N4);return new Kn(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new lt(De.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new lt(De.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<E4)throw new lt(De.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new lt(De.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/N4}_compareTo(e){return this.seconds===e.seconds?Ot(this.nanoseconds,e.nanoseconds):Ot(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Kn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(H0(e,Kn._jsonSchema))return new Kn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-E4;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Kn._jsonSchemaVersion="firestore/timestamp/1.0",Kn._jsonSchema={type:_r("string",Kn._jsonSchemaVersion),seconds:_r("number"),nanoseconds:_r("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{static fromTimestamp(e){return new Kt(e)}static min(){return new Kt(new Kn(0,0))}static max(){return new Kt(new Kn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t0=-1;class Nb{constructor(e,n,r,s){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=s}}function ST(t){return t.fields.find((e=>e.kind===2))}function td(t){return t.fields.filter((e=>e.kind!==2))}Nb.UNKNOWN_ID=-1;class $x{constructor(e,n){this.fieldPath=e,this.kind=n}}class n0{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new n0(0,$i.min())}}function are(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Kt.fromTimestamp(r===1e9?new Kn(n+1,0):new Kn(n,r));return new $i(s,nt.empty(),e)}function mB(t){return new $i(t.readTime,t.key,t0)}class $i{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new $i(Kt.min(),nt.empty(),t0)}static max(){return new $i(Kt.max(),nt.empty(),t0)}}function a2(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=nt.comparator(t.documentKey,e.documentKey),n!==0?n:Ot(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gB="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class yB{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E1(t){if(t.code!==De.FAILED_PRECONDITION||t.message!==gB)throw t;He("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&mt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new me(((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof me?n:me.resolve(n)}catch(n){return me.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):me.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):me.reject(n)}static resolve(e){return new me(((n,r)=>{n(e)}))}static reject(e){return new me(((n,r)=>{r(e)}))}static waitFor(e){return new me(((n,r)=>{let s=0,i=0,a=!1;e.forEach((o=>{++s,o.next((()=>{++i,a&&i===s&&n()}),(c=>r(c)))})),a=!0,i===s&&n()}))}static or(e){let n=me.resolve(!1);for(const r of e)n=n.next((s=>s?me.resolve(s):r()));return n}static forEach(e,n){const r=[];return e.forEach(((s,i)=>{r.push(n.call(this,s,i))})),this.waitFor(r)}static mapArray(e,n){return new me(((r,s)=>{const i=e.length,a=new Array(i);let o=0;for(let c=0;c<i;c++){const d=c;n(e[d]).next((h=>{a[d]=h,++o,o===i&&r(a)}),(h=>s(h)))}}))}static doWhile(e,n){return new me(((r,s)=>{const i=()=>{e()===!0?n().next((()=>{i()}),s):r()};i()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ji="SimpleDb";class N1{static open(e,n,r,s){try{return new N1(n,e.transaction(s,r))}catch(i){throw new Tg(n,i)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new Of,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new Tg(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const s=o2(r.target.error);this.S.reject(new Tg(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(He(ji,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new lre(n)}}class Kc{static delete(e){return He(ji,"Removing database:",e),dd(u9().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!x9())return!1;if(Kc.F())return!0;const e=Rr(),n=Kc.M(e),r=0<n&&n<10,s=vB(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,Kc.M(Rr())===12.2&&ua("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(He(ji,"Opening database:",this.name),this.db=await new Promise(((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const a=i.target.result;n(a)},s.onblocked=()=>{r(new Tg(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const a=i.target.error;a.name==="VersionError"?r(new lt(De.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?r(new lt(De.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):r(new Tg(e,a))},s.onupgradeneeded=i=>{He(ji,'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const a=i.target.result;this.N.k(a,s.transaction,i.oldVersion,this.version).next((()=>{He(ji,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const i=n==="readonly";let a=0;for(;;){++a;try{this.db=await this.L(e);const o=N1.open(this.db,e,i?"readonly":"readwrite",r),c=s(o).next((d=>(o.C(),d))).catch((d=>(o.abort(d),me.reject(d)))).toPromise();return c.catch((()=>{})),await o.D,c}catch(o){const c=o,d=c.name!=="FirebaseError"&&a<3;if(He(ji,"Transaction failed with error:",c.message,"Retrying:",d),this.close(),!d)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function vB(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class ore{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return dd(this.U.delete())}}class Tg extends lt{constructor(e,n){super(De.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Hp(t){return t.name==="IndexedDbTransactionError"}class lre{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(He(ji,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(He(ji,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),dd(r)}add(e){return He(ji,"ADD",this.store.name,e,e),dd(this.store.add(e))}get(e){return dd(this.store.get(e)).next((n=>(n===void 0&&(n=null),He(ji,"GET",this.store.name,e,n),n)))}delete(e){return He(ji,"DELETE",this.store.name,e),dd(this.store.delete(e))}count(){return He(ji,"COUNT",this.store.name),dd(this.store.count())}J(e,n){const r=this.options(e,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new me(((a,o)=>{i.onerror=c=>{o(c.target.error)},i.onsuccess=c=>{a(c.target.result)}}))}{const i=this.cursor(r),a=[];return this.H(i,((o,c)=>{a.push(c)})).next((()=>a))}}Y(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new me(((s,i)=>{r.onerror=a=>{i(a.target.error)},r.onsuccess=a=>{s(a.target.result)}}))}Z(e,n){He(ji,"DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const s=this.cursor(r);return this.H(s,((i,a,o)=>o.delete()))}ee(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.H(s,n)}te(e){const n=this.cursor({});return new me(((r,s)=>{n.onerror=i=>{const a=o2(i.target.error);s(a)},n.onsuccess=i=>{const a=i.target.result;a?e(a.primaryKey,a.value).next((o=>{o?a.continue():r()})):r()}}))}H(e,n){const r=[];return new me(((s,i)=>{e.onerror=a=>{i(a.target.error)},e.onsuccess=a=>{const o=a.target.result;if(!o)return void s();const c=new ore(o),d=n(o.primaryKey,o.value,c);if(d instanceof me){const h=d.catch((p=>(c.done(),me.reject(p))));r.push(h)}c.isDone?s():c.G===null?o.continue():o.continue(c.G)}})).next((()=>me.waitFor(r)))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function dd(t){return new me(((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=o2(r.target.error);n(s)}}))}let S4=!1;function o2(t){const e=Kc.M(Rr());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new lt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return S4||(S4=!0,setTimeout((()=>{throw r}),0)),r}}return t}const Cg="IndexBackfiller";class cre{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){He(Cg,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const n=await this.ne.ie();He(Cg,`Documents written: ${n}`)}catch(n){Hp(n)?He(Cg,"Ignoring IndexedDB error during index backfill: ",n):await E1(n)}await this.re(6e4)}))}}class ure{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(n=>this.se(n,e)))}se(e,n){const r=new Set;let s=n,i=!0;return me.doWhile((()=>i===!0&&s>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((a=>{if(a!==null&&!r.has(a))return He(Cg,`Processing collection: ${a}`),this.oe(e,a,s).next((o=>{s-=o,r.add(a)}));i=!1})))).next((()=>n-s))}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next((s=>this.localStore.localDocuments.getNextDocuments(e,n,s,r).next((i=>{const a=i.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next((()=>this._e(s,i))).next((o=>(He(Cg,`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(e,n,o)))).next((()=>a.size))}))))}_e(e,n){let r=e;return n.changes.forEach(((s,i)=>{const a=mB(i);a2(a,r)>0&&(r=a)})),new $i(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ma.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cd=-1;function S1(t){return t==null}function Sb(t){return t===0&&1/t==-1/0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kb="";function zs(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=k4(e)),e=dre(t.get(n),e);return k4(e)}function dre(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case kb:n+="";break;default:n+=i}}return n}function k4(t){return t+kb+""}function No(t){const e=t.length;if(bt(e>=2,64408,{path:t}),e===2)return bt(t.charAt(0)===kb&&t.charAt(1)==="",56145,{path:t}),Fn.emptyPath();const n=e-2,r=[];let s="";for(let i=0;i<e;){const a=t.indexOf(kb,i);switch((a<0||a>n)&&mt(50515,{path:t}),t.charAt(a+1)){case"":const o=t.substring(i,a);let c;s.length===0?c=o:(s+=o,c=s,s=""),r.push(c);break;case"":s+=t.substring(i,a),s+="\0";break;case"":s+=t.substring(i,a+1);break;default:mt(61167,{path:t})}i=a+2}return new Fn(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nd="remoteDocuments",q0="owner",nf="owner",r0="mutationQueues",hre="userId",Pa="mutations",T4="batchId",gd="userMutationsIndex",C4=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vx(t,e){return[t,zs(e)]}function xB(t,e,n){return[t,zs(e),n]}const fre={},Gf="documentMutations",Tb="remoteDocumentsV14",pre=["prefixPath","collectionGroup","readTime","documentId"],Bx="documentKeyIndex",mre=["prefixPath","collectionGroup","documentId"],bB="collectionGroupIndex",gre=["collectionGroup","readTime","prefixPath","documentId"],s0="remoteDocumentGlobal",kT="remoteDocumentGlobalKey",Qf="targets",wB="queryTargetsIndex",yre=["canonicalId","targetId"],Xf="targetDocuments",vre=["targetId","path"],l2="documentTargetsIndex",xre=["path","targetId"],Cb="targetGlobalKey",jd="targetGlobal",i0="collectionParents",bre=["collectionId","parent"],Jf="clientMetadata",wre="clientId",k1="bundles",_re="bundleId",T1="namedQueries",Ere="name",c2="indexConfiguration",Nre="indexId",TT="collectionGroupIndex",Sre="collectionGroup",jg="indexState",kre=["indexId","uid"],_B="sequenceNumberIndex",Tre=["uid","sequenceNumber"],Pg="indexEntries",Cre=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],EB="documentKeyIndex",jre=["indexId","uid","orderedDocumentKey"],C1="documentOverlays",Pre=["userId","collectionPath","documentId"],CT="collectionPathOverlayIndex",Are=["userId","collectionPath","largestBatchId"],NB="collectionGroupOverlayIndex",Ire=["userId","collectionGroup","largestBatchId"],u2="globals",Dre="name",SB=[r0,Pa,Gf,nd,Qf,q0,jd,Xf,Jf,s0,i0,k1,T1],Rre=[...SB,C1],kB=[r0,Pa,Gf,Tb,Qf,q0,jd,Xf,Jf,s0,i0,k1,T1,C1],TB=kB,d2=[...TB,c2,jg,Pg],Ore=d2,CB=[...d2,u2],Mre=CB;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT extends yB{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function Or(t,e){const n=An(t);return Kc.O(n.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j4(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function h2(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Lre(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ka=class PT{constructor(e,n){this.comparator=e,this.root=n||Yc.EMPTY}insert(e,n){return new PT(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Yc.BLACK,null,null))}remove(e){return new PT(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yc.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qv(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qv(this.root,e,this.comparator,!1)}getReverseIterator(){return new qv(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qv(this.root,e,this.comparator,!0)}},qv=class{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Yc=class ol{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??ol.RED,this.left=s??ol.EMPTY,this.right=i??ol.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new ol(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ol.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return ol.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ol.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ol.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw mt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw mt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw mt(27949);return e+(this.isRed()?0:1)}};Yc.EMPTY=null,Yc.RED=!0,Yc.BLACK=!1;Yc.EMPTY=new class{constructor(){this.size=0}get key(){throw mt(57766)}get value(){throw mt(16141)}get color(){throw mt(16727)}get left(){throw mt(29726)}get right(){throw mt(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new Yc(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.comparator=e,this.data=new Ka(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new P4(this.data.getIterator())}getIteratorFrom(e){return new P4(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof gn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new gn(this.comparator);return n.data=e,n}}class P4{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function rf(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(e){this.fields=e,e.sort(ur.comparator)}static empty(){return new vl([])}unionWith(e){let n=new gn(ur.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new vl(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Yf(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fre extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Fre("Invalid base64 string: "+i):i}})(e);return new hi(n)}static fromUint8Array(e){const n=(function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i})(e);return new hi(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ot(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}hi.EMPTY_BYTE_STRING=new hi("");const $re=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function nu(t){if(bt(!!t,39018),typeof t=="string"){let e=0;const n=$re.exec(t);if(bt(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:wr(t.seconds),nanos:wr(t.nanos)}}function wr(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Zf(t){return typeof t=="string"?hi.fromBase64String(t):hi.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jB="server_timestamp",PB="__type__",AB="__previous_value__",IB="__local_write_time__";function f2(t){return(t?.mapValue?.fields||{})[PB]?.stringValue===jB}function DB(t){const e=t.mapValue.fields[AB];return f2(e)?DB(e):e}function jb(t){const e=nu(t.mapValue.fields[IB].timestampValue);return new Kn(e.seconds,e.nanos)}const Pb="(default)";class ep{constructor(e,n){this.projectId=e,this.database=n||Pb}static empty(){return new ep("","")}get isDefaultDatabase(){return this.database===Pb}isEqual(e){return e instanceof ep&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RB="__type__",OB="__max__",Wc={mapValue:{fields:{__type__:{stringValue:OB}}}},MB="__vector__",Ab="value",Ux={nullValue:"NULL_VALUE"};function tp(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?f2(t)?4:LB(t)?9007199254740991:j1(t)?10:11:mt(28295,{value:t})}function Lo(t,e){if(t===e)return!0;const n=tp(t);if(n!==tp(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return jb(t).isEqual(jb(e));case 3:return(function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=nu(s.timestampValue),o=nu(i.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(s,i){return Zf(s.bytesValue).isEqual(Zf(i.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(s,i){return wr(s.geoPointValue.latitude)===wr(i.geoPointValue.latitude)&&wr(s.geoPointValue.longitude)===wr(i.geoPointValue.longitude)})(t,e);case 2:return(function(s,i){if("integerValue"in s&&"integerValue"in i)return wr(s.integerValue)===wr(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=wr(s.doubleValue),o=wr(i.doubleValue);return a===o?Sb(a)===Sb(o):isNaN(a)&&isNaN(o)}return!1})(t,e);case 9:return Yf(t.arrayValue.values||[],e.arrayValue.values||[],Lo);case 10:case 11:return(function(s,i){const a=s.mapValue.fields||{},o=i.mapValue.fields||{};if(j4(a)!==j4(o))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(o[c]===void 0||!Lo(a[c],o[c])))return!1;return!0})(t,e);default:return mt(52216,{left:t})}}function a0(t,e){return(t.values||[]).find((n=>Lo(n,e)))!==void 0}function ru(t,e){if(t===e)return 0;const n=tp(t),r=tp(e);if(n!==r)return Ot(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ot(t.booleanValue,e.booleanValue);case 2:return(function(i,a){const o=wr(i.integerValue||i.doubleValue),c=wr(a.integerValue||a.doubleValue);return o<c?-1:o>c?1:o===c?0:isNaN(o)?isNaN(c)?0:-1:1})(t,e);case 3:return A4(t.timestampValue,e.timestampValue);case 4:return A4(jb(t),jb(e));case 5:return NT(t.stringValue,e.stringValue);case 6:return(function(i,a){const o=Zf(i),c=Zf(a);return o.compareTo(c)})(t.bytesValue,e.bytesValue);case 7:return(function(i,a){const o=i.split("/"),c=a.split("/");for(let d=0;d<o.length&&d<c.length;d++){const h=Ot(o[d],c[d]);if(h!==0)return h}return Ot(o.length,c.length)})(t.referenceValue,e.referenceValue);case 8:return(function(i,a){const o=Ot(wr(i.latitude),wr(a.latitude));return o!==0?o:Ot(wr(i.longitude),wr(a.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return I4(t.arrayValue,e.arrayValue);case 10:return(function(i,a){const o=i.fields||{},c=a.fields||{},d=o[Ab]?.arrayValue,h=c[Ab]?.arrayValue,p=Ot(d?.values?.length||0,h?.values?.length||0);return p!==0?p:I4(d,h)})(t.mapValue,e.mapValue);case 11:return(function(i,a){if(i===Wc.mapValue&&a===Wc.mapValue)return 0;if(i===Wc.mapValue)return 1;if(a===Wc.mapValue)return-1;const o=i.fields||{},c=Object.keys(o),d=a.fields||{},h=Object.keys(d);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){const m=NT(c[p],h[p]);if(m!==0)return m;const y=ru(o[c[p]],d[h[p]]);if(y!==0)return y}return Ot(c.length,h.length)})(t.mapValue,e.mapValue);default:throw mt(23264,{he:n})}}function A4(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ot(t,e);const n=nu(t),r=nu(e),s=Ot(n.seconds,r.seconds);return s!==0?s:Ot(n.nanos,r.nanos)}function I4(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=ru(n[s],r[s]);if(i)return i}return Ot(n.length,r.length)}function np(t){return AT(t)}function AT(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=nu(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Zf(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return nt.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=AT(i);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${AT(n.fields[a])}`;return s+"}"})(t.mapValue):mt(61005,{value:t})}function p2(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function IT(t){return!!t&&"integerValue"in t}function o0(t){return!!t&&"arrayValue"in t}function D4(t){return!!t&&"nullValue"in t}function R4(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function zN(t){return!!t&&"mapValue"in t}function j1(t){return(t?.mapValue?.fields||{})[RB]?.stringValue===MB}function Ag(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return h2(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Ag(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ag(t.arrayValue.values[n]);return e}return{...t}}function LB(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===OB}const FB={mapValue:{fields:{[RB]:{stringValue:MB},[Ab]:{arrayValue:{}}}}};function Vre(t){return"nullValue"in t?Ux:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?p2(ep.empty(),nt.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?j1(t)?FB:{mapValue:{}}:mt(35942,{value:t})}function Bre(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?p2(ep.empty(),nt.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?FB:"mapValue"in t?j1(t)?{mapValue:{}}:Wc:mt(61959,{value:t})}function O4(t,e){const n=ru(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function M4(t,e){const n=ru(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e){this.value=e}static empty(){return new Aa({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!zN(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ag(n)}setAll(e){let n=ur.emptyPath(),r={},s=[];e.forEach(((a,o)=>{if(!n.isImmediateParentOf(o)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=o.popLast()}a?r[o.lastSegment()]=Ag(a):s.push(o.lastSegment())}));const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());zN(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Lo(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];zN(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){h2(n,((s,i)=>e[s]=i));for(const s of r)delete e[s]}clone(){return new Aa(Ag(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(e,n,r,s,i,a,o){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=o}static newInvalidDocument(e){return new cs(e,0,Kt.min(),Kt.min(),Kt.min(),Aa.empty(),0)}static newFoundDocument(e,n,r,s){return new cs(e,1,n,Kt.min(),r,s,0)}static newNoDocument(e,n){return new cs(e,2,n,Kt.min(),Kt.min(),Aa.empty(),0)}static newUnknownDocument(e,n){return new cs(e,3,n,Kt.min(),Kt.min(),Aa.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Kt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Aa.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Aa.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Kt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof cs&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new cs(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(e,n){this.position=e,this.inclusive=n}}function L4(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?r=nt.comparator(nt.fromName(a.referenceValue),n.key):r=ru(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function F4(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Lo(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(e,n="asc"){this.field=e,this.dir=n}}function Ure(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $B{}class zt extends $B{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new zre(e,n,r):n==="array-contains"?new qre(e,r):n==="in"?new HB(e,r):n==="not-in"?new Kre(e,r):n==="array-contains-any"?new Yre(e,r):new zt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Wre(e,r):new Hre(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ru(n,this.value)):n!==null&&tp(this.value)===tp(n)&&this.matchesComparison(ru(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return mt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class dn extends $B{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new dn(e,n)}matches(e){return sp(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function sp(t){return t.op==="and"}function DT(t){return t.op==="or"}function m2(t){return VB(t)&&sp(t)}function VB(t){for(const e of t.filters)if(e instanceof dn)return!1;return!0}function RT(t){if(t instanceof zt)return t.field.canonicalString()+t.op.toString()+np(t.value);if(m2(t))return t.filters.map((e=>RT(e))).join(",");{const e=t.filters.map((n=>RT(n))).join(",");return`${t.op}(${e})`}}function BB(t,e){return t instanceof zt?(function(r,s){return s instanceof zt&&r.op===s.op&&r.field.isEqual(s.field)&&Lo(r.value,s.value)})(t,e):t instanceof dn?(function(r,s){return s instanceof dn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((i,a,o)=>i&&BB(a,s.filters[o])),!0):!1})(t,e):void mt(19439)}function UB(t,e){const n=t.filters.concat(e);return dn.create(n,t.op)}function zB(t){return t instanceof zt?(function(n){return`${n.field.canonicalString()} ${n.op} ${np(n.value)}`})(t):t instanceof dn?(function(n){return n.op.toString()+" {"+n.getFilters().map(zB).join(" ,")+"}"})(t):"Filter"}class zre extends zt{constructor(e,n,r){super(e,n,r),this.key=nt.fromName(r.referenceValue)}matches(e){const n=nt.comparator(e.key,this.key);return this.matchesComparison(n)}}class Wre extends zt{constructor(e,n){super(e,"in",n),this.keys=WB("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class Hre extends zt{constructor(e,n){super(e,"not-in",n),this.keys=WB("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function WB(t,e){return(e.arrayValue?.values||[]).map((n=>nt.fromName(n.referenceValue)))}class qre extends zt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return o0(n)&&a0(n.arrayValue,this.value)}}class HB extends zt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&a0(this.value.arrayValue,n)}}class Kre extends zt{constructor(e,n){super(e,"not-in",n)}matches(e){if(a0(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!a0(this.value.arrayValue,n)}}class Yre extends zt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!o0(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>a0(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gre{constructor(e,n=null,r=[],s=[],i=null,a=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=o,this.Te=null}}function OT(t,e=null,n=[],r=[],s=null,i=null,a=null){return new Gre(t,e,n,r,s,i,a)}function Kd(t){const e=An(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>RT(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(i){return i.field.canonicalString()+i.dir})(r))).join(","),S1(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>np(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>np(r))).join(",")),e.Te=n}return e.Te}function K0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Ure(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!BB(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!F4(t.startAt,e.startAt)&&F4(t.endAt,e.endAt)}function Qre(t){return nt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Db(t,e){return t.filters.filter((n=>n instanceof zt&&n.field.isEqual(e)))}function $4(t,e,n){let r=Ux,s=!0;for(const i of Db(t,e)){let a=Ux,o=!0;switch(i.op){case"<":case"<=":a=Vre(i.value);break;case"==":case"in":case">=":a=i.value;break;case">":a=i.value,o=!1;break;case"!=":case"not-in":a=Ux}O4({value:r,inclusive:s},{value:a,inclusive:o})<0&&(r=a,s=o)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const a=n.position[i];O4({value:r,inclusive:s},{value:a,inclusive:n.inclusive})<0&&(r=a,s=n.inclusive);break}}return{value:r,inclusive:s}}function V4(t,e,n){let r=Wc,s=!0;for(const i of Db(t,e)){let a=Wc,o=!0;switch(i.op){case">=":case">":a=Bre(i.value),o=!1;break;case"==":case"in":case"<=":a=i.value;break;case"<":a=i.value,o=!1;break;case"!=":case"not-in":a=Wc}M4({value:r,inclusive:s},{value:a,inclusive:o})>0&&(r=a,s=o)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const a=n.position[i];M4({value:r,inclusive:s},{value:a,inclusive:n.inclusive})>0&&(r=a,s=n.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(e,n=null,r=[],s=[],i=null,a="F",o=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=o,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Xre(t,e,n,r,s,i,a,o){return new P1(t,e,n,r,s,i,a,o)}function qB(t){return new P1(t)}function B4(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Jre(t){return t.collectionGroup!==null}function Ig(t){const e=An(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new gn(ur.comparator);return a.filters.forEach((c=>{c.getFlattenedFilters().forEach((d=>{d.isInequality()&&(o=o.add(d.field))}))})),o})(e).forEach((i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Ib(i,r))})),n.has(ur.keyField().canonicalString())||e.Ie.push(new Ib(ur.keyField(),r))}return e.Ie}function kl(t){const e=An(t);return e.Ee||(e.Ee=Zre(e,Ig(t))),e.Ee}function Zre(t,e){if(t.limitType==="F")return OT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((s=>{const i=s.dir==="desc"?"asc":"desc";return new Ib(s.field,i)}));const n=t.endAt?new rp(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new rp(t.startAt.position,t.startAt.inclusive):null;return OT(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function MT(t,e,n){return new P1(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function KB(t,e){return K0(kl(t),kl(e))&&t.limitType===e.limitType}function YB(t){return`${Kd(kl(t))}|lt:${t.limitType}`}function Km(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((s=>zB(s))).join(", ")}]`),S1(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((s=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(s))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((s=>np(s))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((s=>np(s))).join(",")),`Target(${r})`})(kl(t))}; limitType=${t.limitType})`}function A1(t,e){return e.isFoundDocument()&&(function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):nt.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)})(t,e)&&(function(r,s){for(const i of Ig(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0})(t,e)&&(function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0})(t,e)&&(function(r,s){return!(r.startAt&&!(function(a,o,c){const d=L4(a,o,c);return a.inclusive?d<=0:d<0})(r.startAt,Ig(r),s)||r.endAt&&!(function(a,o,c){const d=L4(a,o,c);return a.inclusive?d>=0:d>0})(r.endAt,Ig(r),s))})(t,e)}function ese(t){return(e,n)=>{let r=!1;for(const s of Ig(t)){const i=tse(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function tse(t,e,n){const r=t.field.isKeyField()?nt.comparator(e.key,n.key):(function(i,a,o){const c=a.data.field(i),d=o.data.field(i);return c!==null&&d!==null?ru(c,d):mt(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return mt(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){h2(this.inner,((n,r)=>{for(const[s,i]of r)e(s,i)}))}isEmpty(){return Lre(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nse=new Ka(nt.comparator);function yd(){return nse}const GB=new Ka(nt.comparator);function Kv(...t){let e=GB;for(const n of t)e=e.insert(n.key,n);return e}function rse(t){let e=GB;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function So(){return Dg()}function QB(){return Dg()}function Dg(){return new xu((t=>t.toString()),((t,e)=>t.isEqual(e)))}const sse=new Ka(nt.comparator),ise=new gn(nt.comparator);function us(...t){let e=ise;for(const n of t)e=e.add(n);return e}const ase=new gn(Ot);function ose(){return ase}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lse(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sb(e)?"-0":e}}function cse(t){return{integerValue:""+t}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(){this._=void 0}}function use(t,e,n){return t instanceof l0?(function(s,i){const a={fields:{[PB]:{stringValue:jB},[IB]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&f2(i)&&(i=DB(i)),i&&(a.fields[AB]=i),{mapValue:a}})(n,e):t instanceof ip?XB(t,e):t instanceof ap?JB(t,e):(function(s,i){const a=hse(s,i),o=U4(a)+U4(s.Ae);return IT(a)&&IT(s.Ae)?cse(o):lse(s.serializer,o)})(t,e)}function dse(t,e,n){return t instanceof ip?XB(t,e):t instanceof ap?JB(t,e):n}function hse(t,e){return t instanceof c0?(function(r){return IT(r)||(function(i){return!!i&&"doubleValue"in i})(r)})(e)?e:{integerValue:0}:null}class l0 extends I1{}class ip extends I1{constructor(e){super(),this.elements=e}}function XB(t,e){const n=ZB(e);for(const r of t.elements)n.some((s=>Lo(s,r)))||n.push(r);return{arrayValue:{values:n}}}class ap extends I1{constructor(e){super(),this.elements=e}}function JB(t,e){let n=ZB(e);for(const r of t.elements)n=n.filter((s=>!Lo(s,r)));return{arrayValue:{values:n}}}class c0 extends I1{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function U4(t){return wr(t.integerValue||t.doubleValue)}function ZB(t){return o0(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fse{constructor(e,n){this.field=e,this.transform=n}}function pse(t,e){return t.field.isEqual(e.field)&&(function(r,s){return r instanceof ip&&s instanceof ip||r instanceof ap&&s instanceof ap?Yf(r.elements,s.elements,Lo):r instanceof c0&&s instanceof c0?Lo(r.Ae,s.Ae):r instanceof l0&&s instanceof l0})(t.transform,e.transform)}class mse{constructor(e,n){this.version=e,this.transformResults=n}}class La{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new La}static exists(e){return new La(void 0,e)}static updateTime(e){return new La(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function zx(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class D1{}function e8(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new g2(t.key,La.none()):new Y0(t.key,t.data,La.none());{const n=t.data,r=Aa.empty();let s=new gn(ur.comparator);for(let i of e.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new qp(t.key,r,new vl(s.toArray()),La.none())}}function gse(t,e,n){t instanceof Y0?(function(s,i,a){const o=s.value.clone(),c=W4(s.fieldTransforms,i,a.transformResults);o.setAll(c),i.convertToFoundDocument(a.version,o).setHasCommittedMutations()})(t,e,n):t instanceof qp?(function(s,i,a){if(!zx(s.precondition,i))return void i.convertToUnknownDocument(a.version);const o=W4(s.fieldTransforms,i,a.transformResults),c=i.data;c.setAll(t8(s)),c.setAll(o),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()})(t,e,n):(function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()})(0,e,n)}function Rg(t,e,n,r){return t instanceof Y0?(function(i,a,o,c){if(!zx(i.precondition,a))return o;const d=i.value.clone(),h=H4(i.fieldTransforms,c,a);return d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null})(t,e,n,r):t instanceof qp?(function(i,a,o,c){if(!zx(i.precondition,a))return o;const d=H4(i.fieldTransforms,c,a),h=a.data;return h.setAll(t8(i)),h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),o===null?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((p=>p.field)))})(t,e,n,r):(function(i,a,o){return zx(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o})(t,e,n)}function z4(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Yf(r,s,((i,a)=>pse(i,a)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Y0 extends D1{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class qp extends D1{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function t8(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function W4(t,e,n){const r=new Map;bt(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],a=i.transform,o=e.data.field(i.field);r.set(i.field,dse(a,o,n[s]))}return r}function H4(t,e,n){const r=new Map;for(const s of t){const i=s.transform,a=n.data.field(s.field);r.set(s.field,use(i,a,e))}return r}class g2 extends D1{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class n8 extends D1{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&gse(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Rg(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Rg(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=QB();return this.mutations.forEach((s=>{const i=e.get(s.key),a=i.overlayedDocument;let o=this.applyToLocalView(a,i.mutatedFields);o=n.has(s.key)?null:o;const c=e8(a,o);c!==null&&r.set(s.key,c),a.isValidDocument()||a.convertToNoDocument(Kt.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),us())}isEqual(e){return this.batchId===e.batchId&&Yf(this.mutations,e.mutations,((n,r)=>z4(n,r)))&&Yf(this.baseMutations,e.baseMutations,((n,r)=>z4(n,r)))}}class v2{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){bt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=(function(){return sse})();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new v2(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xr,qt;function yse(t){switch(t){case De.OK:return mt(64938);case De.CANCELLED:case De.UNKNOWN:case De.DEADLINE_EXCEEDED:case De.RESOURCE_EXHAUSTED:case De.INTERNAL:case De.UNAVAILABLE:case De.UNAUTHENTICATED:return!1;case De.INVALID_ARGUMENT:case De.NOT_FOUND:case De.ALREADY_EXISTS:case De.PERMISSION_DENIED:case De.FAILED_PRECONDITION:case De.ABORTED:case De.OUT_OF_RANGE:case De.UNIMPLEMENTED:case De.DATA_LOSS:return!0;default:return mt(15467,{code:t})}}function vse(t){if(t===void 0)return ua("GRPC error has no .code"),De.UNKNOWN;switch(t){case xr.OK:return De.OK;case xr.CANCELLED:return De.CANCELLED;case xr.UNKNOWN:return De.UNKNOWN;case xr.DEADLINE_EXCEEDED:return De.DEADLINE_EXCEEDED;case xr.RESOURCE_EXHAUSTED:return De.RESOURCE_EXHAUSTED;case xr.INTERNAL:return De.INTERNAL;case xr.UNAVAILABLE:return De.UNAVAILABLE;case xr.UNAUTHENTICATED:return De.UNAUTHENTICATED;case xr.INVALID_ARGUMENT:return De.INVALID_ARGUMENT;case xr.NOT_FOUND:return De.NOT_FOUND;case xr.ALREADY_EXISTS:return De.ALREADY_EXISTS;case xr.PERMISSION_DENIED:return De.PERMISSION_DENIED;case xr.FAILED_PRECONDITION:return De.FAILED_PRECONDITION;case xr.ABORTED:return De.ABORTED;case xr.OUT_OF_RANGE:return De.OUT_OF_RANGE;case xr.UNIMPLEMENTED:return De.UNIMPLEMENTED;case xr.DATA_LOSS:return De.DATA_LOSS;default:return mt(39323,{code:t})}}(qt=xr||(xr={}))[qt.OK=0]="OK",qt[qt.CANCELLED=1]="CANCELLED",qt[qt.UNKNOWN=2]="UNKNOWN",qt[qt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qt[qt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qt[qt.NOT_FOUND=5]="NOT_FOUND",qt[qt.ALREADY_EXISTS=6]="ALREADY_EXISTS",qt[qt.PERMISSION_DENIED=7]="PERMISSION_DENIED",qt[qt.UNAUTHENTICATED=16]="UNAUTHENTICATED",qt[qt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qt[qt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qt[qt.ABORTED=10]="ABORTED",qt[qt.OUT_OF_RANGE=11]="OUT_OF_RANGE",qt[qt.UNIMPLEMENTED=12]="UNIMPLEMENTED",qt[qt.INTERNAL=13]="INTERNAL",qt[qt.UNAVAILABLE=14]="UNAVAILABLE",qt[qt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new s2([4294967295,4294967295],0);const xse={asc:"ASCENDING",desc:"DESCENDING"},bse={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wse={and:"AND",or:"OR"};class _se{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ese(t,e){return t.useProto3Json||S1(e)?e:{value:e}}function LT(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Nse(t,e){return LT(t,e.toTimestamp())}function Ua(t){return bt(!!t,49232),Kt.fromTimestamp((function(n){const r=nu(n);return new Kn(r.seconds,r.nanos)})(t))}function r8(t,e){return FT(t,e).canonicalString()}function FT(t,e){const n=(function(s){return new Fn(["projects",s.projectId,"databases",s.database])})(t).child("documents");return e===void 0?n:n.child(e)}function s8(t){const e=Fn.fromString(t);return bt(Rse(e),10190,{key:e.toString()}),e}function Rb(t,e){return r8(t.databaseId,e.path)}function Wx(t,e){const n=s8(e);if(n.get(1)!==t.databaseId.projectId)throw new lt(De.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new lt(De.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new nt(o8(n))}function i8(t,e){return r8(t.databaseId,e)}function a8(t){const e=s8(t);return e.length===4?Fn.emptyPath():o8(e)}function Sse(t){return new Fn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function o8(t){return bt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function q4(t,e,n){return{name:Rb(t,e),fields:n.value.mapValue.fields}}function kse(t,e,n){const r=Wx(t,e.name),s=Ua(e.updateTime),i=e.createTime?Ua(e.createTime):Kt.min(),a=new Aa({mapValue:{fields:e.fields}}),o=cs.newFoundDocument(r,s,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Ob(t,e){let n;if(e instanceof Y0)n={update:q4(t,e.key,e.value)};else if(e instanceof g2)n={delete:Rb(t,e.key)};else if(e instanceof qp)n={update:q4(t,e.key,e.data),updateMask:Dse(e.fieldMask)};else{if(!(e instanceof n8))return mt(16599,{Vt:e.type});n={verify:Rb(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(i,a){const o=a.transform;if(o instanceof l0)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof ip)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof ap)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof c0)return{fieldPath:a.field.canonicalString(),increment:o.Ae};throw mt(20930,{transform:a.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(s,i){return i.updateTime!==void 0?{updateTime:Nse(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:mt(27497)})(t,e.precondition)),n}function $T(t,e){const n=e.currentDocument?(function(i){return i.updateTime!==void 0?La.updateTime(Ua(i.updateTime)):i.exists!==void 0?La.exists(i.exists):La.none()})(e.currentDocument):La.none(),r=e.updateTransforms?e.updateTransforms.map((s=>(function(a,o){let c=null;if("setToServerValue"in o)bt(o.setToServerValue==="REQUEST_TIME",16630,{proto:o}),c=new l0;else if("appendMissingElements"in o){const h=o.appendMissingElements.values||[];c=new ip(h)}else if("removeAllFromArray"in o){const h=o.removeAllFromArray.values||[];c=new ap(h)}else"increment"in o?c=new c0(a,o.increment):mt(16584,{proto:o});const d=ur.fromServerFormat(o.fieldPath);return new fse(d,c)})(t,s))):[];if(e.update){e.update.name;const s=Wx(t,e.update.name),i=new Aa({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=(function(c){const d=c.fieldPaths||[];return new vl(d.map((h=>ur.fromServerFormat(h))))})(e.updateMask);return new qp(s,i,a,n,r)}return new Y0(s,i,n,r)}if(e.delete){const s=Wx(t,e.delete);return new g2(s,n)}if(e.verify){const s=Wx(t,e.verify);return new n8(s,n)}return mt(1463,{proto:e})}function Tse(t,e){return t&&t.length>0?(bt(e!==void 0,14353),t.map((n=>(function(s,i){let a=s.updateTime?Ua(s.updateTime):Ua(i);return a.isEqual(Kt.min())&&(a=Ua(i)),new mse(a,s.transformResults||[])})(n,e)))):[]}function Cse(t,e){return{documents:[i8(t,e.path)]}}function jse(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=i8(t,s);const i=(function(d){if(d.length!==0)return u8(dn.create(d,"and"))})(e.filters);i&&(n.structuredQuery.where=i);const a=(function(d){if(d.length!==0)return d.map((h=>(function(m){return{field:gf(m.field),direction:Pse(m.dir)}})(h)))})(e.orderBy);a&&(n.structuredQuery.orderBy=a);const o=Ese(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(e.endAt)),{ft:n,parent:s}}function l8(t){let e=a8(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){bt(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=(function(p){const m=c8(p);return m instanceof dn&&m2(m)?m.getFilters():[m]})(n.where));let a=[];n.orderBy&&(a=(function(p){return p.map((m=>(function(x){return new Ib(yf(x.field),(function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(x.direction))})(m)))})(n.orderBy));let o=null;n.limit&&(o=(function(p){let m;return m=typeof p=="object"?p.value:p,S1(m)?null:m})(n.limit));let c=null;n.startAt&&(c=(function(p){const m=!!p.before,y=p.values||[];return new rp(y,m)})(n.startAt));let d=null;return n.endAt&&(d=(function(p){const m=!p.before,y=p.values||[];return new rp(y,m)})(n.endAt)),Xre(e,s,a,i,o,"F",c,d)}function c8(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=yf(n.unaryFilter.field);return zt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=yf(n.unaryFilter.field);return zt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=yf(n.unaryFilter.field);return zt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=yf(n.unaryFilter.field);return zt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return mt(61313);default:return mt(60726)}})(t):t.fieldFilter!==void 0?(function(n){return zt.create(yf(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return mt(58110);default:return mt(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return dn.create(n.compositeFilter.filters.map((r=>c8(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return mt(1026)}})(n.compositeFilter.op))})(t):mt(30097,{filter:t})}function Pse(t){return xse[t]}function Ase(t){return bse[t]}function Ise(t){return wse[t]}function gf(t){return{fieldPath:t.canonicalString()}}function yf(t){return ur.fromServerFormat(t.fieldPath)}function u8(t){return t instanceof zt?(function(n){if(n.op==="=="){if(R4(n.value))return{unaryFilter:{field:gf(n.field),op:"IS_NAN"}};if(D4(n.value))return{unaryFilter:{field:gf(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(R4(n.value))return{unaryFilter:{field:gf(n.field),op:"IS_NOT_NAN"}};if(D4(n.value))return{unaryFilter:{field:gf(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:gf(n.field),op:Ase(n.op),value:n.value}}})(t):t instanceof dn?(function(n){const r=n.getFilters().map((s=>u8(s)));return r.length===1?r[0]:{compositeFilter:{op:Ise(n.op),filters:r}}})(t):mt(54877,{filter:t})}function Dse(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function Rse(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(e,n,r,s,i=Kt.min(),a=Kt.min(),o=hi.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=c}withSequenceNumber(e){return new bf(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new bf(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new bf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new bf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d8{constructor(e){this.yt=e}}function Ose(t,e){let n;if(e.document)n=kse(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=nt.fromSegments(e.noDocument.path),s=Gd(e.noDocument.readTime);n=cs.newNoDocument(r,s),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return mt(56709);{const r=nt.fromSegments(e.unknownDocument.path),s=Gd(e.unknownDocument.version);n=cs.newUnknownDocument(r,s)}}return e.readTime&&n.setReadTime((function(s){const i=new Kn(s[0],s[1]);return Kt.fromTimestamp(i)})(e.readTime)),n}function K4(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Mb(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(i,a){return{name:Rb(i,a.key),fields:a.data.value.mapValue.fields,updateTime:LT(i,a.version.toTimestamp()),createTime:LT(i,a.createTime.toTimestamp())}})(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Yd(e.version)};else{if(!e.isUnknownDocument())return mt(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:Yd(e.version)}}return r}function Mb(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Yd(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Gd(t){const e=new Kn(t.seconds,t.nanoseconds);return Kt.fromTimestamp(e)}function hd(t,e){const n=(e.baseMutations||[]).map((i=>$T(t.yt,i)));for(let i=0;i<e.mutations.length-1;++i){const a=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const o=e.mutations[i+1];a.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const r=e.mutations.map((i=>$T(t.yt,i))),s=Kn.fromMillis(e.localWriteTimeMs);return new y2(e.batchId,s,n,r)}function bg(t){const e=Gd(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Gd(t.lastLimboFreeSnapshotVersion):Kt.min();let r;return r=(function(i){return i.documents!==void 0})(t.query)?(function(i){const a=i.documents.length;return bt(a===1,1966,{count:a}),kl(qB(a8(i.documents[0])))})(t.query):(function(i){return kl(l8(i))})(t.query),new bf(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,hi.fromBase64String(t.resumeToken))}function h8(t,e){const n=Yd(e.snapshotVersion),r=Yd(e.lastLimboFreeSnapshotVersion);let s;s=Qre(e.target)?Cse(t.yt,e.target):jse(t.yt,e.target).ft;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Kd(e.target),readTime:n,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function f8(t){const e=l8({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?MT(e,e.limit,"L"):e}function WN(t,e){return new x2(e.largestBatchId,$T(t.yt,e.overlayMutation))}function Y4(t,e){const n=e.path.lastSegment();return[t,zs(e.path.popLast()),n]}function G4(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Yd(r.readTime),documentKey:zs(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mse{getBundleMetadata(e,n){return Q4(e).get(n).next((r=>{if(r)return(function(i){return{id:i.bundleId,createTime:Gd(i.createTime),version:i.version}})(r)}))}saveBundleMetadata(e,n){return Q4(e).put((function(s){return{bundleId:s.id,createTime:Yd(Ua(s.createTime)),version:s.version}})(n))}getNamedQuery(e,n){return X4(e).get(n).next((r=>{if(r)return(function(i){return{name:i.name,query:f8(i.bundledQuery),readTime:Gd(i.readTime)}})(r)}))}saveNamedQuery(e,n){return X4(e).put((function(s){return{name:s.name,readTime:Yd(Ua(s.readTime)),bundledQuery:s.bundledQuery}})(n))}}function Q4(t){return Or(t,k1)}function X4(t){return Or(t,T1)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new R1(e,r)}getOverlay(e,n){return Ym(e).get(Y4(this.userId,n)).next((r=>r?WN(this.serializer,r):null))}getOverlays(e,n){const r=So();return me.forEach(n,(s=>this.getOverlay(e,s).next((i=>{i!==null&&r.set(s,i)})))).next((()=>r))}saveOverlays(e,n,r){const s=[];return r.forEach(((i,a)=>{const o=new x2(n,a);s.push(this.St(e,o))})),me.waitFor(s)}removeOverlaysForBatchId(e,n,r){const s=new Set;n.forEach((a=>s.add(zs(a.getCollectionPath()))));const i=[];return s.forEach((a=>{const o=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,r+1],!1,!0);i.push(Ym(e).Z(CT,o))})),me.waitFor(i)}getOverlaysForCollection(e,n,r){const s=So(),i=zs(n),a=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Ym(e).J(CT,a).next((o=>{for(const c of o){const d=WN(this.serializer,c);s.set(d.getKey(),d)}return s}))}getOverlaysForCollectionGroup(e,n,r,s){const i=So();let a;const o=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Ym(e).ee({index:NB,range:o},((c,d,h)=>{const p=WN(this.serializer,d);i.size()<s||p.largestBatchId===a?(i.set(p.getKey(),p),a=p.largestBatchId):h.done()})).next((()=>i))}St(e,n){return Ym(e).put((function(s,i,a){const[o,c,d]=Y4(i,a.mutation.key);return{userId:i,collectionPath:c,documentId:d,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:Ob(s.yt,a.mutation)}})(this.serializer,this.userId,n))}}function Ym(t){return Or(t,C1)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lse{bt(e){return Or(e,u2)}getSessionToken(e){return this.bt(e).get("sessionToken").next((n=>{const r=n?.value;return r?hi.fromUint8Array(r):hi.EMPTY_BYTE_STRING}))}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(wr(e.integerValue));else if("doubleValue"in e){const r=wr(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),Sb(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=nu(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(Zf(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?LB(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):j1(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):mt(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const r=e.fields||{};this.Ft(n,55);for(const s of Object.keys(r))this.Ot(s,n),this.Ct(r[s],n)}kt(e,n){const r=e.fields||{};this.Ft(n,53);const s=Ab,i=r[s].arrayValue?.values?.length||0;this.Ft(n,15),n.Mt(wr(i)),this.Ot(s,n),this.Ct(r[s],n)}Qt(e,n){const r=e.values||[];this.Ft(n,50);for(const s of r)this.Ct(s,n)}Lt(e,n){this.Ft(n,37),nt.fromName(e).path.forEach((r=>{this.Ft(n,60),this.Ut(r,n)}))}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}fd.Kt=new fd;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sf=255;function Fse(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function J4(t){const e=64-(function(r){let s=0;for(let i=0;i<8;++i){const a=Fse(255&r[i]);if(s+=a,a!==8)break}return s})(t);return Math.ceil(e/8)}class $se{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Jt(r.value),r=n.next();this.Ht()}Yt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const s=n.codePointAt(0);this.Gt(240|s>>>18),this.Gt(128|63&s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s)}}this.zt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const s=n.codePointAt(0);this.Jt(240|s>>>18),this.Jt(128|63&s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s)}}this.Ht()}Xt(e){const n=this.en(e),r=J4(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=255&n[s]}nn(e){const n=this.en(e),r=J4(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=~(255&n[s])}rn(){this.sn(sf),this.sn(255)}_n(){this.an(sf),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=(function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)})(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let s=1;s<n.length;++s)n[s]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===sf?(this.sn(sf),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===sf?(this.an(sf),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class Vse{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class Bse{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Gm{constructor(){this.cn=new $se,this.ln=new Vse(this.cn),this.hn=new Bse(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(e,n,r,s){this.Tn=e,this.In=n,this.En=r,this.dn=s}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.dn,0),n!==e?r.set([0],this.dn.length):++r[r.length-1],new pd(this.Tn,this.In,this.En,r)}Rn(e,n,r){return{indexId:this.Tn,uid:e,arrayValue:Hx(this.En),directionalValue:Hx(this.dn),orderedDocumentKey:Hx(n),documentKey:r.path.toArray()}}Vn(e,n,r){const s=this.Rn(e,n,r);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function Pc(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=Z4(t.En,e.En),n!==0?n:(n=Z4(t.dn,e.dn),n!==0?n:nt.comparator(t.In,e.In)))}function Z4(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function Hx(t){return v9()?(function(n){let r="";for(let s=0;s<n.length;s++)r+=String.fromCharCode(n[s]);return r})(t):t}function eM(t){return typeof t!="string"?t:(function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r})(t)}class tM{constructor(e){this.mn=new gn(((n,r)=>ur.comparator(n.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const r=n;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(bt(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=ST(e);if(n!==void 0&&!this.wn(n))return!1;const r=td(e);let s=new Set,i=0,a=0;for(;i<r.length&&this.wn(r[i]);++i)s=s.add(r[i].fieldPath.canonicalString());if(i===r.length)return!0;if(this.mn.size>0){const o=this.mn.getIterator().getNext();if(!s.has(o.field.canonicalString())){const c=r[i];if(!this.Sn(o,c)||!this.bn(this.fn[a++],c))return!1}++i}for(;i<r.length;++i){const o=r[i];if(a>=this.fn.length||!this.bn(this.fn[a++],o))return!1}return!0}Dn(){if(this.pn)return null;let e=new gn(ur.comparator);const n=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new $x(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new $x(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new $x(r.field,r.dir==="asc"?0:1)));return new Nb(Nb.UNKNOWN_ID,this.collectionId,n,n0.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p8(t){if(bt(t instanceof zt||t instanceof dn,20012),t instanceof zt){if(t instanceof HB){const n=t.value.arrayValue?.values?.map((r=>zt.create(t.field,"==",r)))||[];return dn.create(n,"or")}return t}const e=t.filters.map((n=>p8(n)));return dn.create(e,t.op)}function Use(t){if(t.getFilters().length===0)return[];const e=UT(p8(t));return bt(m8(e),7391),VT(e)||BT(e)?[e]:e.getFilters()}function VT(t){return t instanceof zt}function BT(t){return t instanceof dn&&m2(t)}function m8(t){return VT(t)||BT(t)||(function(n){if(n instanceof dn&&DT(n)){for(const r of n.getFilters())if(!VT(r)&&!BT(r))return!1;return!0}return!1})(t)}function UT(t){if(bt(t instanceof zt||t instanceof dn,34018),t instanceof zt)return t;if(t.filters.length===1)return UT(t.filters[0]);const e=t.filters.map((r=>UT(r)));let n=dn.create(e,t.op);return n=Lb(n),m8(n)?n:(bt(n instanceof dn,64498),bt(sp(n),40251),bt(n.filters.length>1,57927),n.filters.reduce(((r,s)=>b2(r,s))))}function b2(t,e){let n;return bt(t instanceof zt||t instanceof dn,38388),bt(e instanceof zt||e instanceof dn,25473),n=t instanceof zt?e instanceof zt?(function(s,i){return dn.create([s,i],"and")})(t,e):nM(t,e):e instanceof zt?nM(e,t):(function(s,i){if(bt(s.filters.length>0&&i.filters.length>0,48005),sp(s)&&sp(i))return UB(s,i.getFilters());const a=DT(s)?s:i,o=DT(s)?i:s,c=a.filters.map((d=>b2(d,o)));return dn.create(c,"or")})(t,e),Lb(n)}function nM(t,e){if(sp(e))return UB(e,t.getFilters());{const n=e.filters.map((r=>b2(t,r)));return dn.create(n,"or")}}function Lb(t){if(bt(t instanceof zt||t instanceof dn,11850),t instanceof zt)return t;const e=t.getFilters();if(e.length===1)return Lb(e[0]);if(VB(t))return t;const n=e.map((s=>Lb(s))),r=[];return n.forEach((s=>{s instanceof zt?r.push(s):s instanceof dn&&(s.op===t.op?r.push(...s.filters):r.push(s))})),r.length===1?r[0]:dn.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zse{constructor(){this.Cn=new w2}addToCollectionParentIndex(e,n){return this.Cn.add(n),me.resolve()}getCollectionParents(e,n){return me.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return me.resolve()}deleteFieldIndex(e,n){return me.resolve()}deleteAllFieldIndexes(e){return me.resolve()}createTargetIndexes(e,n){return me.resolve()}getDocumentsMatchingTarget(e,n){return me.resolve(null)}getIndexType(e,n){return me.resolve(0)}getFieldIndexes(e,n){return me.resolve([])}getNextCollectionGroupToUpdate(e){return me.resolve(null)}getMinOffset(e,n){return me.resolve($i.min())}getMinOffsetFromCollectionGroup(e,n){return me.resolve($i.min())}updateCollectionGroup(e,n,r){return me.resolve()}updateIndexEntries(e,n){return me.resolve()}}class w2{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new gn(Fn.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new gn(Fn.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rM="IndexedDbIndexManager",Yv=new Uint8Array(0);class Wse{constructor(e,n){this.databaseId=n,this.vn=new w2,this.Fn=new xu((r=>Kd(r)),((r,s)=>K0(r,s))),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const r=n.lastSegment(),s=n.popLast();e.addOnCommittedListener((()=>{this.vn.add(n)}));const i={collectionId:r,parent:zs(s)};return sM(e).put(i)}return me.resolve()}getCollectionParents(e,n){const r=[],s=IDBKeyRange.bound([n,""],[pB(n),""],!1,!0);return sM(e).J(s).next((i=>{for(const a of i){if(a.collectionId!==n)break;r.push(No(a.parent))}return r}))}addFieldIndex(e,n){const r=Qm(e),s=(function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map((c=>[c.fieldPath.canonicalString(),c.kind]))}})(n);delete s.indexId;const i=r.add(s);if(n.indexState){const a=of(e);return i.next((o=>{a.put(G4(o,this.uid,n.indexState.sequenceNumber,n.indexState.offset))}))}return i.next()}deleteFieldIndex(e,n){const r=Qm(e),s=of(e),i=af(e);return r.delete(n.indexId).next((()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const n=Qm(e),r=af(e),s=of(e);return n.Z().next((()=>r.Z())).next((()=>s.Z()))}createTargetIndexes(e,n){return me.forEach(this.Mn(n),(r=>this.getIndexType(e,r).next((s=>{if(s===0||s===1){const i=new tM(r).Dn();if(i!=null)return this.addFieldIndex(e,i)}}))))}getDocumentsMatchingTarget(e,n){const r=af(e);let s=!0;const i=new Map;return me.forEach(this.Mn(n),(a=>this.xn(e,a).next((o=>{s&&(s=!!o),i.set(a,o)})))).next((()=>{if(s){let a=us();const o=[];return me.forEach(i,((c,d)=>{He(rM,`Using index ${(function(S){return`id=${S.indexId}|cg=${S.collectionGroup}|f=${S.fields.map((O=>`${O.fieldPath}:${O.kind}`)).join(",")}`})(c)} to execute ${Kd(n)}`);const h=(function(S,O){const R=ST(O);if(R===void 0)return null;for(const M of Db(S,R.fieldPath))switch(M.op){case"array-contains-any":return M.value.arrayValue.values||[];case"array-contains":return[M.value]}return null})(d,c),p=(function(S,O){const R=new Map;for(const M of td(O))for(const P of Db(S,M.fieldPath))switch(P.op){case"==":case"in":R.set(M.fieldPath.canonicalString(),P.value);break;case"not-in":case"!=":return R.set(M.fieldPath.canonicalString(),P.value),Array.from(R.values())}return null})(d,c),m=(function(S,O){const R=[];let M=!0;for(const P of td(O)){const C=P.kind===0?$4(S,P.fieldPath,S.startAt):V4(S,P.fieldPath,S.startAt);R.push(C.value),M&&(M=C.inclusive)}return new rp(R,M)})(d,c),y=(function(S,O){const R=[];let M=!0;for(const P of td(O)){const C=P.kind===0?V4(S,P.fieldPath,S.endAt):$4(S,P.fieldPath,S.endAt);R.push(C.value),M&&(M=C.inclusive)}return new rp(R,M)})(d,c),x=this.On(c,d,m),_=this.On(c,d,y),w=this.Nn(c,d,p),N=this.Bn(c.indexId,h,x,m.inclusive,_,y.inclusive,w);return me.forEach(N,(k=>r.Y(k,n.limit).next((S=>{S.forEach((O=>{const R=nt.fromSegments(O.documentKey);a.has(R)||(a=a.add(R),o.push(R))}))}))))})).next((()=>o))}return me.resolve(null)}))}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=Use(dn.create(e.filters,"and")).map((r=>OT(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,n),n)}Bn(e,n,r,s,i,a,o){const c=(n!=null?n.length:1)*Math.max(r.length,i.length),d=c/(n!=null?n.length:1),h=[];for(let p=0;p<c;++p){const m=n?this.Ln(n[p/d]):Yv,y=this.kn(e,m,r[p%d],s),x=this.qn(e,m,i[p%d],a),_=o.map((w=>this.kn(e,m,w,!0)));h.push(...this.createRange(y,x,_))}return h}kn(e,n,r,s){const i=new pd(e,nt.empty(),n,r);return s?i:i.An()}qn(e,n,r,s){const i=new pd(e,nt.empty(),n,r);return s?i.An():i}xn(e,n){const r=new tM(n),s=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,s).next((i=>{let a=null;for(const o of i)r.yn(o)&&(!a||o.fields.length>a.fields.length)&&(a=o);return a}))}getIndexType(e,n){let r=2;const s=this.Mn(n);return me.forEach(s,(i=>this.xn(e,i).next((a=>{a?r!==0&&a.fields.length<(function(c){let d=new gn(ur.comparator),h=!1;for(const p of c.filters)for(const m of p.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?h=!0:d=d.add(m.field));for(const p of c.orderBy)p.field.isKeyField()||(d=d.add(p.field));return d.size+(h?1:0)})(i)&&(r=1):r=0})))).next((()=>(function(a){return a.limit!==null})(n)&&s.length>1&&r===2?1:r))}Qn(e,n){const r=new Gm;for(const s of td(e)){const i=n.data.field(s.fieldPath);if(i==null)return null;const a=r.Pn(s.kind);fd.Kt.Dt(i,a)}return r.un()}Ln(e){const n=new Gm;return fd.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const r=new Gm;return fd.Kt.Dt(p2(this.databaseId,n),r.Pn((function(i){const a=td(i);return a.length===0?0:a[a.length-1].kind})(e))),r.un()}Nn(e,n,r){if(r===null)return[];let s=[];s.push(new Gm);let i=0;for(const a of td(e)){const o=r[i++];for(const c of s)if(this.Un(n,a.fieldPath)&&o0(o))s=this.Kn(s,a,o);else{const d=c.Pn(a.kind);fd.Kt.Dt(o,d)}}return this.Wn(s)}On(e,n,r){return this.Nn(e,n,r.position)}Wn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Kn(e,n,r){const s=[...e],i=[];for(const a of r.arrayValue.values||[])for(const o of s){const c=new Gm;c.seed(o.un()),fd.Kt.Dt(a,c.Pn(n.kind)),i.push(c)}return i}Un(e,n){return!!e.filters.find((r=>r instanceof zt&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,n){const r=Qm(e),s=of(e);return(n?r.J(TT,IDBKeyRange.bound(n,n)):r.J()).next((i=>{const a=[];return me.forEach(i,(o=>s.get([o.indexId,this.uid]).next((c=>{a.push((function(h,p){const m=p?new n0(p.sequenceNumber,new $i(Gd(p.readTime),new nt(No(p.documentKey)),p.largestBatchId)):n0.empty(),y=h.fields.map((([x,_])=>new $x(ur.fromServerFormat(x),_)));return new Nb(h.indexId,h.collectionGroup,y,m)})(o,c))})))).next((()=>a))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((n=>n.length===0?null:(n.sort(((r,s)=>{const i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:Ot(r.collectionGroup,s.collectionGroup)})),n[0].collectionGroup)))}updateCollectionGroup(e,n,r){const s=Qm(e),i=of(e);return this.Gn(e).next((a=>s.J(TT,IDBKeyRange.bound(n,n)).next((o=>me.forEach(o,(c=>i.put(G4(c.indexId,this.uid,a,r))))))))}updateIndexEntries(e,n){const r=new Map;return me.forEach(n,((s,i)=>{const a=r.get(s.collectionGroup);return(a?me.resolve(a):this.getFieldIndexes(e,s.collectionGroup)).next((o=>(r.set(s.collectionGroup,o),me.forEach(o,(c=>this.zn(e,s,c).next((d=>{const h=this.jn(i,c);return d.isEqual(h)?me.resolve():this.Jn(e,i,c,d,h)})))))))}))}Hn(e,n,r,s){return af(e).put(s.Rn(this.uid,this.$n(r,n.key),n.key))}Yn(e,n,r,s){return af(e).delete(s.Vn(this.uid,this.$n(r,n.key),n.key))}zn(e,n,r){const s=af(e);let i=new gn(Pc);return s.ee({index:EB,range:IDBKeyRange.only([r.indexId,this.uid,Hx(this.$n(r,n))])},((a,o)=>{i=i.add(new pd(r.indexId,n,eM(o.arrayValue),eM(o.directionalValue)))})).next((()=>i))}jn(e,n){let r=new gn(Pc);const s=this.Qn(n,e);if(s==null)return r;const i=ST(n);if(i!=null){const a=e.data.field(i.fieldPath);if(o0(a))for(const o of a.arrayValue.values||[])r=r.add(new pd(n.indexId,e.key,this.Ln(o),s))}else r=r.add(new pd(n.indexId,e.key,Yv,s));return r}Jn(e,n,r,s,i){He(rM,"Updating index entries for document '%s'",n.key);const a=[];return(function(c,d,h,p,m){const y=c.getIterator(),x=d.getIterator();let _=rf(y),w=rf(x);for(;_||w;){let N=!1,k=!1;if(_&&w){const S=h(_,w);S<0?k=!0:S>0&&(N=!0)}else _!=null?k=!0:N=!0;N?(p(w),w=rf(x)):k?(m(_),_=rf(y)):(_=rf(y),w=rf(x))}})(s,i,Pc,(o=>{a.push(this.Hn(e,n,r,o))}),(o=>{a.push(this.Yn(e,n,r,o))})),me.waitFor(a)}Gn(e){let n=1;return of(e).ee({index:_B,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,s,i)=>{i.done(),n=s.sequenceNumber+1})).next((()=>n))}createRange(e,n,r){r=r.sort(((a,o)=>Pc(a,o))).filter(((a,o,c)=>!o||Pc(a,c[o-1])!==0));const s=[];s.push(e);for(const a of r){const o=Pc(a,e),c=Pc(a,n);if(o===0)s[0]=e.An();else if(o>0&&c<0)s.push(a),s.push(a.An());else if(c>0)break}s.push(n);const i=[];for(let a=0;a<s.length;a+=2){if(this.Zn(s[a],s[a+1]))return[];const o=s[a].Vn(this.uid,Yv,nt.empty()),c=s[a+1].Vn(this.uid,Yv,nt.empty());i.push(IDBKeyRange.bound(o,c))}return i}Zn(e,n){return Pc(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(iM)}getMinOffset(e,n){return me.mapArray(this.Mn(n),(r=>this.xn(e,r).next((s=>s||mt(44426))))).next(iM)}}function sM(t){return Or(t,i0)}function af(t){return Or(t,Pg)}function Qm(t){return Or(t,c2)}function of(t){return Or(t,jg)}function iM(t){bt(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const s=t[r].indexState.offset;a2(s,e)<0&&(e=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new $i(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aM={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},g8=41943040;class ri{static withCacheSize(e){return new ri(e,ri.DEFAULT_COLLECTION_PERCENTILE,ri.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y8(t,e,n){const r=t.store(Pa),s=t.store(Gf),i=[],a=IDBKeyRange.only(n.batchId);let o=0;const c=r.ee({range:a},((h,p,m)=>(o++,m.delete())));i.push(c.next((()=>{bt(o===1,47070,{batchId:n.batchId})})));const d=[];for(const h of n.mutations){const p=xB(e,h.key.path,n.batchId);i.push(s.delete(p)),d.push(h.key)}return me.waitFor(i).next((()=>d))}function Fb(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw mt(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ri.DEFAULT_COLLECTION_PERCENTILE=10,ri.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ri.DEFAULT=new ri(g8,ri.DEFAULT_COLLECTION_PERCENTILE,ri.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ri.DISABLED=new ri(-1,0,0);class O1{constructor(e,n,r,s){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=s,this.Xn={}}static wt(e,n,r,s){bt(e.uid!=="",64387);const i=e.isAuthenticated()?e.uid:"";return new O1(i,n,r,s)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ac(e).ee({index:gd,range:r},((s,i,a)=>{n=!1,a.done()})).next((()=>n))}addMutationBatch(e,n,r,s){const i=vf(e),a=Ac(e);return a.add({}).next((o=>{bt(typeof o=="number",49019);const c=new y2(o,n,r,s),d=(function(y,x,_){const w=_.baseMutations.map((k=>Ob(y.yt,k))),N=_.mutations.map((k=>Ob(y.yt,k)));return{userId:x,batchId:_.batchId,localWriteTimeMs:_.localWriteTime.toMillis(),baseMutations:w,mutations:N}})(this.serializer,this.userId,c),h=[];let p=new gn(((m,y)=>Ot(m.canonicalString(),y.canonicalString())));for(const m of s){const y=xB(this.userId,m.key.path,o);p=p.add(m.key.path.popLast()),h.push(a.put(d)),h.push(i.put(y,fre))}return p.forEach((m=>{h.push(this.indexManager.addToCollectionParentIndex(e,m))})),e.addOnCommittedListener((()=>{this.Xn[o]=c.keys()})),me.waitFor(h).next((()=>c))}))}lookupMutationBatch(e,n){return Ac(e).get(n).next((r=>r?(bt(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),hd(this.serializer,r)):null))}er(e,n){return this.Xn[n]?me.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next((r=>{if(r){const s=r.keys();return this.Xn[n]=s,s}return null}))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return Ac(e).ee({index:gd,range:s},((a,o,c)=>{o.userId===this.userId&&(bt(o.batchId>=r,47524,{tr:r}),i=hd(this.serializer,o)),c.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Cd;return Ac(e).ee({index:gd,range:n,reverse:!0},((s,i,a)=>{r=i.batchId,a.done()})).next((()=>r))}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,Cd],[this.userId,Number.POSITIVE_INFINITY]);return Ac(e).J(gd,n).next((r=>r.map((s=>hd(this.serializer,s)))))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Vx(this.userId,n.path),s=IDBKeyRange.lowerBound(r),i=[];return vf(e).ee({range:s},((a,o,c)=>{const[d,h,p]=a,m=No(h);if(d===this.userId&&n.path.isEqual(m))return Ac(e).get(p).next((y=>{if(!y)throw mt(61480,{nr:a,batchId:p});bt(y.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:y.userId,batchId:p}),i.push(hd(this.serializer,y))}));c.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new gn(Ot);const s=[];return n.forEach((i=>{const a=Vx(this.userId,i.path),o=IDBKeyRange.lowerBound(a),c=vf(e).ee({range:o},((d,h,p)=>{const[m,y,x]=d,_=No(y);m===this.userId&&i.path.isEqual(_)?r=r.add(x):p.done()}));s.push(c)})),me.waitFor(s).next((()=>this.rr(e,r)))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1,i=Vx(this.userId,r),a=IDBKeyRange.lowerBound(i);let o=new gn(Ot);return vf(e).ee({range:a},((c,d,h)=>{const[p,m,y]=c,x=No(m);p===this.userId&&r.isPrefixOf(x)?x.length===s&&(o=o.add(y)):h.done()})).next((()=>this.rr(e,o)))}rr(e,n){const r=[],s=[];return n.forEach((i=>{s.push(Ac(e).get(i).next((a=>{if(a===null)throw mt(35274,{batchId:i});bt(a.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:a.userId,batchId:i}),r.push(hd(this.serializer,a))})))})),me.waitFor(s).next((()=>r))}removeMutationBatch(e,n){return y8(e.le,this.userId,n).next((r=>(e.addOnCommittedListener((()=>{this.ir(n.batchId)})),me.forEach(r,(s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((n=>{if(!n)return me.resolve();const r=IDBKeyRange.lowerBound((function(a){return[a]})(this.userId)),s=[];return vf(e).ee({range:r},((i,a,o)=>{if(i[0]===this.userId){const c=No(i[1]);s.push(c)}else o.done()})).next((()=>{bt(s.length===0,56720,{sr:s.map((i=>i.canonicalString()))})}))}))}containsKey(e,n){return v8(e,this.userId,n)}_r(e){return x8(e).get(this.userId).next((n=>n||{userId:this.userId,lastAcknowledgedBatchId:Cd,lastStreamToken:""}))}}function v8(t,e,n){const r=Vx(e,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let a=!1;return vf(t).ee({range:i,X:!0},((o,c,d)=>{const[h,p,m]=o;h===e&&p===s&&(a=!0),d.done()})).next((()=>a))}function Ac(t){return Or(t,Pa)}function vf(t){return Or(t,Gf)}function x8(t){return Or(t,r0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Qd(0)}static cr(){return new Qd(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hse{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next((n=>{const r=new Qd(n.highestTargetId);return n.highestTargetId=r.next(),this.hr(e,n).next((()=>n.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((n=>Kt.fromTimestamp(new Kn(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((n=>n.highestListenSequenceNumber))}setTargetsMetadata(e,n,r){return this.lr(e).next((s=>(s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),this.hr(e,s))))}addTargetData(e,n){return this.Pr(e,n).next((()=>this.lr(e).next((r=>(r.targetCount+=1,this.Tr(n,r),this.hr(e,r))))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next((()=>lf(e).delete(n.targetId))).next((()=>this.lr(e))).next((r=>(bt(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r))))}removeTargets(e,n,r){let s=0;const i=[];return lf(e).ee(((a,o)=>{const c=bg(o);c.sequenceNumber<=n&&r.get(c.targetId)===null&&(s++,i.push(this.removeTargetData(e,c)))})).next((()=>me.waitFor(i))).next((()=>s))}forEachTarget(e,n){return lf(e).ee(((r,s)=>{const i=bg(s);n(i)}))}lr(e){return oM(e).get(Cb).next((n=>(bt(n!==null,2888),n)))}hr(e,n){return oM(e).put(Cb,n)}Pr(e,n){return lf(e).put(h8(this.serializer,n))}Tr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next((n=>n.targetCount))}getTargetData(e,n){const r=Kd(n),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return lf(e).ee({range:s,index:wB},((a,o,c)=>{const d=bg(o);K0(n,d.target)&&(i=d,c.done())})).next((()=>i))}addMatchingKeys(e,n,r){const s=[],i=Bc(e);return n.forEach((a=>{const o=zs(a.path);s.push(i.put({targetId:r,path:o})),s.push(this.referenceDelegate.addReference(e,r,a))})),me.waitFor(s)}removeMatchingKeys(e,n,r){const s=Bc(e);return me.forEach(n,(i=>{const a=zs(i.path);return me.waitFor([s.delete([r,a]),this.referenceDelegate.removeReference(e,r,i)])}))}removeMatchingKeysForTargetId(e,n){const r=Bc(e),s=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),s=Bc(e);let i=us();return s.ee({range:r,X:!0},((a,o,c)=>{const d=No(a[1]),h=new nt(d);i=i.add(h)})).next((()=>i))}containsKey(e,n){const r=zs(n.path),s=IDBKeyRange.bound([r],[pB(r)],!1,!0);let i=0;return Bc(e).ee({index:l2,X:!0,range:s},(([a,o],c,d)=>{a!==0&&(i++,d.done())})).next((()=>i>0))}At(e,n){return lf(e).get(n).next((r=>r?bg(r):null))}}function lf(t){return Or(t,Qf)}function oM(t){return Or(t,jd)}function Bc(t){return Or(t,Xf)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lM="LruGarbageCollector",b8=1048576;function cM([t,e],[n,r]){const s=Ot(t,n);return s===0?Ot(e,r):s}class qse{constructor(e){this.Ir=e,this.buffer=new gn(cM),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();cM(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Kse{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){He(lM,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Hp(n)?He(lM,"Ignoring IndexedDB error during garbage collection: ",n):await E1(n)}await this.Vr(3e5)}))}}class Yse{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return me.resolve(Ma.ce);const r=new qse(n);return this.mr.forEachTarget(e,(s=>r.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>r.Ar(s))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(He("LruGarbageCollector","Garbage collection skipped; disabled"),me.resolve(aM)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(He("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),aM):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,a,o,c,d;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((p=>(p>this.params.maximumSequenceNumbersToCollect?(He("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,a=Date.now(),this.nthSequenceNumber(e,s)))).next((p=>(r=p,o=Date.now(),this.removeTargets(e,r,n)))).next((p=>(i=p,c=Date.now(),this.removeOrphanedDocuments(e,r)))).next((p=>(d=Date.now(),mf()<=Lt.DEBUG&&He("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-h}ms
	Determined least recently used ${s} in `+(o-a)+`ms
	Removed ${i} targets in `+(c-o)+`ms
	Removed ${p} documents in `+(d-c)+`ms
Total Duration: ${d-h}ms`),me.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:p}))))}}function Gse(t,e){return new Yse(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qse{constructor(e,n){this.db=e,this.garbageCollector=Gse(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>n.next((s=>r+s))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,((r,s)=>n(s)))}addReference(e,n,r){return Gv(e,r)}removeReference(e,n,r){return Gv(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Gv(e,n)}br(e,n){return(function(s,i){let a=!1;return x8(s).te((o=>v8(s,o,i).next((c=>(c&&(a=!0),me.resolve(!c)))))).next((()=>a))})(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.Sr(e,((a,o)=>{if(o<=n){const c=this.br(e,a).next((d=>{if(!d)return i++,r.getEntry(e,a).next((()=>(r.removeEntry(a,Kt.min()),Bc(e).delete((function(p){return[0,zs(p.path)]})(a)))))}));s.push(c)}})).next((()=>me.waitFor(s))).next((()=>r.apply(e))).next((()=>i))}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Gv(e,n)}Sr(e,n){const r=Bc(e);let s,i=Ma.ce;return r.ee({index:l2},(([a,o],{path:c,sequenceNumber:d})=>{a===0?(i!==Ma.ce&&n(new nt(No(s)),i),i=d,s=c):i=Ma.ce})).next((()=>{i!==Ma.ce&&n(new nt(No(s)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Gv(t,e){return Bc(t).put((function(r,s){return{targetId:0,path:zs(r.path),sequenceNumber:s}})(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w8{constructor(){this.changes=new xu((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,cs.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?me.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xse{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Gu(e).put(r)}removeEntry(e,n,r){return Gu(e).delete((function(i,a){const o=i.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],Mb(a),o[o.length-1]]})(n,r))}updateMetadata(e,n){return this.getMetadata(e).next((r=>(r.byteSize+=n,this.Dr(e,r))))}getEntry(e,n){let r=cs.newInvalidDocument(n);return Gu(e).ee({index:Bx,range:IDBKeyRange.only(Xm(n))},((s,i)=>{r=this.Cr(n,i)})).next((()=>r))}vr(e,n){let r={size:0,document:cs.newInvalidDocument(n)};return Gu(e).ee({index:Bx,range:IDBKeyRange.only(Xm(n))},((s,i)=>{r={document:this.Cr(n,i),size:Fb(i)}})).next((()=>r))}getEntries(e,n){let r=yd();return this.Fr(e,n,((s,i)=>{const a=this.Cr(s,i);r=r.insert(s,a)})).next((()=>r))}Mr(e,n){let r=yd(),s=new Ka(nt.comparator);return this.Fr(e,n,((i,a)=>{const o=this.Cr(i,a);r=r.insert(i,o),s=s.insert(i,Fb(a))})).next((()=>({documents:r,Or:s})))}Fr(e,n,r){if(n.isEmpty())return me.resolve();let s=new gn(hM);n.forEach((c=>s=s.add(c)));const i=IDBKeyRange.bound(Xm(s.first()),Xm(s.last())),a=s.getIterator();let o=a.getNext();return Gu(e).ee({index:Bx,range:i},((c,d,h)=>{const p=nt.fromSegments([...d.prefixPath,d.collectionGroup,d.documentId]);for(;o&&hM(o,p)<0;)r(o,null),o=a.getNext();o&&o.isEqual(p)&&(r(o,d),o=a.hasNext()?a.getNext():null),o?h.j(Xm(o)):h.done()})).next((()=>{for(;o;)r(o,null),o=a.hasNext()?a.getNext():null}))}getDocumentsMatchingQuery(e,n,r,s,i){const a=n.path,o=[a.popLast().toArray(),a.lastSegment(),Mb(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Gu(e).J(IDBKeyRange.bound(o,c,!0)).next((d=>{i?.incrementDocumentReadCount(d.length);let h=yd();for(const p of d){const m=this.Cr(nt.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);m.isFoundDocument()&&(A1(n,m)||s.has(m.key))&&(h=h.insert(m.key,m))}return h}))}getAllFromCollectionGroup(e,n,r,s){let i=yd();const a=dM(n,r),o=dM(n,$i.max());return Gu(e).ee({index:bB,range:IDBKeyRange.bound(a,o,!0)},((c,d,h)=>{const p=this.Cr(nt.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);i=i.insert(p.key,p),i.size===s&&h.done()})).next((()=>i))}newChangeBuffer(e){return new Jse(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((n=>n.byteSize))}getMetadata(e){return uM(e).get(kT).next((n=>(bt(!!n,20021),n)))}Dr(e,n){return uM(e).put(kT,n)}Cr(e,n){if(n){const r=Ose(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(Kt.min())))return r}return cs.newInvalidDocument(e)}}function _8(t){return new Xse(t)}class Jse extends w8{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new xu((r=>r.toString()),((r,s)=>r.isEqual(s)))}applyChanges(e){const n=[];let r=0,s=new gn(((i,a)=>Ot(i.canonicalString(),a.canonicalString())));return this.changes.forEach(((i,a)=>{const o=this.Br.get(i);if(n.push(this.Nr.removeEntry(e,i,o.readTime)),a.isValidDocument()){const c=K4(this.Nr.serializer,a);s=s.add(i.path.popLast());const d=Fb(c);r+=d-o.size,n.push(this.Nr.addEntry(e,i,c))}else if(r-=o.size,this.trackRemovals){const c=K4(this.Nr.serializer,a.convertToNoDocument(Kt.min()));n.push(this.Nr.addEntry(e,i,c))}})),s.forEach((i=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,i))})),n.push(this.Nr.updateMetadata(e,r)),me.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next((r=>(this.Br.set(n,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next((({documents:r,Or:s})=>(s.forEach(((i,a)=>{this.Br.set(i,{size:a,readTime:r.get(i).readTime})})),r)))}}function uM(t){return Or(t,s0)}function Gu(t){return Or(t,Tb)}function Xm(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function dM(t,e){const n=e.documentKey.path.toArray();return[t,Mb(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function hM(t,e){const n=t.path.toArray(),r=e.path.toArray();let s=0;for(let i=0;i<n.length-2&&i<r.length-2;++i)if(s=Ot(n[i],r[i]),s)return s;return s=Ot(n.length,r.length),s||(s=Ot(n[n.length-2],r[r.length-2]),s||Ot(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zse{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E8{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,n)))).next((s=>(r!==null&&Rg(r.mutation,s,vl.empty(),Kn.now()),s)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,us()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=us()){const s=So();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,r).next((i=>{let a=Kv();return i.forEach(((o,c)=>{a=a.insert(o,c.overlayedDocument)})),a}))))}getOverlayedDocuments(e,n){const r=So();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,us())))}populateOverlays(e,n,r){const s=[];return r.forEach((i=>{n.has(i)||s.push(i)})),this.documentOverlayCache.getOverlays(e,s).next((i=>{i.forEach(((a,o)=>{n.set(a,o)}))}))}computeViews(e,n,r,s){let i=yd();const a=Dg(),o=(function(){return Dg()})();return n.forEach(((c,d)=>{const h=r.get(d.key);s.has(d.key)&&(h===void 0||h.mutation instanceof qp)?i=i.insert(d.key,d):h!==void 0?(a.set(d.key,h.mutation.getFieldMask()),Rg(h.mutation,d,h.mutation.getFieldMask(),Kn.now())):a.set(d.key,vl.empty())})),this.recalculateAndSaveOverlays(e,i).next((c=>(c.forEach(((d,h)=>a.set(d,h))),n.forEach(((d,h)=>o.set(d,new Zse(h,a.get(d)??null)))),o)))}recalculateAndSaveOverlays(e,n){const r=Dg();let s=new Ka(((a,o)=>a-o)),i=us();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((a=>{for(const o of a)o.keys().forEach((c=>{const d=n.get(c);if(d===null)return;let h=r.get(c)||vl.empty();h=o.applyToLocalView(d,h),r.set(c,h);const p=(s.get(o.batchId)||us()).add(c);s=s.insert(o.batchId,p)}))})).next((()=>{const a=[],o=s.getReverseIterator();for(;o.hasNext();){const c=o.getNext(),d=c.key,h=c.value,p=QB();h.forEach((m=>{if(!i.has(m)){const y=e8(n.get(m),r.get(m));y!==null&&p.set(m,y),i=i.add(m)}})),a.push(this.documentOverlayCache.saveOverlays(e,d,p))}return me.waitFor(a)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,s){return(function(a){return nt.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Jre(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next((i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):me.resolve(So());let o=t0,c=i;return a.next((d=>me.forEach(d,((h,p)=>(o<p.largestBatchId&&(o=p.largestBatchId),i.get(h)?me.resolve():this.remoteDocumentCache.getEntry(e,h).next((m=>{c=c.insert(h,m)}))))).next((()=>this.populateOverlays(e,d,i))).next((()=>this.computeViews(e,c,d,us()))).next((h=>({batchId:o,changes:rse(h)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new nt(n)).next((r=>{let s=Kv();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let a=Kv();return this.indexManager.getCollectionParents(e,i).next((o=>me.forEach(o,(c=>{const d=(function(p,m){return new P1(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next((h=>{h.forEach(((p,m)=>{a=a.insert(p,m)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s)))).next((a=>{i.forEach(((c,d)=>{const h=d.getKey();a.get(h)===null&&(a=a.insert(h,cs.newInvalidDocument(h)))}));let o=Kv();return a.forEach(((c,d)=>{const h=i.get(c);h!==void 0&&Rg(h.mutation,d,vl.empty(),Kn.now()),A1(n,d)&&(o=o.insert(c,d))})),o}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eie{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return me.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:Ua(s.createTime)}})(n)),me.resolve()}getNamedQuery(e,n){return me.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(s){return{name:s.name,query:f8(s.bundledQuery),readTime:Ua(s.readTime)}})(n)),me.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tie{constructor(){this.overlays=new Ka(nt.comparator),this.qr=new Map}getOverlay(e,n){return me.resolve(this.overlays.get(n))}getOverlays(e,n){const r=So();return me.forEach(n,(s=>this.getOverlay(e,s).next((i=>{i!==null&&r.set(s,i)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((s,i)=>{this.St(e,n,i)})),me.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach((i=>this.overlays=this.overlays.remove(i))),this.qr.delete(r)),me.resolve()}getOverlaysForCollection(e,n,r){const s=So(),i=n.length+1,a=new nt(n.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const c=o.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return me.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ka(((d,h)=>d-h));const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let h=i.get(d.largestBatchId);h===null&&(h=So(),i=i.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const o=So(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach(((d,h)=>o.set(d,h))),!(o.size()>=s)););return me.resolve(o)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new x2(n,r));let i=this.qr.get(n);i===void 0&&(i=us(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nie{constructor(){this.sessionToken=hi.EMPTY_BYTE_STRING}getSessionToken(e){return me.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,me.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(){this.Qr=new gn(Wr.$r),this.Ur=new gn(Wr.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Wr(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new Wr(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new nt(new Fn([])),r=new Wr(n,e),s=new Wr(n,e+1),i=[];return this.Ur.forEachInRange([r,s],(a=>{this.Gr(a),i.push(a.key)})),i}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new nt(new Fn([])),r=new Wr(n,e),s=new Wr(n,e+1);let i=us();return this.Ur.forEachInRange([r,s],(a=>{i=i.add(a.key)})),i}containsKey(e){const n=new Wr(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Wr{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return nt.comparator(e.key,n.key)||Ot(e.Yr,n.Yr)}static Kr(e,n){return Ot(e.Yr,n.Yr)||nt.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rie{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new gn(Wr.$r)}checkEmpty(e){return me.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new y2(i,n,r,s);this.mutationQueue.push(a);for(const o of s)this.Zr=this.Zr.add(new Wr(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return me.resolve(a)}lookupMutationBatch(e,n){return me.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return me.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return me.resolve(this.mutationQueue.length===0?Cd:this.tr-1)}getAllMutationBatches(e){return me.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Wr(n,0),s=new Wr(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],(a=>{const o=this.Xr(a.Yr);i.push(o)})),me.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new gn(Ot);return n.forEach((s=>{const i=new Wr(s,0),a=new Wr(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,a],(o=>{r=r.add(o.Yr)}))})),me.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;nt.isDocumentKey(i)||(i=i.child(""));const a=new Wr(new nt(i),0);let o=new gn(Ot);return this.Zr.forEachWhile((c=>{const d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(o=o.add(c.Yr)),!0)}),a),me.resolve(this.ti(o))}ti(e){const n=[];return e.forEach((r=>{const s=this.Xr(r);s!==null&&n.push(s)})),n}removeMutationBatch(e,n){bt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return me.forEach(n.mutations,(s=>{const i=new Wr(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new Wr(n,0),s=this.Zr.firstAfterOrEqual(r);return me.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,me.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sie{constructor(e){this.ri=e,this.docs=(function(){return new Ka(nt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return me.resolve(r?r.document.mutableCopy():cs.newInvalidDocument(n))}getEntries(e,n){let r=yd();return n.forEach((s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():cs.newInvalidDocument(s))})),me.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=yd();const a=n.path,o=new nt(a.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(o);for(;c.hasNext();){const{key:d,value:{document:h}}=c.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||a2(mB(h),r)<=0||(s.has(h.key)||A1(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return me.resolve(i)}getAllFromCollectionGroup(e,n,r,s){mt(9500)}ii(e,n){return me.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new iie(this)}getSize(e){return me.resolve(this.size)}}class iie extends w8{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)})),me.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aie{constructor(e){this.persistence=e,this.si=new xu((n=>Kd(n)),K0),this.lastRemoteSnapshotVersion=Kt.min(),this.highestTargetId=0,this.oi=0,this._i=new _2,this.targetCount=0,this.ai=Qd.ur()}forEachTarget(e,n){return this.si.forEach(((r,s)=>n(s))),me.resolve()}getLastRemoteSnapshotVersion(e){return me.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return me.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),me.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),me.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Qd(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,me.resolve()}updateTargetData(e,n){return this.Pr(n),me.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,me.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach(((a,o)=>{o.sequenceNumber<=n&&r.get(o.targetId)===null&&(this.si.delete(a),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),s++)})),me.waitFor(i).next((()=>s))}getTargetCount(e){return me.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return me.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),me.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach((a=>{i.push(s.markPotentiallyOrphaned(e,a))})),me.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),me.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return me.resolve(r)}containsKey(e,n){return me.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N8{constructor(e,n){this.ui={},this.overlays={},this.ci=new Ma(0),this.li=!1,this.li=!0,this.hi=new nie,this.referenceDelegate=e(this),this.Pi=new aie(this),this.indexManager=new zse,this.remoteDocumentCache=(function(s){return new sie(s)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new d8(n),this.Ii=new eie(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new tie,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new rie(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){He("MemoryPersistence","Starting transaction:",e);const s=new oie(this.ci.next());return this.referenceDelegate.Ei(),r(s).next((i=>this.referenceDelegate.di(s).next((()=>i)))).toPromise().then((i=>(s.raiseOnCommittedEvent(),i)))}Ai(e,n){return me.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class oie extends yB{constructor(e){super(),this.currentSequenceNumber=e}}class M1{constructor(e){this.persistence=e,this.Ri=new _2,this.Vi=null}static mi(e){return new M1(e)}get fi(){if(this.Vi)return this.Vi;throw mt(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),me.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),me.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),me.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((s=>this.fi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((s=>{s.forEach((i=>this.fi.add(i.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return me.forEach(this.fi,(r=>{const s=nt.fromPath(r);return this.gi(e,s).next((i=>{i||n.removeEntry(s,Kt.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return me.or([()=>me.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lie{constructor(e){this.serializer=e}k(e,n,r,s){const i=new N1("createOrUpgrade",n);r<1&&s>=1&&((function(c){c.createObjectStore(q0)})(e),(function(c){c.createObjectStore(r0,{keyPath:hre}),c.createObjectStore(Pa,{keyPath:T4,autoIncrement:!0}).createIndex(gd,C4,{unique:!0}),c.createObjectStore(Gf)})(e),fM(e),(function(c){c.createObjectStore(nd)})(e));let a=me.resolve();return r<3&&s>=3&&(r!==0&&((function(c){c.deleteObjectStore(Xf),c.deleteObjectStore(Qf),c.deleteObjectStore(jd)})(e),fM(e)),a=a.next((()=>(function(c){const d=c.store(jd),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Kt.min().toTimestamp(),targetCount:0};return d.put(Cb,h)})(i)))),r<4&&s>=4&&(r!==0&&(a=a.next((()=>(function(c,d){return d.store(Pa).J().next((p=>{c.deleteObjectStore(Pa),c.createObjectStore(Pa,{keyPath:T4,autoIncrement:!0}).createIndex(gd,C4,{unique:!0});const m=d.store(Pa),y=p.map((x=>m.put(x)));return me.waitFor(y)}))})(e,i)))),a=a.next((()=>{(function(c){c.createObjectStore(Jf,{keyPath:wre})})(e)}))),r<5&&s>=5&&(a=a.next((()=>this.yi(i)))),r<6&&s>=6&&(a=a.next((()=>((function(c){c.createObjectStore(s0)})(e),this.wi(i))))),r<7&&s>=7&&(a=a.next((()=>this.Si(i)))),r<8&&s>=8&&(a=a.next((()=>this.bi(e,i)))),r<9&&s>=9&&(a=a.next((()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&s>=10&&(a=a.next((()=>this.Di(i)))),r<11&&s>=11&&(a=a.next((()=>{(function(c){c.createObjectStore(k1,{keyPath:_re})})(e),(function(c){c.createObjectStore(T1,{keyPath:Ere})})(e)}))),r<12&&s>=12&&(a=a.next((()=>{(function(c){const d=c.createObjectStore(C1,{keyPath:Pre});d.createIndex(CT,Are,{unique:!1}),d.createIndex(NB,Ire,{unique:!1})})(e)}))),r<13&&s>=13&&(a=a.next((()=>(function(c){const d=c.createObjectStore(Tb,{keyPath:pre});d.createIndex(Bx,mre),d.createIndex(bB,gre)})(e))).next((()=>this.Ci(e,i))).next((()=>e.deleteObjectStore(nd)))),r<14&&s>=14&&(a=a.next((()=>this.Fi(e,i)))),r<15&&s>=15&&(a=a.next((()=>(function(c){c.createObjectStore(c2,{keyPath:Nre,autoIncrement:!0}).createIndex(TT,Sre,{unique:!1}),c.createObjectStore(jg,{keyPath:kre}).createIndex(_B,Tre,{unique:!1}),c.createObjectStore(Pg,{keyPath:Cre}).createIndex(EB,jre,{unique:!1})})(e)))),r<16&&s>=16&&(a=a.next((()=>{n.objectStore(jg).clear()})).next((()=>{n.objectStore(Pg).clear()}))),r<17&&s>=17&&(a=a.next((()=>{(function(c){c.createObjectStore(u2,{keyPath:Dre})})(e)}))),r<18&&s>=18&&v9()&&(a=a.next((()=>{n.objectStore(jg).clear()})).next((()=>{n.objectStore(Pg).clear()}))),a}wi(e){let n=0;return e.store(nd).ee(((r,s)=>{n+=Fb(s)})).next((()=>{const r={byteSize:n};return e.store(s0).put(kT,r)}))}yi(e){const n=e.store(r0),r=e.store(Pa);return n.J().next((s=>me.forEach(s,(i=>{const a=IDBKeyRange.bound([i.userId,Cd],[i.userId,i.lastAcknowledgedBatchId]);return r.J(gd,a).next((o=>me.forEach(o,(c=>{bt(c.userId===i.userId,18650,"Cannot process batch from unexpected user",{batchId:c.batchId});const d=hd(this.serializer,c);return y8(e,i.userId,d).next((()=>{}))}))))}))))}Si(e){const n=e.store(Xf),r=e.store(nd);return e.store(jd).get(Cb).next((s=>{const i=[];return r.ee(((a,o)=>{const c=new Fn(a),d=(function(p){return[0,zs(p)]})(c);i.push(n.get(d).next((h=>h?me.resolve():(p=>n.put({targetId:0,path:zs(p),sequenceNumber:s.highestListenSequenceNumber}))(c))))})).next((()=>me.waitFor(i)))}))}bi(e,n){e.createObjectStore(i0,{keyPath:bre});const r=n.store(i0),s=new w2,i=a=>{if(s.add(a)){const o=a.lastSegment(),c=a.popLast();return r.put({collectionId:o,parent:zs(c)})}};return n.store(nd).ee({X:!0},((a,o)=>{const c=new Fn(a);return i(c.popLast())})).next((()=>n.store(Gf).ee({X:!0},(([a,o,c],d)=>{const h=No(o);return i(h.popLast())}))))}Di(e){const n=e.store(Qf);return n.ee(((r,s)=>{const i=bg(s),a=h8(this.serializer,i);return n.put(a)}))}Ci(e,n){const r=n.store(nd),s=[];return r.ee(((i,a)=>{const o=n.store(Tb),c=(function(p){return p.document?new nt(Fn.fromString(p.document.name).popFirst(5)):p.noDocument?nt.fromSegments(p.noDocument.path):p.unknownDocument?nt.fromSegments(p.unknownDocument.path):mt(36783)})(a).path.toArray(),d={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};s.push(o.put(d))})).next((()=>me.waitFor(s)))}Fi(e,n){const r=n.store(Pa),s=_8(this.serializer),i=new N8(M1.mi,this.serializer.yt);return r.J().next((a=>{const o=new Map;return a.forEach((c=>{let d=o.get(c.userId)??us();hd(this.serializer,c).keys().forEach((h=>d=d.add(h))),o.set(c.userId,d)})),me.forEach(o,((c,d)=>{const h=new ni(d),p=R1.wt(this.serializer,h),m=i.getIndexManager(h),y=O1.wt(h,this.serializer,m,i.referenceDelegate);return new E8(s,y,p,m).recalculateAndSaveOverlaysForDocumentKeys(new jT(n,Ma.ce),c).next()}))}))}}function fM(t){t.createObjectStore(Xf,{keyPath:vre}).createIndex(l2,xre,{unique:!0}),t.createObjectStore(Qf,{keyPath:"targetId"}).createIndex(wB,yre,{unique:!0}),t.createObjectStore(jd)}const Ic="IndexedDbPersistence",HN=18e5,qN=5e3,KN="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",cie="main";class E2{constructor(e,n,r,s,i,a,o,c,d,h,p=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Mi=i,this.window=a,this.document=o,this.xi=d,this.Oi=h,this.Ni=p,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=m=>Promise.resolve(),!E2.v())throw new lt(De.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Qse(this,s),this.$i=n+cie,this.serializer=new d8(c),this.Ui=new Kc(this.$i,this.Ni,new lie(this.serializer)),this.hi=new Lse,this.Pi=new Hse(this.referenceDelegate,this.serializer),this.remoteDocumentCache=_8(this.serializer),this.Ii=new Mse,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,h===!1&&ua(Ic,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new lt(De.FAILED_PRECONDITION,KN);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Ma(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async n=>{n.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Qv(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((n=>this.isPrimary&&!n?this.Zi(e).next((()=>!1)):!!n&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(Hp(e))return He(Ic,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return He(Ic,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return Jm(e).get(nf).next((n=>me.resolve(this.es(n))))}ts(e){return Qv(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,HN)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(n=>{const r=Or(n,Jf);return r.J().next((s=>{const i=this.ss(s,HN),a=s.filter((o=>i.indexOf(o)===-1));return me.forEach(a,(o=>r.delete(o.clientId))).next((()=>a))}))})).catch((()=>[]));if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?me.resolve(!0):Jm(e).get(nf).next((n=>{if(n!==null&&this.rs(n.leaseTimestampMs,qN)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new lt(De.FAILED_PRECONDITION,KN);return!1}}return!(!this.networkEnabled||!this.inForeground)||Qv(e).J().next((r=>this.ss(r,qN).find((s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,a=!this.inForeground&&s.inForeground,o=this.networkEnabled===s.networkEnabled;if(i||a&&o)return!0}return!1}))===void 0))})).next((n=>(this.isPrimary!==n&&He(Ic,`Client ${n?"is":"is not"} eligible for a primary lease.`),n)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[q0,Jf],(e=>{const n=new jT(e,Ma.ce);return this.Zi(n).next((()=>this.ts(n)))})),this.Ui.close(),this.Ps()}ss(e,n){return e.filter((r=>this.rs(r.updateTimeMs,n)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>Qv(e).J().next((n=>this.ss(n,HN).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return O1.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Wse(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return R1.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,r){He(Ic,"Starting transaction:",e);const s=n==="readonly"?"readonly":"readwrite",i=(function(c){return c===18?Mre:c===17?CB:c===16?Ore:c===15?d2:c===14?TB:c===13?kB:c===12?Rre:c===11?SB:void mt(60245)})(this.Ni);let a;return this.Ui.runTransaction(e,s,i,(o=>(a=new jT(o,this.ci?this.ci.next():Ma.ce),n==="readwrite-primary"?this.Hi(a).next((c=>!!c||this.Yi(a))).next((c=>{if(!c)throw ua(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new lt(De.FAILED_PRECONDITION,gB);return r(a)})).next((c=>this.Xi(a).next((()=>c)))):this.Is(a).next((()=>r(a)))))).then((o=>(a.raiseOnCommittedEvent(),o)))}Is(e){return Jm(e).get(nf).next((n=>{if(n!==null&&this.rs(n.leaseTimestampMs,qN)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new lt(De.FAILED_PRECONDITION,KN)}))}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Jm(e).put(nf,n)}static v(){return Kc.v()}Zi(e){const n=Jm(e);return n.get(nf).next((r=>this.es(r)?(He(Ic,"Releasing primary lease."),n.delete(nf)):me.resolve()))}rs(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(ua(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;y9()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const n=this.Ki?.getItem(this._s(e))!==null;return He(Ic,`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return ua(Ic,"Failed to get zombied client id.",n),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){ua("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Jm(t){return Or(t,q0)}function Qv(t){return Or(t,Jf)}function uie(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=us(),s=us();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new N2(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class die{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S8{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return y9()?8:vB(Rr())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next((a=>{i.result=a})).next((()=>{if(!i.result)return this.ws(e,n,s,r).next((a=>{i.result=a}))})).next((()=>{if(i.result)return;const a=new die;return this.Ss(e,n,a).next((o=>{if(i.result=o,this.Vs)return this.bs(e,n,a,o.size)}))})).next((()=>i.result))}bs(e,n,r,s){return r.documentReadCount<this.fs?(mf()<=Lt.DEBUG&&He("QueryEngine","SDK will not create cache indexes for query:",Km(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),me.resolve()):(mf()<=Lt.DEBUG&&He("QueryEngine","Query:",Km(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(mf()<=Lt.DEBUG&&He("QueryEngine","The SDK decides to create cache indexes for query:",Km(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,kl(n))):me.resolve())}ys(e,n){if(B4(n))return me.resolve(null);let r=kl(n);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=MT(n,null,"F"),r=kl(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((i=>{const a=us(...i);return this.ps.getDocuments(e,a).next((o=>this.indexManager.getMinOffset(e,r).next((c=>{const d=this.Ds(n,o);return this.Cs(n,d,a,c.readTime)?this.ys(e,MT(n,null,"F")):this.vs(e,d,n,c)}))))})))))}ws(e,n,r,s){return B4(n)||s.isEqual(Kt.min())?me.resolve(null):this.ps.getDocuments(e,r).next((i=>{const a=this.Ds(n,i);return this.Cs(n,a,r,s)?me.resolve(null):(mf()<=Lt.DEBUG&&He("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Km(n)),this.vs(e,a,n,are(s,t0)).next((o=>o)))}))}Ds(e,n){let r=new gn(ese(e));return n.forEach(((s,i)=>{A1(e,i)&&(r=r.add(i))})),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return mf()<=Lt.DEBUG&&He("QueryEngine","Using full collection scan to execute query:",Km(n)),this.ps.getDocumentsMatchingQuery(e,n,$i.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next((i=>(n.forEach((a=>{i=i.insert(a.key,a)})),i)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hie="LocalStore";class fie{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Ka(Ot),this.xs=new xu((i=>Kd(i)),K0),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new E8(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function k8(t,e,n,r){return new fie(t,e,n,r)}async function pie(t,e){const n=An(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next((i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((i=>{const a=[],o=[];let c=us();for(const d of s){a.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}for(const d of i){o.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next((d=>({Ls:d,removedBatchIds:a,addedBatchIds:o})))}))}))}function mie(t,e){const n=An(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(o,c,d,h){const p=d.batch,m=p.keys();let y=me.resolve();return m.forEach((x=>{y=y.next((()=>h.getEntry(c,x))).next((_=>{const w=d.docVersions.get(x);bt(w!==null,48541),_.version.compareTo(w)<0&&(p.applyToRemoteDocument(_,d),_.isValidDocument()&&(_.setReadTime(d.commitVersion),h.addEntry(_)))}))})),y.next((()=>o.mutationQueue.removeMutationBatch(c,p)))})(n,r,e,i).next((()=>i.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(o){let c=us();for(let d=0;d<o.mutationResults.length;++d)o.mutationResults[d].transformResults.length>0&&(c=c.add(o.batch.mutations[d].key));return c})(e)))).next((()=>n.localDocuments.getDocuments(r,s)))}))}function gie(t){const e=An(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function yie(t,e){const n=An(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Cd),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}class pM{constructor(){this.activeTargetIds=ose()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class T8{constructor(){this.Mo=new pM,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new pM,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vie{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mM="ConnectivityMonitor";class gM{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){He(mM,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){He(mM,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xv=null;function zT(){return Xv===null?Xv=(function(){return 268435456+Math.round(2147483648*Math.random())})():Xv++,"0x"+Xv.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YN="RestConnection",xie={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class bie{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Pb?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const a=zT(),o=this.zo(e,n.toUriEncodedString());He(YN,`Sending RPC '${e}' ${a}:`,o,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,s,i);const{host:d}=new URL(o),h=yu(d);return this.Jo(e,o,c,r,h).then((p=>(He(YN,`Received RPC '${e}' ${a}: `,p),p)),(p=>{throw hB(YN,`RPC '${e}' ${a} failed with error: `,p,"url: ",o,"request:",r),p}))}Ho(e,n,r,s,i,a){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Wp})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,i)=>e[i]=s)),r&&r.headers.forEach(((s,i)=>e[i]=s))}zo(e,n){const r=xie[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wie{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _s="WebChannelConnection";class _ie extends bie{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const a=zT();return new Promise(((o,c)=>{const d=new oB;d.setWithCredentials(!0),d.listenOnce(lB.COMPLETE,(()=>{try{switch(d.getLastErrorCode()){case Fx.NO_ERROR:const p=d.getResponseJson();He(_s,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(p)),o(p);break;case Fx.TIMEOUT:He(_s,`RPC '${e}' ${a} timed out`),c(new lt(De.DEADLINE_EXCEEDED,"Request time out"));break;case Fx.HTTP_ERROR:const m=d.getStatus();if(He(_s,`RPC '${e}' ${a} failed with status:`,m,"response text:",d.getResponseText()),m>0){let y=d.getResponseJson();Array.isArray(y)&&(y=y[0]);const x=y?.error;if(x&&x.status&&x.message){const _=(function(N){const k=N.toLowerCase().replace(/_/g,"-");return Object.values(De).indexOf(k)>=0?k:De.UNKNOWN})(x.status);c(new lt(_,x.message))}else c(new lt(De.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new lt(De.UNAVAILABLE,"Connection failed."));break;default:mt(9055,{l_:e,streamId:a,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{He(_s,`RPC '${e}' ${a} completed.`)}}));const h=JSON.stringify(s);He(_s,`RPC '${e}' ${a} sending request:`,s),d.send(n,"POST",h,r,15)}))}T_(e,n,r){const s=zT(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=dB(),o=uB(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const h=i.join("");He(_s,`Creating RPC '${e}' stream ${s}: ${h}`,c);const p=a.createWebChannel(h,c);this.I_(p);let m=!1,y=!1;const x=new wie({Yo:w=>{y?He(_s,`Not sending because RPC '${e}' stream ${s} is closed:`,w):(m||(He(_s,`Opening RPC '${e}' stream ${s} transport.`),p.open(),m=!0),He(_s,`RPC '${e}' stream ${s} sending:`,w),p.send(w))},Zo:()=>p.close()}),_=(w,N,k)=>{w.listen(N,(S=>{try{k(S)}catch(O){setTimeout((()=>{throw O}),0)}}))};return _(p,xg.EventType.OPEN,(()=>{y||(He(_s,`RPC '${e}' stream ${s} transport opened.`),x.o_())})),_(p,xg.EventType.CLOSE,(()=>{y||(y=!0,He(_s,`RPC '${e}' stream ${s} transport closed`),x.a_(),this.E_(p))})),_(p,xg.EventType.ERROR,(w=>{y||(y=!0,hB(_s,`RPC '${e}' stream ${s} transport errored. Name:`,w.name,"Message:",w.message),x.a_(new lt(De.UNAVAILABLE,"The operation could not be completed")))})),_(p,xg.EventType.MESSAGE,(w=>{if(!y){const N=w.data[0];bt(!!N,16349);const k=N,S=k?.error||k[0]?.error;if(S){He(_s,`RPC '${e}' stream ${s} received error:`,S);const O=S.status;let R=(function(C){const D=xr[C];if(D!==void 0)return vse(D)})(O),M=S.message;R===void 0&&(R=De.INTERNAL,M="Unknown error status: "+O+" with message "+S.message),y=!0,x.a_(new lt(R,M)),p.close()}else He(_s,`RPC '${e}' stream ${s} received:`,N),x.u_(N)}})),_(o,cB.STAT_EVENT,(w=>{w.stat===ET.PROXY?He(_s,`RPC '${e}' stream ${s} detected buffering proxy`):w.stat===ET.NOPROXY&&He(_s,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{x.__()}),0),x}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eie(){return typeof window<"u"?window:null}function qx(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C8(t){return new _se(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j8{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&He("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yM="PersistentStream";class Nie{constructor(e,n,r,s,i,a,o,c){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new j8(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===De.RESOURCE_EXHAUSTED?(ua(n.toString()),ua("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===De.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===n&&this.G_(r,s)}),(r=>{e((()=>{const s=new lt(De.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return He(yM,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(He(yM,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Sie extends Nie{constructor(e,n,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return bt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,bt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){bt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=Tse(e.writeResults,e.commitTime),r=Ua(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Sse(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>Ob(this.serializer,r)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kie{}class Tie extends kie{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new lt(De.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,a])=>this.connection.Go(e,FT(n,r),s,i,a))).catch((i=>{throw i.name==="FirebaseError"?(i.code===De.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new lt(De.UNKNOWN,i.toString())}))}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,o])=>this.connection.Ho(e,FT(n,r),s,a,o,i))).catch((a=>{throw a.name==="FirebaseError"?(a.code===De.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new lt(De.UNKNOWN,a.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Cie{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ua(n),this.aa=!1):He("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L1="RemoteStore";class jie{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo((a=>{r.enqueueAndForget((async()=>{$1(this)&&(He(L1,"Restarting streams for network reachability change."),await(async function(c){const d=An(c);d.Ea.add(4),await F1(d),d.Ra.set("Unknown"),d.Ea.delete(4),await S2(d)})(this))}))})),this.Ra=new Cie(r,s)}}async function S2(t){if($1(t))for(const e of t.da)await e(!0)}async function F1(t){for(const e of t.da)await e(!1)}function $1(t){return An(t).Ea.size===0}async function P8(t,e,n){if(!Hp(e))throw e;t.Ea.add(1),await F1(t),t.Ra.set("Offline"),n||(n=()=>gie(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{He(L1,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await S2(t)}))}function A8(t,e){return e().catch((n=>P8(t,n,e)))}async function V1(t){const e=An(t),n=su(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Cd;for(;Pie(e);)try{const s=await yie(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,Aie(e,s)}catch(s){await P8(e,s)}I8(e)&&D8(e)}function Pie(t){return $1(t)&&t.Ta.length<10}function Aie(t,e){t.Ta.push(e);const n=su(t);n.O_()&&n.X_&&n.ea(e.mutations)}function I8(t){return $1(t)&&!su(t).x_()&&t.Ta.length>0}function D8(t){su(t).start()}async function Iie(t){su(t).ra()}async function Die(t){const e=su(t);for(const n of t.Ta)e.ea(n.mutations)}async function Rie(t,e,n){const r=t.Ta.shift(),s=v2.from(r,e,n);await A8(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),await V1(t)}async function Oie(t,e){e&&su(t).X_&&await(async function(r,s){if((function(a){return yse(a)&&a!==De.ABORTED})(s.code)){const i=r.Ta.shift();su(r).B_(),await A8(r,(()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s))),await V1(r)}})(t,e),I8(t)&&D8(t)}async function Mie(t,e){const n=An(t);e?(n.Ea.delete(2),await S2(n)):e||(n.Ea.add(2),await F1(n),n.Ra.set("Unknown"))}function su(t){return t.fa||(t.fa=(function(n,r,s){const i=An(n);return i.sa(),new Sie(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:Iie.bind(null,t),r_:Oie.bind(null,t),ta:Die.bind(null,t),na:Rie.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await V1(t)):(await t.fa.stop(),t.Ta.length>0&&(He(L1,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Of,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((a=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const a=Date.now()+r,o=new k2(e,n,a,s,i);return o.start(r),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new lt(De.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}class Lie{constructor(){this.queries=vM(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=An(n),i=s.queries;s.queries=vM(),i.forEach(((a,o)=>{for(const c of o.Sa)c.onError(r)}))})(this,new lt(De.ABORTED,"Firestore shutting down"))}}function vM(){return new xu((t=>YB(t)),KB)}function Fie(t){t.Ca.forEach((e=>{e.next()}))}var xM,bM;(bM=xM||(xM={})).Ma="default",bM.Cache="cache";const $ie="SyncEngine";class Vie{constructor(e,n,r,s,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new xu((o=>YB(o)),KB),this.Iu=new Map,this.Eu=new Set,this.du=new Ka(nt.comparator),this.Au=new Map,this.Ru=new _2,this.Vu={},this.mu=new Map,this.fu=Qd.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}function wM(t,e,n){const r=An(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach(((i,a)=>{const o=a.view.va(e);o.snapshot&&s.push(o.snapshot)})),(function(a,o){const c=An(a);c.onlineState=o;let d=!1;c.queries.forEach(((h,p)=>{for(const m of p.Sa)m.va(o)&&(d=!0)})),d&&Fie(c)})(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Bie(t,e){const n=An(t),r=e.batch.batchId;try{const s=await mie(n.localStore,e);O8(n,r,null),R8(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await T2(n,s)}catch(s){await E1(s)}}async function Uie(t,e,n){const r=An(t);try{const s=await(function(a,o){const c=An(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",(d=>{let h;return c.mutationQueue.lookupMutationBatch(d,o).next((p=>(bt(p!==null,37113),h=p.keys(),c.mutationQueue.removeMutationBatch(d,p)))).next((()=>c.mutationQueue.performConsistencyCheck(d))).next((()=>c.documentOverlayCache.removeOverlaysForBatchId(d,h,o))).next((()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h))).next((()=>c.localDocuments.getDocuments(d,h)))}))})(r.localStore,e);O8(r,e,n),R8(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await T2(r,s)}catch(s){await E1(s)}}function R8(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function O8(t,e,n){const r=An(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}async function T2(t,e,n){const r=An(t),s=[],i=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach(((o,c)=>{a.push(r.pu(c,e,n).then((d=>{if((d||n)&&r.isPrimaryClient){const h=d?!d.fromCache:n?.targetChanges.get(c.targetId)?.current;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(d){s.push(d);const h=N2.As(c.targetId,d);i.push(h)}})))})),await Promise.all(a),r.Pu.H_(s),await(async function(c,d){const h=An(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",(p=>me.forEach(d,(m=>me.forEach(m.Es,(y=>h.persistence.referenceDelegate.addReference(p,m.targetId,y))).next((()=>me.forEach(m.ds,(y=>h.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))))))}catch(p){if(!Hp(p))throw p;He(hie,"Failed to update sequence numbers: "+p)}for(const p of d){const m=p.targetId;if(!p.fromCache){const y=h.Ms.get(m),x=y.snapshotVersion,_=y.withLastLimboFreeSnapshotVersion(x);h.Ms=h.Ms.insert(m,_)}}})(r.localStore,i))}async function zie(t,e){const n=An(t);if(!n.currentUser.isEqual(e)){He($ie,"User change. New user:",e.toKey());const r=await pie(n.localStore,e);n.currentUser=e,(function(i,a){i.mu.forEach((o=>{o.forEach((c=>{c.reject(new lt(De.CANCELLED,a))}))})),i.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await T2(n,r.Ls)}}function Wie(t){const e=An(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Bie.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Uie.bind(null,e),e}class WT{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=C8(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return k8(this.persistence,new S8,e.initialUser,this.serializer)}Cu(e){return new N8(M1.mi,this.serializer)}Du(e){return new T8}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}WT.provider={build:()=>new WT};class Hie extends WT{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await Wie(this.xu.syncEngine),await V1(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return k8(this.persistence,new S8,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new Kse(r,e.asyncQueue,n)}Mu(e,n){const r=new ure(n,this.persistence);return new cre(e.asyncQueue,r)}Cu(e){const n=uie(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?ri.withCacheSize(this.cacheSizeBytes):ri.DEFAULT;return new E2(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,Eie(),qx(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new T8}}class HT{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>wM(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=zie.bind(null,this.syncEngine),await Mie(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Lie})()}createDatastore(e){const n=C8(e.databaseInfo.databaseId),r=(function(i){return new _ie(i)})(e.databaseInfo);return(function(i,a,o,c){return new Tie(i,a,o,c)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,s,i,a,o){return new jie(r,s,i,a,o)})(this.localStore,this.datastore,e.asyncQueue,(n=>wM(this.syncEngine,n,0)),(function(){return gM.v()?new gM:new vie})())}createSyncEngine(e,n){return(function(s,i,a,o,c,d,h){const p=new Vie(s,i,a,o,c,d);return h&&(p.gu=!0),p})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=An(n);He(L1,"RemoteStore shutting down."),r.Ea.add(5),await F1(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}HT.provider={build:()=>new HT};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qie(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _M=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kie="firestore.googleapis.com",EM=!0;class NM{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new lt(De.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Kie,this.ssl=EM}else this.host=e.host,this.ssl=e.ssl??EM;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=g8;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<b8)throw new lt(De.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}sre("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=qie(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new lt(De.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new lt(De.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new lt(De.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Yie{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new NM({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new lt(De.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new lt(De.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new NM(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Yne;switch(r.type){case"firstParty":return new Xne(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new lt(De.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=_M.get(n);r&&(He("ComponentProvider","Removing Datastore"),_M.delete(n),r.terminate())})(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new C2(this.firestore,e,this._query)}}class ko{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new j2(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ko(this.firestore,e,this._key)}toJSON(){return{type:ko._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(H0(n,ko._jsonSchema))return new ko(e,r||null,new nt(Fn.fromString(n.referencePath)))}}ko._jsonSchemaVersion="firestore/documentReference/1.0",ko._jsonSchema={type:_r("string",ko._jsonSchemaVersion),referencePath:_r("string")};class j2 extends C2{constructor(e,n,r){super(e,n,qB(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ko(this.firestore,null,new nt(e))}withConverter(e){return new j2(this.firestore,e,this._path)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SM="AsyncQueue";class kM{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new j8(this,"async_queue_retry"),this._c=()=>{const r=qx();r&&He(SM,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=qx();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=qx();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Of;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Hp(e))throw e;He(SM,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,ua("INTERNAL UNHANDLED ERROR: ",TM(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=k2.createAndSchedule(this,e,n,r,(i=>this.hc(i)));return this.tc.push(s),s}uc(){this.nc&&mt(47125,{Pc:TM(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function TM(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Gie extends Yie{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new kM,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new kM(e),this._firestoreClient=void 0,await e}}}function Qie(t,e,n){n||(n=Pb);const r=x1(t,"firestore");if(r.isInitialized(n)){const s=r.getImmediate({identifier:n}),i=r.getOptions(n);if(eu(i,e))return s;throw new lt(De.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new lt(De.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<b8)throw new lt(De.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&yu(e.host)&&Hj(e.host),r.initialize({options:e,instanceIdentifier:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new dl(hi.fromBase64String(e))}catch(n){throw new lt(De.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new dl(hi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:dl._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(H0(e,dl._jsonSchema))return dl.fromBase64String(e.bytes)}}dl._jsonSchemaVersion="firestore/bytes/1.0",dl._jsonSchema={type:_r("string",dl._jsonSchemaVersion),bytes:_r("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M8{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new lt(De.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ur(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new lt(De.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new lt(De.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ot(this._lat,e._lat)||Ot(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Pd._jsonSchemaVersion}}static fromJSON(e){if(H0(e,Pd._jsonSchema))return new Pd(e.latitude,e.longitude)}}Pd._jsonSchemaVersion="firestore/geoPoint/1.0",Pd._jsonSchema={type:_r("string",Pd._jsonSchemaVersion),latitude:_r("number"),longitude:_r("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ad._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(H0(e,Ad._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Ad(e.vectorValues);throw new lt(De.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ad._jsonSchemaVersion="firestore/vectorValue/1.0",Ad._jsonSchema={type:_r("string",Ad._jsonSchemaVersion),vectorValues:_r("object")};const Xie=new RegExp("[~\\*/\\[\\]]");function Jie(t,e,n){if(e.search(Xie)>=0)throw CM(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t);try{return new M8(...e.split("."))._internalPath}catch{throw CM(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t)}}function CM(t,e,n,r,s){let i=`Function ${e}() called with invalid data`;i+=". ";let a="";return new lt(De.INVALID_ARGUMENT,i+t+a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L8{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ko(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Zie(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(F8("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Zie extends L8{data(){return super.data()}}function F8(t,e){return typeof e=="string"?Jie(t,e):e instanceof M8?e._internalPath:e._delegate._internalPath}class Jv{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Mf extends L8{constructor(e,n,r,s,i,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Kx(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(F8("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new lt(De.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Mf._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Mf._jsonSchemaVersion="firestore/documentSnapshot/1.0",Mf._jsonSchema={type:_r("string",Mf._jsonSchemaVersion),bundleSource:_r("string","DocumentSnapshot"),bundleName:_r("string"),bundle:_r("string")};class Kx extends Mf{data(e={}){return super.data(e)}}class Og{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Jv(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new Kx(this._firestore,this._userDataWriter,r.key,r,new Jv(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new lt(De.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map((o=>{const c=new Kx(s._firestore,s._userDataWriter,o.doc.key,o.doc,new Jv(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);return o.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}}))}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((o=>i||o.type!==3)).map((o=>{const c=new Kx(s._firestore,s._userDataWriter,o.doc.key,o.doc,new Jv(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,h=-1;return o.type!==0&&(d=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),h=a.indexOf(o.doc.key)),{type:eae(o.type),doc:c,oldIndex:d,newIndex:h}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new lt(De.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Og._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ere.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach((i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function eae(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return mt(61501,{type:t})}}Og._jsonSchemaVersion="firestore/querySnapshot/1.0",Og._jsonSchema={type:_r("string",Og._jsonSchemaVersion),bundleSource:_r("string","QuerySnapshot"),bundleName:_r("string"),bundle:_r("string")};class tae{constructor(e){let n;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),n=e.tabManager):(n=sae(void 0),n._initialize(e)),this._onlineComponentProvider=n._onlineComponentProvider,this._offlineComponentProvider=n._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function nae(t){return new tae(t)}class rae{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=HT.provider,this._offlineComponentProvider={build:n=>new Hie(n,e?.cacheSizeBytes,this.forceOwnership)}}}function sae(t){return new rae(t?.forceOwnership)}(function(e,n=!0){(function(s){Wp=s})(dh),zd(new tu("firestore",((r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),o=new Gie(new Gne(r.getProvider("auth-internal")),new Jne(a,r.getProvider("app-check-internal")),(function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new lt(De.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ep(d.options.projectId,h)})(a,s),a);return i={useFetchStreams:n,...i},o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Po(x4,b4,e),Po(x4,b4,"esm2020")})();var jM={};const PM="@firebase/database",AM="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $8="";function iae(t){$8=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aae{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Yr(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Jg(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oae{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Yl(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V8=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new aae(e)}}catch{}return new oae},vd=V8("localStorage"),lae=V8("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lf=new v1("@firebase/database"),cae=(function(){let t=1;return function(){return t++}})(),B8=function(t){const e=vZ(t),n=new pZ;n.update(e);const r=n.digest();return zj.encodeByteArray(r)},G0=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=G0.apply(null,r):typeof r=="object"?e+=Yr(r):e+=r,e+=" "}return e};let Mg=null,IM=!0;const uae=function(t,e){Be(!0,"Can't turn on custom loggers persistently."),Lf.logLevel=Lt.VERBOSE,Mg=Lf.log.bind(Lf)},Ns=function(...t){if(IM===!0&&(IM=!1,Mg===null&&lae.get("logging_enabled")===!0&&uae()),Mg){const e=G0.apply(null,t);Mg(e)}},Q0=function(t){return function(...e){Ns(t,...e)}},qT=function(...t){const e="FIREBASE INTERNAL ERROR: "+G0(...t);Lf.error(e)},Fl=function(...t){const e=`FIREBASE FATAL ERROR: ${G0(...t)}`;throw Lf.error(e),new Error(e)},Oi=function(...t){const e="FIREBASE WARNING: "+G0(...t);Lf.warn(e)},dae=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Oi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},U8=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},hae=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},op="[MIN_NAME]",Xd="[MAX_NAME]",Kp=function(t,e){if(t===e)return 0;if(t===op||e===Xd)return-1;if(e===op||t===Xd)return 1;{const n=DM(t),r=DM(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},fae=function(t,e){return t===e?0:t<e?-1:1},Zm=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Yr(e))},P2=function(t){if(typeof t!="object"||t===null)return Yr(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Yr(e[r]),n+=":",n+=P2(t[e[r]]);return n+="}",n},z8=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let s=0;s<n;s+=e)s+e>n?r.push(t.substring(s,n)):r.push(t.substring(s,s+e));return r};function fi(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const W8=function(t){Be(!U8(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let s,i,a,o,c;t===0?(i=0,a=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(o=Math.min(Math.floor(Math.log(t)/Math.LN2),r),i=o+r,a=Math.round(t*Math.pow(2,n-o)-Math.pow(2,n))):(i=0,a=Math.round(t/Math.pow(2,1-r-n))));const d=[];for(c=n;c;c-=1)d.push(a%2?1:0),a=Math.floor(a/2);for(c=e;c;c-=1)d.push(i%2?1:0),i=Math.floor(i/2);d.push(s?1:0),d.reverse();const h=d.join("");let p="";for(c=0;c<64;c+=8){let m=parseInt(h.substr(c,8),2).toString(16);m.length===1&&(m="0"+m),p=p+m}return p.toLowerCase()},pae=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},mae=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function gae(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const yae=new RegExp("^-?(0*)\\d{1,10}$"),vae=-2147483648,xae=2147483647,DM=function(t){if(yae.test(t)){const e=Number(t);if(e>=vae&&e<=xae)return e}return null},X0=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Oi("Exception was thrown by user callback.",n),e},Math.floor(0))}},bae=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Lg=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wae{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,ii(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.appCheckProvider?.get().then(n=>n.addTokenListener(e))}notifyForInvalidToken(){Oi(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _ae{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Ns("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Oi(e)}}class Yx{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Yx.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A2="5",H8="v",q8="s",K8="r",Y8="f",G8=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Q8="ls",X8="p",KT="ac",J8="websocket",Z8="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e7{constructor(e,n,r,s,i=!1,a="",o=!1,c=!1,d=null){this.secure=n,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=i,this.persistenceKey=a,this.includeNamespaceInQueryParams=o,this.isUsingEmulator=c,this.emulatorOptions=d,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=vd.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&vd.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function Eae(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function t7(t,e,n){Be(typeof e=="string","typeof type must == string"),Be(typeof n=="object","typeof params must == object");let r;if(e===J8)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===Z8)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Eae(t)&&(n.ns=t.namespace);const s=[];return fi(n,(i,a)=>{s.push(i+"="+a)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nae{constructor(){this.counters_={}}incrementCounter(e,n=1){Yl(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return GJ(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GN={},QN={};function I2(t){const e=t.toString();return GN[e]||(GN[e]=new Nae),GN[e]}function Sae(t,e){const n=t.toString();return QN[n]||(QN[n]=e()),QN[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kae{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&X0(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RM="start",Tae="close",Cae="pLPCommand",jae="pRTLPCB",n7="id",r7="pw",s7="ser",Pae="cb",Aae="seg",Iae="ts",Dae="d",Rae="dframe",i7=1870,a7=30,Oae=i7-a7,Mae=25e3,Lae=3e4;class wf{constructor(e,n,r,s,i,a,o){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.transportSessionId=a,this.lastSessionId=o,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Q0(e),this.stats_=I2(n),this.urlFn=c=>(this.appCheckToken&&(c[KT]=this.appCheckToken),t7(n,Z8,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new kae(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Lae)),hae(()=>{if(this.isClosed_)return;this.scriptTagHolder=new D2((...i)=>{const[a,o,c,d,h]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,a===RM)this.id=o,this.password=c;else if(a===Tae)o?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(o,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+a)},(...i)=>{const[a,o]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(a,o)},()=>{this.onClosed_()},this.urlFn);const r={};r[RM]="t",r[s7]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[Pae]=this.scriptTagHolder.uniqueCallbackIdentifier),r[H8]=A2,this.transportSessionId&&(r[q8]=this.transportSessionId),this.lastSessionId&&(r[Q8]=this.lastSessionId),this.applicationId&&(r[X8]=this.applicationId),this.appCheckToken&&(r[KT]=this.appCheckToken),typeof location<"u"&&location.hostname&&G8.test(location.hostname)&&(r[K8]=Y8);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){wf.forceAllow_=!0}static forceDisallow(){wf.forceDisallow_=!0}static isAvailable(){return wf.forceAllow_?!0:!wf.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!pae()&&!mae()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Yr(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=l9(n),s=z8(r,Oae);for(let i=0;i<s.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[Rae]="t",r[n7]=e,r[r7]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Yr(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class D2{constructor(e,n,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=cae(),window[Cae+this.uniqueCallbackIdentifier]=e,window[jae+this.uniqueCallbackIdentifier]=n,this.myIFrame=D2.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const a="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(o){Ns("frame writing exception"),o.stack&&Ns(o.stack),Ns(o)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Ns("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[n7]=this.myID,e[r7]=this.myPW,e[s7]=this.currentSerial;let n=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+a7+r.length<=i7;){const a=this.pendingSegs.shift();r=r+"&"+Aae+s+"="+a.seg+"&"+Iae+s+"="+a.ts+"&"+Dae+s+"="+a.d,s++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(r,Math.floor(Mae)),i=()=>{clearTimeout(s),r()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Ns("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fae=16384,$ae=45e3;let $b=null;typeof MozWebSocket<"u"?$b=MozWebSocket:typeof WebSocket<"u"&&($b=WebSocket);class Ia{constructor(e,n,r,s,i,a,o){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Q0(this.connId),this.stats_=I2(n),this.connURL=Ia.connectionURL_(n,a,o,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,s,i){const a={};return a[H8]=A2,typeof location<"u"&&location.hostname&&G8.test(location.hostname)&&(a[K8]=Y8),n&&(a[q8]=n),r&&(a[Q8]=r),s&&(a[KT]=s),i&&(a[X8]=i),t7(e,J8,a)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,vd.set("previous_websocket_failure",!0);try{let r;oZ(),this.mySock=new $b(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){Ia.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&$b!==null&&!Ia.forceDisallow_}static previouslyFailed(){return vd.isInMemoryStorage||vd.get("previous_websocket_failure")===!0}markConnectionHealthy(){vd.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Jg(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Be(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=Yr(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=z8(n,Fae);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor($ae))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Ia.responsesRequiredToBeHealthy=2;Ia.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0{static get ALL_TRANSPORTS(){return[wf,Ia]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=Ia&&Ia.isAvailable();let r=n&&!Ia.previouslyFailed();if(e.webSocketOnly&&(n||Oi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Ia];else{const s=this.transports_=[];for(const i of u0.ALL_TRANSPORTS)i&&i.isAvailable()&&s.push(i);u0.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}u0.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vae=6e4,Bae=5e3,Uae=10*1024,zae=100*1024,XN="t",OM="d",Wae="s",MM="r",Hae="e",LM="o",FM="a",$M="n",VM="p",qae="h";class Kae{constructor(e,n,r,s,i,a,o,c,d,h){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=i,this.onMessage_=a,this.onReady_=o,this.onDisconnect_=c,this.onKill_=d,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Q0("c:"+this.id+":"),this.transportManager_=new u0(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=Lg(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>zae?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Uae?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(XN in e){const n=e[XN];n===FM?this.upgradeIfSecondaryHealthy_():n===MM?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===LM&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Zm("t",e),r=Zm("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:VM,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:FM,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:$M,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Zm("t",e),r=Zm("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Zm(XN,e);if(OM in e){const r=e[OM];if(n===qae){const s={...r};this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===$M){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===Wae?this.onConnectionShutdown_(r):n===MM?this.onReset_(r):n===Hae?qT("Server Error: "+r):n===LM?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):qT("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),A2!==r&&Oi("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Lg(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Vae))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Lg(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Bae))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:VM,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(vd.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o7{put(e,n,r,s){}merge(e,n,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let l7=class{constructor(e){this.allowedEvents_=e,this.listeners_={},Be(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const s=this.getInitialEvent(e);s&&n.apply(r,s)}off(e,n,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let i=0;i<s.length;i++)if(s[i].callback===n&&(!r||r===s[i].context)){s.splice(i,1);return}}validateEventType_(e){Be(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb extends l7{static getInstance(){return new Vb}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!qj()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return Be(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BM=32,UM=768;let vn=class{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}};function Zt(){return new vn("")}function Ft(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function iu(t){return t.pieces_.length-t.pieceNum_}function Nn(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new vn(t.pieces_,e)}function c7(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function Yae(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function u7(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function d7(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new vn(e,0)}function Dr(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof vn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&n.push(r[s])}return new vn(n,0)}function $t(t){return t.pieceNum_>=t.pieces_.length}function ai(t,e){const n=Ft(t),r=Ft(e);if(n===null)return e;if(n===r)return ai(Nn(t),Nn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function R2(t,e){if(iu(t)!==iu(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Fa(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(iu(t)>iu(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class Gae{constructor(e,n){this.errorPrefix_=n,this.parts_=u7(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=y1(this.parts_[r]);h7(this)}}function Qae(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=y1(e),h7(t)}function Xae(t){const e=t.parts_.pop();t.byteLength_-=y1(e),t.parts_.length>0&&(t.byteLength_-=1)}function h7(t){if(t.byteLength_>UM)throw new Error(t.errorPrefix_+"has a key path longer than "+UM+" bytes ("+t.byteLength_+").");if(t.parts_.length>BM)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+BM+") or object contains a cycle "+rd(t))}function rd(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2 extends l7{static getInstance(){return new O2}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return Be(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eg=1e3,Jae=300*1e3,zM=30*1e3,Zae=1.3,eoe=3e4,toe="server_kill",WM=3;class Tl extends o7{constructor(e,n,r,s,i,a,o,c){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=a,this.appCheckTokenProvider_=o,this.authOverride_=c,this.id=Tl.nextPersistentConnectionId_++,this.log_=Q0("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=eg,this.maxReconnectDelay_=Jae,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");O2.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Vb.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const s=++this.requestNumber_,i={r:s,a:e,b:n};this.log_(Yr(i)),Be(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const n=new Wj,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:a=>{const o=a.d;a.s==="ok"?n.resolve(o):n.reject(o)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,r,s){this.initConnection_();const i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),Be(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Be(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");const o={onComplete:s,hashFn:n,query:e,tag:r};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);const i={p:r},a="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(a,i,o=>{const c=o.d,d=o.s;Tl.warnOnListenWarnings_(c,n),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",o),d!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(d,c))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Yl(e,"w")){const r=qf(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();Oi(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||fZ(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=zM)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=hZ(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{const i=s.s,a=s.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),Be(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,n)}sendUnlisten_(e,n,r,s){this.log_("Unlisten on "+e+" for "+n);const i={p:e},a="n";s&&(i.q=r,i.t=s),this.sendRequest(a,i)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,s){const i={p:n,d:r};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(e,n,r,s){this.putInternal("p",e,n,r,s)}merge(e,n,r,s){this.putInternal("m",e,n,r,s)}putInternal(e,n,r,s,i){this.initConnection_();const a={p:n,d:r};i!==void 0&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:s}),this.outstandingPutCount_++;const o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const i=r.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Yr(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):qT("Unrecognized action received from server: "+Yr(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Be(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=eg,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=eg,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>eoe&&(this.reconnectDelay_=eg),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Zae)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+Tl.nextConnectionId_++,i=this.lastSessionId;let a=!1,o=null;const c=function(){o?o.close():(a=!0,r())},d=function(p){Be(o,"sendRequest call when we're not connected not allowed."),o.sendRequest(p)};this.realtime_={close:c,sendRequest:d};const h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[p,m]=await Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);a?Ns("getToken() completed but was canceled"):(Ns("getToken() completed. Creating connection."),this.authToken_=p&&p.accessToken,this.appCheckToken_=m&&m.token,o=new Kae(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,y=>{Oi(y+" ("+this.repoInfo_.toString()+")"),this.interrupt(toe)},i))}catch(p){this.log_("Failed to get token: "+p),a||(this.repoInfo_.nodeAdmin&&Oi(p),c())}}}interrupt(e){Ns("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Ns("Resuming connection for reason: "+e),delete this.interruptReasons_[e],fT(this.interruptReasons_)&&(this.reconnectDelay_=eg,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(i=>P2(i)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const r=new vn(e).toString();let s;if(this.listens.has(r)){const i=this.listens.get(r);s=i.get(n),i.delete(n),i.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,n){Ns("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=WM&&(this.reconnectDelay_=zM,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Ns("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=WM&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+$8.replace(/\./g,"-")]=1,qj()?e["framework.cordova"]=1:g9()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Vb.getInstance().currentlyOnline();return fT(this.interruptReasons_)&&e}}Tl.nextPersistentConnectionId_=0;Tl.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Mt(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new Mt(op,e),s=new Mt(op,n);return this.compare(r,s)!==0}minPost(){return Mt.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zv;class f7 extends B1{static get __EMPTY_NODE(){return Zv}static set __EMPTY_NODE(e){Zv=e}compare(e,n){return Kp(e.name,n.name)}isDefinedOn(e){throw Bp("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Mt.MIN}maxPost(){return new Mt(Xd,Zv)}makePost(e,n){return Be(typeof e=="string","KeyIndex indexValue must always be a string."),new Mt(e,Zv)}toString(){return".key"}}const Ff=new f7;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(e,n,r,s,i=null){this.isReverse_=s,this.resultGenerator_=i,this.nodeStack_=[];let a=1;for(;!e.isEmpty();)if(e=e,a=n?r(e.key,n):1,s&&(a*=-1),a<0)this.isReverse_?e=e.left:e=e.right;else if(a===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class qr{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??qr.RED,this.left=s??oi.EMPTY_NODE,this.right=i??oi.EMPTY_NODE}copy(e,n,r,s,i){return new qr(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return i<0?s=s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return oi.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,s;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return oi.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,qr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,qr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}qr.RED=!0;qr.BLACK=!1;class noe{copy(e,n,r,s,i){return this}insert(e,n,r){return new qr(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class oi{constructor(e,n=oi.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new oi(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,qr.BLACK,null,null))}remove(e){return new oi(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,qr.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,s=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new ex(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new ex(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new ex(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new ex(this.root_,null,this.comparator_,!0,e)}}oi.EMPTY_NODE=new noe;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function roe(t,e){return Kp(t.name,e.name)}function M2(t,e){return Kp(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let YT;function soe(t){YT=t}const p7=function(t){return typeof t=="number"?"number:"+W8(t):"string:"+t},m7=function(t){if(t.isLeafNode()){const e=t.val();Be(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Yl(e,".sv"),"Priority must be a string or number.")}else Be(t===YT||t.isEmpty(),"priority of unexpected type.");Be(t===YT||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let HM;class zr{static set __childrenNodeConstructor(e){HM=e}static get __childrenNodeConstructor(){return HM}constructor(e,n=zr.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Be(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),m7(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new zr(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:zr.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return $t(e)?this:Ft(e)===".priority"?this.priorityNode_:zr.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:zr.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=Ft(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(Be(r!==".priority"||iu(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,zr.__childrenNodeConstructor.EMPTY_NODE.updateChild(Nn(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+p7(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=W8(this.value_):e+=this.value_,this.lazyHash_=B8(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===zr.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof zr.__childrenNodeConstructor?-1:(Be(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,s=zr.VALUE_TYPE_ORDER.indexOf(n),i=zr.VALUE_TYPE_ORDER.indexOf(r);return Be(s>=0,"Unknown leaf type: "+n),Be(i>=0,"Unknown leaf type: "+r),s===i?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}zr.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let g7,y7;function ioe(t){g7=t}function aoe(t){y7=t}class ooe extends B1{compare(e,n){const r=e.node.getPriority(),s=n.node.getPriority(),i=r.compareTo(s);return i===0?Kp(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Mt.MIN}maxPost(){return new Mt(Xd,new zr("[PRIORITY-POST]",y7))}makePost(e,n){const r=g7(e);return new Mt(n,new zr("[PRIORITY-POST]",r))}toString(){return".priority"}}const rr=new ooe;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const loe=Math.log(2);class coe{constructor(e){const n=i=>parseInt(Math.log(i)/loe,10),r=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Bb=function(t,e,n,r){t.sort(e);const s=function(c,d){const h=d-c;let p,m;if(h===0)return null;if(h===1)return p=t[c],m=n?n(p):p,new qr(m,p.node,qr.BLACK,null,null);{const y=parseInt(h/2,10)+c,x=s(c,y),_=s(y+1,d);return p=t[y],m=n?n(p):p,new qr(m,p.node,qr.BLACK,x,_)}},i=function(c){let d=null,h=null,p=t.length;const m=function(x,_){const w=p-x,N=p;p-=x;const k=s(w+1,N),S=t[w],O=n?n(S):S;y(new qr(O,S.node,_,null,k))},y=function(x){d?(d.left=x,d=x):(h=x,d=x)};for(let x=0;x<c.count;++x){const _=c.nextBitIsOne(),w=Math.pow(2,c.count-(x+1));_?m(w,qr.BLACK):(m(w,qr.BLACK),m(w,qr.RED))}return h},a=new coe(t.length),o=i(a);return new oi(r||e,o)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let JN;const cf={};class xl{static get Default(){return Be(cf&&rr,"ChildrenNode.ts has not been loaded"),JN=JN||new xl({".priority":cf},{".priority":rr}),JN}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=qf(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof oi?n:null}hasIndex(e){return Yl(this.indexSet_,e.toString())}addIndex(e,n){Be(e!==Ff,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const i=n.getIterator(Mt.Wrap);let a=i.getNext();for(;a;)s=s||e.isDefinedOn(a.node),r.push(a),a=i.getNext();let o;s?o=Bb(r,e.getCompare()):o=cf;const c=e.toString(),d={...this.indexSet_};d[c]=e;const h={...this.indexes_};return h[c]=o,new xl(h,d)}addToIndexes(e,n){const r=gb(this.indexes_,(s,i)=>{const a=qf(this.indexSet_,i);if(Be(a,"Missing index implementation for "+i),s===cf)if(a.isDefinedOn(e.node)){const o=[],c=n.getIterator(Mt.Wrap);let d=c.getNext();for(;d;)d.name!==e.name&&o.push(d),d=c.getNext();return o.push(e),Bb(o,a.getCompare())}else return cf;else{const o=n.get(e.name);let c=s;return o&&(c=c.remove(new Mt(e.name,o))),c.insert(e,e.node)}});return new xl(r,this.indexSet_)}removeFromIndexes(e,n){const r=gb(this.indexes_,s=>{if(s===cf)return s;{const i=n.get(e.name);return i?s.remove(new Mt(e.name,i)):s}});return new xl(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tg;class _t{static get EMPTY_NODE(){return tg||(tg=new _t(new oi(M2),null,xl.Default))}constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&m7(this.priorityNode_),this.children_.isEmpty()&&Be(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||tg}updatePriority(e){return this.children_.isEmpty()?this:new _t(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?tg:n}}getChild(e){const n=Ft(e);return n===null?this:this.getImmediateChild(n).getChild(Nn(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(Be(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new Mt(e,n);let s,i;n.isEmpty()?(s=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(r,this.children_));const a=s.isEmpty()?tg:this.priorityNode_;return new _t(s,a,i)}}updateChild(e,n){const r=Ft(e);if(r===null)return n;{Be(Ft(e)!==".priority"||iu(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(Nn(e),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,s=0,i=!0;if(this.forEachChild(rr,(a,o)=>{n[a]=o.val(e),r++,i&&_t.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):i=!1}),!e&&i&&s<2*r){const a=[];for(const o in n)a[o]=n[o];return a}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+p7(this.getPriority().val())+":"),this.forEachChild(rr,(n,r)=>{const s=r.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":B8(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const s=this.resolveIndex_(r);if(s){const i=s.getPredecessorKey(new Mt(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Mt(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Mt(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,Mt.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)<0;)s.getNext(),i=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,Mt.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)>0;)s.getNext(),i=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===J0?-1:0}withIndex(e){if(e===Ff||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new _t(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Ff||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(rr),s=n.getIterator(rr);let i=r.getNext(),a=s.getNext();for(;i&&a;){if(i.name!==a.name||!i.node.equals(a.node))return!1;i=r.getNext(),a=s.getNext()}return i===null&&a===null}else return!1;else return!1}}resolveIndex_(e){return e===Ff?null:this.indexMap_.get(e.toString())}}_t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class uoe extends _t{constructor(){super(new oi(M2),_t.EMPTY_NODE,xl.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return _t.EMPTY_NODE}isEmpty(){return!1}}const J0=new uoe;Object.defineProperties(Mt,{MIN:{value:new Mt(op,_t.EMPTY_NODE)},MAX:{value:new Mt(Xd,J0)}});f7.__EMPTY_NODE=_t.EMPTY_NODE;zr.__childrenNodeConstructor=_t;soe(J0);aoe(J0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const doe=!0;function Ss(t,e=null){if(t===null)return _t.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),Be(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new zr(n,Ss(e))}if(!(t instanceof Array)&&doe){const n=[];let r=!1;if(fi(t,(a,o)=>{if(a.substring(0,1)!=="."){const c=Ss(o);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new Mt(a,c)))}}),n.length===0)return _t.EMPTY_NODE;const i=Bb(n,roe,a=>a.name,M2);if(r){const a=Bb(n,rr.getCompare());return new _t(i,Ss(e),new xl({".priority":a},{".priority":rr}))}else return new _t(i,Ss(e),xl.Default)}else{let n=_t.EMPTY_NODE;return fi(t,(r,s)=>{if(Yl(t,r)&&r.substring(0,1)!=="."){const i=Ss(s);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(r,i))}}),n.updatePriority(Ss(e))}}ioe(Ss);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hoe extends B1{constructor(e){super(),this.indexPath_=e,Be(!$t(e)&&Ft(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),s=this.extractChild(n.node),i=r.compareTo(s);return i===0?Kp(e.name,n.name):i}makePost(e,n){const r=Ss(e),s=_t.EMPTY_NODE.updateChild(this.indexPath_,r);return new Mt(n,s)}maxPost(){const e=_t.EMPTY_NODE.updateChild(this.indexPath_,J0);return new Mt(Xd,e)}toString(){return u7(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class foe extends B1{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Kp(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Mt.MIN}maxPost(){return Mt.MAX}makePost(e,n){const r=Ss(e);return new Mt(n,r)}toString(){return".value"}}const poe=new foe;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v7(t){return{type:"value",snapshotNode:t}}function lp(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function d0(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function h0(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function moe(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{constructor(e){this.index_=e}updateChild(e,n,r,s,i,a){Be(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const o=e.getImmediateChild(n);return o.getChild(s).equals(r.getChild(s))&&o.isEmpty()===r.isEmpty()||(a!=null&&(r.isEmpty()?e.hasChild(n)?a.trackChildChange(d0(n,o)):Be(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?a.trackChildChange(lp(n,r)):a.trackChildChange(h0(n,r,o))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(rr,(s,i)=>{n.hasChild(s)||r.trackChildChange(d0(s,i))}),n.isLeafNode()||n.forEachChild(rr,(s,i)=>{if(e.hasChild(s)){const a=e.getImmediateChild(s);a.equals(i)||r.trackChildChange(h0(s,i,a))}else r.trackChildChange(lp(s,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?_t.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(e){this.indexedFilter_=new L2(e.getIndex()),this.index_=e.getIndex(),this.startPost_=f0.getStartPost_(e),this.endPost_=f0.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,s,i,a){return this.matches(new Mt(n,r))||(r=_t.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,s,i,a)}updateFullNode(e,n,r){n.isLeafNode()&&(n=_t.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(_t.EMPTY_NODE);const i=this;return n.forEachChild(rr,(a,o)=>{i.matches(new Mt(a,o))||(s=s.updateImmediateChild(a,_t.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class goe{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new f0(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,s,i,a){return this.rangedFilter_.matches(new Mt(n,r))||(r=_t.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,s,i,a):this.fullLimitUpdateChild_(e,n,r,i,a)}updateFullNode(e,n,r){let s;if(n.isLeafNode()||n.isEmpty())s=_t.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=_t.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let a=0;for(;i.hasNext()&&a<this.limit_;){const o=i.getNext();if(this.withinDirectionalStart(o))if(this.withinDirectionalEnd(o))s=s.updateImmediateChild(o.name,o.node),a++;else break;else continue}}else{s=n.withIndex(this.index_),s=s.updatePriority(_t.EMPTY_NODE);let i;this.reverse_?i=s.getReverseIterator(this.index_):i=s.getIterator(this.index_);let a=0;for(;i.hasNext();){const o=i.getNext();a<this.limit_&&this.withinDirectionalStart(o)&&this.withinDirectionalEnd(o)?a++:s=s.updateImmediateChild(o.name,_t.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,s,i){let a;if(this.reverse_){const p=this.index_.getCompare();a=(m,y)=>p(y,m)}else a=this.index_.getCompare();const o=e;Be(o.numChildren()===this.limit_,"");const c=new Mt(n,r),d=this.reverse_?o.getFirstChild(this.index_):o.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(o.hasChild(n)){const p=o.getImmediateChild(n);let m=s.getChildAfterChild(this.index_,d,this.reverse_);for(;m!=null&&(m.name===n||o.hasChild(m.name));)m=s.getChildAfterChild(this.index_,m,this.reverse_);const y=m==null?1:a(m,c);if(h&&!r.isEmpty()&&y>=0)return i?.trackChildChange(h0(n,r,p)),o.updateImmediateChild(n,r);{i?.trackChildChange(d0(n,p));const _=o.updateImmediateChild(n,_t.EMPTY_NODE);return m!=null&&this.rangedFilter_.matches(m)?(i?.trackChildChange(lp(m.name,m.node)),_.updateImmediateChild(m.name,m.node)):_}}else return r.isEmpty()?e:h&&a(d,c)>=0?(i!=null&&(i.trackChildChange(d0(d.name,d.node)),i.trackChildChange(lp(n,r))),o.updateImmediateChild(n,r).updateImmediateChild(d.name,_t.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=rr}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Be(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Be(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:op}hasEnd(){return this.endSet_}getIndexEndValue(){return Be(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Be(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Xd}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Be(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===rr}copy(){const e=new F2;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function yoe(t){return t.loadsAllData()?new L2(t.getIndex()):t.hasLimit()?new goe(t):new f0(t)}function qM(t){const e={};if(t.isDefault())return e;let n;if(t.index_===rr?n="$priority":t.index_===poe?n="$value":t.index_===Ff?n="$key":(Be(t.index_ instanceof hoe,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Yr(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=Yr(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Yr(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Yr(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Yr(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function KM(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==rr&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub extends o7{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(Be(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=Q0("p:rest:"),this.listens_={}}listen(e,n,r,s){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const a=Ub.getListenId_(e,r),o={};this.listens_[a]=o;const c=qM(e._queryParams);this.restRequest_(i+".json",c,(d,h)=>{let p=h;if(d===404&&(p=null,d=null),d===null&&this.onDataUpdate_(i,p,!1,r),qf(this.listens_,a)===o){let m;d?d===401?m="permission_denied":m="rest_error:"+d:m="ok",s(m,null)}})}unlisten(e,n){const r=Ub.getListenId_(e,n);delete this.listens_[r]}get(e){const n=qM(e._queryParams),r=e._path.toString(),s=new Wj;return this.restRequest_(r+".json",n,(i,a)=>{let o=a;i===404&&(o=null,i=null),i===null?(this.onDataUpdate_(r,o,!1,null),s.resolve(o)):s.reject(new Error(o))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,i])=>{s&&s.accessToken&&(n.auth=s.accessToken),i&&i.token&&(n.ac=i.token);const a=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Up(n);this.log_("Sending REST request for "+a);const o=new XMLHttpRequest;o.onreadystatechange=()=>{if(r&&o.readyState===4){this.log_("REST Response for "+a+" received. status:",o.status,"response:",o.responseText);let c=null;if(o.status>=200&&o.status<300){try{c=Jg(o.responseText)}catch{Oi("Failed to parse JSON response for "+a+": "+o.responseText)}r(null,c)}else o.status!==401&&o.status!==404&&Oi("Got unsuccessful REST response for "+a+" Status: "+o.status),r(o.status);r=null}},o.open("GET",a,!0),o.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class voe{constructor(){this.rootNode_=_t.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zb(){return{value:null,children:new Map}}function x7(t,e,n){if($t(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=Ft(e);t.children.has(r)||t.children.set(r,zb());const s=t.children.get(r);e=Nn(e),x7(s,e,n)}}function GT(t,e,n){t.value!==null?n(e,t.value):xoe(t,(r,s)=>{const i=new vn(e.toString()+"/"+r);GT(s,i,n)})}function xoe(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class boe{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n={...e};return this.last_&&fi(this.last_,(r,s)=>{n[r]=n[r]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YM=10*1e3,woe=30*1e3,_oe=300*1e3;class Eoe{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new boe(e);const r=YM+(woe-YM)*Math.random();Lg(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;fi(e,(s,i)=>{i>0&&Yl(this.statsToReport_,s)&&(n[s]=i,r=!0)}),r&&this.server_.reportStats(n),Lg(this.reportStats_.bind(this),Math.floor(Math.random()*2*_oe))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $a;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})($a||($a={}));function b7(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function $2(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function V2(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=$a.ACK_USER_WRITE,this.source=b7()}operationForChild(e){if($t(this.path)){if(this.affectedTree.value!=null)return Be(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new vn(e));return new Wb(Zt(),n,this.revert)}}else return Be(Ft(this.path)===e,"operationForChild called for unrelated child."),new Wb(Nn(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{constructor(e,n){this.source=e,this.path=n,this.type=$a.LISTEN_COMPLETE}operationForChild(e){return $t(this.path)?new p0(this.source,Zt()):new p0(this.source,Nn(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=$a.OVERWRITE}operationForChild(e){return $t(this.path)?new Jd(this.source,Zt(),this.snap.getImmediateChild(e)):new Jd(this.source,Nn(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m0{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=$a.MERGE}operationForChild(e){if($t(this.path)){const n=this.children.subtree(new vn(e));return n.isEmpty()?null:n.value?new Jd(this.source,Zt(),n.value):new m0(this.source,Zt(),n)}else return Be(Ft(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new m0(this.source,Nn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if($t(e))return this.isFullyInitialized()&&!this.filtered_;const n=Ft(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Noe{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Soe(t,e,n,r){const s=[],i=[];return e.forEach(a=>{a.type==="child_changed"&&t.index_.indexedValueChanged(a.oldSnap,a.snapshotNode)&&i.push(moe(a.childName,a.snapshotNode))}),ng(t,s,"child_removed",e,r,n),ng(t,s,"child_added",e,r,n),ng(t,s,"child_moved",i,r,n),ng(t,s,"child_changed",e,r,n),ng(t,s,"value",e,r,n),s}function ng(t,e,n,r,s,i){const a=r.filter(o=>o.type===n);a.sort((o,c)=>Toe(t,o,c)),a.forEach(o=>{const c=koe(t,o,i);s.forEach(d=>{d.respondsTo(o.type)&&e.push(d.createEvent(c,t.query_))})})}function koe(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Toe(t,e,n){if(e.childName==null||n.childName==null)throw Bp("Should only compare child_ events.");const r=new Mt(e.childName,e.snapshotNode),s=new Mt(n.childName,n.snapshotNode);return t.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U1(t,e){return{eventCache:t,serverCache:e}}function Fg(t,e,n,r){return U1(new Zd(e,n,r),t.serverCache)}function w7(t,e,n,r){return U1(t.eventCache,new Zd(e,n,r))}function QT(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function eh(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ZN;const Coe=()=>(ZN||(ZN=new oi(fae)),ZN);class Cn{static fromObject(e){let n=new Cn(null);return fi(e,(r,s)=>{n=n.set(new vn(r),s)}),n}constructor(e,n=Coe()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Zt(),value:this.value};if($t(e))return null;{const r=Ft(e),s=this.children.get(r);if(s!==null){const i=s.findRootMostMatchingPathAndValue(Nn(e),n);return i!=null?{path:Dr(new vn(r),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if($t(e))return this;{const n=Ft(e),r=this.children.get(n);return r!==null?r.subtree(Nn(e)):new Cn(null)}}set(e,n){if($t(e))return new Cn(n,this.children);{const r=Ft(e),i=(this.children.get(r)||new Cn(null)).set(Nn(e),n),a=this.children.insert(r,i);return new Cn(this.value,a)}}remove(e){if($t(e))return this.children.isEmpty()?new Cn(null):new Cn(null,this.children);{const n=Ft(e),r=this.children.get(n);if(r){const s=r.remove(Nn(e));let i;return s.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,s),this.value===null&&i.isEmpty()?new Cn(null):new Cn(this.value,i)}else return this}}get(e){if($t(e))return this.value;{const n=Ft(e),r=this.children.get(n);return r?r.get(Nn(e)):null}}setTree(e,n){if($t(e))return n;{const r=Ft(e),i=(this.children.get(r)||new Cn(null)).setTree(Nn(e),n);let a;return i.isEmpty()?a=this.children.remove(r):a=this.children.insert(r,i),new Cn(this.value,a)}}fold(e){return this.fold_(Zt(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((s,i)=>{r[s]=i.fold_(Dr(e,s),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,Zt(),n)}findOnPath_(e,n,r){const s=this.value?r(n,this.value):!1;if(s)return s;if($t(e))return null;{const i=Ft(e),a=this.children.get(i);return a?a.findOnPath_(Nn(e),Dr(n,i),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Zt(),n)}foreachOnPath_(e,n,r){if($t(e))return this;{this.value&&r(n,this.value);const s=Ft(e),i=this.children.get(s);return i?i.foreachOnPath_(Nn(e),Dr(n,s),r):new Cn(null)}}foreach(e){this.foreach_(Zt(),e)}foreach_(e,n){this.children.inorderTraversal((r,s)=>{s.foreach_(Dr(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e){this.writeTree_=e}static empty(){return new za(new Cn(null))}}function $g(t,e,n){if($t(e))return new za(new Cn(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let i=r.value;const a=ai(s,e);return i=i.updateChild(a,n),new za(t.writeTree_.set(s,i))}else{const s=new Cn(n),i=t.writeTree_.setTree(e,s);return new za(i)}}}function GM(t,e,n){let r=t;return fi(n,(s,i)=>{r=$g(r,Dr(e,s),i)}),r}function QM(t,e){if($t(e))return za.empty();{const n=t.writeTree_.setTree(e,new Cn(null));return new za(n)}}function XT(t,e){return hh(t,e)!=null}function hh(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(ai(n.path,e)):null}function XM(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(rr,(r,s)=>{e.push(new Mt(r,s))}):t.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new Mt(r,s.value))}),e}function Gc(t,e){if($t(e))return t;{const n=hh(t,e);return n!=null?new za(new Cn(n)):new za(t.writeTree_.subtree(e))}}function JT(t){return t.writeTree_.isEmpty()}function cp(t,e){return _7(Zt(),t.writeTree_,e)}function _7(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((s,i)=>{s===".priority"?(Be(i.value!==null,"Priority writes must always be leaf nodes"),r=i.value):n=_7(Dr(t,s),i,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Dr(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B2(t,e){return k7(e,t)}function joe(t,e,n,r,s){Be(r>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:s}),s&&(t.visibleWrites=$g(t.visibleWrites,e,n)),t.lastWriteId=r}function Poe(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function Aoe(t,e){const n=t.allWrites.findIndex(o=>o.writeId===e);Be(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let s=r.visible,i=!1,a=t.allWrites.length-1;for(;s&&a>=0;){const o=t.allWrites[a];o.visible&&(a>=n&&Ioe(o,r.path)?s=!1:Fa(r.path,o.path)&&(i=!0)),a--}if(s){if(i)return Doe(t),!0;if(r.snap)t.visibleWrites=QM(t.visibleWrites,r.path);else{const o=r.children;fi(o,c=>{t.visibleWrites=QM(t.visibleWrites,Dr(r.path,c))})}return!0}else return!1}function Ioe(t,e){if(t.snap)return Fa(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Fa(Dr(t.path,n),e))return!0;return!1}function Doe(t){t.visibleWrites=E7(t.allWrites,Roe,Zt()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function Roe(t){return t.visible}function E7(t,e,n){let r=za.empty();for(let s=0;s<t.length;++s){const i=t[s];if(e(i)){const a=i.path;let o;if(i.snap)Fa(n,a)?(o=ai(n,a),r=$g(r,o,i.snap)):Fa(a,n)&&(o=ai(a,n),r=$g(r,Zt(),i.snap.getChild(o)));else if(i.children){if(Fa(n,a))o=ai(n,a),r=GM(r,o,i.children);else if(Fa(a,n))if(o=ai(a,n),$t(o))r=GM(r,Zt(),i.children);else{const c=qf(i.children,Ft(o));if(c){const d=c.getChild(Nn(o));r=$g(r,Zt(),d)}}}else throw Bp("WriteRecord should have .snap or .children")}}return r}function N7(t,e,n,r,s){if(!r&&!s){const i=hh(t.visibleWrites,e);if(i!=null)return i;{const a=Gc(t.visibleWrites,e);if(JT(a))return n;if(n==null&&!XT(a,Zt()))return null;{const o=n||_t.EMPTY_NODE;return cp(a,o)}}}else{const i=Gc(t.visibleWrites,e);if(!s&&JT(i))return n;if(!s&&n==null&&!XT(i,Zt()))return null;{const a=function(d){return(d.visible||s)&&(!r||!~r.indexOf(d.writeId))&&(Fa(d.path,e)||Fa(e,d.path))},o=E7(t.allWrites,a,e),c=n||_t.EMPTY_NODE;return cp(o,c)}}}function Ooe(t,e,n){let r=_t.EMPTY_NODE;const s=hh(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(rr,(i,a)=>{r=r.updateImmediateChild(i,a)}),r;if(n){const i=Gc(t.visibleWrites,e);return n.forEachChild(rr,(a,o)=>{const c=cp(Gc(i,new vn(a)),o);r=r.updateImmediateChild(a,c)}),XM(i).forEach(a=>{r=r.updateImmediateChild(a.name,a.node)}),r}else{const i=Gc(t.visibleWrites,e);return XM(i).forEach(a=>{r=r.updateImmediateChild(a.name,a.node)}),r}}function Moe(t,e,n,r,s){Be(r||s,"Either existingEventSnap or existingServerSnap must exist");const i=Dr(e,n);if(XT(t.visibleWrites,i))return null;{const a=Gc(t.visibleWrites,i);return JT(a)?s.getChild(n):cp(a,s.getChild(n))}}function Loe(t,e,n,r){const s=Dr(e,n),i=hh(t.visibleWrites,s);if(i!=null)return i;if(r.isCompleteForChild(n)){const a=Gc(t.visibleWrites,s);return cp(a,r.getNode().getImmediateChild(n))}else return null}function Foe(t,e){return hh(t.visibleWrites,e)}function $oe(t,e,n,r,s,i,a){let o;const c=Gc(t.visibleWrites,e),d=hh(c,Zt());if(d!=null)o=d;else if(n!=null)o=cp(c,n);else return[];if(o=o.withIndex(a),!o.isEmpty()&&!o.isLeafNode()){const h=[],p=a.getCompare(),m=i?o.getReverseIteratorFrom(r,a):o.getIteratorFrom(r,a);let y=m.getNext();for(;y&&h.length<s;)p(y,r)!==0&&h.push(y),y=m.getNext();return h}else return[]}function Voe(){return{visibleWrites:za.empty(),allWrites:[],lastWriteId:-1}}function Hb(t,e,n,r){return N7(t.writeTree,t.treePath,e,n,r)}function U2(t,e){return Ooe(t.writeTree,t.treePath,e)}function JM(t,e,n,r){return Moe(t.writeTree,t.treePath,e,n,r)}function qb(t,e){return Foe(t.writeTree,Dr(t.treePath,e))}function Boe(t,e,n,r,s,i){return $oe(t.writeTree,t.treePath,e,n,r,s,i)}function z2(t,e,n){return Loe(t.writeTree,t.treePath,e,n)}function S7(t,e){return k7(Dr(t.treePath,e),t.writeTree)}function k7(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uoe{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;Be(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),Be(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const i=s.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(r,h0(r,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(r,d0(r,s.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(r,lp(r,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(r,h0(r,e.snapshotNode,s.oldSnap));else throw Bp("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zoe{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const T7=new zoe;class W2{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Zd(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return z2(this.writes_,e,r)}}getChildAfterChild(e,n,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:eh(this.viewCache_),i=Boe(this.writes_,s,n,1,r,e);return i.length===0?null:i[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Woe(t){return{filter:t}}function Hoe(t,e){Be(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),Be(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function qoe(t,e,n,r,s){const i=new Uoe;let a,o;if(n.type===$a.OVERWRITE){const d=n;d.source.fromUser?a=ZT(t,e,d.path,d.snap,r,s,i):(Be(d.source.fromServer,"Unknown source."),o=d.source.tagged||e.serverCache.isFiltered()&&!$t(d.path),a=Kb(t,e,d.path,d.snap,r,s,o,i))}else if(n.type===$a.MERGE){const d=n;d.source.fromUser?a=Yoe(t,e,d.path,d.children,r,s,i):(Be(d.source.fromServer,"Unknown source."),o=d.source.tagged||e.serverCache.isFiltered(),a=eC(t,e,d.path,d.children,r,s,o,i))}else if(n.type===$a.ACK_USER_WRITE){const d=n;d.revert?a=Xoe(t,e,d.path,r,s,i):a=Goe(t,e,d.path,d.affectedTree,r,s,i)}else if(n.type===$a.LISTEN_COMPLETE)a=Qoe(t,e,n.path,r,i);else throw Bp("Unknown operation type: "+n.type);const c=i.getChanges();return Koe(e,a,c),{viewCache:a,changes:c}}function Koe(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=QT(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(v7(QT(e)))}}function C7(t,e,n,r,s,i){const a=e.eventCache;if(qb(r,n)!=null)return e;{let o,c;if($t(n))if(Be(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const d=eh(e),h=d instanceof _t?d:_t.EMPTY_NODE,p=U2(r,h);o=t.filter.updateFullNode(e.eventCache.getNode(),p,i)}else{const d=Hb(r,eh(e));o=t.filter.updateFullNode(e.eventCache.getNode(),d,i)}else{const d=Ft(n);if(d===".priority"){Be(iu(n)===1,"Can't have a priority with additional path components");const h=a.getNode();c=e.serverCache.getNode();const p=JM(r,n,h,c);p!=null?o=t.filter.updatePriority(h,p):o=a.getNode()}else{const h=Nn(n);let p;if(a.isCompleteForChild(d)){c=e.serverCache.getNode();const m=JM(r,n,a.getNode(),c);m!=null?p=a.getNode().getImmediateChild(d).updateChild(h,m):p=a.getNode().getImmediateChild(d)}else p=z2(r,d,e.serverCache);p!=null?o=t.filter.updateChild(a.getNode(),d,p,h,s,i):o=a.getNode()}}return Fg(e,o,a.isFullyInitialized()||$t(n),t.filter.filtersNodes())}}function Kb(t,e,n,r,s,i,a,o){const c=e.serverCache;let d;const h=a?t.filter:t.filter.getIndexedFilter();if($t(n))d=h.updateFullNode(c.getNode(),r,null);else if(h.filtersNodes()&&!c.isFiltered()){const y=c.getNode().updateChild(n,r);d=h.updateFullNode(c.getNode(),y,null)}else{const y=Ft(n);if(!c.isCompleteForPath(n)&&iu(n)>1)return e;const x=Nn(n),w=c.getNode().getImmediateChild(y).updateChild(x,r);y===".priority"?d=h.updatePriority(c.getNode(),w):d=h.updateChild(c.getNode(),y,w,x,T7,null)}const p=w7(e,d,c.isFullyInitialized()||$t(n),h.filtersNodes()),m=new W2(s,p,i);return C7(t,p,n,s,m,o)}function ZT(t,e,n,r,s,i,a){const o=e.eventCache;let c,d;const h=new W2(s,e,i);if($t(n))d=t.filter.updateFullNode(e.eventCache.getNode(),r,a),c=Fg(e,d,!0,t.filter.filtersNodes());else{const p=Ft(n);if(p===".priority")d=t.filter.updatePriority(e.eventCache.getNode(),r),c=Fg(e,d,o.isFullyInitialized(),o.isFiltered());else{const m=Nn(n),y=o.getNode().getImmediateChild(p);let x;if($t(m))x=r;else{const _=h.getCompleteChild(p);_!=null?c7(m)===".priority"&&_.getChild(d7(m)).isEmpty()?x=_:x=_.updateChild(m,r):x=_t.EMPTY_NODE}if(y.equals(x))c=e;else{const _=t.filter.updateChild(o.getNode(),p,x,m,h,a);c=Fg(e,_,o.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function ZM(t,e){return t.eventCache.isCompleteForChild(e)}function Yoe(t,e,n,r,s,i,a){let o=e;return r.foreach((c,d)=>{const h=Dr(n,c);ZM(e,Ft(h))&&(o=ZT(t,o,h,d,s,i,a))}),r.foreach((c,d)=>{const h=Dr(n,c);ZM(e,Ft(h))||(o=ZT(t,o,h,d,s,i,a))}),o}function eL(t,e,n){return n.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function eC(t,e,n,r,s,i,a,o){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,d;$t(n)?d=r:d=new Cn(null).setTree(n,r);const h=e.serverCache.getNode();return d.children.inorderTraversal((p,m)=>{if(h.hasChild(p)){const y=e.serverCache.getNode().getImmediateChild(p),x=eL(t,y,m);c=Kb(t,c,new vn(p),x,s,i,a,o)}}),d.children.inorderTraversal((p,m)=>{const y=!e.serverCache.isCompleteForChild(p)&&m.value===null;if(!h.hasChild(p)&&!y){const x=e.serverCache.getNode().getImmediateChild(p),_=eL(t,x,m);c=Kb(t,c,new vn(p),_,s,i,a,o)}}),c}function Goe(t,e,n,r,s,i,a){if(qb(s,n)!=null)return e;const o=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if($t(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Kb(t,e,n,c.getNode().getChild(n),s,i,o,a);if($t(n)){let d=new Cn(null);return c.getNode().forEachChild(Ff,(h,p)=>{d=d.set(new vn(h),p)}),eC(t,e,n,d,s,i,o,a)}else return e}else{let d=new Cn(null);return r.foreach((h,p)=>{const m=Dr(n,h);c.isCompleteForPath(m)&&(d=d.set(h,c.getNode().getChild(m)))}),eC(t,e,n,d,s,i,o,a)}}function Qoe(t,e,n,r,s){const i=e.serverCache,a=w7(e,i.getNode(),i.isFullyInitialized()||$t(n),i.isFiltered());return C7(t,a,n,r,T7,s)}function Xoe(t,e,n,r,s,i){let a;if(qb(r,n)!=null)return e;{const o=new W2(r,e,s),c=e.eventCache.getNode();let d;if($t(n)||Ft(n)===".priority"){let h;if(e.serverCache.isFullyInitialized())h=Hb(r,eh(e));else{const p=e.serverCache.getNode();Be(p instanceof _t,"serverChildren would be complete if leaf node"),h=U2(r,p)}h=h,d=t.filter.updateFullNode(c,h,i)}else{const h=Ft(n);let p=z2(r,h,e.serverCache);p==null&&e.serverCache.isCompleteForChild(h)&&(p=c.getImmediateChild(h)),p!=null?d=t.filter.updateChild(c,h,p,Nn(n),o,i):e.eventCache.getNode().hasChild(h)?d=t.filter.updateChild(c,h,_t.EMPTY_NODE,Nn(n),o,i):d=c,d.isEmpty()&&e.serverCache.isFullyInitialized()&&(a=Hb(r,eh(e)),a.isLeafNode()&&(d=t.filter.updateFullNode(d,a,i)))}return a=e.serverCache.isFullyInitialized()||qb(r,Zt())!=null,Fg(e,d,a,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Joe{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,s=new L2(r.getIndex()),i=yoe(r);this.processor_=Woe(i);const a=n.serverCache,o=n.eventCache,c=s.updateFullNode(_t.EMPTY_NODE,a.getNode(),null),d=i.updateFullNode(_t.EMPTY_NODE,o.getNode(),null),h=new Zd(c,a.isFullyInitialized(),s.filtersNodes()),p=new Zd(d,o.isFullyInitialized(),i.filtersNodes());this.viewCache_=U1(p,h),this.eventGenerator_=new Noe(this.query_)}get query(){return this.query_}}function Zoe(t){return t.viewCache_.serverCache.getNode()}function ele(t,e){const n=eh(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!$t(e)&&!n.getImmediateChild(Ft(e)).isEmpty())?n.getChild(e):null}function tL(t){return t.eventRegistrations_.length===0}function tle(t,e){t.eventRegistrations_.push(e)}function nL(t,e,n){const r=[];if(n){Be(e==null,"A cancel should cancel all event registrations.");const s=t.query._path;t.eventRegistrations_.forEach(i=>{const a=i.createCancelEvent(n,s);a&&r.push(a)})}if(e){let s=[];for(let i=0;i<t.eventRegistrations_.length;++i){const a=t.eventRegistrations_[i];if(!a.matches(e))s.push(a);else if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function rL(t,e,n,r){e.type===$a.MERGE&&e.source.queryId!==null&&(Be(eh(t.viewCache_),"We should always have a full cache before handling merges"),Be(QT(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,i=qoe(t.processor_,s,e,n,r);return Hoe(t.processor_,i.viewCache),Be(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,j7(t,i.changes,i.viewCache.eventCache.getNode(),null)}function nle(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(rr,(i,a)=>{r.push(lp(i,a))}),n.isFullyInitialized()&&r.push(v7(n.getNode())),j7(t,r,n.getNode(),e)}function j7(t,e,n,r){const s=r?[r]:t.eventRegistrations_;return Soe(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yb;class rle{constructor(){this.views=new Map}}function sle(t){Be(!Yb,"__referenceConstructor has already been defined"),Yb=t}function ile(){return Be(Yb,"Reference.ts has not been loaded"),Yb}function ale(t){return t.views.size===0}function H2(t,e,n,r){const s=e.source.queryId;if(s!==null){const i=t.views.get(s);return Be(i!=null,"SyncTree gave us an op for an invalid query."),rL(i,e,n,r)}else{let i=[];for(const a of t.views.values())i=i.concat(rL(a,e,n,r));return i}}function ole(t,e,n,r,s){const i=e._queryIdentifier,a=t.views.get(i);if(!a){let o=Hb(n,s?r:null),c=!1;o?c=!0:r instanceof _t?(o=U2(n,r),c=!1):(o=_t.EMPTY_NODE,c=!1);const d=U1(new Zd(o,c,!1),new Zd(r,s,!1));return new Joe(e,d)}return a}function lle(t,e,n,r,s,i){const a=ole(t,e,r,s,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,a),tle(a,n),nle(a,n)}function cle(t,e,n,r){const s=e._queryIdentifier,i=[];let a=[];const o=au(t);if(s==="default")for(const[c,d]of t.views.entries())a=a.concat(nL(d,n,r)),tL(d)&&(t.views.delete(c),d.query._queryParams.loadsAllData()||i.push(d.query));else{const c=t.views.get(s);c&&(a=a.concat(nL(c,n,r)),tL(c)&&(t.views.delete(s),c.query._queryParams.loadsAllData()||i.push(c.query)))}return o&&!au(t)&&i.push(new(ile())(e._repo,e._path)),{removed:i,events:a}}function P7(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function $f(t,e){let n=null;for(const r of t.views.values())n=n||ele(r,e);return n}function A7(t,e){if(e._queryParams.loadsAllData())return z1(t);{const r=e._queryIdentifier;return t.views.get(r)}}function I7(t,e){return A7(t,e)!=null}function au(t){return z1(t)!=null}function z1(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gb;function ule(t){Be(!Gb,"__referenceConstructor has already been defined"),Gb=t}function dle(){return Be(Gb,"Reference.ts has not been loaded"),Gb}let hle=1;class sL{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Cn(null),this.pendingWriteTree_=Voe(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function fle(t,e,n,r,s){return joe(t.pendingWriteTree_,e,n,r,s),s?Z0(t,new Jd(b7(),e,n)):[]}function _f(t,e,n=!1){const r=Poe(t.pendingWriteTree_,e);if(Aoe(t.pendingWriteTree_,e)){let i=new Cn(null);return r.snap!=null?i=i.set(Zt(),!0):fi(r.children,a=>{i=i.set(new vn(a),!0)}),Z0(t,new Wb(r.path,i,n))}else return[]}function W1(t,e,n){return Z0(t,new Jd($2(),e,n))}function ple(t,e,n){const r=Cn.fromObject(n);return Z0(t,new m0($2(),e,r))}function mle(t,e){return Z0(t,new p0($2(),e))}function gle(t,e,n){const r=q2(t,n);if(r){const s=K2(r),i=s.path,a=s.queryId,o=ai(i,e),c=new p0(V2(a),o);return Y2(t,i,c)}else return[]}function tC(t,e,n,r,s=!1){const i=e._path,a=t.syncPointTree_.get(i);let o=[];if(a&&(e._queryIdentifier==="default"||I7(a,e))){const c=cle(a,e,n,r);ale(a)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const d=c.removed;if(o=c.events,!s){const h=d.findIndex(m=>m._queryParams.loadsAllData())!==-1,p=t.syncPointTree_.findOnPath(i,(m,y)=>au(y));if(h&&!p){const m=t.syncPointTree_.subtree(i);if(!m.isEmpty()){const y=xle(m);for(let x=0;x<y.length;++x){const _=y[x],w=_.query,N=M7(t,_);t.listenProvider_.startListening(Vg(w),Qb(t,w),N.hashFn,N.onComplete)}}}!p&&d.length>0&&!r&&(h?t.listenProvider_.stopListening(Vg(e),null):d.forEach(m=>{const y=t.queryToTagMap.get(H1(m));t.listenProvider_.stopListening(Vg(m),y)}))}ble(t,d)}return o}function yle(t,e,n,r){const s=q2(t,r);if(s!=null){const i=K2(s),a=i.path,o=i.queryId,c=ai(a,e),d=new Jd(V2(o),c,n);return Y2(t,a,d)}else return[]}function vle(t,e,n,r){const s=q2(t,r);if(s){const i=K2(s),a=i.path,o=i.queryId,c=ai(a,e),d=Cn.fromObject(n),h=new m0(V2(o),c,d);return Y2(t,a,h)}else return[]}function iL(t,e,n,r=!1){const s=e._path;let i=null,a=!1;t.syncPointTree_.foreachOnPath(s,(m,y)=>{const x=ai(m,s);i=i||$f(y,x),a=a||au(y)});let o=t.syncPointTree_.get(s);o?(a=a||au(o),i=i||$f(o,Zt())):(o=new rle,t.syncPointTree_=t.syncPointTree_.set(s,o));let c;i!=null?c=!0:(c=!1,i=_t.EMPTY_NODE,t.syncPointTree_.subtree(s).foreachChild((y,x)=>{const _=$f(x,Zt());_&&(i=i.updateImmediateChild(y,_))}));const d=I7(o,e);if(!d&&!e._queryParams.loadsAllData()){const m=H1(e);Be(!t.queryToTagMap.has(m),"View does not exist, but we have a tag");const y=wle();t.queryToTagMap.set(m,y),t.tagToQueryMap.set(y,m)}const h=B2(t.pendingWriteTree_,s);let p=lle(o,e,n,h,i,c);if(!d&&!a&&!r){const m=A7(o,e);p=p.concat(_le(t,e,m))}return p}function D7(t,e,n){const s=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(a,o)=>{const c=ai(a,e),d=$f(o,c);if(d)return d});return N7(s,e,i,n,!0)}function Z0(t,e){return R7(e,t.syncPointTree_,null,B2(t.pendingWriteTree_,Zt()))}function R7(t,e,n,r){if($t(t.path))return O7(t,e,n,r);{const s=e.get(Zt());n==null&&s!=null&&(n=$f(s,Zt()));let i=[];const a=Ft(t.path),o=t.operationForChild(a),c=e.children.get(a);if(c&&o){const d=n?n.getImmediateChild(a):null,h=S7(r,a);i=i.concat(R7(o,c,d,h))}return s&&(i=i.concat(H2(s,t,r,n))),i}}function O7(t,e,n,r){const s=e.get(Zt());n==null&&s!=null&&(n=$f(s,Zt()));let i=[];return e.children.inorderTraversal((a,o)=>{const c=n?n.getImmediateChild(a):null,d=S7(r,a),h=t.operationForChild(a);h&&(i=i.concat(O7(h,o,c,d)))}),s&&(i=i.concat(H2(s,t,r,n))),i}function M7(t,e){const n=e.query,r=Qb(t,n);return{hashFn:()=>(Zoe(e)||_t.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return r?gle(t,n._path,r):mle(t,n._path);{const i=gae(s,n);return tC(t,n,null,i)}}}}function Qb(t,e){const n=H1(e);return t.queryToTagMap.get(n)}function H1(t){return t._path.toString()+"$"+t._queryIdentifier}function q2(t,e){return t.tagToQueryMap.get(e)}function K2(t){const e=t.indexOf("$");return Be(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new vn(t.substr(0,e))}}function Y2(t,e,n){const r=t.syncPointTree_.get(e);Be(r,"Missing sync point for query tag that we're tracking");const s=B2(t.pendingWriteTree_,e);return H2(r,n,s,null)}function xle(t){return t.fold((e,n,r)=>{if(n&&au(n))return[z1(n)];{let s=[];return n&&(s=P7(n)),fi(r,(i,a)=>{s=s.concat(a)}),s}})}function Vg(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(dle())(t._repo,t._path):t}function ble(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const s=H1(r),i=t.queryToTagMap.get(s);t.queryToTagMap.delete(s),t.tagToQueryMap.delete(i)}}}function wle(){return hle++}function _le(t,e,n){const r=e._path,s=Qb(t,e),i=M7(t,n),a=t.listenProvider_.startListening(Vg(e),s,i.hashFn,i.onComplete),o=t.syncPointTree_.subtree(r);if(s)Be(!au(o.value),"If we're adding a query, it shouldn't be shadowed");else{const c=o.fold((d,h,p)=>{if(!$t(d)&&h&&au(h))return[z1(h).query];{let m=[];return h&&(m=m.concat(P7(h).map(y=>y.query))),fi(p,(y,x)=>{m=m.concat(x)}),m}});for(let d=0;d<c.length;++d){const h=c[d];t.listenProvider_.stopListening(Vg(h),Qb(t,h))}}return a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new G2(n)}node(){return this.node_}}class Q2{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Dr(this.path_,e);return new Q2(this.syncTree_,n)}node(){return D7(this.syncTree_,this.path_)}}const Ele=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},aL=function(t,e,n){if(!t||typeof t!="object")return t;if(Be(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return Nle(t[".sv"],e,n);if(typeof t[".sv"]=="object")return Sle(t[".sv"],e);Be(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},Nle=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Be(!1,"Unexpected server value: "+t)}},Sle=function(t,e,n){t.hasOwnProperty("increment")||Be(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&Be(!1,"Unexpected increment value: "+r);const s=e.node();if(Be(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const a=s.getValue();return typeof a!="number"?r:a+r},kle=function(t,e,n,r){return X2(e,new Q2(n,t),r)},Tle=function(t,e,n){return X2(t,new G2(e),n)};function X2(t,e,n){const r=t.getPriority().val(),s=aL(r,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const a=t,o=aL(a.getValue(),e,n);return o!==a.getValue()||s!==a.getPriority().val()?new zr(o,Ss(s)):t}else{const a=t;return i=a,s!==a.getPriority().val()&&(i=i.updatePriority(new zr(s))),a.forEachChild(rr,(o,c)=>{const d=X2(c,e.getImmediateChild(o),n);d!==c&&(i=i.updateImmediateChild(o,d))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function Z2(t,e){let n=e instanceof vn?e:new vn(e),r=t,s=Ft(n);for(;s!==null;){const i=qf(r.node.children,s)||{children:{},childCount:0};r=new J2(s,r,i),n=Nn(n),s=Ft(n)}return r}function Yp(t){return t.node.value}function L7(t,e){t.node.value=e,nC(t)}function F7(t){return t.node.childCount>0}function Cle(t){return Yp(t)===void 0&&!F7(t)}function q1(t,e){fi(t.node.children,(n,r)=>{e(new J2(n,t,r))})}function $7(t,e,n,r){n&&e(t),q1(t,s=>{$7(s,e,!0)})}function jle(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function ey(t){return new vn(t.parent===null?t.name:ey(t.parent)+"/"+t.name)}function nC(t){t.parent!==null&&Ple(t.parent,t.name,t)}function Ple(t,e,n){const r=Cle(n),s=Yl(t.node.children,e);r&&s?(delete t.node.children[e],t.node.childCount--,nC(t)):!r&&!s&&(t.node.children[e]=n.node,t.node.childCount++,nC(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ale=/[\[\].#$\/\u0000-\u001F\u007F]/,Ile=/[\[\].#$\u0000-\u001F\u007F]/,eS=10*1024*1024,V7=function(t){return typeof t=="string"&&t.length!==0&&!Ale.test(t)},B7=function(t){return typeof t=="string"&&t.length!==0&&!Ile.test(t)},Dle=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),B7(t)},U7=function(t,e,n){const r=n instanceof vn?new Gae(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+rd(r));if(typeof e=="function")throw new Error(t+"contains a function "+rd(r)+" with contents = "+e.toString());if(U8(e))throw new Error(t+"contains "+e.toString()+" "+rd(r));if(typeof e=="string"&&e.length>eS/3&&y1(e)>eS)throw new Error(t+"contains a string greater than "+eS+" utf8 bytes "+rd(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,i=!1;if(fi(e,(a,o)=>{if(a===".value")s=!0;else if(a!==".priority"&&a!==".sv"&&(i=!0,!V7(a)))throw new Error(t+" contains an invalid key ("+a+") "+rd(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Qae(r,a),U7(t,o,r),Xae(r)}),s&&i)throw new Error(t+' contains ".value" child '+rd(r)+" in addition to actual children.")}},z7=function(t,e,n,r){if(!B7(n))throw new Error(w9(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},Rle=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),z7(t,e,n)},Ole=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!V7(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!Dle(n))throw new Error(w9(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mle{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function W7(t,e){let n=null;for(let r=0;r<e.length;r++){const s=e[r],i=s.getPath();n!==null&&!R2(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(s)}n&&t.eventLists_.push(n)}function H7(t,e,n){W7(t,n),q7(t,r=>R2(r,e))}function fh(t,e,n){W7(t,n),q7(t,r=>Fa(r,e)||Fa(e,r))}function q7(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const s=t.eventLists_[r];if(s){const i=s.path;e(i)?(Lle(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function Lle(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Mg&&Ns("event: "+n.toString()),X0(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fle="repo_interrupt",$le=25;class Vle{constructor(e,n,r,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Mle,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=zb(),this.transactionQueueTree_=new J2,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Ble(t,e,n){if(t.stats_=I2(t.repoInfo_),t.forceRestClient_||bae())t.server_=new Ub(t.repoInfo_,(r,s,i,a)=>{oL(t,r,s,i,a)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>lL(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Yr(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Tl(t.repoInfo_,e,(r,s,i,a)=>{oL(t,r,s,i,a)},r=>{lL(t,r)},r=>{zle(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=Sae(t.repoInfo_,()=>new Eoe(t.stats_,t.server_)),t.infoData_=new voe,t.infoSyncTree_=new sL({startListening:(r,s,i,a)=>{let o=[];const c=t.infoData_.getNode(r._path);return c.isEmpty()||(o=W1(t.infoSyncTree_,r._path,c),setTimeout(()=>{a("ok")},0)),o},stopListening:()=>{}}),eP(t,"connected",!1),t.serverSyncTree_=new sL({startListening:(r,s,i,a)=>(t.server_.listen(r,i,s,(o,c)=>{const d=a(o,c);fh(t.eventQueue_,r._path,d)}),[]),stopListening:(r,s)=>{t.server_.unlisten(r,s)}})}function Ule(t){const n=t.infoData_.getNode(new vn(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function K7(t){return Ele({timestamp:Ule(t)})}function oL(t,e,n,r,s){t.dataUpdateCount++;const i=new vn(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let a=[];if(s)if(r){const c=gb(n,d=>Ss(d));a=vle(t.serverSyncTree_,i,c,s)}else{const c=Ss(n);a=yle(t.serverSyncTree_,i,c,s)}else if(r){const c=gb(n,d=>Ss(d));a=ple(t.serverSyncTree_,i,c)}else{const c=Ss(n);a=W1(t.serverSyncTree_,i,c)}let o=i;a.length>0&&(o=nP(t,i)),fh(t.eventQueue_,o,a)}function lL(t,e){eP(t,"connected",e),e===!1&&Hle(t)}function zle(t,e){fi(e,(n,r)=>{eP(t,n,r)})}function eP(t,e,n){const r=new vn("/.info/"+e),s=Ss(n);t.infoData_.updateSnapshot(r,s);const i=W1(t.infoSyncTree_,r,s);fh(t.eventQueue_,r,i)}function Wle(t){return t.nextWriteId_++}function Hle(t){Y7(t,"onDisconnectEvents");const e=K7(t),n=zb();GT(t.onDisconnect_,Zt(),(s,i)=>{const a=kle(s,i,t.serverSyncTree_,e);x7(n,s,a)});let r=[];GT(n,Zt(),(s,i)=>{r=r.concat(W1(t.serverSyncTree_,s,i));const a=Qle(t,s);nP(t,a)}),t.onDisconnect_=zb(),fh(t.eventQueue_,Zt(),r)}function qle(t,e,n){let r;Ft(e._path)===".info"?r=iL(t.infoSyncTree_,e,n):r=iL(t.serverSyncTree_,e,n),H7(t.eventQueue_,e._path,r)}function rC(t,e,n){let r;Ft(e._path)===".info"?r=tC(t.infoSyncTree_,e,n):r=tC(t.serverSyncTree_,e,n),H7(t.eventQueue_,e._path,r)}function Kle(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Fle)}function Y7(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Ns(n,...e)}function G7(t,e,n){return D7(t.serverSyncTree_,e,n)||_t.EMPTY_NODE}function tP(t,e=t.transactionQueueTree_){if(e||K1(t,e),Yp(e)){const n=X7(t,e);Be(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&Yle(t,ey(e),n)}else F7(e)&&q1(e,n=>{tP(t,n)})}function Yle(t,e,n){const r=n.map(d=>d.currentWriteId),s=G7(t,e,r);let i=s;const a=s.hash();for(let d=0;d<n.length;d++){const h=n[d];Be(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const p=ai(e,h.path);i=i.updateChild(p,h.currentOutputSnapshotRaw)}const o=i.val(!0),c=e;t.server_.put(c.toString(),o,d=>{Y7(t,"transaction put response",{path:c.toString(),status:d});let h=[];if(d==="ok"){const p=[];for(let m=0;m<n.length;m++)n[m].status=2,h=h.concat(_f(t.serverSyncTree_,n[m].currentWriteId)),n[m].onComplete&&p.push(()=>n[m].onComplete(null,!0,n[m].currentOutputSnapshotResolved)),n[m].unwatcher();K1(t,Z2(t.transactionQueueTree_,e)),tP(t,t.transactionQueueTree_),fh(t.eventQueue_,e,h);for(let m=0;m<p.length;m++)X0(p[m])}else{if(d==="datastale")for(let p=0;p<n.length;p++)n[p].status===3?n[p].status=4:n[p].status=0;else{Oi("transaction at "+c.toString()+" failed: "+d);for(let p=0;p<n.length;p++)n[p].status=4,n[p].abortReason=d}nP(t,e)}},a)}function nP(t,e){const n=Q7(t,e),r=ey(n),s=X7(t,n);return Gle(t,s,r),r}function Gle(t,e,n){if(e.length===0)return;const r=[];let s=[];const a=e.filter(o=>o.status===0).map(o=>o.currentWriteId);for(let o=0;o<e.length;o++){const c=e[o],d=ai(n,c.path);let h=!1,p;if(Be(d!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)h=!0,p=c.abortReason,s=s.concat(_f(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=$le)h=!0,p="maxretry",s=s.concat(_f(t.serverSyncTree_,c.currentWriteId,!0));else{const m=G7(t,c.path,a);c.currentInputSnapshot=m;const y=e[o].update(m.val());if(y!==void 0){U7("transaction failed: Data returned ",y,c.path);let x=Ss(y);typeof y=="object"&&y!=null&&Yl(y,".priority")||(x=x.updatePriority(m.getPriority()));const w=c.currentWriteId,N=K7(t),k=Tle(x,m,N);c.currentOutputSnapshotRaw=x,c.currentOutputSnapshotResolved=k,c.currentWriteId=Wle(t),a.splice(a.indexOf(w),1),s=s.concat(fle(t.serverSyncTree_,c.path,k,c.currentWriteId,c.applyLocally)),s=s.concat(_f(t.serverSyncTree_,w,!0))}else h=!0,p="nodata",s=s.concat(_f(t.serverSyncTree_,c.currentWriteId,!0))}fh(t.eventQueue_,n,s),s=[],h&&(e[o].status=2,(function(m){setTimeout(m,Math.floor(0))})(e[o].unwatcher),e[o].onComplete&&(p==="nodata"?r.push(()=>e[o].onComplete(null,!1,e[o].currentInputSnapshot)):r.push(()=>e[o].onComplete(new Error(p),!1,null))))}K1(t,t.transactionQueueTree_);for(let o=0;o<r.length;o++)X0(r[o]);tP(t,t.transactionQueueTree_)}function Q7(t,e){let n,r=t.transactionQueueTree_;for(n=Ft(e);n!==null&&Yp(r)===void 0;)r=Z2(r,n),e=Nn(e),n=Ft(e);return r}function X7(t,e){const n=[];return J7(t,e,n),n.sort((r,s)=>r.order-s.order),n}function J7(t,e,n){const r=Yp(e);if(r)for(let s=0;s<r.length;s++)n.push(r[s]);q1(e,s=>{J7(t,s,n)})}function K1(t,e){const n=Yp(e);if(n){let r=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[r]=n[s],r++);n.length=r,L7(e,n.length>0?n:void 0)}q1(e,r=>{K1(t,r)})}function Qle(t,e){const n=ey(Q7(t,e)),r=Z2(t.transactionQueueTree_,e);return jle(r,s=>{tS(t,s)}),tS(t,r),$7(r,s=>{tS(t,s)}),n}function tS(t,e){const n=Yp(e);if(n){const r=[];let s=[],i=-1;for(let a=0;a<n.length;a++)n[a].status===3||(n[a].status===1?(Be(i===a-1,"All SENT items should be at beginning of queue."),i=a,n[a].status=3,n[a].abortReason="set"):(Be(n[a].status===0,"Unexpected transaction status in abort"),n[a].unwatcher(),s=s.concat(_f(t.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&r.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));i===-1?L7(e,void 0):n.length=i+1,fh(t.eventQueue_,ey(e),s);for(let a=0;a<r.length;a++)X0(r[a])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xle(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let s=n[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function Jle(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Oi(`Invalid query segment '${n}' in query '${t}'`)}return e}const cL=function(t,e){const n=Zle(t),r=n.namespace;n.domain==="firebase.com"&&Fl(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Fl("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||dae();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new e7(n.host,n.secure,r,s,e,"",r!==n.subdomain),path:new vn(n.pathString)}},Zle=function(t){let e="",n="",r="",s="",i="",a=!0,o="https",c=443;if(typeof t=="string"){let d=t.indexOf("//");d>=0&&(o=t.substring(0,d-1),t=t.substring(d+2));let h=t.indexOf("/");h===-1&&(h=t.length);let p=t.indexOf("?");p===-1&&(p=t.length),e=t.substring(0,Math.min(h,p)),h<p&&(s=Xle(t.substring(h,p)));const m=Jle(t.substring(Math.min(t.length,p)));d=e.indexOf(":"),d>=0?(a=o==="https"||o==="wss",c=parseInt(e.substring(d+1),10)):d=e.length;const y=e.slice(0,d);if(y.toLowerCase()==="localhost")n="localhost";else if(y.split(".").length<=2)n=y;else{const x=e.indexOf(".");r=e.substring(0,x).toLowerCase(),n=e.substring(x+1),i=r}"ns"in m&&(i=m.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:a,scheme:o,pathString:s,namespace:i}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ece{constructor(e,n,r,s){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Yr(this.snapshot.exportVal())}}class tce{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nce{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return Be(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(e,n,r,s){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=s}get key(){return $t(this._path)?null:c7(this._path)}get ref(){return new bu(this._repo,this._path)}get _queryIdentifier(){const e=KM(this._queryParams),n=P2(e);return n==="{}"?"default":n}get _queryObject(){return KM(this._queryParams)}isEqual(e){if(e=mi(e),!(e instanceof rP))return!1;const n=this._repo===e._repo,r=R2(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+Yae(this._path)}}class bu extends rP{constructor(e,n){super(e,n,new F2,!1)}get parent(){const e=d7(this._path);return e===null?null:new bu(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Xb{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new vn(e),r=sC(this.ref,e);return new Xb(this._node.getChild(n),r,rr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,s)=>e(new Xb(s,sC(this.ref,r),rr)))}hasChild(e){const n=new vn(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function rce(t,e){return t=mi(t),t._checkNotDeleted("ref"),sC(t._root,e)}function sC(t,e){return t=mi(t),Ft(t._path)===null?Rle("child","path",e):z7("child","path",e),new bu(t._repo,Dr(t._path,e))}class sP{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new ece("value",this,new Xb(e.snapshotNode,new bu(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new tce(this,e,n):null}matches(e){return e instanceof sP?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function sce(t,e,n,r,s){let i;if(typeof r=="object"&&(i=void 0,s=r),typeof r=="function"&&(i=r),s&&s.onlyOnce){const c=n,d=(h,p)=>{rC(t._repo,t,o),c(h,p)};d.userCallback=n.userCallback,d.context=n.context,n=d}const a=new nce(n,i||void 0),o=new sP(a);return qle(t._repo,t,o),()=>rC(t._repo,t,o)}function ice(t,e,n,r){return sce(t,"value",e,n,r)}function ace(t,e,n){rC(t._repo,t,null)}sle(bu);ule(bu);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oce="FIREBASE_DATABASE_EMULATOR_HOST",iC={};let lce=!1;function cce(t,e,n,r){const s=e.lastIndexOf(":"),i=e.substring(0,s),a=yu(i);t.repoInfo_=new e7(e,a,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(t.authTokenProvider_=r)}function uce(t,e,n,r,s){let i=r||t.options.databaseURL;i===void 0&&(t.options.projectId||Fl("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ns("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let a=cL(i,s),o=a.repoInfo,c;typeof process<"u"&&jM&&(c=jM[oce]),c?(i=`http://${c}?ns=${o.namespace}`,a=cL(i,s),o=a.repoInfo):a.repoInfo.secure;const d=new _ae(t.name,t.options,e);Ole("Invalid Firebase Database URL",a),$t(a.path)||Fl("Database URL must point to the root of a Firebase Database (not including a child path).");const h=hce(o,t,d,new wae(t,n));return new fce(h,t)}function dce(t,e){const n=iC[e];(!n||n[t.key]!==t)&&Fl(`Database ${e}(${t.repoInfo_}) has already been deleted.`),Kle(t),delete n[t.key]}function hce(t,e,n,r){let s=iC[e.name];s||(s={},iC[e.name]=s);let i=s[t.toURLString()];return i&&Fl("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new Vle(t,lce,n,r),s[t.toURLString()]=i,i}class fce{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Ble(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new bu(this._repo,Zt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(dce(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Fl("Cannot call "+e+" on a deleted database.")}}function pce(t=S9(),e){const n=x1(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=eZ("database");r&&mce(n,...r)}return n}function mce(t,e,n,r={}){t=mi(t),t._checkNotDeleted("useEmulator");const s=`${e}:${n}`,i=t._repoInternal;if(t._instanceStarted){if(s===t._repoInternal.repoInfo_.host&&eu(r,i.repoInfo_.emulatorOptions))return;Fl("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Fl('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new Yx(Yx.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:tZ(r.mockUserToken,t.app.options.projectId);a=new Yx(o)}yu(e)&&(Hj(e),p9("Database",!0)),cce(i,s,r,a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gce(t){iae(dh),zd(new tu("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return uce(r,s,i,n)},"PUBLIC").setMultipleInstances(!0)),Po(PM,AM,t),Po(PM,AM,"esm2020")}Tl.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Tl.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};gce();const yce={apiKey:"AIzaSyAmmwtohqMQdYIemos3SSc6fJzvrZ6gBSs",authDomain:"pmsnexora.firebaseapp.com",projectId:"pmsnexora",storageBucket:"pmsnexora.firebasestorage.app",messagingSenderId:"697471863169",appId:"1:697471863169:web:a13448223b227336e38080",databaseURL:"https://pmsnexora-default-rtdb.asia-southeast1.firebasedatabase.app"},iP=N9(yce),cl=zne(iP);Qie(iP,{localCache:nae({cacheSizeBytes:100*1024*1024})});const vce=pce(iP);cl.settings={...cl.settings,popupRedirectResolver:void 0};function Z7(t,e){return function(){return t.apply(e,arguments)}}const{toString:xce}=Object.prototype,{getPrototypeOf:aP}=Object,{iterator:Y1,toStringTag:eU}=Symbol,G1=(t=>e=>{const n=xce.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),to=t=>(t=t.toLowerCase(),e=>G1(e)===t),Q1=t=>e=>typeof e===t,{isArray:Gp}=Array,up=Q1("undefined");function ty(t){return t!==null&&!up(t)&&t.constructor!==null&&!up(t.constructor)&&ui(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const tU=to("ArrayBuffer");function bce(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&tU(t.buffer),e}const wce=Q1("string"),ui=Q1("function"),nU=Q1("number"),ny=t=>t!==null&&typeof t=="object",_ce=t=>t===!0||t===!1,Gx=t=>{if(G1(t)!=="object")return!1;const e=aP(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(eU in t)&&!(Y1 in t)},Ece=t=>{if(!ny(t)||ty(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},Nce=to("Date"),Sce=to("File"),kce=to("Blob"),Tce=to("FileList"),Cce=t=>ny(t)&&ui(t.pipe),jce=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||ui(t.append)&&((e=G1(t))==="formdata"||e==="object"&&ui(t.toString)&&t.toString()==="[object FormData]"))},Pce=to("URLSearchParams"),[Ace,Ice,Dce,Rce]=["ReadableStream","Request","Response","Headers"].map(to),Oce=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ry(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,s;if(typeof t!="object"&&(t=[t]),Gp(t))for(r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else{if(ty(t))return;const i=n?Object.getOwnPropertyNames(t):Object.keys(t),a=i.length;let o;for(r=0;r<a;r++)o=i[r],e.call(null,t[o],o,t)}}function rU(t,e){if(ty(t))return null;e=e.toLowerCase();const n=Object.keys(t);let r=n.length,s;for(;r-- >0;)if(s=n[r],e===s.toLowerCase())return s;return null}const xd=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,sU=t=>!up(t)&&t!==xd;function aC(){const{caseless:t,skipUndefined:e}=sU(this)&&this||{},n={},r=(s,i)=>{const a=t&&rU(n,i)||i;Gx(n[a])&&Gx(s)?n[a]=aC(n[a],s):Gx(s)?n[a]=aC({},s):Gp(s)?n[a]=s.slice():(!e||!up(s))&&(n[a]=s)};for(let s=0,i=arguments.length;s<i;s++)arguments[s]&&ry(arguments[s],r);return n}const Mce=(t,e,n,{allOwnKeys:r}={})=>(ry(e,(s,i)=>{n&&ui(s)?t[i]=Z7(s,n):t[i]=s},{allOwnKeys:r}),t),Lce=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Fce=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},$ce=(t,e,n,r)=>{let s,i,a;const o={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),i=s.length;i-- >0;)a=s[i],(!r||r(a,t,e))&&!o[a]&&(e[a]=t[a],o[a]=!0);t=n!==!1&&aP(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},Vce=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},Bce=t=>{if(!t)return null;if(Gp(t))return t;let e=t.length;if(!nU(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},Uce=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&aP(Uint8Array)),zce=(t,e)=>{const r=(t&&t[Y1]).call(t);let s;for(;(s=r.next())&&!s.done;){const i=s.value;e.call(t,i[0],i[1])}},Wce=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},Hce=to("HTMLFormElement"),qce=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),uL=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),Kce=to("RegExp"),iU=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};ry(n,(s,i)=>{let a;(a=e(s,i,t))!==!1&&(r[i]=a||s)}),Object.defineProperties(t,r)},Yce=t=>{iU(t,(e,n)=>{if(ui(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(ui(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Gce=(t,e)=>{const n={},r=s=>{s.forEach(i=>{n[i]=!0})};return Gp(t)?r(t):r(String(t).split(e)),n},Qce=()=>{},Xce=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function Jce(t){return!!(t&&ui(t.append)&&t[eU]==="FormData"&&t[Y1])}const Zce=t=>{const e=new Array(10),n=(r,s)=>{if(ny(r)){if(e.indexOf(r)>=0)return;if(ty(r))return r;if(!("toJSON"in r)){e[s]=r;const i=Gp(r)?[]:{};return ry(r,(a,o)=>{const c=n(a,s+1);!up(c)&&(i[o]=c)}),e[s]=void 0,i}}return r};return n(t,0)},eue=to("AsyncFunction"),tue=t=>t&&(ny(t)||ui(t))&&ui(t.then)&&ui(t.catch),aU=((t,e)=>t?setImmediate:e?((n,r)=>(xd.addEventListener("message",({source:s,data:i})=>{s===xd&&i===n&&r.length&&r.shift()()},!1),s=>{r.push(s),xd.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",ui(xd.postMessage)),nue=typeof queueMicrotask<"u"?queueMicrotask.bind(xd):typeof process<"u"&&process.nextTick||aU,rue=t=>t!=null&&ui(t[Y1]),be={isArray:Gp,isArrayBuffer:tU,isBuffer:ty,isFormData:jce,isArrayBufferView:bce,isString:wce,isNumber:nU,isBoolean:_ce,isObject:ny,isPlainObject:Gx,isEmptyObject:Ece,isReadableStream:Ace,isRequest:Ice,isResponse:Dce,isHeaders:Rce,isUndefined:up,isDate:Nce,isFile:Sce,isBlob:kce,isRegExp:Kce,isFunction:ui,isStream:Cce,isURLSearchParams:Pce,isTypedArray:Uce,isFileList:Tce,forEach:ry,merge:aC,extend:Mce,trim:Oce,stripBOM:Lce,inherits:Fce,toFlatObject:$ce,kindOf:G1,kindOfTest:to,endsWith:Vce,toArray:Bce,forEachEntry:zce,matchAll:Wce,isHTMLForm:Hce,hasOwnProperty:uL,hasOwnProp:uL,reduceDescriptors:iU,freezeMethods:Yce,toObjectSet:Gce,toCamelCase:qce,noop:Qce,toFiniteNumber:Xce,findKey:rU,global:xd,isContextDefined:sU,isSpecCompliantForm:Jce,toJSONObject:Zce,isAsyncFn:eue,isThenable:tue,setImmediate:aU,asap:nue,isIterable:rue};function Ct(t,e,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}be.inherits(Ct,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:be.toJSONObject(this.config),code:this.code,status:this.status}}});const oU=Ct.prototype,lU={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{lU[t]={value:t}});Object.defineProperties(Ct,lU);Object.defineProperty(oU,"isAxiosError",{value:!0});Ct.from=(t,e,n,r,s,i)=>{const a=Object.create(oU);be.toFlatObject(t,a,function(h){return h!==Error.prototype},d=>d!=="isAxiosError");const o=t&&t.message?t.message:"Error",c=e==null&&t?t.code:e;return Ct.call(a,o,c,n,r,s),t&&a.cause==null&&Object.defineProperty(a,"cause",{value:t,configurable:!0}),a.name=t&&t.name||"Error",i&&Object.assign(a,i),a};const sue=null;function oC(t){return be.isPlainObject(t)||be.isArray(t)}function cU(t){return be.endsWith(t,"[]")?t.slice(0,-2):t}function dL(t,e,n){return t?t.concat(e).map(function(s,i){return s=cU(s),!n&&i?"["+s+"]":s}).join(n?".":""):e}function iue(t){return be.isArray(t)&&!t.some(oC)}const aue=be.toFlatObject(be,{},null,function(e){return/^is[A-Z]/.test(e)});function X1(t,e,n){if(!be.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=be.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(_,w){return!be.isUndefined(w[_])});const r=n.metaTokens,s=n.visitor||h,i=n.dots,a=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&be.isSpecCompliantForm(e);if(!be.isFunction(s))throw new TypeError("visitor must be a function");function d(x){if(x===null)return"";if(be.isDate(x))return x.toISOString();if(be.isBoolean(x))return x.toString();if(!c&&be.isBlob(x))throw new Ct("Blob is not supported. Use a Buffer instead.");return be.isArrayBuffer(x)||be.isTypedArray(x)?c&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function h(x,_,w){let N=x;if(x&&!w&&typeof x=="object"){if(be.endsWith(_,"{}"))_=r?_:_.slice(0,-2),x=JSON.stringify(x);else if(be.isArray(x)&&iue(x)||(be.isFileList(x)||be.endsWith(_,"[]"))&&(N=be.toArray(x)))return _=cU(_),N.forEach(function(S,O){!(be.isUndefined(S)||S===null)&&e.append(a===!0?dL([_],O,i):a===null?_:_+"[]",d(S))}),!1}return oC(x)?!0:(e.append(dL(w,_,i),d(x)),!1)}const p=[],m=Object.assign(aue,{defaultVisitor:h,convertValue:d,isVisitable:oC});function y(x,_){if(!be.isUndefined(x)){if(p.indexOf(x)!==-1)throw Error("Circular reference detected in "+_.join("."));p.push(x),be.forEach(x,function(N,k){(!(be.isUndefined(N)||N===null)&&s.call(e,N,be.isString(k)?k.trim():k,_,m))===!0&&y(N,_?_.concat(k):[k])}),p.pop()}}if(!be.isObject(t))throw new TypeError("data must be an object");return y(t),e}function hL(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function oP(t,e){this._pairs=[],t&&X1(t,this,e)}const uU=oP.prototype;uU.append=function(e,n){this._pairs.push([e,n])};uU.toString=function(e){const n=e?function(r){return e.call(this,r,hL)}:hL;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function oue(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function dU(t,e,n){if(!e)return t;const r=n&&n.encode||oue;be.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let i;if(s?i=s(e,n):i=be.isURLSearchParams(e)?e.toString():new oP(e,n).toString(r),i){const a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class fL{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){be.forEach(this.handlers,function(r){r!==null&&e(r)})}}const hU={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},lue=typeof URLSearchParams<"u"?URLSearchParams:oP,cue=typeof FormData<"u"?FormData:null,uue=typeof Blob<"u"?Blob:null,due={isBrowser:!0,classes:{URLSearchParams:lue,FormData:cue,Blob:uue},protocols:["http","https","file","blob","url","data"]},lP=typeof window<"u"&&typeof document<"u",lC=typeof navigator=="object"&&navigator||void 0,hue=lP&&(!lC||["ReactNative","NativeScript","NS"].indexOf(lC.product)<0),fue=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",pue=lP&&window.location.href||"http://localhost",mue=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:lP,hasStandardBrowserEnv:hue,hasStandardBrowserWebWorkerEnv:fue,navigator:lC,origin:pue},Symbol.toStringTag,{value:"Module"})),Ts={...mue,...due};function gue(t,e){return X1(t,new Ts.classes.URLSearchParams,{visitor:function(n,r,s,i){return Ts.isNode&&be.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...e})}function yue(t){return be.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function vue(t){const e={},n=Object.keys(t);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],e[i]=t[i];return e}function fU(t){function e(n,r,s,i){let a=n[i++];if(a==="__proto__")return!0;const o=Number.isFinite(+a),c=i>=n.length;return a=!a&&be.isArray(s)?s.length:a,c?(be.hasOwnProp(s,a)?s[a]=[s[a],r]:s[a]=r,!o):((!s[a]||!be.isObject(s[a]))&&(s[a]=[]),e(n,r,s[a],i)&&be.isArray(s[a])&&(s[a]=vue(s[a])),!o)}if(be.isFormData(t)&&be.isFunction(t.entries)){const n={};return be.forEachEntry(t,(r,s)=>{e(yue(r),s,n,0)}),n}return null}function xue(t,e,n){if(be.isString(t))try{return(e||JSON.parse)(t),be.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const sy={transitional:hU,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,i=be.isObject(e);if(i&&be.isHTMLForm(e)&&(e=new FormData(e)),be.isFormData(e))return s?JSON.stringify(fU(e)):e;if(be.isArrayBuffer(e)||be.isBuffer(e)||be.isStream(e)||be.isFile(e)||be.isBlob(e)||be.isReadableStream(e))return e;if(be.isArrayBufferView(e))return e.buffer;if(be.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return gue(e,this.formSerializer).toString();if((o=be.isFileList(e))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return X1(o?{"files[]":e}:e,c&&new c,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),xue(e)):e}],transformResponse:[function(e){const n=this.transitional||sy.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(be.isResponse(e)||be.isReadableStream(e))return e;if(e&&be.isString(e)&&(r&&!this.responseType||s)){const a=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e,this.parseReviver)}catch(o){if(a)throw o.name==="SyntaxError"?Ct.from(o,Ct.ERR_BAD_RESPONSE,this,null,this.response):o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ts.classes.FormData,Blob:Ts.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};be.forEach(["delete","get","head","post","put","patch"],t=>{sy.headers[t]={}});const bue=be.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),wue=t=>{const e={};let n,r,s;return t&&t.split(`
`).forEach(function(a){s=a.indexOf(":"),n=a.substring(0,s).trim().toLowerCase(),r=a.substring(s+1).trim(),!(!n||e[n]&&bue[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},pL=Symbol("internals");function rg(t){return t&&String(t).trim().toLowerCase()}function Qx(t){return t===!1||t==null?t:be.isArray(t)?t.map(Qx):String(t)}function _ue(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const Eue=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function nS(t,e,n,r,s){if(be.isFunction(r))return r.call(this,e,n);if(s&&(e=n),!!be.isString(e)){if(be.isString(r))return e.indexOf(r)!==-1;if(be.isRegExp(r))return r.test(e)}}function Nue(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function Sue(t,e){const n=be.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(s,i,a){return this[r].call(this,e,s,i,a)},configurable:!0})})}let di=class{constructor(e){e&&this.set(e)}set(e,n,r){const s=this;function i(o,c,d){const h=rg(c);if(!h)throw new Error("header name must be a non-empty string");const p=be.findKey(s,h);(!p||s[p]===void 0||d===!0||d===void 0&&s[p]!==!1)&&(s[p||c]=Qx(o))}const a=(o,c)=>be.forEach(o,(d,h)=>i(d,h,c));if(be.isPlainObject(e)||e instanceof this.constructor)a(e,n);else if(be.isString(e)&&(e=e.trim())&&!Eue(e))a(wue(e),n);else if(be.isObject(e)&&be.isIterable(e)){let o={},c,d;for(const h of e){if(!be.isArray(h))throw TypeError("Object iterator must return a key-value pair");o[d=h[0]]=(c=o[d])?be.isArray(c)?[...c,h[1]]:[c,h[1]]:h[1]}a(o,n)}else e!=null&&i(n,e,r);return this}get(e,n){if(e=rg(e),e){const r=be.findKey(this,e);if(r){const s=this[r];if(!n)return s;if(n===!0)return _ue(s);if(be.isFunction(n))return n.call(this,s,r);if(be.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=rg(e),e){const r=be.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||nS(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let s=!1;function i(a){if(a=rg(a),a){const o=be.findKey(r,a);o&&(!n||nS(r,r[o],o,n))&&(delete r[o],s=!0)}}return be.isArray(e)?e.forEach(i):i(e),s}clear(e){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const i=n[r];(!e||nS(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const n=this,r={};return be.forEach(this,(s,i)=>{const a=be.findKey(r,i);if(a){n[a]=Qx(s),delete n[i];return}const o=e?Nue(i):String(i).trim();o!==i&&delete n[i],n[o]=Qx(s),r[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return be.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=e&&be.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[pL]=this[pL]={accessors:{}}).accessors,s=this.prototype;function i(a){const o=rg(a);r[o]||(Sue(s,a),r[o]=!0)}return be.isArray(e)?e.forEach(i):i(e),this}};di.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);be.reduceDescriptors(di.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});be.freezeMethods(di);function rS(t,e){const n=this||sy,r=e||n,s=di.from(r.headers);let i=r.data;return be.forEach(t,function(o){i=o.call(n,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function pU(t){return!!(t&&t.__CANCEL__)}function Qp(t,e,n){Ct.call(this,t??"canceled",Ct.ERR_CANCELED,e,n),this.name="CanceledError"}be.inherits(Qp,Ct,{__CANCEL__:!0});function mU(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new Ct("Request failed with status code "+n.status,[Ct.ERR_BAD_REQUEST,Ct.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function kue(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function Tue(t,e){t=t||10;const n=new Array(t),r=new Array(t);let s=0,i=0,a;return e=e!==void 0?e:1e3,function(c){const d=Date.now(),h=r[i];a||(a=d),n[s]=c,r[s]=d;let p=i,m=0;for(;p!==s;)m+=n[p++],p=p%t;if(s=(s+1)%t,s===i&&(i=(i+1)%t),d-a<e)return;const y=h&&d-h;return y?Math.round(m*1e3/y):void 0}}function Cue(t,e){let n=0,r=1e3/e,s,i;const a=(d,h=Date.now())=>{n=h,s=null,i&&(clearTimeout(i),i=null),t(...d)};return[(...d)=>{const h=Date.now(),p=h-n;p>=r?a(d,h):(s=d,i||(i=setTimeout(()=>{i=null,a(s)},r-p)))},()=>s&&a(s)]}const Jb=(t,e,n=3)=>{let r=0;const s=Tue(50,250);return Cue(i=>{const a=i.loaded,o=i.lengthComputable?i.total:void 0,c=a-r,d=s(c),h=a<=o;r=a;const p={loaded:a,total:o,progress:o?a/o:void 0,bytes:c,rate:d||void 0,estimated:d&&o&&h?(o-a)/d:void 0,event:i,lengthComputable:o!=null,[e?"download":"upload"]:!0};t(p)},n)},mL=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},gL=t=>(...e)=>be.asap(()=>t(...e)),jue=Ts.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,Ts.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(Ts.origin),Ts.navigator&&/(msie|trident)/i.test(Ts.navigator.userAgent)):()=>!0,Pue=Ts.hasStandardBrowserEnv?{write(t,e,n,r,s,i){const a=[t+"="+encodeURIComponent(e)];be.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),be.isString(r)&&a.push("path="+r),be.isString(s)&&a.push("domain="+s),i===!0&&a.push("secure"),document.cookie=a.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Aue(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Iue(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function gU(t,e,n){let r=!Aue(e);return t&&(r||n==!1)?Iue(t,e):e}const yL=t=>t instanceof di?{...t}:t;function th(t,e){e=e||{};const n={};function r(d,h,p,m){return be.isPlainObject(d)&&be.isPlainObject(h)?be.merge.call({caseless:m},d,h):be.isPlainObject(h)?be.merge({},h):be.isArray(h)?h.slice():h}function s(d,h,p,m){if(be.isUndefined(h)){if(!be.isUndefined(d))return r(void 0,d,p,m)}else return r(d,h,p,m)}function i(d,h){if(!be.isUndefined(h))return r(void 0,h)}function a(d,h){if(be.isUndefined(h)){if(!be.isUndefined(d))return r(void 0,d)}else return r(void 0,h)}function o(d,h,p){if(p in e)return r(d,h);if(p in t)return r(void 0,d)}const c={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(d,h,p)=>s(yL(d),yL(h),p,!0)};return be.forEach(Object.keys({...t,...e}),function(h){const p=c[h]||s,m=p(t[h],e[h],h);be.isUndefined(m)&&p!==o||(n[h]=m)}),n}const yU=t=>{const e=th({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:i,headers:a,auth:o}=e;if(e.headers=a=di.from(a),e.url=dU(gU(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),o&&a.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),be.isFormData(n)){if(Ts.hasStandardBrowserEnv||Ts.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(be.isFunction(n.getHeaders)){const c=n.getHeaders(),d=["content-type","content-length"];Object.entries(c).forEach(([h,p])=>{d.includes(h.toLowerCase())&&a.set(h,p)})}}if(Ts.hasStandardBrowserEnv&&(r&&be.isFunction(r)&&(r=r(e)),r||r!==!1&&jue(e.url))){const c=s&&i&&Pue.read(i);c&&a.set(s,c)}return e},Due=typeof XMLHttpRequest<"u",Rue=Due&&function(t){return new Promise(function(n,r){const s=yU(t);let i=s.data;const a=di.from(s.headers).normalize();let{responseType:o,onUploadProgress:c,onDownloadProgress:d}=s,h,p,m,y,x;function _(){y&&y(),x&&x(),s.cancelToken&&s.cancelToken.unsubscribe(h),s.signal&&s.signal.removeEventListener("abort",h)}let w=new XMLHttpRequest;w.open(s.method.toUpperCase(),s.url,!0),w.timeout=s.timeout;function N(){if(!w)return;const S=di.from("getAllResponseHeaders"in w&&w.getAllResponseHeaders()),R={data:!o||o==="text"||o==="json"?w.responseText:w.response,status:w.status,statusText:w.statusText,headers:S,config:t,request:w};mU(function(P){n(P),_()},function(P){r(P),_()},R),w=null}"onloadend"in w?w.onloadend=N:w.onreadystatechange=function(){!w||w.readyState!==4||w.status===0&&!(w.responseURL&&w.responseURL.indexOf("file:")===0)||setTimeout(N)},w.onabort=function(){w&&(r(new Ct("Request aborted",Ct.ECONNABORTED,t,w)),w=null)},w.onerror=function(O){const R=O&&O.message?O.message:"Network Error",M=new Ct(R,Ct.ERR_NETWORK,t,w);M.event=O||null,r(M),w=null},w.ontimeout=function(){let O=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const R=s.transitional||hU;s.timeoutErrorMessage&&(O=s.timeoutErrorMessage),r(new Ct(O,R.clarifyTimeoutError?Ct.ETIMEDOUT:Ct.ECONNABORTED,t,w)),w=null},i===void 0&&a.setContentType(null),"setRequestHeader"in w&&be.forEach(a.toJSON(),function(O,R){w.setRequestHeader(R,O)}),be.isUndefined(s.withCredentials)||(w.withCredentials=!!s.withCredentials),o&&o!=="json"&&(w.responseType=s.responseType),d&&([m,x]=Jb(d,!0),w.addEventListener("progress",m)),c&&w.upload&&([p,y]=Jb(c),w.upload.addEventListener("progress",p),w.upload.addEventListener("loadend",y)),(s.cancelToken||s.signal)&&(h=S=>{w&&(r(!S||S.type?new Qp(null,t,w):S),w.abort(),w=null)},s.cancelToken&&s.cancelToken.subscribe(h),s.signal&&(s.signal.aborted?h():s.signal.addEventListener("abort",h)));const k=kue(s.url);if(k&&Ts.protocols.indexOf(k)===-1){r(new Ct("Unsupported protocol "+k+":",Ct.ERR_BAD_REQUEST,t));return}w.send(i||null)})},Oue=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,s;const i=function(d){if(!s){s=!0,o();const h=d instanceof Error?d:this.reason;r.abort(h instanceof Ct?h:new Qp(h instanceof Error?h.message:h))}};let a=e&&setTimeout(()=>{a=null,i(new Ct(`timeout ${e} of ms exceeded`,Ct.ETIMEDOUT))},e);const o=()=>{t&&(a&&clearTimeout(a),a=null,t.forEach(d=>{d.unsubscribe?d.unsubscribe(i):d.removeEventListener("abort",i)}),t=null)};t.forEach(d=>d.addEventListener("abort",i));const{signal:c}=r;return c.unsubscribe=()=>be.asap(o),c}},Mue=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,s;for(;r<n;)s=r+e,yield t.slice(r,s),r=s},Lue=async function*(t,e){for await(const n of Fue(t))yield*Mue(n,e)},Fue=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},vL=(t,e,n,r)=>{const s=Lue(t,e);let i=0,a,o=c=>{a||(a=!0,r&&r(c))};return new ReadableStream({async pull(c){try{const{done:d,value:h}=await s.next();if(d){o(),c.close();return}let p=h.byteLength;if(n){let m=i+=p;n(m)}c.enqueue(new Uint8Array(h))}catch(d){throw o(d),d}},cancel(c){return o(c),s.return()}},{highWaterMark:2})},xL=64*1024,{isFunction:tx}=be,vU=(({fetch:t,Request:e,Response:n})=>({fetch:t,Request:e,Response:n}))(be.global),{ReadableStream:bL,TextEncoder:wL}=be.global,_L=(t,...e)=>{try{return!!t(...e)}catch{return!1}},$ue=t=>{const{fetch:e,Request:n,Response:r}=Object.assign({},vU,t),s=tx(e),i=tx(n),a=tx(r);if(!s)return!1;const o=s&&tx(bL),c=s&&(typeof wL=="function"?(x=>_=>x.encode(_))(new wL):async x=>new Uint8Array(await new n(x).arrayBuffer())),d=i&&o&&_L(()=>{let x=!1;const _=new n(Ts.origin,{body:new bL,method:"POST",get duplex(){return x=!0,"half"}}).headers.has("Content-Type");return x&&!_}),h=a&&o&&_L(()=>be.isReadableStream(new r("").body)),p={stream:h&&(x=>x.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(x=>{!p[x]&&(p[x]=(_,w)=>{let N=_&&_[x];if(N)return N.call(_);throw new Ct(`Response type '${x}' is not supported`,Ct.ERR_NOT_SUPPORT,w)})});const m=async x=>{if(x==null)return 0;if(be.isBlob(x))return x.size;if(be.isSpecCompliantForm(x))return(await new n(Ts.origin,{method:"POST",body:x}).arrayBuffer()).byteLength;if(be.isArrayBufferView(x)||be.isArrayBuffer(x))return x.byteLength;if(be.isURLSearchParams(x)&&(x=x+""),be.isString(x))return(await c(x)).byteLength},y=async(x,_)=>{const w=be.toFiniteNumber(x.getContentLength());return w??m(_)};return async x=>{let{url:_,method:w,data:N,signal:k,cancelToken:S,timeout:O,onDownloadProgress:R,onUploadProgress:M,responseType:P,headers:C,withCredentials:D="same-origin",fetchOptions:$}=yU(x);P=P?(P+"").toLowerCase():"text";let F=Oue([k,S&&S.toAbortSignal()],O),U=null;const I=F&&F.unsubscribe&&(()=>{F.unsubscribe()});let z;try{if(M&&d&&w!=="get"&&w!=="head"&&(z=await y(C,N))!==0){let G=new n(_,{method:"POST",body:N,duplex:"half"}),q;if(be.isFormData(N)&&(q=G.headers.get("content-type"))&&C.setContentType(q),G.body){const[Z,ge]=mL(z,Jb(gL(M)));N=vL(G.body,xL,Z,ge)}}be.isString(D)||(D=D?"include":"omit");const Q=i&&"credentials"in n.prototype,ne={...$,signal:F,method:w.toUpperCase(),headers:C.normalize().toJSON(),body:N,duplex:"half",credentials:Q?D:void 0};U=i&&new n(_,ne);let W=await(i?e(U,$):e(_,ne));const K=h&&(P==="stream"||P==="response");if(h&&(R||K&&I)){const G={};["status","statusText","headers"].forEach(Le=>{G[Le]=W[Le]});const q=be.toFiniteNumber(W.headers.get("content-length")),[Z,ge]=R&&mL(q,Jb(gL(R),!0))||[];W=new r(vL(W.body,xL,Z,()=>{ge&&ge(),I&&I()}),G)}P=P||"text";let Y=await p[be.findKey(p,P)||"text"](W,x);return!K&&I&&I(),await new Promise((G,q)=>{mU(G,q,{data:Y,headers:di.from(W.headers),status:W.status,statusText:W.statusText,config:x,request:U})})}catch(Q){throw I&&I(),Q&&Q.name==="TypeError"&&/Load failed|fetch/i.test(Q.message)?Object.assign(new Ct("Network Error",Ct.ERR_NETWORK,x,U),{cause:Q.cause||Q}):Ct.from(Q,Q&&Q.code,x,U)}}},Vue=new Map,xU=t=>{let e=be.merge.call({skipUndefined:!0},vU,t?t.env:null);const{fetch:n,Request:r,Response:s}=e,i=[r,s,n];let a=i.length,o=a,c,d,h=Vue;for(;o--;)c=i[o],d=h.get(c),d===void 0&&h.set(c,d=o?new Map:$ue(e)),h=d;return d};xU();const cC={http:sue,xhr:Rue,fetch:{get:xU}};be.forEach(cC,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const EL=t=>`- ${t}`,Bue=t=>be.isFunction(t)||t===null||t===!1,bU={getAdapter:(t,e)=>{t=be.isArray(t)?t:[t];const{length:n}=t;let r,s;const i={};for(let a=0;a<n;a++){r=t[a];let o;if(s=r,!Bue(r)&&(s=cC[(o=String(r)).toLowerCase()],s===void 0))throw new Ct(`Unknown adapter '${o}'`);if(s&&(be.isFunction(s)||(s=s.get(e))))break;i[o||"#"+a]=s}if(!s){const a=Object.entries(i).map(([c,d])=>`adapter ${c} `+(d===!1?"is not supported by the environment":"is not available in the build"));let o=n?a.length>1?`since :
`+a.map(EL).join(`
`):" "+EL(a[0]):"as no adapter specified";throw new Ct("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return s},adapters:cC};function sS(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Qp(null,t)}function NL(t){return sS(t),t.headers=di.from(t.headers),t.data=rS.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),bU.getAdapter(t.adapter||sy.adapter,t)(t).then(function(r){return sS(t),r.data=rS.call(t,t.transformResponse,r),r.headers=di.from(r.headers),r},function(r){return pU(r)||(sS(t),r&&r.response&&(r.response.data=rS.call(t,t.transformResponse,r.response),r.response.headers=di.from(r.response.headers))),Promise.reject(r)})}const wU="1.12.1",J1={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{J1[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const SL={};J1.transitional=function(e,n,r){function s(i,a){return"[Axios v"+wU+"] Transitional option '"+i+"'"+a+(r?". "+r:"")}return(i,a,o)=>{if(e===!1)throw new Ct(s(a," has been removed"+(n?" in "+n:"")),Ct.ERR_DEPRECATED);return n&&!SL[a]&&(SL[a]=!0,console.warn(s(a," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(i,a,o):!0}};J1.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function Uue(t,e,n){if(typeof t!="object")throw new Ct("options must be an object",Ct.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let s=r.length;for(;s-- >0;){const i=r[s],a=e[i];if(a){const o=t[i],c=o===void 0||a(o,i,t);if(c!==!0)throw new Ct("option "+i+" must be "+c,Ct.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Ct("Unknown option "+i,Ct.ERR_BAD_OPTION)}}const Xx={assertOptions:Uue,validators:J1},po=Xx.validators;let Id=class{constructor(e){this.defaults=e||{},this.interceptors={request:new fL,response:new fL}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=th(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:i}=n;r!==void 0&&Xx.assertOptions(r,{silentJSONParsing:po.transitional(po.boolean),forcedJSONParsing:po.transitional(po.boolean),clarifyTimeoutError:po.transitional(po.boolean)},!1),s!=null&&(be.isFunction(s)?n.paramsSerializer={serialize:s}:Xx.assertOptions(s,{encode:po.function,serialize:po.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Xx.assertOptions(n,{baseUrl:po.spelling("baseURL"),withXsrfToken:po.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let a=i&&be.merge(i.common,i[n.method]);i&&be.forEach(["delete","get","head","post","put","patch","common"],x=>{delete i[x]}),n.headers=di.concat(a,i);const o=[];let c=!0;this.interceptors.request.forEach(function(_){typeof _.runWhen=="function"&&_.runWhen(n)===!1||(c=c&&_.synchronous,o.unshift(_.fulfilled,_.rejected))});const d=[];this.interceptors.response.forEach(function(_){d.push(_.fulfilled,_.rejected)});let h,p=0,m;if(!c){const x=[NL.bind(this),void 0];for(x.unshift(...o),x.push(...d),m=x.length,h=Promise.resolve(n);p<m;)h=h.then(x[p++],x[p++]);return h}m=o.length;let y=n;for(p=0;p<m;){const x=o[p++],_=o[p++];try{y=x(y)}catch(w){_.call(this,w);break}}try{h=NL.call(this,y)}catch(x){return Promise.reject(x)}for(p=0,m=d.length;p<m;)h=h.then(d[p++],d[p++]);return h}getUri(e){e=th(this.defaults,e);const n=gU(e.baseURL,e.url,e.allowAbsoluteUrls);return dU(n,e.params,e.paramsSerializer)}};be.forEach(["delete","get","head","options"],function(e){Id.prototype[e]=function(n,r){return this.request(th(r||{},{method:e,url:n,data:(r||{}).data}))}});be.forEach(["post","put","patch"],function(e){function n(r){return function(i,a,o){return this.request(th(o||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:a}))}}Id.prototype[e]=n(),Id.prototype[e+"Form"]=n(!0)});let zue=class _U{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(s=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](s);r._listeners=null}),this.promise.then=s=>{let i;const a=new Promise(o=>{r.subscribe(o),i=o}).then(s);return a.cancel=function(){r.unsubscribe(i)},a},e(function(i,a,o){r.reason||(r.reason=new Qp(i,a,o),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new _U(function(s){e=s}),cancel:e}}};function Wue(t){return function(n){return t.apply(null,n)}}function Hue(t){return be.isObject(t)&&t.isAxiosError===!0}const uC={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(uC).forEach(([t,e])=>{uC[e]=t});function EU(t){const e=new Id(t),n=Z7(Id.prototype.request,e);return be.extend(n,Id.prototype,e,{allOwnKeys:!0}),be.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return EU(th(t,s))},n}const fr=EU(sy);fr.Axios=Id;fr.CanceledError=Qp;fr.CancelToken=zue;fr.isCancel=pU;fr.VERSION=wU;fr.toFormData=X1;fr.AxiosError=Ct;fr.Cancel=fr.CanceledError;fr.all=function(e){return Promise.all(e)};fr.spread=Wue;fr.isAxiosError=Hue;fr.mergeConfig=th;fr.AxiosHeaders=di;fr.formToJSON=t=>fU(be.isHTMLForm(t)?new FormData(t):t);fr.getAdapter=bU.getAdapter;fr.HttpStatusCode=uC;fr.default=fr;const{Axios:j5e,AxiosError:P5e,CanceledError:A5e,isCancel:I5e,CancelToken:D5e,VERSION:R5e,all:O5e,Cancel:M5e,isAxiosError:L5e,spread:F5e,toFormData:$5e,AxiosHeaders:V5e,HttpStatusCode:B5e,formToJSON:U5e,getAdapter:z5e,mergeConfig:W5e}=fr,al={TOKEN:"auth_token",USER:"user_data",FACILITY:"current_facility"},ls={setToken:t=>{localStorage.setItem(al.TOKEN,t)},getToken:()=>localStorage.getItem(al.TOKEN),removeToken:()=>{localStorage.removeItem(al.TOKEN)},setUser:t=>{localStorage.setItem(al.USER,JSON.stringify(t))},getUser:()=>{const t=localStorage.getItem(al.USER);return t?JSON.parse(t):null},removeUser:()=>{localStorage.removeItem(al.USER)},setFacility:t=>{localStorage.setItem(al.FACILITY,JSON.stringify(t))},getFacility:()=>{const t=localStorage.getItem(al.FACILITY);return t?JSON.parse(t):null},removeFacility:()=>{localStorage.removeItem(al.FACILITY)},clearAuthData:()=>{ls.removeToken(),ls.removeUser(),ls.removeFacility()},isAuthenticated:()=>!!ls.getToken()},que="http://localhost:5000/api",Ie=fr.create({baseURL:que,headers:{"Content-Type":"application/json"}});Ie.interceptors.request.use(t=>{const e=ls.getToken();return e&&(t.headers.Authorization=`Bearer ${e}`),t},t=>Promise.reject(t));Ie.interceptors.response.use(t=>t,t=>(t.response?.status===401?(ls.clearAuthData(),window.location.href="/login"):t.response?.status===403&&(t.config?.url?.includes("/projects/facility/")||t.config?.url?.includes("/facilities/"))&&(ls.removeFacility(),window.location.href="/Facilities"),Promise.reject(t)));const nx={async login(t,e){},async register(t,e,n,r){},async registerUser(t,e,n){return(await Ie.post("/auth/firebase/register",{idToken:t,firstName:e,lastName:n})).data},async googleAuth(t){const e=await Ie.post("/auth/firebase/google-auth",{idToken:t});return ls.setToken(e.data.token),e.data},async verifyToken(t){const e=await Ie.post("/auth/firebase/verify",{idToken:t});return ls.setToken(e.data.token),e.data},async syncUser(t){try{const e=await Ie.post("/auth/firebase/sync",{idToken:t});return ls.setToken(e.data.token),e.data}catch(e){throw console.error("Sync failed:",e),e}},async getProfile(){return(await Ie.get("/auth/profile")).data}};function Kue(t){const e=t?.code||"",n=t?.message||"",r={"auth/user-not-found":"No account found with this email address.","auth/wrong-password":"Incorrect password. Please try again.","auth/invalid-email":"Please enter a valid email address.","auth/user-disabled":"This account has been disabled.","auth/email-already-in-use":"An account with this email already exists.","auth/weak-password":"Password should be at least 6 characters long.","auth/operation-not-allowed":"This sign-in method is not enabled.","auth/account-exists-with-different-credential":"An account already exists with the same email but different sign-in credentials.","auth/invalid-credential":"Invalid credentials provided.","auth/invalid-verification-code":"Invalid verification code.","auth/invalid-verification-id":"Invalid verification ID.","auth/code-expired":"Verification code has expired.","auth/too-many-requests":"Too many failed attempts. Please try again later.","auth/network-request-failed":"Network error. Please check your connection and try again.","auth/popup-closed-by-user":"Sign-in was cancelled.","auth/cancelled-popup-request":"Sign-in was cancelled.","auth/popup-blocked":"Sign-in popup was blocked by your browser.","auth/requires-recent-login":"Please sign in again to perform this action.","auth/provider-already-linked":"This account is already linked to another provider.","auth/credential-already-in-use":"These credentials are already associated with a different user account.","auth/invalid-api-key":"Invalid Firebase API key. Please check your configuration.","auth/app-deleted":"Firebase app has been deleted.","auth/app-not-authorized":"Firebase app is not authorized to use Firebase Authentication.","auth/argument-error":"Invalid argument provided to Firebase Authentication method.","auth/invalid-user-token":"Invalid user token.","auth/user-token-expired":"User token has expired.","auth/web-storage-unsupported":"Web storage is not supported or is disabled."};if(r[e])return r[e];if(t?.response?.data?.message)return t.response.data.message;if(n.includes("Firebase:")){const s=n.match(/Firebase: Error \([^)]+\)\. (.+)/);if(s&&s[1])return s[1]}return"An unexpected error occurred. Please try again."}const cP=v.createContext(void 0),gi=()=>{const t=v.useContext(cP);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},Yue=({children:t})=>{const e=eo(),[n,r]=v.useState(null),[s,i]=v.useState(null),[a,o]=v.useState(!0);v.useEffect(()=>cl.onAuthStateChanged(async _=>{if(r(_),_){const w=await _.getIdToken();try{const N=await nx.syncUser(w);i(N.token),ls.setToken(N.token);const k=new CustomEvent("userProfileUpdated",{detail:{userId:_.uid,user:N.user}});window.dispatchEvent(k)}catch(N){console.error("Failed to sync user with backend:",N),await VN(cl),i(null),ls.removeToken()}}else i(null),ls.removeToken();o(!1)}),[]);const y={user:n,token:s,login:async(x,_)=>{try{const w=await Cte(cl,x,_);if(!w.user.emailVerified)throw await VN(cl),new Error("Please verify your email before logging in.");const N=await w.user.getIdToken(),k=await nx.verifyToken(N);i(k.token),ls.setToken(k.token)}catch(w){if(w.code==="auth/user-not-found")throw new Error("Account not found. Please sign up with Google.");const N=Kue(w);throw new Error(N)}},register:async(x,_,w,N)=>{const k=await Tte(cl,x,_);await Pte(k.user,{displayName:`${w} ${N}`}),await l4(k.user);const S=await k.user.getIdToken(),O=await nx.registerUser(S,w,N);i(O.token),ls.setToken(O.token)},googleLogin:async x=>{try{const _=await nx.googleAuth(x);i(_.token),ls.setToken(_.token),e("/resources/analytics/global",{replace:!0})}catch(_){throw console.error("Google login failed:",_),_}},logout:async()=>{await VN(cl),i(null),ls.clearAuthData()},sendVerificationEmail:async()=>{if(!n)throw new Error("No user logged in");await l4(n)},loading:a};return l.jsx(cP.Provider,{value:y,children:t})},NU=v.createContext(void 0),SU=()=>{const t=v.useContext(NU);if(t===void 0)throw new Error("useCurrentFacility must be used within a CurrentFacilityProvider");return t},Gue=({children:t})=>{const[e,n]=v.useState(null);return l.jsx(NU.Provider,{value:{currentFacilityName:e,setCurrentFacilityName:n},children:t})};class Que{cache=new Map;defaultTTL=300*1e3;generateKey(e,...n){return`${e}:${n.join(":")}`}get(e){const n=this.cache.get(e);return n?Date.now()>n.expiresAt?(this.cache.delete(e),null):n.value:null}set(e,n,r=this.defaultTTL){this.cache.set(e,{value:n,expiresAt:Date.now()+r})}delete(e){this.cache.delete(e)}clear(){this.cache.clear()}clearAll(){this.clear()}getFacility(e){return this.get(this.generateKey("facility",e))}setFacility(e,n,r=600*1e3){this.set(this.generateKey("facility",e),n,r)}getFacilityStats(e){return this.get(this.generateKey("facility_stats",e))}setFacilityStats(e,n,r=300*1e3){this.set(this.generateKey("facility_stats",e),n,r)}getProjects(e){return this.get(this.generateKey("projects",e))}setProjects(e,n,r=300*1e3){this.set(this.generateKey("projects",e),n,r)}getProjectTasks(e,n){const r=this.generateKey("project_tasks",e,JSON.stringify(n||{}));return this.get(r)}setProjectTasks(e,n,r,s=120*1e3){const i=this.generateKey("project_tasks",e,JSON.stringify(r||{}));this.set(i,n,s)}getUserProfiles(e){const n=this.generateKey("user_profiles",e.sort().join(","));return this.get(n)}setUserProfiles(e,n,r=600*1e3){const s=this.generateKey("user_profiles",e.sort().join(","));this.set(s,n,r)}invalidateFacility(e){this.delete(this.generateKey("facility",e)),this.delete(this.generateKey("facility_stats",e)),this.delete(this.generateKey("projects",e))}invalidateProject(e){const n=[];this.cache.forEach((r,s)=>{s.includes(`project_tasks:${e}`)&&n.push(s)}),n.forEach(r=>this.delete(r))}invalidateTask(e){this.invalidateProject(e)}invalidateUserProfiles(e){if(e){const n=this.generateKey("user_profiles",e.sort().join(","));this.delete(n)}else{const n=[];this.cache.forEach((r,s)=>{s.startsWith("user_profiles:")&&n.push(s)}),n.forEach(r=>this.delete(r))}}getCacheSize(){return this.cache.size}getCacheKeys(){return Array.from(this.cache.keys())}clearFacilityCache(e){const n=[];this.cache.forEach((r,s)=>{(s.includes(`facility:${e}`)||s.includes(`facility_stats:${e}`)||s.includes(`projects:${e}`))&&n.push(s)}),n.forEach(r=>this.delete(r))}clearProjectCache(e){const n=[];this.cache.forEach((r,s)=>{(s.includes("project_tasks:")||s.includes(`projects:${e}`))&&n.push(s)}),n.forEach(r=>this.delete(r))}}const si=new Que,dC={decodeToken:t=>{try{const n=t.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),r=decodeURIComponent(atob(n).split("").map(s=>"%"+("00"+s.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(r)}catch(e){return console.error("Error decoding JWT token:",e),null}},getUserIdFromToken:t=>dC.decodeToken(t)?.userId||null,getCurrentUserId:()=>{const t=localStorage.getItem("auth_token");return t?dC.getUserIdFromToken(t):null}},Gr={getAll:async()=>(await Ie.get("/facilities")).data,getById:async(t,e=!1)=>{if(!e){const s=si.getFacility(t);if(s)return s}const r=(await Ie.get(`/facilities/${t}`)).data;return si.setFacility(t,r),r},create:async t=>(await Ie.post("/facilities",t)).data,update:async(t,e)=>(await Ie.put(`/facilities/${t}`,e)).data,delete:async t=>{await Ie.delete(`/facilities/${t}`)},getFacilityMembers:async t=>(await Ie.get(`/facilities/${t}/members`)).data.members,getUserRole:async t=>{const e=`user_role_${t}`,n=localStorage.getItem(e);if(n){const r=JSON.parse(n),s=r.timestamp;if(Date.now()-s<6e4)return r.data}try{const r=await Ie.get(`/facilities/${t}/user-role`),s={data:r.data,timestamp:Date.now()};return localStorage.setItem(e,JSON.stringify(s)),r.data}catch{console.log("User role endpoint not available, falling back to members list");const s=await Gr.getFacilityMembers(t),i=dC.getCurrentUserId();if(!i)throw new Error("User not authenticated");const a=s.find(o=>o.id===i);if(a)return{role:a.role,isOwner:a.isOwner};throw new Error("User not found in facility")}},clearUserRoleCache:t=>{const e=`user_role_${t}`;localStorage.removeItem(e),console.log("Cleared user role cache for facility:",t)},clearFacilityLocalStorageCache:t=>{[`user_role_${t}`,`facility_members_${t}`,`facility_data_${t}_true`,`facility_data_${t}_false`].forEach(n=>{localStorage.removeItem(n)})},getFacilityStats:async(t,e=!1)=>{if(!e){const s=si.getFacilityStats(t);if(s)return s}const r=(await Ie.get(`/facilities/${t}/stats`)).data;return si.setFacilityStats(t,r),r},getFacilityTags:async t=>(await Ie.get(`/facilities/${t}/tags`)).data,updateStatus:async(t,e)=>(await Ie.put(`/facilities/${t}`,{status:e})).data,getWithData:async(t,e=!0)=>{const n=`facility_data_${t}_${e}`,r=si.get(n);if(r&&r.facility&&r.projects)return r;try{const s=await Ie.get(`/facilities/${t}/data?includeTasks=${e}`);return si.set(n,s.data,3e4),s.data}catch(s){throw console.error("Error fetching facility data:",s),s}}},kU=v.createContext(void 0),Z1=()=>{const t=v.useContext(kU);if(t===void 0)throw new Error("useFacility must be used within a FacilityProvider");return t},Xue=({children:t})=>{const{token:e}=gi(),[n,r]=v.useState([]),[s,i]=v.useState(null),[a,o]=v.useState(!1),[c,d]=v.useState(null),h=v.useCallback(async()=>{if(!e){r([]),i(null);return}try{o(!0),d(null);const x=await Gr.getAll();r(x),x.length>0?i(_=>_||x[0]):i(null)}catch(x){console.error("FacilityContext: Error loading facilities:",x),console.error("FacilityContext: Error details:",{message:x.message,status:x.response?.status,data:x.response?.data}),d(x.message||"Failed to load facilities"),r([]),i(null)}finally{o(!1)}},[e]),p=v.useCallback(async()=>{await h()},[h]),m=x=>{const _=n.find(w=>w.id===x);_&&i(_)};v.useEffect(()=>{e?h():(r([]),i(null))},[e,h]);const y={facilities:n,currentFacility:s,loading:a,error:c,loadFacilities:h,setCurrentFacility:i,setCurrentFacilityById:m,refreshFacilities:p,setFacilities:r};return l.jsx(kU.Provider,{value:y,children:t})},TU=v.createContext(void 0),ph=()=>{const t=v.useContext(TU);if(t===void 0)throw new Error("useFacilityRefresh must be used within a FacilityRefreshProvider");return t},Jue=({children:t})=>{const[e,n]=v.useState(0),[r,s]=v.useState({}),[i,a]=v.useState(0),o=v.useCallback(()=>{n(p=>p+1)},[]),c=v.useCallback(p=>{s(m=>({...m,[p]:(m[p]||0)+1})),o()},[o]),d=v.useCallback(p=>{a(m=>m+1),o()},[o]);v.useEffect(()=>{const p=m=>{d()};return window.addEventListener("userProfileUpdated",p),()=>{window.removeEventListener("userProfileUpdated",p)}},[d]);const h={refreshTrigger:e,triggerFacilityRefresh:o,triggerMemberRefresh:c,triggerUserProfileRefresh:d,memberRefreshTriggers:r,userProfileRefreshTrigger:i};return l.jsx(TU.Provider,{value:h,children:t})},CU=v.createContext(void 0),Zue=()=>{const t=v.useContext(CU);if(t===void 0)throw new Error("useFacilityProjectData must be used within a FacilityProjectDataProvider");return t},ede=({children:t})=>{const[e,n]=v.useState({}),r=v.useCallback(h=>e[h]||null,[e]),s=v.useCallback((h,p,m)=>{n(y=>({...y,[h]:{projects:p,columns:m,lastUpdated:Date.now()}}))},[]),i=v.useCallback((h,p)=>{n(m=>{const y=m[h];return y?{...m,[h]:{...y,projects:p,lastUpdated:Date.now()}}:m})},[]),a=v.useCallback((h,p)=>{n(m=>{const y=m[h];return y?{...m,[h]:{...y,columns:p,lastUpdated:Date.now()}}:m})},[]),o=v.useCallback(h=>{n(p=>{const m={...p};return delete m[h],m})},[]),c=v.useCallback(()=>{n({})},[]),d={getFacilityData:r,setFacilityData:s,updateFacilityProjects:i,updateFacilityColumns:a,clearFacilityData:o,clearAllData:c};return l.jsx(CU.Provider,{value:d,children:t})};function tde({darkMode:t,setDarkMode:e}){const[n,r]=v.useState(!1),s="text-gray-800 dark:text-gray-300 hover:text-brand dark:hover:text-brand-light transition",i="bg-[#0e8407] text-white rounded-lg px-3 py-2",a="px-4 py-2 rounded-lg text-sm font-semibold transition shadow-sm",o="border border-gray-300 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-800",c="bg-brand text-white hover:brightness-110 dark:bg-brand-light",[d,h]=v.useState(window.location.hash||"#intro");return v.useEffect(()=>{const p=()=>{h(window.location.hash||"#intro")};return window.addEventListener("hashchange",p),()=>window.removeEventListener("hashchange",p)},[]),l.jsxs("nav",{className:"fixed left-0 top-0 z-50 w-full bg-neutral-light/90 backdrop-blur-md shadow-sm dark:bg-neutral-dark/70 dark:shadow",children:[l.jsxs("div",{className:"mx-auto flex max-w-7xl items-center justify-between px-4 py-3",children:[l.jsxs("a",{href:"#intro",className:"group flex items-center gap-3",children:[l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"absolute inset-0 rounded-xl bg-brand blur-sm opacity-40 group-hover:opacity-60 transition"}),l.jsx("div",{className:"relative flex h-10 w-10 items-center justify-center rounded-xl bg-white shadow-md ring-1 ring-black/5",children:l.jsx("img",{src:"/images/nexora.png",alt:"Nexora",className:"h-6 w-6 object-contain"})})]}),l.jsx("span",{className:"text-xl font-extrabold tracking-tight",children:l.jsx("span",{className:"text-brand",children:"Nexora"})})]}),l.jsxs("ul",{className:"hidden items-center gap-8 md:flex",children:[l.jsx("li",{children:l.jsx("a",{href:"#intro",className:d==="#intro"?i:s,children:"Home"})}),l.jsx("li",{children:l.jsx("a",{href:"#features",className:d==="#features"?i:s,children:"Features"})}),l.jsx("li",{children:l.jsx("a",{href:"#steps",className:d==="#steps"?i:s,children:"How it works"})}),l.jsx("li",{children:l.jsx("a",{href:"#testimonials",className:d==="#testimonials"?i:s,children:"Reviews"})}),l.jsx("li",{children:l.jsx("a",{href:"#cta",className:d==="#cta"?i:s,children:"Contact"})})]}),l.jsxs("div",{className:"hidden items-center gap-3 md:flex",children:[l.jsx("button",{onClick:()=>e(!t),className:`${a} ${o}`,"aria-label":"Toggle dark mode",children:t?"☀️ Light":"🌙 Dark"}),l.jsx("a",{href:"/login",target:"_blank",rel:"noopener noreferrer",className:`${a} ${o}`,children:"Log In"}),l.jsx("a",{className:`${a} ${c}`,href:"#cta",children:"Get started"})]}),l.jsx("button",{onClick:()=>r(!n),className:"rounded-lg border border-gray-300 px-3 py-2 md:hidden dark:border-gray-700",children:"☰"})]}),n&&l.jsxs("div",{className:"md:hidden bg-neutral-light/95 dark:bg-neutral-dark/95 border-t border-gray-200 dark:border-gray-800 backdrop-blur",children:[l.jsx("ul",{className:"grid gap-3 p-4",children:[["Home","#intro"],["Features","#features"],["How it works","#steps"],["Reviews","#testimonials"],["Contact","#cta"]].map(([p,m])=>l.jsx("a",{href:m,onClick:()=>r(!1),className:`rounded-lg px-3 py-2 ${d===m?"bg-[#0e8407] text-white":"text-gray-800 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-900"}`,children:p},m))}),l.jsxs("div",{className:"px-4 pb-4 flex gap-3",children:[l.jsx("button",{onClick:()=>e(!t),className:"flex-1 rounded-lg border border-gray-300 px-4 py-2 text-gray-800 dark:text-gray-300 dark:border-gray-700",children:t?"☀️ Light":"🌙 Dark"}),l.jsx("a",{className:"flex-1 rounded-lg border border-gray-300 px-4 py-2 text-gray-800 dark:text-gray-300 dark:border-gray-700",href:"#login",children:"Login"}),l.jsx("a",{className:"flex-1 rounded-lg bg-brand px-4 py-2 text-white",href:"#cta",children:"Get started"})]})]})]})}const uP=v.createContext({});function dP(t){const e=v.useRef(null);return e.current===null&&(e.current=t()),e.current}const hP=typeof window<"u",jU=hP?v.useLayoutEffect:v.useEffect,e_=v.createContext(null);function fP(t,e){t.indexOf(e)===-1&&t.push(e)}function pP(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const $l=(t,e,n)=>n>e?e:n<t?t:n;let mP=()=>{};const Vl={},PU=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function AU(t){return typeof t=="object"&&t!==null}const IU=t=>/^0[^.\s]+$/u.test(t);function gP(t){let e;return()=>(e===void 0&&(e=t()),e)}const ha=t=>t,nde=(t,e)=>n=>e(t(n)),iy=(...t)=>t.reduce(nde),g0=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class yP{constructor(){this.subscriptions=[]}add(e){return fP(this.subscriptions,e),()=>pP(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let i=0;i<s;i++){const a=this.subscriptions[i];a&&a(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Io=t=>t*1e3,Do=t=>t/1e3;function DU(t,e){return e?t*(1e3/e):0}const RU=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,rde=1e-7,sde=12;function ide(t,e,n,r,s){let i,a,o=0;do a=e+(n-e)/2,i=RU(a,r,s)-t,i>0?n=a:e=a;while(Math.abs(i)>rde&&++o<sde);return a}function ay(t,e,n,r){if(t===e&&n===r)return ha;const s=i=>ide(i,0,1,t,n);return i=>i===0||i===1?i:RU(s(i),e,r)}const OU=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,MU=t=>e=>1-t(1-e),LU=ay(.33,1.53,.69,.99),vP=MU(LU),FU=OU(vP),$U=t=>(t*=2)<1?.5*vP(t):.5*(2-Math.pow(2,-10*(t-1))),xP=t=>1-Math.sin(Math.acos(t)),VU=MU(xP),BU=OU(xP),ade=ay(.42,0,1,1),ode=ay(0,0,.58,1),UU=ay(.42,0,.58,1),lde=t=>Array.isArray(t)&&typeof t[0]!="number",zU=t=>Array.isArray(t)&&typeof t[0]=="number",cde={linear:ha,easeIn:ade,easeInOut:UU,easeOut:ode,circIn:xP,circInOut:BU,circOut:VU,backIn:vP,backInOut:FU,backOut:LU,anticipate:$U},ude=t=>typeof t=="string",kL=t=>{if(zU(t)){mP(t.length===4);const[e,n,r,s]=t;return ay(e,n,r,s)}else if(ude(t))return cde[t];return t},rx=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function dde(t,e){let n=new Set,r=new Set,s=!1,i=!1;const a=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function c(h){a.has(h)&&(d.schedule(h),t()),h(o)}const d={schedule:(h,p=!1,m=!1)=>{const x=m&&s?n:r;return p&&a.add(h),x.has(h)||x.add(h),h},cancel:h=>{r.delete(h),a.delete(h)},process:h=>{if(o=h,s){i=!0;return}s=!0,[n,r]=[r,n],n.forEach(c),n.clear(),s=!1,i&&(i=!1,d.process(h))}};return d}const hde=40;function WU(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,a=rx.reduce((S,O)=>(S[O]=dde(i),S),{}),{setup:o,read:c,resolveKeyframes:d,preUpdate:h,update:p,preRender:m,render:y,postRender:x}=a,_=()=>{const S=Vl.useManualTiming?s.timestamp:performance.now();n=!1,Vl.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(S-s.timestamp,hde),1)),s.timestamp=S,s.isProcessing=!0,o.process(s),c.process(s),d.process(s),h.process(s),p.process(s),m.process(s),y.process(s),x.process(s),s.isProcessing=!1,n&&e&&(r=!1,t(_))},w=()=>{n=!0,r=!0,s.isProcessing||t(_)};return{schedule:rx.reduce((S,O)=>{const R=a[O];return S[O]=(M,P=!1,C=!1)=>(n||w(),R.schedule(M,P,C)),S},{}),cancel:S=>{for(let O=0;O<rx.length;O++)a[rx[O]].cancel(S)},state:s,steps:a}}const{schedule:$n,cancel:ou,state:as,steps:iS}=WU(typeof requestAnimationFrame<"u"?requestAnimationFrame:ha,!0);let Jx;function fde(){Jx=void 0}const li={now:()=>(Jx===void 0&&li.set(as.isProcessing||Vl.useManualTiming?as.timestamp:performance.now()),Jx),set:t=>{Jx=t,queueMicrotask(fde)}},HU=t=>e=>typeof e=="string"&&e.startsWith(t),bP=HU("--"),pde=HU("var(--"),wP=t=>pde(t)?mde.test(t.split("/*")[0].trim()):!1,mde=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Xp={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},y0={...Xp,transform:t=>$l(0,1,t)},sx={...Xp,default:1},Bg=t=>Math.round(t*1e5)/1e5,_P=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function gde(t){return t==null}const yde=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,EP=(t,e)=>n=>!!(typeof n=="string"&&yde.test(n)&&n.startsWith(t)||e&&!gde(n)&&Object.prototype.hasOwnProperty.call(n,e)),qU=(t,e,n)=>r=>{if(typeof r!="string")return r;const[s,i,a,o]=r.match(_P);return{[t]:parseFloat(s),[e]:parseFloat(i),[n]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},vde=t=>$l(0,255,t),aS={...Xp,transform:t=>Math.round(vde(t))},bd={test:EP("rgb","red"),parse:qU("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+aS.transform(t)+", "+aS.transform(e)+", "+aS.transform(n)+", "+Bg(y0.transform(r))+")"};function xde(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const hC={test:EP("#"),parse:xde,transform:bd.transform},oy=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Rc=oy("deg"),Ro=oy("%"),wt=oy("px"),bde=oy("vh"),wde=oy("vw"),TL={...Ro,parse:t=>Ro.parse(t)/100,transform:t=>Ro.transform(t*100)},Ef={test:EP("hsl","hue"),parse:qU("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Ro.transform(Bg(e))+", "+Ro.transform(Bg(n))+", "+Bg(y0.transform(r))+")"},br={test:t=>bd.test(t)||hC.test(t)||Ef.test(t),parse:t=>bd.test(t)?bd.parse(t):Ef.test(t)?Ef.parse(t):hC.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?bd.transform(t):Ef.transform(t),getAnimatableNone:t=>{const e=br.parse(t);return e.alpha=0,br.transform(e)}},_de=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Ede(t){return isNaN(t)&&typeof t=="string"&&(t.match(_P)?.length||0)+(t.match(_de)?.length||0)>0}const KU="number",YU="color",Nde="var",Sde="var(",CL="${}",kde=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function v0(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let i=0;const o=e.replace(kde,c=>(br.test(c)?(r.color.push(i),s.push(YU),n.push(br.parse(c))):c.startsWith(Sde)?(r.var.push(i),s.push(Nde),n.push(c)):(r.number.push(i),s.push(KU),n.push(parseFloat(c))),++i,CL)).split(CL);return{values:n,split:o,indexes:r,types:s}}function GU(t){return v0(t).values}function QU(t){const{split:e,types:n}=v0(t),r=e.length;return s=>{let i="";for(let a=0;a<r;a++)if(i+=e[a],s[a]!==void 0){const o=n[a];o===KU?i+=Bg(s[a]):o===YU?i+=br.transform(s[a]):i+=s[a]}return i}}const Tde=t=>typeof t=="number"?0:br.test(t)?br.getAnimatableNone(t):t;function Cde(t){const e=GU(t);return QU(t)(e.map(Tde))}const lu={test:Ede,parse:GU,createTransformer:QU,getAnimatableNone:Cde};function oS(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function jde({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,i=0,a=0;if(!e)s=i=a=n;else{const o=n<.5?n*(1+e):n+e-n*e,c=2*n-o;s=oS(c,o,t+1/3),i=oS(c,o,t),a=oS(c,o,t-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(a*255),alpha:r}}function Zb(t,e){return n=>n>0?e:t}const Yn=(t,e,n)=>t+(e-t)*n,lS=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},Pde=[hC,bd,Ef],Ade=t=>Pde.find(e=>e.test(t));function jL(t){const e=Ade(t);if(!e)return!1;let n=e.parse(t);return e===Ef&&(n=jde(n)),n}const PL=(t,e)=>{const n=jL(t),r=jL(e);if(!n||!r)return Zb(t,e);const s={...n};return i=>(s.red=lS(n.red,r.red,i),s.green=lS(n.green,r.green,i),s.blue=lS(n.blue,r.blue,i),s.alpha=Yn(n.alpha,r.alpha,i),bd.transform(s))},fC=new Set(["none","hidden"]);function Ide(t,e){return fC.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function Dde(t,e){return n=>Yn(t,e,n)}function NP(t){return typeof t=="number"?Dde:typeof t=="string"?wP(t)?Zb:br.test(t)?PL:Mde:Array.isArray(t)?XU:typeof t=="object"?br.test(t)?PL:Rde:Zb}function XU(t,e){const n=[...t],r=n.length,s=t.map((i,a)=>NP(i)(i,e[a]));return i=>{for(let a=0;a<r;a++)n[a]=s[a](i);return n}}function Rde(t,e){const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=NP(t[s])(t[s],e[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}}function Ode(t,e){const n=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const i=e.types[s],a=t.indexes[i][r[i]],o=t.values[a]??0;n[s]=o,r[i]++}return n}const Mde=(t,e)=>{const n=lu.createTransformer(e),r=v0(t),s=v0(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?fC.has(t)&&!s.values.length||fC.has(e)&&!r.values.length?Ide(t,e):iy(XU(Ode(r,s),s.values),n):Zb(t,e)};function JU(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Yn(t,e,n):NP(t)(t,e)}const Lde=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>$n.update(e,n),stop:()=>ou(e),now:()=>as.isProcessing?as.timestamp:li.now()}},ZU=(t,e,n=10)=>{let r="";const s=Math.max(Math.round(e/n),2);for(let i=0;i<s;i++)r+=Math.round(t(i/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},ew=2e4;function SP(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<ew;)e+=n,r=t.next(e);return e>=ew?1/0:e}function Fde(t,e=100,n){const r=n({...t,keyframes:[0,e]}),s=Math.min(SP(r),ew);return{type:"keyframes",ease:i=>r.next(s*i).value/e,duration:Do(s)}}const $de=5;function ez(t,e,n){const r=Math.max(e-$de,0);return DU(n-t(r),e-r)}const tr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},cS=.001;function Vde({duration:t=tr.duration,bounce:e=tr.bounce,velocity:n=tr.velocity,mass:r=tr.mass}){let s,i,a=1-e;a=$l(tr.minDamping,tr.maxDamping,a),t=$l(tr.minDuration,tr.maxDuration,Do(t)),a<1?(s=d=>{const h=d*a,p=h*t,m=h-n,y=pC(d,a),x=Math.exp(-p);return cS-m/y*x},i=d=>{const p=d*a*t,m=p*n+n,y=Math.pow(a,2)*Math.pow(d,2)*t,x=Math.exp(-p),_=pC(Math.pow(d,2),a);return(-s(d)+cS>0?-1:1)*((m-y)*x)/_}):(s=d=>{const h=Math.exp(-d*t),p=(d-n)*t+1;return-cS+h*p},i=d=>{const h=Math.exp(-d*t),p=(n-d)*(t*t);return h*p});const o=5/t,c=Ude(s,i,o);if(t=Io(t),isNaN(c))return{stiffness:tr.stiffness,damping:tr.damping,duration:t};{const d=Math.pow(c,2)*r;return{stiffness:d,damping:a*2*Math.sqrt(r*d),duration:t}}}const Bde=12;function Ude(t,e,n){let r=n;for(let s=1;s<Bde;s++)r=r-t(r)/e(r);return r}function pC(t,e){return t*Math.sqrt(1-e*e)}const zde=["duration","bounce"],Wde=["stiffness","damping","mass"];function AL(t,e){return e.some(n=>t[n]!==void 0)}function Hde(t){let e={velocity:tr.velocity,stiffness:tr.stiffness,damping:tr.damping,mass:tr.mass,isResolvedFromDuration:!1,...t};if(!AL(t,Wde)&&AL(t,zde))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,i=2*$l(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:tr.mass,stiffness:s,damping:i}}else{const n=Vde(t);e={...e,...n,mass:tr.mass},e.isResolvedFromDuration=!0}return e}function tw(t=tr.visualDuration,e=tr.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:s}=n;const i=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],o={done:!1,value:i},{stiffness:c,damping:d,mass:h,duration:p,velocity:m,isResolvedFromDuration:y}=Hde({...n,velocity:-Do(n.velocity||0)}),x=m||0,_=d/(2*Math.sqrt(c*h)),w=a-i,N=Do(Math.sqrt(c/h)),k=Math.abs(w)<5;r||(r=k?tr.restSpeed.granular:tr.restSpeed.default),s||(s=k?tr.restDelta.granular:tr.restDelta.default);let S;if(_<1){const R=pC(N,_);S=M=>{const P=Math.exp(-_*N*M);return a-P*((x+_*N*w)/R*Math.sin(R*M)+w*Math.cos(R*M))}}else if(_===1)S=R=>a-Math.exp(-N*R)*(w+(x+N*w)*R);else{const R=N*Math.sqrt(_*_-1);S=M=>{const P=Math.exp(-_*N*M),C=Math.min(R*M,300);return a-P*((x+_*N*w)*Math.sinh(C)+R*w*Math.cosh(C))/R}}const O={calculatedDuration:y&&p||null,next:R=>{const M=S(R);if(y)o.done=R>=p;else{let P=R===0?x:0;_<1&&(P=R===0?Io(x):ez(S,R,M));const C=Math.abs(P)<=r,D=Math.abs(a-M)<=s;o.done=C&&D}return o.value=o.done?a:M,o},toString:()=>{const R=Math.min(SP(O),ew),M=ZU(P=>O.next(R*P).value,R,30);return R+"ms "+M},toTransition:()=>{}};return O}tw.applyToOptions=t=>{const e=Fde(t,100,tw);return t.ease=e.ease,t.duration=Io(e.duration),t.type="keyframes",t};function mC({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:a,min:o,max:c,restDelta:d=.5,restSpeed:h}){const p=t[0],m={done:!1,value:p},y=C=>o!==void 0&&C<o||c!==void 0&&C>c,x=C=>o===void 0?c:c===void 0||Math.abs(o-C)<Math.abs(c-C)?o:c;let _=n*e;const w=p+_,N=a===void 0?w:a(w);N!==w&&(_=N-p);const k=C=>-_*Math.exp(-C/r),S=C=>N+k(C),O=C=>{const D=k(C),$=S(C);m.done=Math.abs(D)<=d,m.value=m.done?N:$};let R,M;const P=C=>{y(m.value)&&(R=C,M=tw({keyframes:[m.value,x(m.value)],velocity:ez(S,C,m.value),damping:s,stiffness:i,restDelta:d,restSpeed:h}))};return P(0),{calculatedDuration:null,next:C=>{let D=!1;return!M&&R===void 0&&(D=!0,O(C),P(C)),R!==void 0&&C>=R?M.next(C-R):(!D&&O(C),m)}}}function qde(t,e,n){const r=[],s=n||Vl.mix||JU,i=t.length-1;for(let a=0;a<i;a++){let o=s(t[a],t[a+1]);if(e){const c=Array.isArray(e)?e[a]||ha:e;o=iy(c,o)}r.push(o)}return r}function Kde(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const i=t.length;if(mP(i===e.length),i===1)return()=>e[0];if(i===2&&e[0]===e[1])return()=>e[1];const a=t[0]===t[1];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=qde(e,r,s),c=o.length,d=h=>{if(a&&h<t[0])return e[0];let p=0;if(c>1)for(;p<t.length-2&&!(h<t[p+1]);p++);const m=g0(t[p],t[p+1],h);return o[p](m)};return n?h=>d($l(t[0],t[i-1],h)):d}function Yde(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=g0(0,e,r);t.push(Yn(n,1,s))}}function Gde(t){const e=[0];return Yde(e,t.length-1),e}function Qde(t,e){return t.map(n=>n*e)}function Xde(t,e){return t.map(()=>e||UU).splice(0,t.length-1)}function Ug({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=lde(r)?r.map(kL):kL(r),i={done:!1,value:e[0]},a=Qde(n&&n.length===e.length?n:Gde(e),t),o=Kde(a,e,{ease:Array.isArray(s)?s:Xde(e,s)});return{calculatedDuration:t,next:c=>(i.value=o(c),i.done=c>=t,i)}}const Jde=t=>t!==null;function kP(t,{repeat:e,repeatType:n="loop"},r,s=1){const i=t.filter(Jde),o=s<0||e&&n!=="loop"&&e%2===1?0:i.length-1;return!o||r===void 0?i[o]:r}const Zde={decay:mC,inertia:mC,tween:Ug,keyframes:Ug,spring:tw};function tz(t){typeof t.type=="string"&&(t.type=Zde[t.type])}class TP{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const ehe=t=>t/100;class CP extends TP{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==li.now()&&this.tick(li.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;tz(e);const{type:n=Ug,repeat:r=0,repeatDelay:s=0,repeatType:i,velocity:a=0}=e;let{keyframes:o}=e;const c=n||Ug;c!==Ug&&typeof o[0]!="number"&&(this.mixKeyframes=iy(ehe,JU(o[0],o[1])),o=[0,100]);const d=c({...e,keyframes:o});i==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...o].reverse(),velocity:-a})),d.calculatedDuration===null&&(d.calculatedDuration=SP(d));const{calculatedDuration:h}=d;this.calculatedDuration=h,this.resolvedDuration=h+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=d}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:s,mixKeyframes:i,mirroredGenerator:a,resolvedDuration:o,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:d=0,keyframes:h,repeat:p,repeatType:m,repeatDelay:y,type:x,onUpdate:_,finalKeyframe:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const N=this.currentTime-d*(this.playbackSpeed>=0?1:-1),k=this.playbackSpeed>=0?N<0:N>s;this.currentTime=Math.max(N,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let S=this.currentTime,O=r;if(p){const C=Math.min(this.currentTime,s)/o;let D=Math.floor(C),$=C%1;!$&&C>=1&&($=1),$===1&&D--,D=Math.min(D,p+1),!!(D%2)&&(m==="reverse"?($=1-$,y&&($-=y/o)):m==="mirror"&&(O=a)),S=$l(0,1,$)*o}const R=k?{done:!1,value:h[0]}:O.next(S);i&&(R.value=i(R.value));let{done:M}=R;!k&&c!==null&&(M=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const P=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&M);return P&&x!==mC&&(R.value=kP(h,this.options,w,this.speed)),_&&_(R.value),P&&this.finish(),R}then(e,n){return this.finished.then(e,n)}get duration(){return Do(this.calculatedDuration)}get time(){return Do(this.currentTime)}set time(e){e=Io(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(li.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Do(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=Lde,startTime:n}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(li.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function the(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const wd=t=>t*180/Math.PI,gC=t=>{const e=wd(Math.atan2(t[1],t[0]));return yC(e)},nhe={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:gC,rotateZ:gC,skewX:t=>wd(Math.atan(t[1])),skewY:t=>wd(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},yC=t=>(t=t%360,t<0&&(t+=360),t),IL=gC,DL=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),RL=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),rhe={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:DL,scaleY:RL,scale:t=>(DL(t)+RL(t))/2,rotateX:t=>yC(wd(Math.atan2(t[6],t[5]))),rotateY:t=>yC(wd(Math.atan2(-t[2],t[0]))),rotateZ:IL,rotate:IL,skewX:t=>wd(Math.atan(t[4])),skewY:t=>wd(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function vC(t){return t.includes("scale")?1:0}function xC(t,e){if(!t||t==="none")return vC(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=rhe,s=n;else{const o=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=nhe,s=o}if(!s)return vC(e);const i=r[e],a=s[1].split(",").map(ihe);return typeof i=="function"?i(a):a[i]}const she=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return xC(n,e)};function ihe(t){return parseFloat(t.trim())}const Jp=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Zp=new Set(Jp),OL=t=>t===Xp||t===wt,ahe=new Set(["x","y","z"]),ohe=Jp.filter(t=>!ahe.has(t));function lhe(t){const e=[];return ohe.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Dd={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>xC(e,"x"),y:(t,{transform:e})=>xC(e,"y")};Dd.translateX=Dd.x;Dd.translateY=Dd.y;const Rd=new Set;let bC=!1,wC=!1,_C=!1;function nz(){if(wC){const t=Array.from(Rd).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const s=lhe(r);s.length&&(n.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([i,a])=>{r.getValue(i)?.set(a)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}wC=!1,bC=!1,Rd.forEach(t=>t.complete(_C)),Rd.clear()}function rz(){Rd.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(wC=!0)})}function che(){_C=!0,rz(),nz(),_C=!1}class jP{constructor(e,n,r,s,i,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=s,this.element=i,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(Rd.add(this),bC||(bC=!0,$n.read(rz),$n.resolveKeyframes(nz))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:s}=this;if(e[0]===null){const i=s?.get(),a=e[e.length-1];if(i!==void 0)e[0]=i;else if(r&&n){const o=r.readValue(n,a);o!=null&&(e[0]=o)}e[0]===void 0&&(e[0]=a),s&&i===void 0&&s.set(e[0])}the(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Rd.delete(this)}cancel(){this.state==="scheduled"&&(Rd.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const uhe=t=>t.startsWith("--");function dhe(t,e,n){uhe(e)?t.style.setProperty(e,n):t.style[e]=n}const hhe=gP(()=>window.ScrollTimeline!==void 0),fhe={};function phe(t,e){const n=gP(t);return()=>fhe[e]??n()}const sz=phe(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),wg=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,ML={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:wg([0,.65,.55,1]),circOut:wg([.55,0,1,.45]),backIn:wg([.31,.01,.66,-.59]),backOut:wg([.33,1.53,.69,.99])};function iz(t,e){if(t)return typeof t=="function"?sz()?ZU(t,e):"ease-out":zU(t)?wg(t):Array.isArray(t)?t.map(n=>iz(n,e)||ML.easeOut):ML[t]}function mhe(t,e,n,{delay:r=0,duration:s=300,repeat:i=0,repeatType:a="loop",ease:o="easeOut",times:c}={},d=void 0){const h={[e]:n};c&&(h.offset=c);const p=iz(o,s);Array.isArray(p)&&(h.easing=p);const m={delay:r,duration:s,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:i+1,direction:a==="reverse"?"alternate":"normal"};return d&&(m.pseudoElement=d),t.animate(h,m)}function az(t){return typeof t=="function"&&"applyToOptions"in t}function ghe({type:t,...e}){return az(t)&&sz()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class yhe extends TP{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:s,pseudoElement:i,allowFlatten:a=!1,finalKeyframe:o,onComplete:c}=e;this.isPseudoElement=!!i,this.allowFlatten=a,this.options=e,mP(typeof e.type!="string");const d=ghe(e);this.animation=mhe(n,r,s,d,i),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const h=kP(s,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(h):dhe(n,r,h),this.animation.cancel()}c?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return Do(Number(e))}get time(){return Do(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Io(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&hhe()?(this.animation.timeline=e,ha):n(this)}}const oz={anticipate:$U,backInOut:FU,circInOut:BU};function vhe(t){return t in oz}function xhe(t){typeof t.ease=="string"&&vhe(t.ease)&&(t.ease=oz[t.ease])}const LL=10;class bhe extends yhe{constructor(e){xhe(e),tz(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:s,element:i,...a}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const o=new CP({...a,autoplay:!1}),c=Io(this.finishedTime??this.time);n.setWithVelocity(o.sample(c-LL).value,o.sample(c).value,LL),o.stop()}}const FL=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(lu.test(t)||t==="0")&&!t.startsWith("url("));function whe(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function _he(t,e,n,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const i=t[t.length-1],a=FL(s,e),o=FL(i,e);return!a||!o?!1:whe(t)||(n==="spring"||az(n))&&r}function EC(t){t.duration=0,t.type}const Ehe=new Set(["opacity","clipPath","filter","transform"]),Nhe=gP(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function She(t){const{motionValue:e,name:n,repeatDelay:r,repeatType:s,damping:i,type:a}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:d}=e.owner.getProps();return Nhe()&&n&&Ehe.has(n)&&(n!=="transform"||!d)&&!c&&!r&&s!=="mirror"&&i!==0&&a!=="inertia"}const khe=40;class The extends TP{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:a="loop",keyframes:o,name:c,motionValue:d,element:h,...p}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=li.now();const m={autoplay:e,delay:n,type:r,repeat:s,repeatDelay:i,repeatType:a,name:c,motionValue:d,element:h,...p},y=h?.KeyframeResolver||jP;this.keyframeResolver=new y(o,(x,_,w)=>this.onKeyframesResolved(x,_,m,!w),c,d,h),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,r,s){this.keyframeResolver=void 0;const{name:i,type:a,velocity:o,delay:c,isHandoff:d,onUpdate:h}=r;this.resolvedAt=li.now(),_he(e,i,a,o)||((Vl.instantAnimations||!c)&&h?.(kP(e,r,n)),e[0]=e[e.length-1],EC(r),r.repeat=0);const m={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>khe?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},y=!d&&She(m)?new bhe({...m,element:m.motionValue.owner.current}):new CP(m);y.finished.then(()=>this.notifyFinished()).catch(ha),this.pendingTimeline&&(this.stopTimeline=y.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=y}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),che()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const Che=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function jhe(t){const e=Che.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}function lz(t,e,n=1){const[r,s]=jhe(t);if(!r)return;const i=window.getComputedStyle(e).getPropertyValue(r);if(i){const a=i.trim();return PU(a)?parseFloat(a):a}return wP(s)?lz(s,e,n+1):s}function PP(t,e){return t?.[e]??t?.default??t}const cz=new Set(["width","height","top","left","right","bottom",...Jp]),Phe={test:t=>t==="auto",parse:t=>t},uz=t=>e=>e.test(t),dz=[Xp,wt,Ro,Rc,wde,bde,Phe],$L=t=>dz.find(uz(t));function Ahe(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||IU(t):!0}const Ihe=new Set(["brightness","contrast","saturate","opacity"]);function Dhe(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(_P)||[];if(!r)return t;const s=n.replace(r,"");let i=Ihe.has(e)?1:0;return r!==n&&(i*=100),e+"("+i+s+")"}const Rhe=/\b([a-z-]*)\(.*?\)/gu,NC={...lu,getAnimatableNone:t=>{const e=t.match(Rhe);return e?e.map(Dhe).join(" "):t}},VL={...Xp,transform:Math.round},Ohe={rotate:Rc,rotateX:Rc,rotateY:Rc,rotateZ:Rc,scale:sx,scaleX:sx,scaleY:sx,scaleZ:sx,skew:Rc,skewX:Rc,skewY:Rc,distance:wt,translateX:wt,translateY:wt,translateZ:wt,x:wt,y:wt,z:wt,perspective:wt,transformPerspective:wt,opacity:y0,originX:TL,originY:TL,originZ:wt},AP={borderWidth:wt,borderTopWidth:wt,borderRightWidth:wt,borderBottomWidth:wt,borderLeftWidth:wt,borderRadius:wt,radius:wt,borderTopLeftRadius:wt,borderTopRightRadius:wt,borderBottomRightRadius:wt,borderBottomLeftRadius:wt,width:wt,maxWidth:wt,height:wt,maxHeight:wt,top:wt,right:wt,bottom:wt,left:wt,padding:wt,paddingTop:wt,paddingRight:wt,paddingBottom:wt,paddingLeft:wt,margin:wt,marginTop:wt,marginRight:wt,marginBottom:wt,marginLeft:wt,backgroundPositionX:wt,backgroundPositionY:wt,...Ohe,zIndex:VL,fillOpacity:y0,strokeOpacity:y0,numOctaves:VL},Mhe={...AP,color:br,backgroundColor:br,outlineColor:br,fill:br,stroke:br,borderColor:br,borderTopColor:br,borderRightColor:br,borderBottomColor:br,borderLeftColor:br,filter:NC,WebkitFilter:NC},hz=t=>Mhe[t];function fz(t,e){let n=hz(t);return n!==NC&&(n=lu),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const Lhe=new Set(["auto","none","0"]);function Fhe(t,e,n){let r=0,s;for(;r<t.length&&!s;){const i=t[r];typeof i=="string"&&!Lhe.has(i)&&v0(i).values.length&&(s=t[r]),r++}if(s&&n)for(const i of e)t[i]=fz(n,s)}class $he extends jP{constructor(e,n,r,s,i){super(e,n,r,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let d=e[c];if(typeof d=="string"&&(d=d.trim(),wP(d))){const h=lz(d,n.current);h!==void 0&&(e[c]=h),c===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!cz.has(r)||e.length!==2)return;const[s,i]=e,a=$L(s),o=$L(i);if(a!==o)if(OL(a)&&OL(o))for(let c=0;c<e.length;c++){const d=e[c];typeof d=="string"&&(e[c]=parseFloat(d))}else Dd[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let s=0;s<e.length;s++)(e[s]===null||Ahe(e[s]))&&r.push(s);r.length&&Fhe(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Dd[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const s=e.getValue(n);s&&s.jump(this.measuredOrigin,!1);const i=r.length-1,a=r[i];r[i]=Dd[n](e.measureViewportBox(),window.getComputedStyle(e.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),this.removedTransforms?.length&&this.removedTransforms.forEach(([o,c])=>{e.getValue(o).set(c)}),this.resolveNoneKeyframes()}}function Vhe(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const s=n?.[t]??r.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}const pz=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function mz(t){return AU(t)&&"offsetHeight"in t}const BL=30,Bhe=t=>!isNaN(parseFloat(t));class Uhe{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const s=li.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const i of this.dependents)i.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=li.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Bhe(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new yP);const r=this.events[e].add(n);return e==="change"?()=>{r(),$n.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=li.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>BL)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,BL);return DU(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function dp(t,e){return new Uhe(t,e)}const{schedule:IP}=WU(queueMicrotask,!1),ja={x:!1,y:!1};function gz(){return ja.x||ja.y}function zhe(t){return t==="x"||t==="y"?ja[t]?null:(ja[t]=!0,()=>{ja[t]=!1}):ja.x||ja.y?null:(ja.x=ja.y=!0,()=>{ja.x=ja.y=!1})}function yz(t,e){const n=Vhe(t),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[n,s,()=>r.abort()]}function UL(t){return!(t.pointerType==="touch"||gz())}function Whe(t,e,n={}){const[r,s,i]=yz(t,n),a=o=>{if(!UL(o))return;const{target:c}=o,d=e(c,o);if(typeof d!="function"||!c)return;const h=p=>{UL(p)&&(d(p),c.removeEventListener("pointerleave",h))};c.addEventListener("pointerleave",h,s)};return r.forEach(o=>{o.addEventListener("pointerenter",a,s)}),i}const vz=(t,e)=>e?t===e?!0:vz(t,e.parentElement):!1,DP=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,Hhe=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function qhe(t){return Hhe.has(t.tagName)||t.tabIndex!==-1}const Zx=new WeakSet;function zL(t){return e=>{e.key==="Enter"&&t(e)}}function uS(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const Khe=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=zL(()=>{if(Zx.has(n))return;uS(n,"down");const s=zL(()=>{uS(n,"up")}),i=()=>uS(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",i,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function WL(t){return DP(t)&&!gz()}function Yhe(t,e,n={}){const[r,s,i]=yz(t,n),a=o=>{const c=o.currentTarget;if(!WL(o))return;Zx.add(c);const d=e(c,o),h=(y,x)=>{window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",m),Zx.has(c)&&Zx.delete(c),WL(y)&&typeof d=="function"&&d(y,{success:x})},p=y=>{h(y,c===window||c===document||n.useGlobalTarget||vz(c,y.target))},m=y=>{h(y,!1)};window.addEventListener("pointerup",p,s),window.addEventListener("pointercancel",m,s)};return r.forEach(o=>{(n.useGlobalTarget?window:o).addEventListener("pointerdown",a,s),mz(o)&&(o.addEventListener("focus",d=>Khe(d,s)),!qhe(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),i}function xz(t){return AU(t)&&"ownerSVGElement"in t}function Ghe(t){return xz(t)&&t.tagName==="svg"}const js=t=>!!(t&&t.getVelocity),Qhe=[...dz,br,lu],Xhe=t=>Qhe.find(uz(t)),RP=v.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class Jhe extends v.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,s=mz(r)&&r.offsetWidth||0,i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft,i.right=s-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Zhe({children:t,isPresent:e,anchorX:n,root:r}){const s=v.useId(),i=v.useRef(null),a=v.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=v.useContext(RP);return v.useInsertionEffect(()=>{const{width:c,height:d,top:h,left:p,right:m}=a.current;if(e||!i.current||!c||!d)return;const y=n==="left"?`left: ${p}`:`right: ${m}`;i.current.dataset.motionPopId=s;const x=document.createElement("style");o&&(x.nonce=o);const _=r??document.head;return _.appendChild(x),x.sheet&&x.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${d}px !important;
            ${y}px !important;
            top: ${h}px !important;
          }
        `),()=>{_.contains(x)&&_.removeChild(x)}},[e]),l.jsx(Jhe,{isPresent:e,childRef:i,sizeRef:a,children:v.cloneElement(t,{ref:i})})}const efe=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:a,anchorX:o,root:c})=>{const d=dP(tfe),h=v.useId();let p=!0,m=v.useMemo(()=>(p=!1,{id:h,initial:e,isPresent:n,custom:s,onExitComplete:y=>{d.set(y,!0);for(const x of d.values())if(!x)return;r&&r()},register:y=>(d.set(y,!1),()=>d.delete(y))}),[n,d,r]);return i&&p&&(m={...m}),v.useMemo(()=>{d.forEach((y,x)=>d.set(x,!1))},[n]),v.useEffect(()=>{!n&&!d.size&&r&&r()},[n]),a==="popLayout"&&(t=l.jsx(Zhe,{isPresent:n,anchorX:o,root:c,children:t})),l.jsx(e_.Provider,{value:m,children:t})};function tfe(){return new Map}function bz(t=!0){const e=v.useContext(e_);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=e,i=v.useId();v.useEffect(()=>{if(t)return s(i)},[t]);const a=v.useCallback(()=>t&&r&&r(i),[i,r,t]);return!n&&r?[!1,a]:[!0]}const ix=t=>t.key||"";function HL(t){const e=[];return v.Children.forEach(t,n=>{v.isValidElement(n)&&e.push(n)}),e}const wz=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:i="sync",propagate:a=!1,anchorX:o="left",root:c})=>{const[d,h]=bz(a),p=v.useMemo(()=>HL(t),[t]),m=a&&!d?[]:p.map(ix),y=v.useRef(!0),x=v.useRef(p),_=dP(()=>new Map),[w,N]=v.useState(p),[k,S]=v.useState(p);jU(()=>{y.current=!1,x.current=p;for(let M=0;M<k.length;M++){const P=ix(k[M]);m.includes(P)?_.delete(P):_.get(P)!==!0&&_.set(P,!1)}},[k,m.length,m.join("-")]);const O=[];if(p!==w){let M=[...p];for(let P=0;P<k.length;P++){const C=k[P],D=ix(C);m.includes(D)||(M.splice(P,0,C),O.push(C))}return i==="wait"&&O.length&&(M=O),S(HL(M)),N(p),null}const{forceRender:R}=v.useContext(uP);return l.jsx(l.Fragment,{children:k.map(M=>{const P=ix(M),C=a&&!d?!1:p===k||m.includes(P),D=()=>{if(_.has(P))_.set(P,!0);else return;let $=!0;_.forEach(F=>{F||($=!1)}),$&&(R?.(),S(x.current),a&&h?.(),r&&r())};return l.jsx(efe,{isPresent:C,initial:!y.current||n?void 0:!1,custom:e,presenceAffectsLayout:s,mode:i,root:c,onExitComplete:C?void 0:D,anchorX:o,children:M},P)})})},_z=v.createContext({strict:!1}),qL={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},hp={};for(const t in qL)hp[t]={isEnabled:e=>qL[t].some(n=>!!e[n])};function nfe(t){for(const e in t)hp[e]={...hp[e],...t[e]}}const rfe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function nw(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||rfe.has(t)}let Ez=t=>!nw(t);function sfe(t){typeof t=="function"&&(Ez=e=>e.startsWith("on")?!nw(e):t(e))}try{sfe(require("@emotion/is-prop-valid").default)}catch{}function ife(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(Ez(s)||n===!0&&nw(s)||!e&&!nw(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}const t_=v.createContext({});function n_(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function x0(t){return typeof t=="string"||Array.isArray(t)}const OP=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],MP=["initial",...OP];function r_(t){return n_(t.animate)||MP.some(e=>x0(t[e]))}function Nz(t){return!!(r_(t)||t.variants)}function afe(t,e){if(r_(t)){const{initial:n,animate:r}=t;return{initial:n===!1||x0(n)?n:void 0,animate:x0(r)?r:void 0}}return t.inherit!==!1?e:{}}function ofe(t){const{initial:e,animate:n}=afe(t,v.useContext(t_));return v.useMemo(()=>({initial:e,animate:n}),[KL(e),KL(n)])}function KL(t){return Array.isArray(t)?t.join(" "):t}const b0={};function lfe(t){for(const e in t)b0[e]=t[e],bP(e)&&(b0[e].isCSSVariable=!0)}function Sz(t,{layout:e,layoutId:n}){return Zp.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!b0[t]||t==="opacity")}const cfe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},ufe=Jp.length;function dfe(t,e,n){let r="",s=!0;for(let i=0;i<ufe;i++){const a=Jp[i],o=t[a];if(o===void 0)continue;let c=!0;if(typeof o=="number"?c=o===(a.startsWith("scale")?1:0):c=parseFloat(o)===0,!c||n){const d=pz(o,AP[a]);if(!c){s=!1;const h=cfe[a]||a;r+=`${h}(${d}) `}n&&(e[a]=d)}}return r=r.trim(),n?r=n(e,s?"":r):s&&(r="none"),r}function LP(t,e,n){const{style:r,vars:s,transformOrigin:i}=t;let a=!1,o=!1;for(const c in e){const d=e[c];if(Zp.has(c)){a=!0;continue}else if(bP(c)){s[c]=d;continue}else{const h=pz(d,AP[c]);c.startsWith("origin")?(o=!0,i[c]=h):r[c]=h}}if(e.transform||(a||n?r.transform=dfe(e,t.transform,n):r.transform&&(r.transform="none")),o){const{originX:c="50%",originY:d="50%",originZ:h=0}=i;r.transformOrigin=`${c} ${d} ${h}`}}const FP=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function kz(t,e,n){for(const r in e)!js(e[r])&&!Sz(r,n)&&(t[r]=e[r])}function hfe({transformTemplate:t},e){return v.useMemo(()=>{const n=FP();return LP(n,e,t),Object.assign({},n.vars,n.style)},[e])}function ffe(t,e){const n=t.style||{},r={};return kz(r,n,t),Object.assign(r,hfe(t,e)),r}function pfe(t,e){const n={},r=ffe(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const mfe={offset:"stroke-dashoffset",array:"stroke-dasharray"},gfe={offset:"strokeDashoffset",array:"strokeDasharray"};function yfe(t,e,n=1,r=0,s=!0){t.pathLength=1;const i=s?mfe:gfe;t[i.offset]=wt.transform(-r);const a=wt.transform(e),o=wt.transform(n);t[i.array]=`${a} ${o}`}function Tz(t,{attrX:e,attrY:n,attrScale:r,pathLength:s,pathSpacing:i=1,pathOffset:a=0,...o},c,d,h){if(LP(t,o,d),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:p,style:m}=t;p.transform&&(m.transform=p.transform,delete p.transform),(m.transform||p.transformOrigin)&&(m.transformOrigin=p.transformOrigin??"50% 50%",delete p.transformOrigin),m.transform&&(m.transformBox=h?.transformBox??"fill-box",delete p.transformBox),e!==void 0&&(p.x=e),n!==void 0&&(p.y=n),r!==void 0&&(p.scale=r),s!==void 0&&yfe(p,s,i,a,!1)}const Cz=()=>({...FP(),attrs:{}}),jz=t=>typeof t=="string"&&t.toLowerCase()==="svg";function vfe(t,e,n,r){const s=v.useMemo(()=>{const i=Cz();return Tz(i,e,jz(r),t.transformTemplate,t.style),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};kz(i,t.style,t),s.style={...i,...s.style}}return s}const xfe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function $P(t){return typeof t!="string"||t.includes("-")?!1:!!(xfe.indexOf(t)>-1||/[A-Z]/u.test(t))}function bfe(t,e,n,{latestValues:r},s,i=!1){const o=($P(t)?vfe:pfe)(e,r,s,t),c=ife(e,typeof t=="string",i),d=t!==v.Fragment?{...c,...o,ref:n}:{},{children:h}=e,p=v.useMemo(()=>js(h)?h.get():h,[h]);return v.createElement(t,{...d,children:p})}function YL(t){const e=[{},{}];return t?.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function VP(t,e,n,r){if(typeof e=="function"){const[s,i]=YL(r);e=e(n!==void 0?n:t.custom,s,i)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,i]=YL(r);e=e(n!==void 0?n:t.custom,s,i)}return e}function eb(t){return js(t)?t.get():t}function wfe({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,s){return{latestValues:_fe(n,r,s,t),renderState:e()}}function _fe(t,e,n,r){const s={},i=r(t,{});for(const m in i)s[m]=eb(i[m]);let{initial:a,animate:o}=t;const c=r_(t),d=Nz(t);e&&d&&!c&&t.inherit!==!1&&(a===void 0&&(a=e.initial),o===void 0&&(o=e.animate));let h=n?n.initial===!1:!1;h=h||a===!1;const p=h?o:a;if(p&&typeof p!="boolean"&&!n_(p)){const m=Array.isArray(p)?p:[p];for(let y=0;y<m.length;y++){const x=VP(t,m[y]);if(x){const{transitionEnd:_,transition:w,...N}=x;for(const k in N){let S=N[k];if(Array.isArray(S)){const O=h?S.length-1:0;S=S[O]}S!==null&&(s[k]=S)}for(const k in _)s[k]=_[k]}}}return s}const Pz=t=>(e,n)=>{const r=v.useContext(t_),s=v.useContext(e_),i=()=>wfe(t,e,r,s);return n?i():dP(i)};function BP(t,e,n){const{style:r}=t,s={};for(const i in r)(js(r[i])||e.style&&js(e.style[i])||Sz(i,t)||n?.getValue(i)?.liveStyle!==void 0)&&(s[i]=r[i]);return s}const Efe=Pz({scrapeMotionValuesFromProps:BP,createRenderState:FP});function Az(t,e,n){const r=BP(t,e,n);for(const s in t)if(js(t[s])||js(e[s])){const i=Jp.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[i]=t[s]}return r}const Nfe=Pz({scrapeMotionValuesFromProps:Az,createRenderState:Cz}),Sfe=Symbol.for("motionComponentSymbol");function Nf(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function kfe(t,e,n){return v.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Nf(n)&&(n.current=r))},[e])}const UP=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Tfe="framerAppearId",Iz="data-"+UP(Tfe),Dz=v.createContext({});function Cfe(t,e,n,r,s){const{visualElement:i}=v.useContext(t_),a=v.useContext(_z),o=v.useContext(e_),c=v.useContext(RP).reducedMotion,d=v.useRef(null);r=r||a.renderer,!d.current&&r&&(d.current=r(t,{visualState:e,parent:i,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:c}));const h=d.current,p=v.useContext(Dz);h&&!h.projection&&s&&(h.type==="html"||h.type==="svg")&&jfe(d.current,n,s,p);const m=v.useRef(!1);v.useInsertionEffect(()=>{h&&m.current&&h.update(n,o)});const y=n[Iz],x=v.useRef(!!y&&!window.MotionHandoffIsComplete?.(y)&&window.MotionHasOptimisedAnimation?.(y));return jU(()=>{h&&(m.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h.scheduleRenderMicrotask(),x.current&&h.animationState&&h.animationState.animateChanges())}),v.useEffect(()=>{h&&(!x.current&&h.animationState&&h.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(y)}),x.current=!1),h.enteringChildren=void 0)}),h}function jfe(t,e,n,r){const{layoutId:s,layout:i,drag:a,dragConstraints:o,layoutScroll:c,layoutRoot:d,layoutCrossfade:h}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:Rz(t.parent)),t.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!a||o&&Nf(o),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,crossfade:h,layoutScroll:c,layoutRoot:d})}function Rz(t){if(t)return t.options.allowProjection!==!1?t.projection:Rz(t.parent)}function dS(t,{forwardMotionProps:e=!1}={},n,r){n&&nfe(n);const s=$P(t)?Nfe:Efe;function i(o,c){let d;const h={...v.useContext(RP),...o,layoutId:Pfe(o)},{isStatic:p}=h,m=ofe(o),y=s(o,p);if(!p&&hP){Afe();const x=Ife(h);d=x.MeasureLayout,m.visualElement=Cfe(t,y,h,r,x.ProjectionNode)}return l.jsxs(t_.Provider,{value:m,children:[d&&m.visualElement?l.jsx(d,{visualElement:m.visualElement,...h}):null,bfe(t,o,kfe(y,m.visualElement,c),y,p,e)]})}i.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const a=v.forwardRef(i);return a[Sfe]=t,a}function Pfe({layoutId:t}){const e=v.useContext(uP).id;return e&&t!==void 0?e+"-"+t:t}function Afe(t,e){v.useContext(_z).strict}function Ife(t){const{drag:e,layout:n}=hp;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function Dfe(t,e){if(typeof Proxy>"u")return dS;const n=new Map,r=(i,a)=>dS(i,a,t,e),s=(i,a)=>r(i,a);return new Proxy(s,{get:(i,a)=>a==="create"?r:(n.has(a)||n.set(a,dS(a,void 0,t,e)),n.get(a))})}function Oz({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function Rfe({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Ofe(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function hS(t){return t===void 0||t===1}function SC({scale:t,scaleX:e,scaleY:n}){return!hS(t)||!hS(e)||!hS(n)}function sd(t){return SC(t)||Mz(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function Mz(t){return GL(t.x)||GL(t.y)}function GL(t){return t&&t!=="0%"}function rw(t,e,n){const r=t-n,s=e*r;return n+s}function QL(t,e,n,r,s){return s!==void 0&&(t=rw(t,s,r)),rw(t,n,r)+e}function kC(t,e=0,n=1,r,s){t.min=QL(t.min,e,n,r,s),t.max=QL(t.max,e,n,r,s)}function Lz(t,{x:e,y:n}){kC(t.x,e.translate,e.scale,e.originPoint),kC(t.y,n.translate,n.scale,n.originPoint)}const XL=.999999999999,JL=1.0000000000001;function Mfe(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let i,a;for(let o=0;o<s;o++){i=n[o],a=i.projectionDelta;const{visualElement:c}=i.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&kf(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,Lz(t,a)),r&&sd(i.latestValues)&&kf(t,i.latestValues))}e.x<JL&&e.x>XL&&(e.x=1),e.y<JL&&e.y>XL&&(e.y=1)}function Sf(t,e){t.min=t.min+e,t.max=t.max+e}function ZL(t,e,n,r,s=.5){const i=Yn(t.min,t.max,s);kC(t,e,n,i,r)}function kf(t,e){ZL(t.x,e.x,e.scaleX,e.scale,e.originX),ZL(t.y,e.y,e.scaleY,e.scale,e.originY)}function Fz(t,e){return Oz(Ofe(t.getBoundingClientRect(),e))}function Lfe(t,e,n){const r=Fz(t,n),{scroll:s}=e;return s&&(Sf(r.x,s.offset.x),Sf(r.y,s.offset.y)),r}const e3=()=>({translate:0,scale:1,origin:0,originPoint:0}),Tf=()=>({x:e3(),y:e3()}),t3=()=>({min:0,max:0}),cr=()=>({x:t3(),y:t3()}),TC={current:null},$z={current:!1};function Ffe(){if($z.current=!0,!!hP)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>TC.current=t.matches;t.addEventListener("change",e),e()}else TC.current=!1}const $fe=new WeakMap;function Vfe(t,e,n){for(const r in e){const s=e[r],i=n[r];if(js(s))t.addValue(r,s);else if(js(i))t.addValue(r,dp(s,{owner:t}));else if(i!==s)if(t.hasValue(r)){const a=t.getValue(r);a.liveStyle===!0?a.jump(s):a.hasAnimated||a.set(s)}else{const a=t.getStaticValue(r);t.addValue(r,dp(a!==void 0?a:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const n3=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Bfe{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:i,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=jP,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=li.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,$n.render(this.render,!1,!0))};const{latestValues:c,renderState:d}=a;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=d,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.blockInitialAnimation=!!i,this.isControllingVariants=r_(n),this.isVariantNode=Nz(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...p}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in p){const y=p[m];c[m]!==void 0&&js(y)&&y.set(c[m])}}mount(e){this.current=e,$fe.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),$z.current||Ffe(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:TC.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),ou(this.notifyUpdate),ou(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Zp.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&$n.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),i&&i(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in hp){const n=hp[e];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):cr()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<n3.length;r++){const s=n3[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,a=e[i];a&&(this.propEventSubscriptions[s]=this.on(s,a))}this.prevMotionValues=Vfe(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=dp(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(PU(r)||IU(r))?r=parseFloat(r):!Xhe(r)&&lu.test(n)&&(r=fz(e,n)),this.setBaseTarget(e,js(r)?r.get():r)),js(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const i=VP(this.props,n,this.presenceContext?.custom);i&&(r=i[e])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!js(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new yP),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){IP.render(this.render)}}class Vz extends Bfe{constructor(){super(...arguments),this.KeyframeResolver=$he}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;js(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function Bz(t,{style:e,vars:n},r,s){const i=t.style;let a;for(a in e)i[a]=e[a];s?.applyProjectionStyles(i,r);for(a in n)i.setProperty(a,n[a])}function Ufe(t){return window.getComputedStyle(t)}class zfe extends Vz{constructor(){super(...arguments),this.type="html",this.renderInstance=Bz}readValueFromInstance(e,n){if(Zp.has(n))return this.projection?.isProjecting?vC(n):she(e,n);{const r=Ufe(e),s=(bP(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return Fz(e,n)}build(e,n,r){LP(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return BP(e,n,r)}}const Uz=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Wfe(t,e,n,r){Bz(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(Uz.has(s)?s:UP(s),e.attrs[s])}class Hfe extends Vz{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=cr}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Zp.has(n)){const r=hz(n);return r&&r.default||0}return n=Uz.has(n)?n:UP(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return Az(e,n,r)}build(e,n,r){Tz(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,s){Wfe(e,n,r,s)}mount(e){this.isSVGTag=jz(e.tagName),super.mount(e)}}const qfe=(t,e)=>$P(t)?new Hfe(e):new zfe(e,{allowProjection:t!==v.Fragment});function Vf(t,e,n){const r=t.getProps();return VP(r,e,n!==void 0?n:r.custom,t)}const CC=t=>Array.isArray(t);function Kfe(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,dp(n))}function Yfe(t){return CC(t)?t[t.length-1]||0:t}function Gfe(t,e){const n=Vf(t,e);let{transitionEnd:r={},transition:s={},...i}=n||{};i={...i,...r};for(const a in i){const o=Yfe(i[a]);Kfe(t,a,o)}}function Qfe(t){return!!(js(t)&&t.add)}function jC(t,e){const n=t.getValue("willChange");if(Qfe(n))return n.add(e);if(!n&&Vl.WillChange){const r=new Vl.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function zz(t){return t.props[Iz]}const Xfe=t=>t!==null;function Jfe(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter(Xfe),i=e&&n!=="loop"&&e%2===1?0:s.length-1;return s[i]}const Zfe={type:"spring",stiffness:500,damping:25,restSpeed:10},epe=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),tpe={type:"keyframes",duration:.8},npe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},rpe=(t,{keyframes:e})=>e.length>2?tpe:Zp.has(t)?t.startsWith("scale")?epe(e[1]):Zfe:npe;function spe({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:a,repeatDelay:o,from:c,elapsed:d,...h}){return!!Object.keys(h).length}const zP=(t,e,n,r={},s,i)=>a=>{const o=PP(r,t)||{},c=o.delay||r.delay||0;let{elapsed:d=0}=r;d=d-Io(c);const h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-d,onUpdate:m=>{e.set(m),o.onUpdate&&o.onUpdate(m)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:t,motionValue:e,element:i?void 0:s};spe(o)||Object.assign(h,rpe(t,h)),h.duration&&(h.duration=Io(h.duration)),h.repeatDelay&&(h.repeatDelay=Io(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let p=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(EC(h),h.delay===0&&(p=!0)),(Vl.instantAnimations||Vl.skipAnimations)&&(p=!0,EC(h),h.delay=0),h.allowFlatten=!o.type&&!o.ease,p&&!i&&e.get()!==void 0){const m=Jfe(h.keyframes,o);if(m!==void 0){$n.update(()=>{h.onUpdate(m),h.onComplete()});return}}return o.isSync?new CP(h):new The(h)};function ipe({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function Wz(t,e,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:a,...o}=e;r&&(i=r);const c=[],d=s&&t.animationState&&t.animationState.getState()[s];for(const h in o){const p=t.getValue(h,t.latestValues[h]??null),m=o[h];if(m===void 0||d&&ipe(d,h))continue;const y={delay:n,...PP(i||{},h)},x=p.get();if(x!==void 0&&!p.isAnimating&&!Array.isArray(m)&&m===x&&!y.velocity)continue;let _=!1;if(window.MotionHandoffAnimation){const N=zz(t);if(N){const k=window.MotionHandoffAnimation(N,h,$n);k!==null&&(y.startTime=k,_=!0)}}jC(t,h),p.start(zP(h,p,m,t.shouldReduceMotion&&cz.has(h)?{type:!1}:y,t,_));const w=p.animation;w&&c.push(w)}return a&&Promise.all(c).then(()=>{$n.update(()=>{a&&Gfe(t,a)})}),c}function Hz(t,e,n,r=0,s=1){const i=Array.from(t).sort((d,h)=>d.sortNodePosition(h)).indexOf(e),a=t.size,o=(a-1)*r;return typeof n=="function"?n(i,a):s===1?i*r:o-i*r}function PC(t,e,n={}){const r=Vf(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(Wz(t,r,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:p}=s;return ape(t,e,c,d,h,p,n)}:()=>Promise.resolve(),{when:o}=s;if(o){const[c,d]=o==="beforeChildren"?[i,a]:[a,i];return c().then(()=>d())}else return Promise.all([i(),a(n.delay)])}function ape(t,e,n=0,r=0,s=0,i=1,a){const o=[];for(const c of t.variantChildren)c.notify("AnimationStart",e),o.push(PC(c,e,{...a,delay:n+(typeof r=="function"?0:r)+Hz(t.variantChildren,c,r,s,i)}).then(()=>c.notify("AnimationComplete",e)));return Promise.all(o)}function ope(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(i=>PC(t,i,n));r=Promise.all(s)}else if(typeof e=="string")r=PC(t,e,n);else{const s=typeof e=="function"?Vf(t,e,n.custom):e;r=Promise.all(Wz(t,s,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function qz(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const lpe=MP.length;function Kz(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?Kz(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<lpe;n++){const r=MP[n],s=t.props[r];(x0(s)||s===!1)&&(e[r]=s)}return e}const cpe=[...OP].reverse(),upe=OP.length;function dpe(t){return e=>Promise.all(e.map(({animation:n,options:r})=>ope(t,n,r)))}function hpe(t){let e=dpe(t),n=r3(),r=!0;const s=c=>(d,h)=>{const p=Vf(t,h,c==="exit"?t.presenceContext?.custom:void 0);if(p){const{transition:m,transitionEnd:y,...x}=p;d={...d,...x,...y}}return d};function i(c){e=c(t)}function a(c){const{props:d}=t,h=Kz(t.parent)||{},p=[],m=new Set;let y={},x=1/0;for(let w=0;w<upe;w++){const N=cpe[w],k=n[N],S=d[N]!==void 0?d[N]:h[N],O=x0(S),R=N===c?k.isActive:null;R===!1&&(x=w);let M=S===h[N]&&S!==d[N]&&O;if(M&&r&&t.manuallyAnimateOnMount&&(M=!1),k.protectedKeys={...y},!k.isActive&&R===null||!S&&!k.prevProp||n_(S)||typeof S=="boolean")continue;const P=fpe(k.prevProp,S);let C=P||N===c&&k.isActive&&!M&&O||w>x&&O,D=!1;const $=Array.isArray(S)?S:[S];let F=$.reduce(s(N),{});R===!1&&(F={});const{prevResolvedValues:U={}}=k,I={...U,...F},z=W=>{C=!0,m.has(W)&&(D=!0,m.delete(W)),k.needsAnimating[W]=!0;const K=t.getValue(W);K&&(K.liveStyle=!1)};for(const W in I){const K=F[W],Y=U[W];if(y.hasOwnProperty(W))continue;let G=!1;CC(K)&&CC(Y)?G=!qz(K,Y):G=K!==Y,G?K!=null?z(W):m.add(W):K!==void 0&&m.has(W)?z(W):k.protectedKeys[W]=!0}k.prevProp=S,k.prevResolvedValues=F,k.isActive&&(y={...y,...F}),r&&t.blockInitialAnimation&&(C=!1);const Q=M&&P;C&&(!Q||D)&&p.push(...$.map(W=>{const K={type:N};if(typeof W=="string"&&r&&!Q&&t.manuallyAnimateOnMount&&t.parent){const{parent:Y}=t,G=Vf(Y,W);if(Y.enteringChildren&&G){const{delayChildren:q}=G.transition||{};K.delay=Hz(Y.enteringChildren,t,q)}}return{animation:W,options:K}}))}if(m.size){const w={};if(typeof d.initial!="boolean"){const N=Vf(t,Array.isArray(d.initial)?d.initial[0]:d.initial);N&&N.transition&&(w.transition=N.transition)}m.forEach(N=>{const k=t.getBaseTarget(N),S=t.getValue(N);S&&(S.liveStyle=!0),w[N]=k??null}),p.push({animation:w})}let _=!!p.length;return r&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(_=!1),r=!1,_?e(p):Promise.resolve()}function o(c,d){if(n[c].isActive===d)return Promise.resolve();t.variantChildren?.forEach(p=>p.animationState?.setActive(c,d)),n[c].isActive=d;const h=a(c);for(const p in n)n[p].protectedKeys={};return h}return{animateChanges:a,setActive:o,setAnimateFunction:i,getState:()=>n,reset:()=>{n=r3(),r=!0}}}function fpe(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!qz(e,t):!1}function Qu(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function r3(){return{animate:Qu(!0),whileInView:Qu(),whileHover:Qu(),whileTap:Qu(),whileDrag:Qu(),whileFocus:Qu(),exit:Qu()}}class wu{constructor(e){this.isMounted=!1,this.node=e}update(){}}class ppe extends wu{constructor(e){super(e),e.animationState||(e.animationState=hpe(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();n_(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let mpe=0;class gpe extends wu{constructor(){super(...arguments),this.id=mpe++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const ype={animation:{Feature:ppe},exit:{Feature:gpe}};function w0(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function ly(t){return{point:{x:t.pageX,y:t.pageY}}}const vpe=t=>e=>DP(e)&&t(e,ly(e));function zg(t,e,n,r){return w0(t,e,vpe(n),r)}const Yz=1e-4,xpe=1-Yz,bpe=1+Yz,Gz=.01,wpe=0-Gz,_pe=0+Gz;function Vs(t){return t.max-t.min}function Epe(t,e,n){return Math.abs(t-e)<=n}function s3(t,e,n,r=.5){t.origin=r,t.originPoint=Yn(e.min,e.max,t.origin),t.scale=Vs(n)/Vs(e),t.translate=Yn(n.min,n.max,t.origin)-t.originPoint,(t.scale>=xpe&&t.scale<=bpe||isNaN(t.scale))&&(t.scale=1),(t.translate>=wpe&&t.translate<=_pe||isNaN(t.translate))&&(t.translate=0)}function Wg(t,e,n,r){s3(t.x,e.x,n.x,r?r.originX:void 0),s3(t.y,e.y,n.y,r?r.originY:void 0)}function i3(t,e,n){t.min=n.min+e.min,t.max=t.min+Vs(e)}function Npe(t,e,n){i3(t.x,e.x,n.x),i3(t.y,e.y,n.y)}function a3(t,e,n){t.min=e.min-n.min,t.max=t.min+Vs(e)}function Hg(t,e,n){a3(t.x,e.x,n.x),a3(t.y,e.y,n.y)}function sa(t){return[t("x"),t("y")]}const Qz=({current:t})=>t?t.ownerDocument.defaultView:null,o3=(t,e)=>Math.abs(t-e);function Spe(t,e){const n=o3(t.x,e.x),r=o3(t.y,e.y);return Math.sqrt(n**2+r**2)}class Xz{constructor(e,n,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:i=!1,distanceThreshold:a=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=pS(this.lastMoveEventInfo,this.history),y=this.startEvent!==null,x=Spe(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!y&&!x)return;const{point:_}=m,{timestamp:w}=as;this.history.push({..._,timestamp:w});const{onStart:N,onMove:k}=this.handlers;y||(N&&N(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),k&&k(this.lastMoveEvent,m)},this.handlePointerMove=(m,y)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=fS(y,this.transformPagePoint),$n.update(this.updatePoint,!0)},this.handlePointerUp=(m,y)=>{this.end();const{onEnd:x,onSessionEnd:_,resumeAnimation:w}=this.handlers;if(this.dragSnapToOrigin&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const N=pS(m.type==="pointercancel"?this.lastMoveEventInfo:fS(y,this.transformPagePoint),this.history);this.startEvent&&x&&x(m,N),_&&_(m,N)},!DP(e))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=a,this.contextWindow=s||window;const o=ly(e),c=fS(o,this.transformPagePoint),{point:d}=c,{timestamp:h}=as;this.history=[{...d,timestamp:h}];const{onSessionStart:p}=n;p&&p(e,pS(c,this.history)),this.removeListeners=iy(zg(this.contextWindow,"pointermove",this.handlePointerMove),zg(this.contextWindow,"pointerup",this.handlePointerUp),zg(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ou(this.updatePoint)}}function fS(t,e){return e?{point:e(t.point)}:t}function l3(t,e){return{x:t.x-e.x,y:t.y-e.y}}function pS({point:t},e){return{point:t,delta:l3(t,Jz(e)),offset:l3(t,kpe(e)),velocity:Tpe(e,.1)}}function kpe(t){return t[0]}function Jz(t){return t[t.length-1]}function Tpe(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=Jz(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>Io(e)));)n--;if(!r)return{x:0,y:0};const i=Do(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const a={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function Cpe(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Yn(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Yn(n,t,r.max):Math.min(t,n)),t}function c3(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function jpe(t,{top:e,left:n,bottom:r,right:s}){return{x:c3(t.x,n,s),y:c3(t.y,e,r)}}function u3(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function Ppe(t,e){return{x:u3(t.x,e.x),y:u3(t.y,e.y)}}function Ape(t,e){let n=.5;const r=Vs(t),s=Vs(e);return s>r?n=g0(e.min,e.max-r,t.min):r>s&&(n=g0(t.min,t.max-s,e.min)),$l(0,1,n)}function Ipe(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const AC=.35;function Dpe(t=AC){return t===!1?t=0:t===!0&&(t=AC),{x:d3(t,"left","right"),y:d3(t,"top","bottom")}}function d3(t,e,n){return{min:h3(t,e),max:h3(t,n)}}function h3(t,e){return typeof t=="number"?t:t[e]||0}const Rpe=new WeakMap;class Ope{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=cr(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const i=p=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(ly(p).point)},a=(p,m)=>{const{drag:y,dragPropagation:x,onDragStart:_}=this.getProps();if(y&&!x&&(this.openDragLock&&this.openDragLock(),this.openDragLock=zhe(y),!this.openDragLock))return;this.latestPointerEvent=p,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),sa(N=>{let k=this.getAxisMotionValue(N).get()||0;if(Ro.test(k)){const{projection:S}=this.visualElement;if(S&&S.layout){const O=S.layout.layoutBox[N];O&&(k=Vs(O)*(parseFloat(k)/100))}}this.originPoint[N]=k}),_&&$n.postRender(()=>_(p,m)),jC(this.visualElement,"transform");const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},o=(p,m)=>{this.latestPointerEvent=p,this.latestPanInfo=m;const{dragPropagation:y,dragDirectionLock:x,onDirectionLock:_,onDrag:w}=this.getProps();if(!y&&!this.openDragLock)return;const{offset:N}=m;if(x&&this.currentDirection===null){this.currentDirection=Mpe(N),this.currentDirection!==null&&_&&_(this.currentDirection);return}this.updateAxis("x",m.point,N),this.updateAxis("y",m.point,N),this.visualElement.render(),w&&w(p,m)},c=(p,m)=>{this.latestPointerEvent=p,this.latestPanInfo=m,this.stop(p,m),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>sa(p=>this.getAnimationState(p)==="paused"&&this.getAxisMotionValue(p).animation?.play()),{dragSnapToOrigin:h}=this.getProps();this.panSession=new Xz(e,{onSessionStart:i,onStart:a,onMove:o,onSessionEnd:c,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,distanceThreshold:r,contextWindow:Qz(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,s=n||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!s||!r)return;const{velocity:a}=s;this.startAnimation(a);const{onDragEnd:o}=this.getProps();o&&$n.postRender(()=>o(r,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!ax(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let a=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(a=Cpe(a,this.constraints[e],this.elastic[e])),i.set(a)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,s=this.constraints;e&&Nf(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=jpe(r.layoutBox,e):this.constraints=!1,this.elastic=Dpe(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&sa(i=>{this.constraints!==!1&&this.getAxisMotionValue(i)&&(this.constraints[i]=Ipe(r.layoutBox[i],this.constraints[i]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Nf(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=Lfe(r,s.root,this.visualElement.getTransformPagePoint());let a=Ppe(s.layout.layoutBox,i);if(n){const o=n(Rfe(a));this.hasMutatedConstraints=!!o,o&&(a=Oz(o))}return a}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),c=this.constraints||{},d=sa(h=>{if(!ax(h,n,this.currentDirection))return;let p=c&&c[h]||{};a&&(p={min:0,max:0});const m=s?200:1e6,y=s?40:1e7,x={type:"inertia",velocity:r?e[h]:0,bounceStiffness:m,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...i,...p};return this.startAxisValueAnimation(h,x)});return Promise.all(d).then(o)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return jC(this.visualElement,e),r.start(zP(e,r,0,n,this.visualElement,!1))}stopAnimation(){sa(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){sa(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){sa(n=>{const{drag:r}=this.getProps();if(!ax(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:a,max:o}=s.layout.layoutBox[n];i.set(e[n]-Yn(a,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Nf(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};sa(a=>{const o=this.getAxisMotionValue(a);if(o&&this.constraints!==!1){const c=o.get();s[a]=Ape({min:c,max:c},this.constraints[a])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),sa(a=>{if(!ax(a,e,null))return;const o=this.getAxisMotionValue(a),{min:c,max:d}=this.constraints[a];o.set(Yn(c,d,s[a]))})}addListeners(){if(!this.visualElement.current)return;Rpe.set(this.visualElement,this);const e=this.visualElement.current,n=zg(e,"pointerdown",c=>{const{drag:d,dragListener:h=!0}=this.getProps();d&&h&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();Nf(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),$n.read(r);const a=w0(window,"resize",()=>this.scalePositionWithinConstraints()),o=s.addEventListener("didUpdate",(({delta:c,hasLayoutChanged:d})=>{this.isDragging&&d&&(sa(h=>{const p=this.getAxisMotionValue(h);p&&(this.originPoint[h]+=c[h].translate,p.set(p.get()+c[h].translate))}),this.visualElement.render())}));return()=>{a(),n(),i(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:a=AC,dragMomentum:o=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:a,dragMomentum:o}}}function ax(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function Mpe(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class Lpe extends wu{constructor(e){super(e),this.removeGroupControls=ha,this.removeListeners=ha,this.controls=new Ope(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ha}unmount(){this.removeGroupControls(),this.removeListeners()}}const f3=t=>(e,n)=>{t&&$n.postRender(()=>t(e,n))};class Fpe extends wu{constructor(){super(...arguments),this.removePointerDownListener=ha}onPointerDown(e){this.session=new Xz(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Qz(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:f3(e),onStart:f3(n),onMove:r,onEnd:(i,a)=>{delete this.session,s&&$n.postRender(()=>s(i,a))}}}mount(){this.removePointerDownListener=zg(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const tb={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function p3(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const sg={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(wt.test(t))t=parseFloat(t);else return t;const n=p3(t,e.target.x),r=p3(t,e.target.y);return`${n}% ${r}%`}},$pe={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=lu.parse(t);if(s.length>5)return r;const i=lu.createTransformer(t),a=typeof s[0]!="number"?1:0,o=n.x.scale*e.x,c=n.y.scale*e.y;s[0+a]/=o,s[1+a]/=c;const d=Yn(o,c,.5);return typeof s[2+a]=="number"&&(s[2+a]/=d),typeof s[3+a]=="number"&&(s[3+a]/=d),i(s)}};let mS=!1;class Vpe extends v.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=e;lfe(Bpe),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),mS&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),tb.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,{projection:a}=r;return a&&(a.isPresent=i,mS=!0,s||e.layoutDependency!==n||n===void 0||e.isPresent!==i?a.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?a.promote():a.relegate()||$n.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),IP.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;mS=!0,s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Zz(t){const[e,n]=bz(),r=v.useContext(uP);return l.jsx(Vpe,{...t,layoutGroup:r,switchLayoutGroup:v.useContext(Dz),isPresent:e,safeToRemove:n})}const Bpe={borderRadius:{...sg,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:sg,borderTopRightRadius:sg,borderBottomLeftRadius:sg,borderBottomRightRadius:sg,boxShadow:$pe};function Upe(t,e,n){const r=js(t)?t:dp(t);return r.start(zP("",r,e,n)),r.animation}const zpe=(t,e)=>t.depth-e.depth;class Wpe{constructor(){this.children=[],this.isDirty=!1}add(e){fP(this.children,e),this.isDirty=!0}remove(e){pP(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(zpe),this.isDirty=!1,this.children.forEach(e)}}function Hpe(t,e){const n=li.now(),r=({timestamp:s})=>{const i=s-n;i>=e&&(ou(r),t(i-e))};return $n.setup(r,!0),()=>ou(r)}const eW=["TopLeft","TopRight","BottomLeft","BottomRight"],qpe=eW.length,m3=t=>typeof t=="string"?parseFloat(t):t,g3=t=>typeof t=="number"||wt.test(t);function Kpe(t,e,n,r,s,i){s?(t.opacity=Yn(0,n.opacity??1,Ype(r)),t.opacityExit=Yn(e.opacity??1,0,Gpe(r))):i&&(t.opacity=Yn(e.opacity??1,n.opacity??1,r));for(let a=0;a<qpe;a++){const o=`border${eW[a]}Radius`;let c=y3(e,o),d=y3(n,o);if(c===void 0&&d===void 0)continue;c||(c=0),d||(d=0),c===0||d===0||g3(c)===g3(d)?(t[o]=Math.max(Yn(m3(c),m3(d),r),0),(Ro.test(d)||Ro.test(c))&&(t[o]+="%")):t[o]=d}(e.rotate||n.rotate)&&(t.rotate=Yn(e.rotate||0,n.rotate||0,r))}function y3(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const Ype=tW(0,.5,VU),Gpe=tW(.5,.95,ha);function tW(t,e,n){return r=>r<t?0:r>e?1:n(g0(t,e,r))}function v3(t,e){t.min=e.min,t.max=e.max}function ea(t,e){v3(t.x,e.x),v3(t.y,e.y)}function x3(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function b3(t,e,n,r,s){return t-=e,t=rw(t,1/n,r),s!==void 0&&(t=rw(t,1/s,r)),t}function Qpe(t,e=0,n=1,r=.5,s,i=t,a=t){if(Ro.test(e)&&(e=parseFloat(e),e=Yn(a.min,a.max,e/100)-a.min),typeof e!="number")return;let o=Yn(i.min,i.max,r);t===i&&(o-=e),t.min=b3(t.min,e,n,o,s),t.max=b3(t.max,e,n,o,s)}function w3(t,e,[n,r,s],i,a){Qpe(t,e[n],e[r],e[s],e.scale,i,a)}const Xpe=["x","scaleX","originX"],Jpe=["y","scaleY","originY"];function _3(t,e,n,r){w3(t.x,e,Xpe,n?n.x:void 0,r?r.x:void 0),w3(t.y,e,Jpe,n?n.y:void 0,r?r.y:void 0)}function E3(t){return t.translate===0&&t.scale===1}function nW(t){return E3(t.x)&&E3(t.y)}function N3(t,e){return t.min===e.min&&t.max===e.max}function Zpe(t,e){return N3(t.x,e.x)&&N3(t.y,e.y)}function S3(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function rW(t,e){return S3(t.x,e.x)&&S3(t.y,e.y)}function k3(t){return Vs(t.x)/Vs(t.y)}function T3(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class eme{constructor(){this.members=[]}add(e){fP(this.members,e),e.scheduleRender()}remove(e){if(pP(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function tme(t,e,n){let r="";const s=t.x.translate/e.x,i=t.y.translate/e.y,a=n?.z||0;if((s||i||a)&&(r=`translate3d(${s}px, ${i}px, ${a}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:d,rotate:h,rotateX:p,rotateY:m,skewX:y,skewY:x}=n;d&&(r=`perspective(${d}px) ${r}`),h&&(r+=`rotate(${h}deg) `),p&&(r+=`rotateX(${p}deg) `),m&&(r+=`rotateY(${m}deg) `),y&&(r+=`skewX(${y}deg) `),x&&(r+=`skewY(${x}deg) `)}const o=t.x.scale*e.x,c=t.y.scale*e.y;return(o!==1||c!==1)&&(r+=`scale(${o}, ${c})`),r||"none"}const gS=["","X","Y","Z"],nme=1e3;let rme=0;function yS(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function sW(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=zz(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",$n,!(s||i))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&sW(r)}function iW({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(a={},o=e?.()){this.id=rme++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(ame),this.nodes.forEach(ume),this.nodes.forEach(dme),this.nodes.forEach(ome)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new Wpe)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new yP),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const c=this.eventHandlers.get(a);c&&c.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=xz(a)&&!Ghe(a),this.instance=a;const{layoutId:o,layout:c,visualElement:d}=this.options;if(d&&!d.current&&d.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||o)&&(this.isLayoutDirty=!0),t){let h,p=0;const m=()=>this.root.updateBlockedByResize=!1;$n.read(()=>{p=window.innerWidth}),t(a,()=>{const y=window.innerWidth;y!==p&&(p=y,this.root.updateBlockedByResize=!0,h&&h(),h=Hpe(m,250),tb.hasAnimatedSinceResize&&(tb.hasAnimatedSinceResize=!1,this.nodes.forEach(P3)))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&d&&(o||c)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:p,hasRelativeLayoutChanged:m,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||d.getDefaultTransition()||gme,{onLayoutAnimationStart:_,onLayoutAnimationComplete:w}=d.getProps(),N=!this.targetLayout||!rW(this.targetLayout,y),k=!p&&m;if(this.options.layoutRoot||this.resumeFrom||k||p&&(N||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const S={...PP(x,"layout"),onPlay:_,onComplete:w};(d.shouldReduceMotion||this.options.layoutRoot)&&(S.delay=0,S.type=!1),this.startAnimation(S),this.setAnimationOrigin(h,k)}else p||P3(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),ou(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(hme),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&sW(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const p=this.path[h];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:o,layout:c}=this.options;if(o===void 0&&!c)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(C3);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(j3);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(cme),this.nodes.forEach(sme),this.nodes.forEach(ime)):this.nodes.forEach(j3),this.clearAllSnapshots();const o=li.now();as.delta=$l(0,1e3/60,o-as.timestamp),as.timestamp=o,as.isProcessing=!0,iS.update.process(as),iS.preRender.process(as),iS.render.process(as),as.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,IP.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(lme),this.sharedNodes.forEach(fme)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,$n.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){$n.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Vs(this.snapshot.measuredBox.x)&&!Vs(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=cr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!s)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!nW(this.projectionDelta),c=this.getTransformTemplate(),d=c?c(this.latestValues,""):void 0,h=d!==this.prevTransformTemplateValue;a&&this.instance&&(o||sd(this.latestValues)||h)&&(s(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let c=this.removeElementScroll(o);return a&&(c=this.removeTransform(c)),yme(c),{animationId:this.root.animationId,measuredBox:o,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return cr();const o=a.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(vme))){const{scroll:d}=this.root;d&&(Sf(o.x,d.offset.x),Sf(o.y,d.offset.y))}return o}removeElementScroll(a){const o=cr();if(ea(o,a),this.scroll?.wasRoot)return o;for(let c=0;c<this.path.length;c++){const d=this.path[c],{scroll:h,options:p}=d;d!==this.root&&h&&p.layoutScroll&&(h.wasRoot&&ea(o,a),Sf(o.x,h.offset.x),Sf(o.y,h.offset.y))}return o}applyTransform(a,o=!1){const c=cr();ea(c,a);for(let d=0;d<this.path.length;d++){const h=this.path[d];!o&&h.options.layoutScroll&&h.scroll&&h!==h.root&&kf(c,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),sd(h.latestValues)&&kf(c,h.latestValues)}return sd(this.latestValues)&&kf(c,this.latestValues),c}removeTransform(a){const o=cr();ea(o,a);for(let c=0;c<this.path.length;c++){const d=this.path[c];if(!d.instance||!sd(d.latestValues))continue;SC(d.latestValues)&&d.updateSnapshot();const h=cr(),p=d.measurePageBox();ea(h,p),_3(o,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,h)}return sd(this.latestValues)&&_3(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==as.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==o;if(!(a||c&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:p}=this.options;if(!(!this.layout||!(h||p))){if(this.resolvedRelativeTargetAt=as.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=cr(),this.relativeTargetOrigin=cr(),Hg(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),ea(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=cr(),this.targetWithTransforms=cr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Npe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ea(this.target,this.layout.layoutBox),Lz(this.target,this.targetDelta)):ea(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=cr(),this.relativeTargetOrigin=cr(),Hg(this.relativeTargetOrigin,this.target,m.target),ea(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||SC(this.parent.latestValues)||Mz(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const a=this.getLead(),o=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(c=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===as.timestamp&&(c=!1),c)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;ea(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,m=this.treeScale.y;Mfe(this.layoutCorrected,this.treeScale,this.path,o),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=cr());const{target:y}=a;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(x3(this.prevProjectionDelta.x,this.projectionDelta.x),x3(this.prevProjectionDelta.y,this.projectionDelta.y)),Wg(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==m||!T3(this.projectionDelta.x,this.prevProjectionDelta.x)||!T3(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.visualElement?.scheduleRender(),a){const o=this.getStack();o&&o.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Tf(),this.projectionDelta=Tf(),this.projectionDeltaWithTransform=Tf()}setAnimationOrigin(a,o=!1){const c=this.snapshot,d=c?c.latestValues:{},h={...this.latestValues},p=Tf();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const m=cr(),y=c?c.source:void 0,x=this.layout?this.layout.source:void 0,_=y!==x,w=this.getStack(),N=!w||w.members.length<=1,k=!!(_&&!N&&this.options.crossfade===!0&&!this.path.some(mme));this.animationProgress=0;let S;this.mixTargetDelta=O=>{const R=O/1e3;A3(p.x,a.x,R),A3(p.y,a.y,R),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Hg(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),pme(this.relativeTarget,this.relativeTargetOrigin,m,R),S&&Zpe(this.relativeTarget,S)&&(this.isProjectionDirty=!1),S||(S=cr()),ea(S,this.relativeTarget)),_&&(this.animationValues=h,Kpe(h,d,this.latestValues,R,k,N)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=R},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(ou(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=$n.update(()=>{tb.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=dp(0)),this.currentAnimation=Upe(this.motionValue,[0,1e3],{...a,velocity:0,isSync:!0,onUpdate:o=>{this.mixTargetDelta(o),a.onUpdate&&a.onUpdate(o)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(nme),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:c,layout:d,latestValues:h}=a;if(!(!o||!c||!d)){if(this!==a&&this.layout&&d&&aW(this.options.animationType,this.layout.layoutBox,d.layoutBox)){c=this.target||cr();const p=Vs(this.layout.layoutBox.x);c.x.min=a.target.x.min,c.x.max=c.x.min+p;const m=Vs(this.layout.layoutBox.y);c.y.min=a.target.y.min,c.y.max=c.y.min+m}ea(o,c),kf(o,h),Wg(this.projectionDeltaWithTransform,this.layoutCorrected,o,h)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new eme),this.sharedNodes.get(a).add(o);const d=o.options.initialPromotionConfig;o.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){const{layoutId:a}=this.options;return a?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:a}=this.options;return a?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:c}={}){const d=this.getStack();d&&d.promote(this,c),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:c}=a;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(o=!0),!o)return;const d={};c.z&&yS("z",a,d,this.animationValues);for(let h=0;h<gS.length;h++)yS(`rotate${gS[h]}`,a,d,this.animationValues),yS(`skew${gS[h]}`,a,d,this.animationValues);a.render();for(const h in d)a.setStaticValue(h,d[h]),this.animationValues&&(this.animationValues[h]=d[h]);a.scheduleRender()}applyProjectionStyles(a,o){if(!this.instance||this.isSVG)return;if(!this.isVisible){a.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,a.visibility="",a.opacity="",a.pointerEvents=eb(o?.pointerEvents)||"",a.transform=c?c(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(a.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,a.pointerEvents=eb(o?.pointerEvents)||""),this.hasProjected&&!sd(this.latestValues)&&(a.transform=c?c({},""):"none",this.hasProjected=!1);return}a.visibility="";const h=d.animationValues||d.latestValues;this.applyTransformsToTarget();let p=tme(this.projectionDeltaWithTransform,this.treeScale,h);c&&(p=c(h,p)),a.transform=p;const{x:m,y}=this.projectionDelta;a.transformOrigin=`${m.origin*100}% ${y.origin*100}% 0`,d.animationValues?a.opacity=d===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:a.opacity=d===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const x in b0){if(h[x]===void 0)continue;const{correct:_,applyTo:w,isCSSVariable:N}=b0[x],k=p==="none"?h[x]:_(h[x],d);if(w){const S=w.length;for(let O=0;O<S;O++)a[w[O]]=k}else N?this.options.visualElement.renderState.vars[x]=k:a[x]=k}this.options.layoutId&&(a.pointerEvents=d===this?eb(o?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>a.currentAnimation?.stop()),this.root.nodes.forEach(C3),this.root.sharedNodes.clear()}}}function sme(t){t.updateLayout()}function ime(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=t.layout,{animationType:s}=t.options,i=e.source!==t.layout.source;s==="size"?sa(h=>{const p=i?e.measuredBox[h]:e.layoutBox[h],m=Vs(p);p.min=n[h].min,p.max=p.min+m}):aW(s,e.layoutBox,n)&&sa(h=>{const p=i?e.measuredBox[h]:e.layoutBox[h],m=Vs(n[h]);p.max=p.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+m)});const a=Tf();Wg(a,n,e.layoutBox);const o=Tf();i?Wg(o,t.applyTransform(r,!0),e.measuredBox):Wg(o,n,e.layoutBox);const c=!nW(a);let d=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:p,layout:m}=h;if(p&&m){const y=cr();Hg(y,e.layoutBox,p.layoutBox);const x=cr();Hg(x,n,m.layoutBox),rW(y,x)||(d=!0),h.options.layoutRoot&&(t.relativeTarget=x,t.relativeTargetOrigin=y,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:o,layoutDelta:a,hasLayoutChanged:c,hasRelativeLayoutChanged:d})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function ame(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function ome(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function lme(t){t.clearSnapshot()}function C3(t){t.clearMeasurements()}function j3(t){t.isLayoutDirty=!1}function cme(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function P3(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function ume(t){t.resolveTargetDelta()}function dme(t){t.calcProjection()}function hme(t){t.resetSkewAndRotation()}function fme(t){t.removeLeadSnapshot()}function A3(t,e,n){t.translate=Yn(e.translate,0,n),t.scale=Yn(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function I3(t,e,n,r){t.min=Yn(e.min,n.min,r),t.max=Yn(e.max,n.max,r)}function pme(t,e,n,r){I3(t.x,e.x,n.x,r),I3(t.y,e.y,n.y,r)}function mme(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const gme={duration:.45,ease:[.4,0,.1,1]},D3=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),R3=D3("applewebkit/")&&!D3("chrome/")?Math.round:ha;function O3(t){t.min=R3(t.min),t.max=R3(t.max)}function yme(t){O3(t.x),O3(t.y)}function aW(t,e,n){return t==="position"||t==="preserve-aspect"&&!Epe(k3(e),k3(n),.2)}function vme(t){return t!==t.root&&t.scroll?.wasRoot}const xme=iW({attachResizeListener:(t,e)=>w0(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),vS={current:void 0},oW=iW({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!vS.current){const t=new xme({});t.mount(window),t.setOptions({layoutScroll:!0}),vS.current=t}return vS.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),bme={pan:{Feature:Fpe},drag:{Feature:Lpe,ProjectionNode:oW,MeasureLayout:Zz}};function M3(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,i=r[s];i&&$n.postRender(()=>i(e,ly(e)))}class wme extends wu{mount(){const{current:e}=this.node;e&&(this.unmount=Whe(e,(n,r)=>(M3(this.node,r,"Start"),s=>M3(this.node,s,"End"))))}unmount(){}}class _me extends wu{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=iy(w0(this.node.current,"focus",()=>this.onFocus()),w0(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function L3(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),i=r[s];i&&$n.postRender(()=>i(e,ly(e)))}class Eme extends wu{mount(){const{current:e}=this.node;e&&(this.unmount=Yhe(e,(n,r)=>(L3(this.node,r,"Start"),(s,{success:i})=>L3(this.node,s,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const IC=new WeakMap,xS=new WeakMap,Nme=t=>{const e=IC.get(t.target);e&&e(t)},Sme=t=>{t.forEach(Nme)};function kme({root:t,...e}){const n=t||document;xS.has(n)||xS.set(n,{});const r=xS.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(Sme,{root:t,...e})),r[s]}function Tme(t,e,n){const r=kme(e);return IC.set(t,n),r.observe(t),()=>{IC.delete(t),r.unobserve(t)}}const Cme={some:0,all:1};class jme extends wu{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=e,a={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:Cme[s]},o=c=>{const{isIntersecting:d}=c;if(this.isInView===d||(this.isInView=d,i&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:h,onViewportLeave:p}=this.node.getProps(),m=d?h:p;m&&m(c)};return Tme(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(Pme(e,n))&&this.startObserver()}unmount(){}}function Pme({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const Ame={inView:{Feature:jme},tap:{Feature:Eme},focus:{Feature:_me},hover:{Feature:wme}},Ime={layout:{ProjectionNode:oW,MeasureLayout:Zz}},Dme={...ype,...Ame,...bme,...Ime},Ri=Dfe(Dme,qfe);function Rme(){return l.jsxs("section",{id:"intro",className:"relative overflow-hidden",style:{backgroundImage:"url('/images/hero.jpg')",backgroundSize:"cover",backgroundPosition:"center"},children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/50 via-black/30 to-white/90 dark:to-gray-900/90"}),l.jsxs("div",{className:"relative mx-auto flex max-w-7xl flex-col items-center px-6 py-28 text-center text-white",children:[l.jsxs(Ri.h1,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},className:"text-4xl font-extrabold leading-tight md:text-6xl",children:["Run Your Projects Faster with ",l.jsx("span",{className:"text-brand",children:"Nexora"})]}),l.jsx(Ri.p,{initial:{opacity:0,y:10},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:.1},className:"mt-4 max-w-2xl text-lg text-white/90",children:"Plan, assign, and track work in one place. Easy to, real-time collaboration, zero fluff."}),l.jsxs(Ri.ul,{initial:{opacity:0,y:10},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:.2},className:"mt-6 max-w-2xl text-base text-white/80 space-y-2",children:[l.jsxs("li",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-brand",children:"✓"})," Secure role-based access control for teams"]}),l.jsxs("li",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-brand",children:"✓"})," Real-time notifications and collaborative tools"]}),l.jsxs("li",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-brand",children:"✓"})," Comprehensive analytics and reporting features"]})]}),l.jsxs(Ri.div,{initial:{opacity:0,y:8},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:.2},className:"mt-8 flex flex-col gap-3 sm:flex-row",children:[l.jsx("a",{href:"#cta",className:"rounded-lg bg-brand px-6 py-3 font-semibold text-white shadow-lg hover:brightness-110",children:"Get Started Free"}),l.jsx("a",{href:"#features",className:"rounded-lg border border-white/60 px-6 py-3 font-semibold backdrop-blur hover:bg-white/10",children:"Explore Features"})]}),l.jsx("div",{className:"pointer-events-none absolute -left-16 top-10 h-48 w-48 rounded-full bg-brand/40 blur-3xl"}),l.jsx("div",{className:"pointer-events-none absolute -right-16 bottom-10 h-56 w-56 rounded-full bg-brand/30 blur-3xl"})]})]})}const F3=[{key:"productivity",title:"Productivity",desc:"Kanban boards, priorities, due dates, dependencies — the works.",bullets:["Drag & drop tasks","Labels & priorities","Recurring tasks","Time tracking","Gantt charts","Resource allocation"],image:"/images/feature-productivity.png"},{key:"security",title:"Security",desc:"Role-based access and secure data practices built-in.",bullets:["RBAC by facility","SSO-ready design","Audit-friendly logs","Data encryption","Two-factor authentication","Compliance standards"],image:"/images/feature-security.jpg"},{key:"collab",title:"Collaboration",desc:"Comments, mentions, notes, and notifications that matter.",bullets:["Mentions & comments","Email & in-app alerts","Shared notes","Video calls","File sharing","Team calendars"],image:"/images/feature-collab.png"}];function Ome(){const[t,e]=v.useState(F3[0]);return l.jsx("section",{id:"features",className:"bg-white py-20 dark:bg-gray-950",children:l.jsxs("div",{className:"mx-auto max-w-7xl px-6",children:[l.jsxs("div",{className:"mb-10 text-center",children:[l.jsxs("h2",{className:"text-3xl font-bold md:text-4xl",children:["Features that move teams ",l.jsx("span",{className:"text-brand",children:"forward"})]}),l.jsx("p",{className:"mt-3 text-gray-600 dark:text-gray-400",children:"Everything you need to plan, execute, and deliver."})]}),l.jsx("div",{className:"flex flex-wrap justify-center gap-3",children:F3.map(n=>{const r=t.key===n.key;return l.jsx("button",{onClick:()=>e(n),className:`rounded-full px-5 py-2 text-sm font-semibold transition ${r?"bg-brand text-white shadow":"border border-gray-300 text-gray-700 hover:bg-gray-100 dark:border-gray-700 dark:text-gray-200 dark:hover:bg-gray-900"}`,children:n.title},n.key)})}),l.jsx("div",{className:"mt-10 grid items-center gap-8 md:grid-cols-2",children:l.jsxs(wz,{mode:"wait",children:[l.jsxs(Ri.div,{initial:{opacity:0,x:-12},animate:{opacity:1,x:0},exit:{opacity:0,x:-12},transition:{duration:.3},className:"order-2 md:order-1",children:[l.jsx("h3",{className:"text-2xl font-bold",children:t.title}),l.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-300",children:t.desc}),l.jsx("ul",{className:"mt-4 space-y-2",children:t.bullets.map(n=>l.jsxs("li",{className:"flex items-start gap-3",children:[l.jsx("span",{className:"mt-1 inline-flex h-5 w-5 items-center justify-center rounded-full bg-brand text-white",children:"✓"}),l.jsx("span",{className:"text-gray-700 dark:text-gray-200",children:n})]},n))})]},t.key+"-copy"),l.jsx(Ri.div,{initial:{opacity:0,x:12},animate:{opacity:1,x:0},exit:{opacity:0,x:12},transition:{duration:.3},className:"order-1 md:order-2",children:l.jsxs("div",{className:"rounded-2xl border border-gray-200 bg-neutral-light p-3 shadow-sm dark:border-gray-800 dark:bg-gray-900",children:[t.image?l.jsx("img",{src:t.image,onError:n=>n.currentTarget.style.display="none",alt:t.title,className:"rounded-xl"}):null,!t.image&&l.jsx("div",{className:"aspect-[16/9] w-full rounded-xl bg-gradient-to-br from-brand/10 to-brand/30"})]})},t.key+"-image")]})})]})})}function Mme(){const t=[{title:"Create your facility",text:"Spin up a workspace in seconds."},{title:"Invite your team",text:"Assign roles and permissions that make sense."},{title:"Plan & execute",text:"Track tasks, deadlines, and progress effortlessly."},{title:"Monitor & optimize",text:"Use analytics to improve performance and deliver better results."}];return l.jsx("section",{id:"steps",className:"py-20 bg-neutral-light dark:bg-gray-900",children:l.jsxs("div",{className:"mx-auto max-w-7xl px-6",children:[l.jsxs("div",{className:"mb-10 text-center",children:[l.jsx("h2",{className:"text-3xl font-bold md:text-4xl",children:"From zero to shipped in 3 steps"}),l.jsx("p",{className:"mt-3 text-gray-600 dark:text-gray-400",children:"No guesswork. Just a clear path from idea to delivery."})]}),l.jsxs("div",{className:"grid items-center gap-8 rounded-2xl bg-white p-6 shadow-md dark:bg-gray-950",children:[l.jsxs("div",{className:"grid gap-8 md:grid-cols-2",children:[l.jsx(Ri.img,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},src:"/images/steps.jpg",alt:"Nexora overview",className:"rounded-xl object-cover",onError:e=>e.currentTarget.style.display="none"}),l.jsx("div",{className:"grid gap-6",children:t.map((e,n)=>l.jsxs(Ri.div,{initial:{opacity:0,x:20},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.4,delay:.1*n},className:"border-b border-gray-200 pb-6 last:border-0 dark:border-gray-800",children:[l.jsx("h3",{className:"text-lg font-semibold",children:e.title}),l.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:e.text})]},e.title))})]}),l.jsx("div",{className:"mt-2 text-center",children:l.jsx("a",{href:"#cta",className:"inline-block rounded-lg bg-brand px-5 py-3 font-semibold text-white hover:brightness-110",children:"Try it now"})})]})]})})}function uf(t,e=1200){const[n,r]=v.useState(0),s=v.useRef(null);return v.useEffect(()=>{let i;const a=o=>{s.current||(s.current=o);const c=Math.min((o-s.current)/e,1);r(Math.floor(c*t)),c<1&&(i=requestAnimationFrame(a))};return i=requestAnimationFrame(a),()=>cancelAnimationFrame(i)},[t,e]),n}function Lme(){const t=uf(12750),e=uf(5300,1400),n=uf(99,900),r=[{value:t,label:"Tasks managed"},{value:e,label:"Teams onboarded"},{value:n,label:"Service uptime",suffix:"%"},{value:uf(2500),label:"Projects completed"},{value:uf(5e4),label:"Hours saved"},{value:uf(1e3),label:"Active users"}];return l.jsx("section",{className:"relative z-10 bg-white py-20 dark:bg-gray-950",children:l.jsx("div",{className:"mx-auto max-w-6xl px-6",children:l.jsx(Ri.div,{className:"grid grid-cols-1 gap-8 text-center sm:grid-cols-3",initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:1},children:r.map((s,i)=>l.jsxs(Ri.div,{whileHover:{scale:1.08},transition:{type:"spring",stiffness:300},className:"rounded-2xl bg-white/10 backdrop-blur-lg border border-gray-200 dark:border-gray-800 p-8 shadow-xl dark:bg-gray-900/30",children:[l.jsxs("div",{className:"text-5xl font-extrabold text-green-600 dark:text-green-400",children:[s.value.toLocaleString(),s.suffix||"+"]}),l.jsx("div",{className:"mt-2 text-base text-gray-600 dark:text-gray-300",children:s.label})]},i))})})})}const Xu=[{name:"Alex Rivera",role:"PM @ SprintWave",text:"We cut project turnaround by 30%. The Kanban and notifications just click."},{name:"Jamie Lee",role:"Team Lead @ Orbital",text:"Onboarding took minutes. Role-based access is clean and prevents mess."},{name:"Chris Morgan",role:"CEO @ NovaDesk",text:"Visibility went up, chaos went down. It’s the tool my teams actually use."},{name:"Sarah Kim",role:"Product Manager @ TechFlow",text:"Nexora's analytics have given us insights we never had before. Highly recommend!"},{name:"Mike Johnson",role:"CTO @ InnovateLabs",text:"The collaboration features are top-notch. Our remote team feels connected."},{name:"Emily Davis",role:"Operations Lead @ GlobalTech",text:"Security and compliance were our top priorities, and Nexora delivers on both."}];function Fme(){const[t,e]=v.useState(0);v.useEffect(()=>{const s=setInterval(()=>{e(i=>(i+1)%Xu.length)},5e3);return()=>clearInterval(s)},[]);const n=()=>e(s=>(s-1+Xu.length)%Xu.length),r=()=>e(s=>(s+1)%Xu.length);return l.jsx("section",{id:"testimonials",className:"bg-neutral-light py-20 dark:bg-gray-900",children:l.jsxs("div",{className:"mx-auto max-w-3xl px-6 text-center",children:[l.jsx("h2",{className:"text-3xl font-bold md:text-4xl",children:"Loved by teams"}),l.jsxs("div",{className:"relative mt-10 rounded-2xl border border-gray-200 bg-white p-8 shadow-lg dark:border-gray-800 dark:bg-gray-950",children:[l.jsx(wz,{mode:"wait",children:l.jsxs(Ri.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.3},children:[l.jsxs("p",{className:"text-lg italic text-gray-800 dark:text-gray-200",children:["“",Xu[t].text,"”"]}),l.jsxs("div",{className:"mt-4 text-sm text-gray-600 dark:text-gray-400",children:[l.jsx("span",{className:"font-semibold",children:Xu[t].name})," — ",Xu[t].role]})]},t)}),l.jsxs("div",{className:"mt-6 flex items-center justify-center gap-3",children:[l.jsx("button",{onClick:n,className:"rounded-lg border px-3 py-1 text-sm hover:bg-gray-100 dark:border-gray-700 dark:hover:bg-gray-900",children:"← Prev"}),l.jsx("button",{onClick:r,className:"rounded-lg border px-3 py-1 text-sm hover:bg-gray-100 dark:border-gray-700 dark:hover:bg-gray-900",children:"Next →"})]})]})]})})}function $me(){return l.jsxs("section",{id:"cta",className:"relative overflow-hidden bg-brand py-20 text-white",children:[l.jsx("div",{className:"absolute -left-16 top-10 h-40 w-40 rounded-full bg-white/20 blur-2xl"}),l.jsx("div",{className:"absolute -right-16 bottom-10 h-56 w-56 rounded-full bg-black/20 blur-2xl"}),l.jsxs("div",{className:"relative mx-auto max-w-3xl px-6 text-center",children:[l.jsx("h2",{className:"text-3xl font-bold md:text-4xl",children:"Ready to ship faster?"}),l.jsx("p",{className:"mx-auto mt-3 max-w-xl text-white/90",children:"Start with Nexora free. No credit card. Invite your team and get real work moving today."}),l.jsxs("div",{className:"mt-8 flex flex-col items-center justify-center gap-3 sm:flex-row",children:[l.jsx("a",{href:"/login",target:"_blank",rel:"noopener noreferrer",className:"inline-block px-6 py-3 text-white bg-blue-600 hover:bg-blue-700 rounded-lg font-semibold shadow-md transition duration-300",children:"Create Free Account"}),l.jsx("a",{href:"#features",className:"rounded-lg border border-white/60 px-6 py-3 font-semibold backdrop-blur hover:bg-white/10",children:"See how it works"})]})]})]})}function Vme(){return l.jsxs("footer",{className:"bg-white py-10 dark:bg-gray-950",children:[l.jsxs("div",{className:"mx-auto grid max-w-7xl grid-cols-1 gap-8 px-6 md:grid-cols-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"flex h-9 w-9 items-center justify-center rounded-lg bg-brand shadow-md ring-1 ring-black/5 dark:ring-white/10",children:l.jsx("img",{src:"/images/nexora.png",alt:"Nexora",className:"h-5 w-5 object-contain"})}),l.jsx("div",{className:"text-lg font-bold",children:"Nexora"})]}),l.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Simple, fast, and reliable project management."})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"mb-3 font-semibold",children:"Product"}),l.jsxs("ul",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-400",children:[l.jsx("li",{children:l.jsx("a",{href:"#features",className:"hover:text-brand",children:"Features"})}),l.jsx("li",{children:l.jsx("a",{href:"#steps",className:"hover:text-brand",children:"How it works"})}),l.jsx("li",{children:l.jsx("a",{href:"#testimonials",className:"hover:text-brand",children:"Reviews"})})]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"mb-3 font-semibold",children:"Company"}),l.jsxs("ul",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-400",children:[l.jsx("li",{children:l.jsx("a",{href:"#intro",className:"hover:text-brand",children:"About"})}),l.jsx("li",{children:l.jsx("a",{href:"#cta",className:"hover:text-brand",children:"Contact"})})]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"mb-3 font-semibold",children:"Legal"}),l.jsxs("ul",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-400",children:[l.jsx("li",{children:l.jsx("a",{href:"#",className:"hover:text-brand",children:"Privacy"})}),l.jsx("li",{children:l.jsx("a",{href:"#",className:"hover:text-brand",children:"Terms"})})]})]})]}),l.jsxs("div",{className:"mt-8 border-t border-gray-200 py-6 text-center text-sm text-gray-600 dark:border-gray-800 dark:text-gray-400",children:["© ",new Date().getFullYear()," Nexora. All rights reserved."]})]})}function Bme(){const[t,e]=v.useState(!1);return v.useEffect(()=>{const n=localStorage.getItem("nexora-theme");n&&e(n==="dark")},[]),v.useEffect(()=>{localStorage.setItem("nexora-theme",t?"dark":"light")},[t]),v.useEffect(()=>{const n=document.getElementById("root");return n&&n.classList.add("landing-page-root"),()=>{n&&n.classList.remove("landing-page-root")}},[]),l.jsx("div",{className:t?"dark":"",children:l.jsxs("div",{className:"landing-page-container bg-neutral-light text-neutral-dark dark:bg-neutral-dark dark:text-neutral-light",children:[l.jsx(tde,{darkMode:t,setDarkMode:e}),l.jsxs("main",{className:"pt-20",children:[l.jsx(Rme,{}),l.jsx(Ome,{}),l.jsx(Mme,{}),l.jsx(Lme,{}),l.jsx(Fme,{}),l.jsx($me,{})]}),l.jsx(Vme,{})]})})}function Ume(){const{login:t,googleLogin:e,sendVerificationEmail:n}=gi(),[r,s]=v.useState(""),[i,a]=v.useState(""),[o,c]=v.useState(!1),[d,h]=v.useState(""),[p,m]=v.useState(!1),[y,x]=v.useState(!1),_=async k=>{k.preventDefault(),h(""),m(!0);try{await t(r,i)}catch(S){S.message,h(S.message)}finally{m(!1)}},w=async()=>{try{const k=new ul;k.setCustomParameters({prompt:"select_account"});const O=await(await Jte(cl,k)).user.getIdToken();await e(O)}catch(k){console.error("Google login error:",k);let S="Google sign-in failed. Please try again.";if(k.code==="auth/popup-closed-by-user")S="Sign-in was cancelled.";else if(k.code==="auth/popup-blocked")S="Popup was blocked by browser. Please allow popups and try again.";else if(k.code==="auth/cancelled-popup-request")S="Sign-in was cancelled.";else if(k.message&&k.message.includes("Cross-Origin-Opener-Policy")){S="Authentication completed successfully. Redirecting...";return}else k.message&&(S=k.message);h(S)}},N=async()=>{try{await n(),x(!0)}catch(k){h(k.message)}};return l.jsxs("div",{className:"relative min-h-screen flex items-center justify-center bg-gray-100 py-12 px-4 sm:px-6 lg:px-8",children:[l.jsx("img",{src:"/images/right.png",alt:"Left Background",className:"absolute bottom-0 left-0 w-50 h-50 object-cover"}),l.jsx("img",{src:"/images/left.png",alt:"Right Background",className:"absolute bottom-0 right-0 w-50 h-50 object-cover"}),l.jsxs("div",{className:"w-full max-w-4xl flex bg-white shadow-xl rounded-lg overflow-hidden relative",children:[l.jsxs("div",{className:"hidden md:flex md:w-1/2 flex-col text-white items-center justify-between p-10 relative",children:[l.jsxs("div",{className:"flex items-center justify-start w-full mb-6",children:[l.jsx("img",{src:"/images/nexora.png",alt:"Logo",className:"h-9 w-9 mr-2"}),l.jsx("h2",{className:"text-2xl font-black text-green-700",children:"Nexora"})]}),l.jsx("img",{src:"/images/icon.png",alt:"Nexora",className:"h-100 w-100 mt-auto mb-auto"}),l.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Copyright © 2025 Nexora Reserve"})]}),l.jsx("div",{className:"hidden md:block absolute top-10 bottom-10 left-1/2 w-px bg-gray-300"}),l.jsxs("div",{className:"w-full md:w-1/2 p-10 flex flex-col justify-center z-10",children:[l.jsx("h2",{className:"text-3xl font-bold text-center mb-6",children:"Log In"}),d&&l.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:d}),d==="Please verify your email before logging in."&&l.jsxs("div",{className:"bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded mb-4",children:[l.jsx("p",{children:"Please verify your email address."}),y?l.jsx("p",{className:"text-green-600 mt-2",children:"Verification email sent!"}):l.jsx("button",{onClick:N,className:"text-green-600 hover:underline mt-2",children:"Resend verification email"})]}),l.jsxs("form",{onSubmit:_,children:[l.jsxs("div",{className:"relative mb-6",children:[l.jsx("input",{type:"email",id:"loginEmail",value:r,onChange:k=>s(k.target.value),required:!0,placeholder:" ",className:"peer w-full border border-gray-300 rounded-md px-3 pt-5 pb-2 focus:border-green-500 focus:outline-none"}),l.jsx("label",{htmlFor:"loginEmail",className:`absolute left-3 px-1 text-sm transition-all
                  ${r?"-top-2 bg-white text-green-500":"top-4 text-gray-400"}
                  peer-focus:-top-2 peer-focus:bg-white peer-focus:text-green-500`,children:"Email"})]}),l.jsxs("div",{className:"relative mb-4",children:[l.jsx("input",{type:o?"text":"password",id:"loginPassword",value:i,onChange:k=>a(k.target.value),required:!0,placeholder:" ",className:"peer w-full border border-gray-300 rounded-md px-3 pt-5 pb-2 focus:border-green-500 focus:outline-none pr-10"}),l.jsx("label",{htmlFor:"loginPassword",className:`absolute left-3 px-1 text-sm transition-all
                  ${i?"-top-2 bg-white text-green-500":"top-4 text-gray-400"}
                  peer-focus:-top-2 peer-focus:bg-white peer-focus:text-green-500`,children:"Password"}),l.jsxs("button",{type:"button",onClick:()=>c(!o),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-green-500",children:[l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 relative",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.477 0 8.268 2.943 9.542 7-1.274 4.057-5.065 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),!o&&l.jsx("span",{className:"absolute top-1/2 left-1/2 w-full h-px bg-gray-500 rotate-45 -translate-x-1/2 -translate-y-1/2"})]})]}),l.jsx("div",{className:"flex justify-end mb-4",children:l.jsx("a",{href:"#",className:"text-green-600 hover:underline text-sm",children:"Forgot Password?"})}),l.jsx("button",{type:"submit",disabled:p,className:"w-full bg-green-600 text-white py-2 rounded-md hover:bg-green-700 transition mb-6 disabled:bg-green-400",children:p?"Logging in...":"Log In"})]}),l.jsxs("div",{className:"flex items-center justify-center mb-6",children:[l.jsx("div",{className:"flex-grow border-t border-gray-300"}),l.jsx("span",{className:"mx-4 text-gray-500",children:"OR"}),l.jsx("div",{className:"flex-grow border-t border-gray-300"})]}),l.jsxs("button",{onClick:w,className:"w-full border border-gray-300 py-2 rounded-md hover:bg-gray-100 flex items-center justify-center mb-6",children:[l.jsx("img",{src:"https://www.svgrepo.com/show/475656/google-color.svg",alt:"Google",className:"w-5 h-5 mr-2"}),"Continue with Google"]})]})]})]})}/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zme=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Wme=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),$3=t=>{const e=Wme(t);return e.charAt(0).toUpperCase()+e.slice(1)},lW=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),Hme=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var qme={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kme=v.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:a,...o},c)=>v.createElement("svg",{ref:c,...qme,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:lW("lucide",s),...!i&&!Hme(o)&&{"aria-hidden":"true"},...o},[...a.map(([d,h])=>v.createElement(d,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=(t,e)=>{const n=v.forwardRef(({className:r,...s},i)=>v.createElement(Kme,{ref:i,iconNode:e,className:lW(`lucide-${zme($3(t))}`,`lucide-${t}`,r),...s}));return n.displayName=$3(t),n};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yme=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],nb=Ve("activity",Yme);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gme=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],sw=Ve("archive",Gme);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qme=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Xme=Ve("arrow-left",Qme);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jme=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Zme=Ve("arrow-right",Jme);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ege=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]],tge=Ve("at-sign",ege);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nge=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],cW=Ve("bell",nge);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rge=[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]],sge=Ve("bold",rge);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ige=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2Z",key:"169p4p"}],["path",{d:"m9 10 2 2 4-4",key:"1gnqz4"}]],age=Ve("bookmark-check",ige);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oge=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],uW=Ve("bookmark",oge);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lge=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],iw=Ve("building-2",lge);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cge=[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]],Ya=Ve("building",cge);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uge=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],fp=Ve("calendar",uge);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dge=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],dW=Ve("chart-column",dge);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hge=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],WP=Ve("check",hge);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fge=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Va=Ve("chevron-down",fge);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pge=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],HP=Ve("chevron-right",pge);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mge=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],hW=Ve("chevron-up",mge);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gge=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],em=Ve("circle-alert",gge);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yge=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Mi=Ve("circle-check-big",yge);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vge=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],fW=Ve("circle-play",vge);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xge=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],bge=Ve("circle-question-mark",xge);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wge=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],DC=Ve("circle-x",wge);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _ge=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Ege=Ve("circle",_ge);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nge=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Sge=Ve("clipboard-list",Nge);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kge=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],sr=Ve("clock",kge);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tge=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Cge=Ve("copy",Tge);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jge=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],qP=Ve("crown",jge);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pge=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Age=Ve("download",Pge);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ige=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],rb=Ve("ellipsis",Ige);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dge=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Rge=Ve("eye-off",Dge);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oge=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],KP=Ve("eye",Oge);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mge=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],s_=Ve("file-text",Mge);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lge=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],pW=Ve("file",Lge);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fge=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],aw=Ve("flag",Fge);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $ge=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],YP=Ve("funnel",$ge);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vge=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],Od=Ve("git-branch",Vge);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bge=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Uge=Ve("globe",Bge);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zge=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],mW=Ve("grid-3x3",zge);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wge=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],Hge=Ve("history",Wge);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qge=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Kge=Ve("image",qge);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yge=[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]],Gge=Ve("italic",Yge);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qge=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],Xge=Ve("link",Qge);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jge=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],GP=Ve("list",Jge);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zge=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Ii=Ve("loader-circle",Zge);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e0e=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],t0e=Ve("log-out",e0e);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n0e=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],r0e=Ve("mail",n0e);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s0e=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],i0e=Ve("map-pin",s0e);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a0e=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],o0e=Ve("maximize-2",a0e);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l0e=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Qc=Ve("message-square",l0e);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c0e=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],u0e=Ve("moon",c0e);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d0e=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],h0e=Ve("palette",d0e);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f0e=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],pp=Ve("paperclip",f0e);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p0e=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],m0e=Ve("pen-line",p0e);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g0e=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],y0e=Ve("pen",g0e);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v0e=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]],gW=Ve("pin",v0e);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x0e=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],V3=Ve("play",x0e);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b0e=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ps=Ve("plus",b0e);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w0e=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],B3=Ve("refresh-cw",w0e);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _0e=[["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}],["path",{d:"m9 17-5-5 5-5",key:"nvlc11"}]],E0e=Ve("reply",_0e);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N0e=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],mh=Ve("search",N0e);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S0e=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],k0e=Ve("send",S0e);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T0e=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],QP=Ve("settings",T0e);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C0e=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],j0e=Ve("share-2",C0e);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P0e=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],XP=Ve("shield",P0e);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A0e=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],bl=Ve("square-check-big",A0e);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I0e=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],mp=Ve("square-pen",I0e);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D0e=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],ow=Ve("square",D0e);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R0e=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],O0e=Ve("sun",R0e);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M0e=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Cf=Ve("tag",M0e);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L0e=[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]],F0e=Ve("thumbs-down",L0e);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $0e=[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]],V0e=Ve("thumbs-up",$0e);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B0e=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Vi=Ve("trash-2",B0e);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U0e=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],U3=Ve("trending-up",U0e);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z0e=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],gp=Ve("triangle-alert",z0e);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W0e=[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]],H0e=Ve("underline",W0e);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q0e=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],z3=Ve("upload",q0e);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K0e=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Y0e=Ve("user-check",K0e);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G0e=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Q0e=Ve("user-minus",G0e);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X0e=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],yW=Ve("user-plus",X0e);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J0e=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],Z0e=Ve("user-x",J0e);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eye=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],As=Ve("user",eye);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tye=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],_0=Ve("users",tye);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nye=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],yn=Ve("x",nye);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rye=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],sye=Ve("zoom-in",rye);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iye=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],aye=Ve("zoom-out",iye),oye={primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300 focus:ring-gray-400",destructive:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",ghost:"bg-transparent text-gray-700 hover:bg-gray-100 focus:ring-gray-300",link:"bg-transparent underline text-blue-600 hover:text-blue-800 focus:ring-blue-500"},lye={sm:"px-2 py-1 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"},ct=oe.forwardRef(({variant:t="primary",size:e="md",className:n="",children:r,disabled:s,...i},a)=>l.jsx("button",{ref:a,className:"inline-flex items-center justify-center rounded-md font-medium focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none "+oye[t]+" "+lye[e]+" "+n,disabled:s,...i,children:r}));ct.displayName="Button";const Mn=oe.forwardRef(({className:t,children:e,...n},r)=>l.jsx("div",{ref:r,className:`rounded-lg border bg-card text-card-foreground shadow-sm ${t||""}`,...n,children:e}));Mn.displayName="Card";const cy=()=>{const t=v.useContext(cP);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t};class cye{async searchUsers(e){try{return(await Ie.get("/facilities/search/users",{params:{query:e}})).data}catch(n){throw new Error(n.response?.data?.message||"Failed to search users")}}async sendInvitation(e,n,r="member"){try{return(await Ie.post(`/facilities/${e}/invitations`,{email:n.trim(),role:r})).data}catch(s){throw new Error(s.response?.data?.message||"Failed to send invitation")}}async getFacilityMembers(e){try{const n=`facility_members_${e}`,r=localStorage.getItem(n);if(r){const a=JSON.parse(r),o=a.timestamp;if(Date.now()-o<12e4)return console.log("Using cached facility members for:",e),a.data}console.log("Fetching fresh facility members for:",e);const s=await Ie.get(`/facilities/${e}/members`),i={data:s.data,timestamp:Date.now()};return localStorage.setItem(n,JSON.stringify(i)),s.data}catch(n){throw console.error("Error fetching facility members:",n),new Error(n.response?.data?.message||"Failed to fetch facility members")}}clearFacilityMembersCache(e){const n=`facility_members_${e}`;localStorage.removeItem(n),console.log("Cleared facility members cache for:",e)}async updateMemberRole(e,n,r){try{const s=await Ie.put(`/facilities/${e}/members/role`,{targetUserId:n,newRole:r});return this.clearFacilityMembersCache(e),s.data}catch(s){throw new Error(s.response?.data?.message||"Failed to update member role")}}async removeMember(e,n){try{const r=await Ie.delete(`/facilities/${e}/members`,{data:{targetUserId:n}});return this.clearFacilityMembersCache(e),r.data}catch(r){throw new Error(r.response?.data?.message||"Failed to remove member")}}async generateShareLink(e,n="member",r){try{return(await Ie.post(`/facilities/${e}/share-link`,{role:n,expirationDays:r})).data}catch(s){throw new Error(s.response?.data?.message||"Failed to generate share link")}}async getShareLink(e){try{return(await Ie.get(`/facilities/${e}/share-link`)).data}catch(n){throw n.response?.status===404?new Error("No active share link found"):new Error(n.response?.data?.message||"Failed to fetch share link")}}async updateShareLinkRole(e,n){try{return(await Ie.put(`/facilities/${e}/share-link/role`,{role:n})).data}catch(r){throw new Error(r.response?.data?.message||"Failed to update share link role")}}async deactivateShareLink(e){try{return(await Ie.delete(`/facilities/${e}/share-link`)).data}catch(n){throw new Error(n.response?.data?.message||"Failed to deactivate share link")}}async joinViaShareLink(e){try{return(await Ie.post(`/facilities/join/${e}`)).data}catch(n){throw new Error(n.response?.data?.message||"Failed to join facility")}}async requestToJoinViaShareLink(e,n){try{return(await Ie.post(`/facilities/request-join/${e}`,{message:n||""})).data}catch(r){throw new Error(r.response?.data?.message||"Failed to submit join request")}}async getJoinRequests(e,n="pending"){try{return(await Ie.get(`/facilities/${e}/join-requests`,{params:{status:n}})).data}catch(r){throw new Error(r.response?.data?.message||"Failed to fetch join requests")}}async approveJoinRequest(e,n,r="member"){try{const s=await Ie.post(`/facilities/${e}/join-requests/${n}/approve`,{assignedRole:r});return this.clearFacilityMembersCache(e),s.data}catch(s){throw new Error(s.response?.data?.message||"Failed to approve join request")}}async rejectJoinRequest(e,n,r){try{return(await Ie.post(`/facilities/${e}/join-requests/${n}/reject`,{rejectionReason:r})).data}catch(s){throw new Error(s.response?.data?.message||"Failed to reject join request")}}async leaveFacility(e){try{return(await Ie.post(`/facilities/${e}/leave`)).data}catch(n){throw new Error(n.response?.data?.message||"Failed to leave facility")}}async getInvitationDetails(e){try{return(await Ie.get(`/facilities/invitations/${e}`)).data}catch(n){throw new Error(n.response?.data?.message||"Invalid or expired invitation")}}async acceptInvitation(e){try{const n=await Ie.post(`/facilities/invitations/${e}/accept`);return n.data.facility?.id&&this.clearFacilityMembersCache(n.data.facility.id),n.data}catch(n){throw new Error(n.response?.data?.message||"Failed to accept invitation")}}async rejectInvitation(e){try{return(await Ie.post(`/facilities/invitations/${e}/reject`)).data}catch(n){throw new Error(n.response?.data?.message||"Failed to reject invitation")}}async copyLinkToClipboard(e){try{await navigator.clipboard.writeText(e)}catch{const r=document.createElement("textarea");r.value=e,document.body.appendChild(r),r.focus(),r.select();try{document.execCommand("copy")}catch{throw new Error("Failed to copy link to clipboard")}document.body.removeChild(r)}}validateEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.trim())}validateRole(e){return["manager","member","guest"].includes(e)}}const On=new cye,uye=()=>{const{token:t}=uh(),e=eo(),{user:n,token:r}=cy(),{refreshFacilities:s}=Z1(),[i,a]=v.useState(null),[o,c]=v.useState(!0),[d,h]=v.useState(!1),[p,m]=v.useState(null),[y,x]=v.useState(null);v.useEffect(()=>{t&&_()},[t]);const _=async()=>{try{c(!0);const S=(await On.getInvitationDetails(t)).invitation;S.statusMessage?m(S.statusMessage):a(S)}catch(k){m(k.message||"Invalid or expired invitation")}finally{c(!1)}},w=async()=>{if(!(!i||!n))try{h(!0);const k=await On.acceptInvitation(t);await s(),x("Invitation accepted successfully! Redirecting to facility..."),setTimeout(()=>{e(`/facility/${i.facilityId}`)},2e3)}catch(k){m(k.message||"Failed to accept invitation")}finally{h(!1)}},N=async()=>{if(i)try{await On.rejectInvitation(t),x("Invitation rejected."),setTimeout(()=>{e("/")},2e3)}catch(k){m(k.message||"Failed to reject invitation")}};return o?l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:l.jsxs(Mn,{className:"w-full max-w-md p-8 text-center",children:[l.jsx(Ii,{size:48,className:"animate-spin mx-auto mb-4 text-blue-500"}),l.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Loading Invitation"}),l.jsx("p",{className:"text-gray-600",children:"Please wait while we verify your invitation..."})]})}):p?l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:l.jsxs(Mn,{className:"w-full max-w-md p-8 text-center",children:[l.jsx(em,{size:48,className:"mx-auto mb-4 text-red-500"}),l.jsx("h2",{className:"text-xl font-semibold mb-2 text-red-600",children:"Invalid Invitation"}),l.jsx("p",{className:"text-gray-600 mb-6",children:p}),l.jsx(ct,{onClick:()=>e("/"),variant:"secondary",children:"Go to Home"})]})}):y?l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:l.jsxs(Mn,{className:"w-full max-w-md p-8 text-center",children:[l.jsx(Mi,{size:48,className:"mx-auto mb-4 text-green-500"}),l.jsx("h2",{className:"text-xl font-semibold mb-2 text-green-600",children:"Success!"}),l.jsx("p",{className:"text-gray-600",children:y})]})}):n?l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:l.jsxs(Mn,{className:"w-full max-w-md p-8",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx(iw,{size:48,className:"mx-auto mb-4 text-blue-500"}),l.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Facility Invitation"})]}),i&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[l.jsx("h3",{className:"font-semibold text-blue-900",children:i.facilityName}),i.facilityDescription&&l.jsx("p",{className:"text-blue-700 text-sm mt-1",children:i.facilityDescription}),l.jsxs("p",{className:"text-blue-600 text-sm mt-2",children:[l.jsx("strong",{children:i.inviterName})," invited you to join as a ",l.jsx("strong",{children:i.role})]})]}),l.jsx("div",{className:"bg-yellow-50 p-3 rounded-lg",children:l.jsxs("p",{className:"text-yellow-800 text-sm",children:[l.jsx("strong",{children:"⚠️ Expires:"})," ",new Date(i.expiresAt).toLocaleDateString()]})}),l.jsxs("div",{className:"flex space-x-3",children:[l.jsxs(ct,{onClick:w,disabled:d,className:"flex-1 bg-green-600 hover:bg-green-700",children:[d?l.jsx(Ii,{size:16,className:"animate-spin mr-2"}):null,"Accept Invitation"]}),l.jsx(ct,{onClick:N,variant:"destructive",className:"flex-1",children:"Decline"})]})]})]})}):l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:l.jsxs(Mn,{className:"w-full max-w-md p-8 text-center",children:[l.jsx(iw,{size:48,className:"mx-auto mb-4 text-blue-500"}),l.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Facility Invitation"}),l.jsx("p",{className:"text-gray-600 mb-6",children:"You need to be logged in to accept this invitation. Please log in or create an account to continue."}),l.jsxs("div",{className:"space-y-3",children:[l.jsx(ct,{onClick:()=>e("/auth/login"),className:"w-full",children:"Log In"}),l.jsx(ct,{onClick:()=>e("/auth/register"),variant:"secondary",className:"w-full",children:"Create Account"})]})]})})},dye=()=>{const{linkId:t}=uh(),e=eo(),{user:n,token:r}=cy(),[s,i]=v.useState(null),[a,o]=v.useState(!0),[c,d]=v.useState(!1),[h,p]=v.useState(null),[m,y]=v.useState(null);v.useEffect(()=>{t&&x()},[t]);const x=async()=>{try{if(o(!0),!n){o(!1);return}o(!1)}catch(w){p(w.message||"Invalid or expired share link"),o(!1)}},_=async()=>{if(!(!n||!t))try{d(!0);const w=await On.requestToJoinViaShareLink(t);y("Join request submitted successfully! You will be notified when an admin approves your request."),setTimeout(()=>{e("/resources/analytics/global")},3e3)}catch(w){p(w.message||"Failed to submit join request")}finally{d(!1)}};return a?l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:l.jsxs(Mn,{className:"w-full max-w-md p-8 text-center",children:[l.jsx(Ii,{size:48,className:"animate-spin mx-auto mb-4 text-blue-500"}),l.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Loading Share Link"}),l.jsx("p",{className:"text-gray-600",children:"Please wait while we verify the share link..."})]})}):h?l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:l.jsxs(Mn,{className:"w-full max-w-md p-8 text-center",children:[l.jsx(em,{size:48,className:"mx-auto mb-4 text-red-500"}),l.jsx("h2",{className:"text-xl font-semibold mb-2 text-red-600",children:"Invalid Share Link"}),l.jsx("p",{className:"text-gray-600 mb-6",children:h}),l.jsx(ct,{onClick:()=>e("/"),variant:"secondary",children:"Go to Home"})]})}):m?l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:l.jsxs(Mn,{className:"w-full max-w-md p-8 text-center",children:[l.jsx(Mi,{size:48,className:"mx-auto mb-4 text-green-500"}),l.jsx("h2",{className:"text-xl font-semibold mb-2 text-green-600",children:"Success!"}),l.jsx("p",{className:"text-gray-600",children:m})]})}):n?l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:l.jsxs(Mn,{className:"w-full max-w-md p-8",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsxs("div",{className:"w-16 h-16 rounded-full mx-auto mb-4 flex items-center justify-center font-semibold text-white text-lg relative overflow-hidden",children:[n?.photoURL?l.jsx("img",{src:n.photoURL,alt:n.displayName||n.email||"User",className:"w-full h-full object-cover",onError:w=>{const N=w.target;N.style.display="none";const k=N.parentElement;if(k){const S=k.querySelector(".fallback-initials");S&&(S.style.display="flex")}}}):null,l.jsx("div",{className:`fallback-initials absolute inset-0 flex items-center justify-center ${n?.photoURL?"hidden":"flex"}`,style:{backgroundColor:"#6B7280"},children:n?.displayName?n.displayName.charAt(0).toUpperCase():n?.email?.charAt(0).toUpperCase()||"U"})]}),l.jsx(iw,{size:48,className:"mx-auto mb-4 text-blue-500"}),l.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Join Facility"}),l.jsx("p",{className:"text-gray-600 mb-2",children:"You've been invited to join a facility via share link."}),l.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[l.jsx("p",{className:"text-sm font-medium text-gray-900",children:n?.displayName||n?.email}),l.jsx("p",{className:"text-xs text-gray-600",children:n?.email})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:l.jsx("p",{className:"text-blue-700 text-sm",children:'Click "Request to Join" below to submit a join request. A facility admin will review and approve your request.'})}),l.jsx("div",{className:"bg-yellow-50 p-3 rounded-lg",children:l.jsxs("p",{className:"text-yellow-800 text-sm",children:[l.jsx("strong",{children:"⏰ Note:"})," Share links typically expire after 7 days for security purposes."]})}),l.jsxs("div",{className:"flex space-x-3",children:[l.jsxs(ct,{onClick:_,disabled:c,className:"flex-1 bg-blue-600 hover:bg-blue-700",children:[c?l.jsx(Ii,{size:16,className:"animate-spin mr-2"}):null,"Request to Join"]}),l.jsx(ct,{onClick:()=>e("/"),variant:"secondary",className:"flex-1",children:"Cancel"})]})]})]})}):l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:l.jsxs(Mn,{className:"w-full max-w-md p-8 text-center",children:[l.jsx(iw,{size:48,className:"mx-auto mb-4 text-blue-500"}),l.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Join Facility"}),l.jsx("p",{className:"text-gray-600 mb-6",children:"You need to be logged in to join this facility. Please log in or create an account to continue."}),l.jsxs("div",{className:"space-y-3",children:[l.jsx(ct,{onClick:()=>e("/login"),className:"w-full",children:"Log In"}),l.jsx(ct,{onClick:()=>e("/login"),variant:"secondary",className:"w-full",children:"Create Account"})]})]})})},vW=({isOpen:t,onClose:e,onCreate:n,isDarkMode:r})=>{const[s,i]=v.useState(""),[a,o]=v.useState(!1),[c,d]=v.useState(""),h=async m=>{if(m.preventDefault(),!s.trim()){d("Facility name is required");return}try{o(!0),d(""),await n({name:s.trim()}),i(""),e()}catch(y){d(y instanceof Error?y.message:"Failed to create facility")}finally{o(!1)}},p=()=>{a||(i(""),d(""),e())};return t?ml.createPortal(l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[99999] p-4",children:l.jsxs("div",{className:`w-full max-w-md rounded-xl shadow-2xl border ${r?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"p-2 rounded-lg bg-brand/10",children:l.jsx(Ya,{className:"w-5 h-5 text-brand"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Create New Facility"}),l.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Set up a new workspace for your team"})]})]}),l.jsx("button",{onClick:p,disabled:a,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors disabled:opacity-50",children:l.jsx(yn,{className:"w-4 h-4 text-gray-500"})})]}),l.jsxs("form",{onSubmit:h,className:"p-4",children:[c&&l.jsx("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:l.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:c})}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{htmlFor:"facility-name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Facility Name"}),l.jsx("div",{className:"relative",children:l.jsx("input",{type:"text",id:"facility-name",value:s,onChange:m=>i(m.target.value),placeholder:"Enter facility name",disabled:a,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-brand focus:border-transparent disabled:opacity-50 transition-colors",autoFocus:!0})}),l.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Choose a descriptive name for your facility"})]}),l.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-2",children:[l.jsx("button",{type:"button",onClick:p,disabled:a,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors disabled:opacity-50",children:"Cancel"}),l.jsx("button",{type:"submit",disabled:a||!s.trim(),className:"px-4 py-2 text-sm font-medium text-white bg-brand hover:bg-brand-dark rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:a?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),l.jsx("span",{children:"Creating..."})]}):l.jsxs(l.Fragment,{children:[l.jsx(Ya,{className:"w-4 h-4"}),l.jsx("span",{children:"Create Facility"})]})})]})]})]})}),document.body):null},hye=({isOpen:t,onClose:e,onUpdate:n,facility:r,isDarkMode:s})=>{const[i,a]=v.useState(""),[o,c]=v.useState(!1),[d,h]=v.useState("");v.useEffect(()=>{r&&t&&a(r.name)},[r,t]);const p=async y=>{if(y.preventDefault(),!i.trim()){h("Facility name is required");return}if(!r){h("No facility selected");return}try{c(!0),h(""),await n(r.id,{name:i.trim()}),e()}catch(x){h(x instanceof Error?x.message:"Failed to update facility")}finally{c(!1)}},m=()=>{o||(a(""),h(""),e())};return!t||!r?null:l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:`w-full max-w-md rounded-xl shadow-2xl border ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"p-2 rounded-lg bg-blue-100 dark:bg-blue-900/20",children:l.jsx(mp,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Edit Facility"}),l.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Update facility information"})]})]}),l.jsx("button",{onClick:m,disabled:o,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors disabled:opacity-50",children:l.jsx(yn,{className:"w-4 h-4 text-gray-500"})})]}),l.jsxs("form",{onSubmit:p,className:"p-4",children:[d&&l.jsx("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:l.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:d})}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{htmlFor:"facility-name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Facility Name"}),l.jsx("div",{className:"relative",children:l.jsx("input",{type:"text",id:"facility-name",value:i,onChange:y=>a(y.target.value),placeholder:"Enter facility name",disabled:o,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-brand focus:border-transparent disabled:opacity-50 transition-colors",autoFocus:!0})}),l.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Update the name of your facility"})]}),l.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-2",children:[l.jsx("button",{type:"button",onClick:m,disabled:o,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors disabled:opacity-50",children:"Cancel"}),l.jsx("button",{type:"submit",disabled:o||!i.trim(),className:"px-4 py-2 text-sm font-medium text-white bg-brand hover:bg-brand-dark rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:o?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),l.jsx("span",{children:"Updating..."})]}):l.jsxs(l.Fragment,{children:[l.jsx(mp,{className:"w-4 h-4"}),l.jsx("span",{children:"Update Facility"})]})})]})]})]})})},fye=({isOpen:t,onClose:e,onDelete:n,facility:r,isDarkMode:s})=>{const[i,a]=oe.useState(!1),[o,c]=oe.useState(""),d=async()=>{if(r)try{a(!0),c(""),await n(r.id),e()}catch(p){c(p instanceof Error?p.message:"Failed to delete facility")}finally{a(!1)}},h=()=>{i||(c(""),e())};return!t||!r?null:l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:`w-full max-w-lg rounded-xl shadow-2xl border ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"p-2 rounded-lg bg-red-100 dark:bg-red-900/20",children:l.jsx(gp,{className:"w-5 h-5 text-red-600 dark:text-red-400"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Delete Facility"}),l.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"This action cannot be undone"})]})]}),l.jsx("button",{onClick:h,disabled:i,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors disabled:opacity-50",children:l.jsx(yn,{className:"w-4 h-4 text-gray-500"})})]}),l.jsxs("div",{className:"p-4 space-y-4",children:[o&&l.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:l.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:o})}),l.jsxs("div",{className:"flex items-start space-x-4",children:[l.jsx("div",{className:"p-3 rounded-lg bg-red-100 dark:bg-red-900/20",children:l.jsx(Ya,{className:"w-6 h-6 text-red-600 dark:text-red-400"})}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:['Delete "',r.name,'"?']}),l.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"This action cannot be undone. All projects, tasks, and data associated with this facility will be permanently deleted."}),l.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4 mb-4",children:[l.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"This facility contains:"}),l.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[l.jsxs("div",{className:"text-center p-2 bg-white dark:bg-gray-800 rounded-lg",children:[l.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:r.memberCount||0}),l.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Members"})]}),l.jsxs("div",{className:"text-center p-2 bg-white dark:bg-gray-800 rounded-lg",children:[l.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:r.projectCount||0}),l.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Projects"})]}),l.jsxs("div",{className:"text-center p-2 bg-white dark:bg-gray-800 rounded-lg",children:[l.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:r.taskCount||0}),l.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Tasks"})]})]})]}),l.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:l.jsxs("p",{className:"text-sm text-red-600 dark:text-red-400 font-medium flex items-center",children:[l.jsx(gp,{className:"w-4 h-4 mr-2"}),"All of this data will be permanently lost!"]})})]})]})]}),l.jsxs("div",{className:"flex items-center justify-end space-x-3 p-4 border-t border-gray-200 dark:border-gray-700",children:[l.jsx("button",{type:"button",onClick:h,disabled:i,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors disabled:opacity-50",children:"Cancel"}),l.jsx("button",{onClick:d,disabled:i,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:i?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),l.jsx("span",{children:"Deleting..."})]}):l.jsxs(l.Fragment,{children:[l.jsx(Vi,{className:"w-4 h-4"}),l.jsx("span",{children:"Delete Facility"})]})})]})]})})},pye={active:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300",inactive:"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-300",archived:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"},mye=()=>{const t=eo(),{facilities:e,loading:n,error:r,loadFacilities:s,setCurrentFacilityById:i,setFacilities:a}=Z1(),[o,c]=v.useState(""),[d,h]=v.useState("all"),[p,m]=v.useState(!1),[y,x]=v.useState(!1),[_,w]=v.useState(!1),[N,k]=v.useState(null),[S,O]=v.useState(null),[R,M]=v.useState(""),[P,C]=v.useState({}),[D,$]=v.useState({}),[F,U]=v.useState(()=>typeof window<"u"?document.documentElement.classList.contains("dark"):!1);v.useEffect(()=>{const V=new MutationObserver(()=>{U(document.documentElement.classList.contains("dark"))});return V.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>V.disconnect()},[]);const I=(V,ee,X)=>{C(te=>({...te,[V]:ee})),X!==void 0&&$(te=>({...te,[V]:X}))},z=V=>{$(ee=>{const X={...ee};return delete X[V],X})},Q=V=>{t(`/facility/${V}`)},ne=V=>{i(V),t("/resources/analytics/global")},W=async V=>{const ee={id:`temp-${Date.now()}`,name:V.name,status:"active",ownerId:"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),memberCount:1,projectCount:0,taskCount:0};a([...e,ee]);try{const X=await Gr.create(V);a(e.map(te=>te.id===ee.id?X:te))}catch(X){throw console.error("Error creating facility:",X),a(e.filter(te=>te.id!==ee.id)),X}},K=V=>{k(V),w(!0)},Y=async(V,ee)=>{try{await Gr.update(V,ee),await s()}catch(X){throw console.error("Error updating facility:",X),X}},G=async(V,ee)=>{const X=`status-${V}`;I(X,!0),z(X);const te=[...e],he=e.map(ie=>ie.id===V?{...ie,status:ee}:ie);a(he);try{console.log("Updating facility status:",V,"to:",ee);const ie=await Gr.updateStatus(V,ee);return console.log("Status update successful:",ie),I(X,!1),ie}catch(ie){console.error("Failed to update facility status:",ie);const le=ie.response?.data?.message||ie.message||"Failed to update status";throw I(X,!1,le),a(te),ie}},q=V=>{O(V.id),M(V.name)},Z=async V=>{if(!R.trim()){ge();return}const ee=`name-${V}`;I(ee,!0),z(ee);const X=[...e],te=e.map(he=>he.id===V?{...he,name:R.trim()}:he);a(te),O(null),M("");try{const he=await Gr.update(V,{name:R.trim()});return I(ee,!1),he}catch(he){console.error("Failed to update facility name:",he);const ie=he.response?.data?.message||he.message||"Failed to update name";throw I(ee,!1,ie),a(X),O(V),M(R.trim()),he}},ge=()=>{O(null),M("")},Le=async V=>{const ee=[...e],X=e.filter(te=>te.id!==V);a(X),w(!1),k(null);try{console.log("Deleting facility:",V),await Gr.delete(V),console.log("Facility deleted successfully")}catch(te){console.error("Error deleting facility:",te),console.error("Error response:",te.response?.data);const he=te.response?.data?.message||te.message||"Failed to delete facility";throw a(ee),w(!0),k(ee.find(ie=>ie.id===V)||null),new Error(he)}},Pe=oe.useMemo(()=>!o&&d==="all"?e:e.filter(V=>{const ee=!o||V.name.toLowerCase().includes(o.toLowerCase())||V.description&&V.description.toLowerCase().includes(o.toLowerCase());let X=!0;if(d!=="all")switch(d){case"active":X=V.status==="active";break;case"inactive":X=V.status==="inactive";break;case"archived":X=V.status==="archived";break;case"with-members":X=(V.memberCount||0)>0;break;case"with-projects":X=(V.projectCount||0)>0;break;case"empty":X=(V.memberCount||0)===0&&(V.projectCount||0)===0;break;default:X=!0}return ee&&X}),[e,o,d]),Ue=oe.useMemo(()=>e.reduce((V,ee)=>({totalMembers:V.totalMembers+(ee.memberCount||0),totalProjects:V.totalProjects+(ee.projectCount||0),totalTasks:V.totalTasks+(ee.taskCount||0)}),{totalMembers:0,totalProjects:0,totalTasks:0}),[e]);return n?l.jsx("div",{className:"p-4 flex items-center justify-center min-h-full",children:l.jsx("div",{className:"animate-spin rounded-full h-24 w-24 border-b-2 border-brand"})}):r?l.jsx("div",{className:"p-4",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-red-600 dark:text-red-400 mb-3 text-xs",children:r}),l.jsx("button",{onClick:s,className:"px-3 py-1.5 bg-brand text-white rounded-lg hover:bg-brand-dark transition-colors text-xs",children:"Try Again"})]})}):l.jsxs("div",{className:"p-4 space-y-4 bg-neutral-light dark:bg-gray-900 min-h-full",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[l.jsxs("div",{className:`p-4 rounded-lg shadow-sm flex items-center space-x-3 ${F?"bg-gray-800":"bg-white"}`,children:[l.jsx("div",{className:"p-2 rounded-full bg-brand/10",children:l.jsx(Ya,{className:"w-4 h-4 text-brand"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300",children:"Total Facilities"}),l.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:e.length})]})]}),l.jsxs("div",{className:`p-4 rounded-lg shadow-sm flex items-center space-x-3 ${F?"bg-gray-800":"bg-white"}`,children:[l.jsx("div",{className:"p-2 rounded-full bg-brand-light/10",children:l.jsx(_0,{className:"w-4 h-4 text-brand-light"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300",children:"Total Members"}),l.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:Ue.totalMembers})]})]}),l.jsxs("div",{className:`p-4 rounded-lg shadow-sm flex items-center space-x-3 ${F?"bg-gray-800":"bg-white"}`,children:[l.jsx("div",{className:"p-2 rounded-full bg-brand-dark/10",children:l.jsx(Sge,{className:"w-4 h-4 text-brand-dark"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300",children:"Total Projects"}),l.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:Ue.totalProjects})]})]}),l.jsxs("div",{className:`p-4 rounded-lg shadow-sm flex items-center space-x-3 ${F?"bg-gray-800":"bg-white"}`,children:[l.jsx("div",{className:"p-2 rounded-full bg-green-100",children:l.jsx(QP,{className:"w-4 h-4 text-green-600"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300",children:"Active Facilities"}),l.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:e.length})]})]})]}),l.jsxs("div",{className:`p-4 rounded-lg shadow-md ${F?"bg-gray-800":"bg-white"}`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:["Facilities",Pe.length!==e.length&&l.jsxs("span",{className:"ml-2 text-xs text-gray-500 dark:text-gray-400",children:["(",Pe.length," of ",e.length,")"]})]}),l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsxs("div",{className:"relative",children:[l.jsx(mh,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),l.jsx("input",{type:"text",placeholder:"Search facilities...",value:o,onChange:V=>c(V.target.value),className:"pl-9 pr-3 py-1.5 text-sm border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(YP,{className:"w-4 h-4 text-gray-500"}),l.jsxs("select",{value:d,onChange:V=>h(V.target.value),title:"Filter facilities",className:"px-3 py-1.5 text-sm border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[l.jsx("option",{value:"all",children:"All Facilities"}),l.jsx("option",{value:"active",children:"Active"}),l.jsx("option",{value:"inactive",children:"Inactive"}),l.jsx("option",{value:"archived",children:"Archived"}),l.jsx("option",{value:"with-members",children:"With Members"}),l.jsx("option",{value:"with-projects",children:"With Projects"}),l.jsx("option",{value:"empty",children:"Empty"})]})]}),l.jsxs("button",{onClick:()=>m(!0),className:"flex items-center space-x-1 px-3 py-1.5 bg-brand text-white rounded-md hover:bg-brand-dark transition-colors text-sm",children:[l.jsx(Ps,{className:"w-4 h-4"}),l.jsx("span",{children:"Create"})]})]})]}),Pe.length===0?l.jsxs("div",{className:"text-center py-6 text-gray-500 dark:text-gray-400",children:[l.jsx(Ya,{className:"w-8 h-8 mx-auto mb-3 opacity-50"}),l.jsx("p",{className:"text-xs",children:e.length===0?"No facilities found. Create your first facility to get started.":"No facilities match your search criteria."})]}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-left",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[l.jsx("th",{className:"pb-2 text-xs font-semibold text-gray-700 dark:text-gray-300",children:"Name"}),l.jsx("th",{className:"pb-2 text-xs font-semibold text-gray-700 dark:text-gray-300",children:"Members"}),l.jsx("th",{className:"pb-2 text-xs font-semibold text-gray-700 dark:text-gray-300",children:"Projects"}),l.jsx("th",{className:"pb-2 text-xs font-semibold text-gray-700 dark:text-gray-300",children:"Tasks"}),l.jsx("th",{className:"pb-2 text-xs font-semibold text-gray-700 dark:text-gray-300",children:"Status"}),l.jsx("th",{className:"pb-2 text-xs font-semibold text-gray-700 dark:text-gray-300",children:"Actions"})]})}),l.jsx("tbody",{children:Pe.map(V=>l.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[l.jsx("td",{className:"py-3 text-xs text-gray-900 dark:text-white font-medium",children:S===V.id?l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx("input",{type:"text",value:R,onChange:ee=>M(ee.target.value),onKeyDown:ee=>{ee.key==="Enter"?Z(V.id):ee.key==="Escape"&&ge()},disabled:P[`name-${V.id}`],className:`px-2 py-1 text-xs border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-1 focus:ring-brand ${P[`name-${V.id}`]?"opacity-50 cursor-not-allowed":""}`,autoFocus:!0}),l.jsx("button",{onClick:()=>Z(V.id),disabled:P[`name-${V.id}`],className:`p-1 text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-200 ${P[`name-${V.id}`]?"opacity-50 cursor-not-allowed":""}`,title:"Save",children:P[`name-${V.id}`]?l.jsx("div",{className:"w-3 h-3 border border-green-600 border-t-transparent rounded-full animate-spin"}):"✓"}),l.jsx("button",{onClick:ge,disabled:P[`name-${V.id}`],className:`p-1 text-gray-600 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200 ${P[`name-${V.id}`]?"opacity-50 cursor-not-allowed":""}`,title:"Cancel",children:"✕"})]}):l.jsxs("div",{children:[l.jsx("button",{onClick:()=>q(V),className:"text-left hover:bg-gray-100 dark:hover:bg-gray-700 px-1 py-0.5 rounded transition-colors",children:V.name}),D[`name-${V.id}`]&&l.jsx("div",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:D[`name-${V.id}`]})]})}),l.jsx("td",{className:"py-3 text-xs text-gray-600 dark:text-gray-400",children:V.memberCount||0}),l.jsx("td",{className:"py-3 text-xs text-gray-600 dark:text-gray-400",children:V.projectCount||0}),l.jsx("td",{className:"py-3 text-xs text-gray-600 dark:text-gray-400",children:V.taskCount||0}),l.jsxs("td",{className:"py-3",children:[l.jsxs("div",{className:"relative",children:[l.jsxs("select",{value:V.status||"active",onChange:ee=>G(V.id,ee.target.value),disabled:P[`status-${V.id}`],className:`px-2 py-1 rounded-full text-xs font-medium border-0 focus:outline-none focus:ring-1 focus:ring-brand ${pye[V.status||"active"]} ${P[`status-${V.id}`]?"opacity-50 cursor-not-allowed":""}`,children:[l.jsx("option",{value:"active",children:"Active"}),l.jsx("option",{value:"inactive",children:"Inactive"}),l.jsx("option",{value:"archived",children:"Archived"})]}),P[`status-${V.id}`]&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:l.jsx("div",{className:"w-3 h-3 border border-gray-400 border-t-transparent rounded-full animate-spin"})})]}),D[`status-${V.id}`]&&l.jsx("div",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:D[`status-${V.id}`]})]}),l.jsx("td",{className:"py-3",children:l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("button",{onClick:()=>Q(V.id),className:"p-1 text-brand hover:text-brand-dark transition-colors",title:"View Details",children:l.jsx(KP,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>ne(V.id),className:"p-1 text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-200 transition-colors",title:"View Dashboard",children:l.jsx(dW,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>K(V),className:"p-1 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-200 transition-colors",title:"Delete Facility",children:l.jsx(Vi,{className:"w-4 h-4"})})]})})]},V.id))})]})})]}),l.jsx(vW,{isOpen:p,onClose:()=>m(!1),onCreate:W,isDarkMode:F}),l.jsx(hye,{isOpen:y,onClose:()=>{x(!1),k(null)},onUpdate:Y,facility:N,isDarkMode:F}),l.jsx(fye,{isOpen:_,onClose:()=>{w(!1),k(null)},onDelete:Le,facility:N,isDarkMode:F})]})},id=({message:t,onClose:e,duration:n=3e3,type:r="success"})=>{v.useEffect(()=>{const c=setTimeout(()=>{e()},n);return()=>clearTimeout(c)},[n,e]);const s=r==="success",i=s?"bg-green-500":"bg-red-500",a="text-white",o=s?l.jsx(Mi,{className:"w-6 h-6 text-white animate-pulse"}):l.jsx(DC,{className:"w-6 h-6 text-white animate-pulse"});return l.jsxs("div",{className:`fixed bottom-5 right-5 z-[1000] max-w-xs w-full ${i} rounded-md shadow-lg flex items-center space-x-3 p-4`,children:[o,l.jsx("span",{className:`${a} font-medium`,children:t})]})},gye=({isOpen:t,onClose:e,onConfirm:n,itemName:r,itemType:s,isDarkMode:i})=>{const[a,o]=v.useState(!1);return v.useEffect(()=>{if(t)o(!0);else{const c=setTimeout(()=>o(!1),300);return()=>clearTimeout(c)}},[t]),a?l.jsx("div",{className:`fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-[5000] transition-opacity duration-300 ${t?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:e,children:l.jsxs("div",{className:`w-full max-w-sm mx-4 rounded-lg shadow-2xl transition-transform duration-300 ${t?"scale-100":"scale-95"} ${i?"bg-gray-900 text-white":"bg-white text-gray-900"}`,onClick:c=>c.stopPropagation(),children:[l.jsxs("div",{className:`px-4 py-3 border-b flex items-center justify-between ${i?"border-gray-700":"border-gray-300"}`,children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Vi,{className:"w-5 h-5 text-red-600"}),l.jsxs("h2",{className:"text-lg font-semibold",children:["Delete ",s.charAt(0).toUpperCase()+s.slice(1)]})]}),l.jsx("button",{onClick:e,className:`p-1 rounded-md transition-colors ${i?"hover:bg-gray-700":"hover:bg-gray-100"}`,"aria-label":`Close delete ${s} modal`,children:l.jsx(yn,{className:"w-5 h-5"})})]}),l.jsxs("div",{className:"p-4 space-y-4",children:[l.jsxs("p",{className:"text-sm",children:["Are you sure you want to delete the ",s," ",l.jsx("strong",{children:r}),"? This action cannot be undone."]}),l.jsxs("div",{className:"flex space-x-3 pt-2",children:[l.jsx("button",{type:"button",onClick:e,className:`flex-1 px-3 py-2 border rounded-lg transition-colors text-sm ${i?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:"Cancel"}),l.jsx("button",{type:"button",onClick:n,className:"flex-1 px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm",children:"Delete"})]})]})]})}):null},yye=({isOpen:t,onClose:e,onConfirm:n,projectName:r,isDarkMode:s})=>{const[i,a]=v.useState(!1);return v.useEffect(()=>{if(t)a(!0);else{const o=setTimeout(()=>a(!1),300);return()=>clearTimeout(o)}},[t]),i?l.jsx("div",{className:`fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-[5000] transition-opacity duration-300 ${t?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:e,children:l.jsxs("div",{className:`w-full max-w-sm mx-4 rounded-lg shadow-2xl transition-transform duration-300 ${t?"scale-100":"scale-95"} ${s?"bg-gray-900 text-white":"bg-white text-gray-900"}`,onClick:o=>o.stopPropagation(),children:[l.jsxs("div",{className:`px-4 py-3 border-b flex items-center justify-between ${s?"border-gray-700":"border-gray-300"}`,children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(sw,{className:"w-5 h-5 text-blue-600"}),l.jsx("h2",{className:"text-lg font-semibold",children:"Archive Project"})]}),l.jsx("button",{onClick:e,className:`p-1 rounded-md transition-colors ${s?"hover:bg-gray-700":"hover:bg-gray-100"}`,"aria-label":"Close archive project modal",children:l.jsx(yn,{className:"w-5 h-5"})})]}),l.jsxs("div",{className:"p-4 space-y-4",children:[l.jsxs("p",{className:"text-sm",children:["Are you sure you want to archive ",l.jsx("strong",{children:r}),"? You can restore it later from the archived projects section."]}),l.jsxs("div",{className:"flex space-x-3 pt-2",children:[l.jsx("button",{type:"button",onClick:e,className:`flex-1 px-3 py-2 border rounded-lg transition-colors text-sm ${s?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:"Cancel"}),l.jsx("button",{type:"button",onClick:n,className:"flex-1 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:"Archive"})]})]})]})}):null};class vye{stats={totalRequests:0,successfulRequests:0,rateLimitedRequests:0,failedRequests:0,averageResponseTime:0,lastResetTime:Date.now()};responseTimes=[];maxResponseTimeSamples=100;recordRequest(e,n,r){this.stats.totalRequests++,this.stats.averageResponseTime=n,e?this.stats.successfulRequests++:(this.stats.failedRequests++,r===429&&this.stats.rateLimitedRequests++),this.responseTimes.push(n),this.responseTimes.length>this.maxResponseTimeSamples&&this.responseTimes.shift(),this.stats.averageResponseTime=this.responseTimes.reduce((s,i)=>s+i,0)/this.responseTimes.length}getStats(){return{...this.stats}}getSuccessRate(){return this.stats.totalRequests===0?0:this.stats.successfulRequests/this.stats.totalRequests*100}getRateLimitRate(){return this.stats.totalRequests===0?0:this.stats.rateLimitedRequests/this.stats.totalRequests*100}reset(){this.stats={totalRequests:0,successfulRequests:0,rateLimitedRequests:0,failedRequests:0,averageResponseTime:0,lastResetTime:Date.now()},this.responseTimes=[]}logStats(){const e=this.getSuccessRate(),n=this.getRateLimitRate();console.group("📊 Rate Limit Monitor Stats"),console.log(`Total Requests: ${this.stats.totalRequests}`),console.log(`Success Rate: ${e.toFixed(1)}%`),console.log(`Rate Limited: ${this.stats.rateLimitedRequests} (${n.toFixed(1)}%)`),console.log(`Failed Requests: ${this.stats.failedRequests}`),console.log(`Average Response Time: ${this.stats.averageResponseTime.toFixed(0)}ms`),console.log(`Last Reset: ${new Date(this.stats.lastResetTime).toLocaleTimeString()}`),console.groupEnd()}autoLogInterval;startAutoLogging(){this.autoLogInterval||(this.autoLogInterval=setInterval(()=>{this.stats.totalRequests>0&&this.logStats()},3e4))}stopAutoLogging(){this.autoLogInterval&&(clearInterval(this.autoLogInterval),this.autoLogInterval=void 0)}}const jf=new vye;class xye{pendingRequests=new Map;circuitBreakers=new Map;requestQueue=[];isProcessingQueue=!1;maxConcurrentRequests=3;requestTimeout=1e4;circuitBreakerThreshold=5;circuitBreakerTimeout=3e4;async getSubtasksDirect(e){return(await Ie.get(`/tasks/${e}/subtasks`)).data}async getSubtasks(e){const n=`subtasks_${e}`,r=this.pendingRequests.get(n);if(r){if(Date.now()-r.timestamp<3e4)return console.log(`🔄 Reusing pending request for task ${e}`),r.promise;this.pendingRequests.delete(n)}if(this.isCircuitBreakerOpen(n))return console.warn(`🚫 Circuit breaker open for task ${e}, returning empty array`),[];const s=this.executeRequest(n,()=>this.getSubtasksDirect(e));return this.pendingRequests.set(n,{promise:s,timestamp:Date.now(),retryCount:0}),s.finally(()=>{this.pendingRequests.delete(n)}),s}async executeRequest(e,n){const r=Date.now();try{const s=await Promise.race([n(),new Promise((a,o)=>setTimeout(()=>o(new Error("Request timeout")),this.requestTimeout))]),i=Date.now()-r;return jf.recordRequest(!0,i),this.resetCircuitBreaker(e),s}catch(s){const i=Date.now()-r;throw jf.recordRequest(!1,i,s.response?.status),this.recordFailure(e),s}}isCircuitBreakerOpen(e){const n=this.circuitBreakers.get(e);return n&&n.state==="OPEN"?Date.now()-n.lastFailureTime>this.circuitBreakerTimeout?(n.state="HALF_OPEN",console.log(`🔄 Circuit breaker half-open for ${e}`),!1):!0:!1}recordFailure(e){const n=this.circuitBreakers.get(e)||{failures:0,lastFailureTime:0,state:"CLOSED"};n.failures++,n.lastFailureTime=Date.now(),n.failures>=this.circuitBreakerThreshold&&(n.state="OPEN",console.warn(`🚫 Circuit breaker opened for ${e} after ${n.failures} failures`)),this.circuitBreakers.set(e,n)}resetCircuitBreaker(e){const n=this.circuitBreakers.get(e);n&&(n.failures=0,n.state="CLOSED",this.circuitBreakers.set(e,n))}async processBatch(e,n,r={}){const{batchSize:s=5,delayBetweenBatches:i=1e3,maxConcurrency:a=3}=r,o=[],c=[];for(let d=0;d<e.length;d+=s){const p=e.slice(d,d+s).map(async(y,x)=>{try{return x>0&&await new Promise(w=>setTimeout(w,200*x)),{success:!0,result:await n(y),item:y}}catch(_){return console.warn("❌ Failed to process item:",_),{success:!1,error:_,item:y}}});(await Promise.allSettled(p)).forEach((y,x)=>{y.status==="fulfilled"?y.value.success?o.push(y.value.result):c.push(y.value.error):c.push(y.reason)}),d+s<e.length&&await new Promise(y=>setTimeout(y,i))}return c.length>0&&console.warn(`⚠️ Completed batch processing with ${c.length} errors`),o}async getSubtasksBatch(e){const n={};return(await this.processBatch(e,async s=>{try{const i=await this.getSubtasksDirect(s);return{taskId:s,subtasks:i}}catch(i){return console.warn(`Failed to load subtasks for task ${s}:`,i),{taskId:s,subtasks:[]}}},{batchSize:3,delayBetweenBatches:2e3,maxConcurrency:2})).forEach(({taskId:s,subtasks:i})=>{n[s]=i}),n}clear(){this.pendingRequests.clear(),this.circuitBreakers.clear(),this.requestQueue=[],this.isProcessingQueue=!1}resetCircuitBreakers(){this.circuitBreakers.clear(),console.log("🔄 All circuit breakers reset")}getStatus(){const e=Array.from(this.circuitBreakers.values()).filter(n=>n.state==="OPEN").length;return{pendingRequests:this.pendingRequests.size,openCircuitBreakers:e,queueLength:this.requestQueue.length}}}const W3=new xye,Ju=new Map,bye=async(t,e=3,n=1e3)=>{for(let r=0;r<=e;r++)try{return await t()}catch(s){if(s.response?.status===429&&r<e){const i=n*Math.pow(2,r)+Math.random()*1e3;console.warn(`Rate limited, retrying in ${i}ms (attempt ${r+1}/${e+1})`),await new Promise(a=>setTimeout(a,i));continue}throw s}throw new Error("Max retries exceeded")},gt={create:async t=>{const n=(await Ie.post("/tasks",t)).data;return si.invalidateTask(n.projectId),n},getByProject:async(t,e)=>{const n=si.getProjectTasks(t,e);if(n)return n;const r=new URLSearchParams;e?.page&&r.append("page",e.page.toString()),e?.limit&&r.append("limit",e.limit.toString()),e?.status&&r.append("status",e.status),e?.priority&&r.append("priority",e.priority),e?.assignee&&r.append("assignee",e.assignee);const s=await Ie.get(`/tasks/project/${t}?${r.toString()}`);let i;return s.data.tasks&&s.data.pagination,i=s.data,si.setProjectTasks(t,i,e),i},getById:async t=>(await Ie.get(`/tasks/${t}`)).data,update:async(t,e)=>{const r=(await Ie.put(`/tasks/${t}`,e)).data;return si.invalidateTask(r.projectId),gt.clearTaskDetailsCache(t),r},pin:async(t,e)=>{const r=(await Ie.put(`/tasks/${t}/pin`,{pinned:e})).data;return gt.clearTaskDetailsCache(t),r},delete:async t=>{const e=await gt.getById(t);await Ie.delete(`/tasks/${t}`),e?.projectId&&(si.invalidateTask(e.projectId),si.invalidateProject(e.projectId)),gt.clearTaskDetailsCache(t)},clearTaskDetailsCache:t=>{t?Ju.delete(`taskDetails_${t}`):Ju.clear()},getTaskDetails:async t=>{const e=`taskDetails_${t}`,n=Ju.get(e);if(n&&typeof n.then=="function")return n;const r=(async()=>{try{const s=await bye(async()=>{const[i,a,o,c,d,h,p]=await Promise.all([Ie.get(`/tasks/${t}`),Ie.get(`/tasks/${t}/comments`),Ie.get(`/tasks/${t}/attachments`),Ie.get(`/tasks/${t}/dependencies`),Ie.get(`/tasks/${t}/subtasks`),Ie.get(`/tasks/${t}/timeLogs`),Ie.get(`/tasks/${t}/activityLogs`)]);return{task:i.data,comments:a.data,attachments:o.data,dependencies:c.data,subtasks:d.data,timeLogs:h.data,activityLogs:p.data}});return Ju.set(e,s),setTimeout(()=>Ju.delete(e),5e3),s}catch(s){throw Ju.delete(e),s}})();return Ju.set(e,r),r},getComments:async t=>(await Ie.get(`/tasks/${t}/comments`)).data,createComment:async(t,e)=>{const n=await Ie.post(`/tasks/${t}/comments`,e);return gt.clearTaskDetailsCache(t),n.data},updateComment:async(t,e,n)=>{const r=await Ie.put(`/tasks/${t}/comments/${e}`,n);return gt.clearTaskDetailsCache(t),r.data},deleteComment:async(t,e)=>{await Ie.delete(`/tasks/${t}/comments/${e}`),gt.clearTaskDetailsCache(t)},likeComment:async(t,e)=>(await Ie.post(`/tasks/${t}/comments/${e}/like`)).data,dislikeComment:async(t,e)=>(await Ie.post(`/tasks/${t}/comments/${e}/dislike`)).data,getAttachments:async t=>(await Ie.get(`/tasks/${t}/attachments`)).data,uploadAttachment:async(t,e)=>{const n=new FormData;for(let s=0;s<e.length;s++)n.append("files",e[s]);return(await Ie.post(`/tasks/${t}/attachments/upload`,n,{headers:{"Content-Type":"multipart/form-data"}})).data.attachments},createAttachment:async(t,e)=>(await Ie.post(`/tasks/${t}/attachments`,e)).data,deleteAttachment:async(t,e)=>{await Ie.delete(`/tasks/${t}/attachments/${e}`)},getDependencies:async t=>(await Ie.get(`/tasks/${t}/dependencies`)).data,createDependency:async(t,e)=>(await Ie.post(`/tasks/${t}/dependencies`,e)).data,deleteDependency:async(t,e)=>{await Ie.delete(`/tasks/${t}/dependencies/${e}`)},searchTasksForDependency:async(t,e,n=10)=>(await Ie.get(`/tasks/${t}/dependencies/search?q=${encodeURIComponent(e)}&limit=${n}`)).data,getSubtasks:async t=>await W3.getSubtasks(t),getSubtasksBatch:async t=>await W3.getSubtasksBatch(t),createSubtask:async(t,e)=>(await Ie.post(`/tasks/${t}/subtasks`,e)).data,updateSubtask:async(t,e,n)=>(await Ie.put(`/tasks/${t}/subtasks/${e}`,n)).data,deleteSubtask:async(t,e)=>{await Ie.delete(`/tasks/${t}/subtasks/${e}`)},getTimeLogs:async t=>(await Ie.get(`/tasks/${t}/timeLogs`)).data,createTimeLog:async(t,e)=>(await Ie.post(`/tasks/${t}/timeLogs`,e)).data,updateTimeLog:async(t,e,n)=>(await Ie.put(`/tasks/${t}/timeLogs/${e}`,n)).data,deleteTimeLog:async(t,e)=>{await Ie.delete(`/tasks/${t}/timeLogs/${e}`)},getActivityLogs:async t=>(await Ie.get(`/tasks/${t}/activityLogs`)).data,createActivityLog:async(t,e)=>(await Ie.post(`/tasks/${t}/activityLogs`,e)).data,fetchUserProfilesByIds:async t=>t.length===0?{}:(await Ie.post("/auth/users/profiles",{userIds:t})).data,bulkUpdateStatus:async(t,e)=>(await Ie.put("/tasks/bulk/status",{taskIds:t,status:e})).data},Uc={getAll:async()=>(await Ie.get("/projects")).data,getById:async t=>(await Ie.get(`/projects/${t}`)).data,getByFacility:async t=>(await Ie.get(`/projects/facility/${t}`)).data,create:async t=>(await Ie.post("/projects",t)).data,update:async(t,e)=>{const r=(await Ie.put(`/projects/${t}`,e)).data;return si.invalidateFacility(r.facilityId),r},delete:async t=>{await Ie.delete(`/projects/${t}`)},archive:async t=>(await Ie.put(`/projects/${t}/archive`)).data},xW=()=>l.jsx("div",{className:"flex items-center justify-center min-h-screen",children:l.jsx(Ri.svg,{width:"64",height:"64",viewBox:"0 0 64 64",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.5},children:l.jsx(Ri.path,{d:"M8 8 L8 48 L28 48 L28 28 L48 28 L48 8",stroke:"#16a34a",strokeWidth:"6",strokeLinecap:"round",fill:"none",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:1.5,ease:"easeInOut",repeat:1/0,repeatType:"reverse"}})})}),wye=({title:t="Error",message:e,onClose:n,className:r=""})=>l.jsx("div",{className:`p-4 border border-red-200 bg-red-50 rounded-lg ${r}`,children:l.jsxs("div",{className:"flex items-start",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx(gp,{className:"h-5 w-5 text-red-400"})}),l.jsxs("div",{className:"ml-3 flex-1",children:[l.jsx("h3",{className:"text-sm font-medium text-red-800",children:t}),l.jsx("div",{className:"mt-2 text-sm text-red-700",children:e})]}),n&&l.jsx("div",{className:"ml-auto pl-3",children:l.jsx("div",{className:"-mx-1.5 -my-1.5",children:l.jsxs(ct,{variant:"ghost",size:"sm",onClick:n,className:"inline-flex bg-red-50 p-1.5 text-red-500 hover:bg-red-100 focus:ring-red-600 focus:ring-offset-red-50",children:[l.jsx("span",{className:"sr-only",children:"Dismiss"}),l.jsx(yn,{className:"h-4 w-4"})]})})})]})}),lw=({isOpen:t,title:e,message:n,confirmText:r="Confirm",cancelText:s="Cancel",onConfirm:i,onCancel:a,variant:o="danger",className:c=""})=>{const d=v.useRef(null),h=v.useRef(null);if(v.useEffect(()=>(t?(h.current=document.activeElement,document.body.style.overflow="hidden",document.body.classList.add("modal-open"),requestAnimationFrame(()=>{d.current&&d.current.focus()})):(document.body.style.overflow="unset",document.body.classList.remove("modal-open"),h.current&&h.current.focus()),()=>{document.body.style.overflow="unset",document.body.classList.remove("modal-open")}),[t]),!t)return null;const m={danger:{icon:"text-red-600 dark:text-red-400",button:"bg-red-600 hover:bg-red-700 focus:ring-red-600 dark:bg-red-600 dark:hover:bg-red-700",border:"border-red-200 dark:border-red-800",bg:"bg-red-50 dark:bg-red-900/20"},warning:{icon:"text-yellow-600 dark:text-yellow-400",button:"bg-yellow-600 hover:bg-yellow-700 focus:ring-yellow-600 dark:bg-yellow-600 dark:hover:bg-yellow-700",border:"border-yellow-200 dark:border-yellow-800",bg:"bg-yellow-50 dark:bg-yellow-900/20"},info:{icon:"text-blue-600 dark:text-blue-400",button:"bg-blue-600 hover:bg-blue-700 focus:ring-blue-600 dark:bg-blue-600 dark:hover:bg-blue-700",border:"border-blue-200 dark:border-blue-800",bg:"bg-blue-50 dark:bg-blue-900/20"}}[o];return l.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",onClick:y=>{y.target===y.currentTarget&&a()},children:l.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[l.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:l.jsx("div",{className:"absolute inset-0 bg-gray-500 dark:bg-gray-900 opacity-75"})}),l.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"​"}),l.jsxs("div",{ref:d,tabIndex:-1,role:"dialog","aria-modal":"true","aria-labelledby":"dialog-title","aria-describedby":"dialog-description",className:`inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full focus:outline-none ${c}`,onKeyDown:y=>{y.key==="Escape"&&a()},children:[l.jsx("div",{className:"bg-white dark:bg-gray-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:l.jsxs("div",{className:"sm:flex sm:items-start",children:[l.jsx("div",{className:`mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full ${m.bg} sm:mx-0 sm:h-10 sm:w-10`,children:l.jsx(gp,{className:`h-6 w-6 ${m.icon}`})}),l.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left flex-1",children:[l.jsx("h3",{id:"dialog-title",className:"text-lg leading-6 font-medium text-gray-900 dark:text-white",children:e}),l.jsx("div",{className:"mt-2",children:l.jsx("p",{id:"dialog-description",className:"text-sm text-gray-500 dark:text-gray-300",children:n})})]})]})}),l.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[l.jsx(ct,{onClick:i,className:`w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 text-base font-medium text-white focus:outline-none focus:ring-2 focus:ring-offset-2 sm:ml-3 sm:w-auto sm:text-sm ${m.button}`,children:r}),l.jsx(ct,{onClick:a,variant:"ghost",className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 dark:border-gray-600 shadow-sm px-4 py-2 bg-white dark:bg-gray-600 text-base font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:s})]})]})]})})},Pf={getRoleLevel:t=>({owner:4,manager:3,member:2,guest:1})[t]||0,hasRoleLevel:(t,e)=>Pf.getRoleLevel(t)>=Pf.getRoleLevel(e),getRoleDisplayName:t=>({owner:"Owner",manager:"Manager",member:"Member",guest:"Guest"})[t]||"Unknown",getRoleColor:(t,e=!1)=>{const n={owner:e?"text-purple-400 bg-purple-900/30":"text-purple-600 bg-purple-100",manager:e?"text-blue-400 bg-blue-900/30":"text-blue-600 bg-blue-100",member:e?"text-green-400 bg-green-900/30":"text-green-600 bg-green-100",guest:e?"text-gray-400 bg-gray-900/30":"text-gray-600 bg-gray-100"};return n[t]||n.guest},debugRole:(t,e,n)=>{console.group("🔍 Role Debug Information"),console.log("User Role:",t),console.log("Loading:",e),console.log("Error:",n),console.log("Role Level:",t?Pf.getRoleLevel(t):"N/A"),console.log("Display Name:",t?Pf.getRoleDisplayName(t):"N/A"),console.groupEnd()},isValidRole:t=>["owner","manager","member","guest"].includes(t),getRolePermissions:t=>({owner:["facility.manage","facility.delete","facility.transfer_ownership","users.invite","users.remove","users.change_roles","users.view_all","projects.create","projects.edit","projects.delete","projects.archive","tasks.create","tasks.edit","tasks.delete","tasks.assign","tasks.view_all","comments.add","attachments.add","time_logs.view_all","time_logs.approve","reports.view","reports.export","notifications.manage"],manager:["facility.manage","users.invite","users.remove","users.change_roles","users.view_all","projects.create","projects.edit","projects.delete","projects.archive","tasks.create","tasks.edit","tasks.delete","tasks.assign","tasks.view_all","comments.add","attachments.add","time_logs.view_all","time_logs.approve","reports.view","reports.export","notifications.manage"],member:["users.view_all","projects.create","projects.edit","tasks.create","tasks.edit","tasks.assign","tasks.view_all","comments.add","attachments.add","time_logs.view_all","reports.view","notifications.manage"],guest:["users.view_all","tasks.view_all","comments.add","notifications.manage"]})[t]||[]},df=new Map,_ye=3e4,JP=t=>{const{user:e}=gi(),n=t,[r,s]=v.useState(null),[i,a]=v.useState(!0),[o,c]=v.useState(null),d=v.useRef(null),h=v.useRef(!1),p=v.useCallback(async()=>{if(!n||!e||h.current){n||(console.warn("useUserRole: No facility ID provided"),s(null),a(!1),c("No facility ID provided"));return}const x=`${n}-${e.uid}`,_=df.get(x);if(_&&Date.now()-_.timestamp<_ye){s(_.role),a(!1),c(null);return}h.current=!0,a(!0),c(null);let w;try{w=await Gr.getById(n)}catch(N){console.error("Error fetching facility info:",N),c("Failed to fetch facility information"),a(!1),h.current=!1;return}try{if(w.ownerId===e.uid){const k="owner";s(k),df.set(x,{role:k,timestamp:Date.now()}),a(!1);return}let N;try{N=(await Gr.getUserRole(n)).role}catch{const S=new Promise((P,C)=>{d.current=setTimeout(()=>{C(new Error("Request timeout"))},1e4)}),O=On.getFacilityMembers(n),R=await Promise.race([O,S]);if(d.current&&(clearTimeout(d.current),d.current=null),!R||!R.members)throw console.error("Invalid response from getFacilityMembers:",R),new Error("Invalid response from facility members API");const M=R.members.find(P=>P.id===e.uid);M?N=M.role:N="guest"}s(N),df.set(x,{role:N,timestamp:Date.now()}),c(null)}catch(N){if(console.error("Error fetching user role:",N),d.current&&(clearTimeout(d.current),d.current=null),w.ownerId===e.uid){const k="owner";s(k),df.set(x,{role:k,timestamp:Date.now()}),c(null)}else s("guest"),c(N.message||"Failed to fetch user role")}finally{a(!1),h.current=!1}},[n,e]);v.useEffect(()=>{if(!n||!e){s(null),a(!1),c(null);return}s(null),c(null),p()},[n,e?.uid,p]),v.useEffect(()=>()=>{d.current&&clearTimeout(d.current)},[]);const m=v.useCallback(()=>{const x=`${n}-${e?.uid}`;df.delete(x),s(null),c(null),a(!0),p()},[p,n,e?.uid]),y=v.useCallback(()=>{const x=`${n}-${e?.uid}`;df.delete(x),n&&(Gr.clearUserRoleCache(n),On.clearFacilityMembersCache(n))},[n,e?.uid]);return{userRole:r,loading:i,error:o,refetch:m,invalidateCache:y,debugInfo:{userRole:r,loading:i,error:o,facilityId:n,userId:e?.uid,isOwner:!1,roleLevel:r?Pf.getRoleLevel(r):0,displayName:r?Pf.getRoleDisplayName(r):"Unknown"}}},cw={owner:4,manager:3,member:2,guest:1},bW={owner:["facility.manage","facility.delete","facility.transfer_ownership","users.invite","users.remove","users.change_roles","users.view_all","projects.create","projects.edit","projects.delete","projects.archive","tasks.create","tasks.edit","tasks.delete","tasks.assign","tasks.view_all","comments.add","attachments.add","time_logs.view_all","time_logs.approve","reports.view","reports.export","notifications.manage"],manager:["facility.manage","users.invite","users.remove","users.change_roles","users.view_all","projects.create","projects.edit","projects.delete","projects.archive","tasks.create","tasks.edit","tasks.delete","tasks.assign","tasks.view_all","comments.add","attachments.add","time_logs.view_all","time_logs.approve","reports.view","reports.export","notifications.manage"],member:["users.view_all","projects.create","projects.edit","tasks.create","tasks.edit","tasks.assign","tasks.view_all","comments.add","attachments.add","time_logs.view_all","reports.view","notifications.manage"],guest:["users.view_all","tasks.view_all","comments.add","notifications.manage"]},Qr=({children:t,requiredRole:e,requiredPermission:n,fallback:r=null,requireExactRole:s=!1,facilityId:i})=>{const{userRole:a,loading:o}=JP(i);if(o)return l.jsx(l.Fragment,{children:t});if(!a)return l.jsx(l.Fragment,{children:r});if(e){const c=cw[a],d=cw[e];if(s){if(a!==e)return l.jsx(l.Fragment,{children:r})}else if(c<d)return l.jsx(l.Fragment,{children:r})}return n&&!(bW[a]||[]).includes(n)?l.jsx(l.Fragment,{children:r}):l.jsx(l.Fragment,{children:t})},_u=t=>{const{userRole:e,loading:n}=JP(t),r=c=>n?!0:e?(bW[e]||[]).includes(c):!1;return{hasPermission:r,hasRole:(c,d=!1)=>{if(n)return!0;if(!e)return!1;if(d)return e===c;const h=cw[e],p=cw[c];return h>=p},canManageUsers:()=>r("users.invite")||r("users.remove")||r("users.change_roles"),canManageProjects:()=>r("projects.create")||r("projects.delete"),canManageTasks:()=>r("tasks.create")||r("tasks.delete"),userRole:e,loading:n,isOwner:e==="owner",isManager:e==="manager",isMember:e==="member",isGuest:e==="guest"}},bS=({role:t,size:e="md",showIcon:n=!0,className:r=""})=>{const i={owner:{label:"Owner",color:"bg-purple-100 text-purple-800 border-purple-200 dark:bg-purple-900 dark:text-purple-200 dark:border-purple-700",icon:"👑"},manager:{label:"Manager",color:"bg-blue-100 text-blue-800 border-blue-200 dark:bg-blue-900 dark:text-blue-200 dark:border-blue-700",icon:"👔"},member:{label:"Member",color:"bg-green-100 text-green-800 border-green-200 dark:bg-green-900 dark:text-green-200 dark:border-green-700",icon:"👤"},guest:{label:"Guest",color:"bg-gray-100 text-gray-800 border-gray-200 dark:bg-gray-800 dark:text-gray-200 dark:border-gray-600",icon:"👥"}}[t],a={sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-1 text-sm",lg:"px-3 py-1.5 text-base"};return l.jsxs("span",{className:`
        inline-flex items-center gap-1 rounded-full border font-medium
        ${a[e]}
        ${i.color}
        ${r}
      `,children:[n&&l.jsx("span",{className:"text-xs",children:i.icon}),i.label]})},ZP=oe.forwardRef(({className:t="",...e},n)=>l.jsx("input",{ref:n,className:`flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ${t}`,...e}));ZP.displayName="Input";const Eye=({task:t,onClose:e,isDarkMode:n,editedTask:r={},onFieldChange:s,onSaveTitle:i,onStatusChange:a,onPinChange:o,onDeleteClick:c})=>{const[d,h]=v.useState(!1),[p,m]=v.useState(""),[y,x]=v.useState(!1),_=()=>{h(!0),m(r.title??t.title)},w=()=>{if(p.trim()===""){alert("Task title cannot be empty");return}i?i(p):s&&s("title",p),h(!1)},N=()=>{m(""),h(!1)},k=D=>{D.key==="Enter"?w():D.key==="Escape"&&N()},S=D=>{switch(D){case"todo":return l.jsx(sr,{className:"w-4 h-4"});case"in-progress":return l.jsx(fW,{className:"w-4 h-4"});case"review":return l.jsx(em,{className:"w-4 h-4"});case"done":return l.jsx(Mi,{className:"w-4 h-4"});default:return l.jsx(sr,{className:"w-4 h-4"})}},O=D=>{switch(D){case"todo":return"bg-gray-50 text-gray-700 border-gray-200 dark:bg-gray-800 dark:text-gray-300 dark:border-gray-700";case"in-progress":return"bg-blue-50 text-blue-700 border-blue-200 dark:bg-blue-900/20 dark:text-blue-300 dark:border-blue-800";case"review":return"bg-amber-50 text-amber-700 border-amber-200 dark:bg-amber-900/20 dark:text-amber-300 dark:border-amber-800";case"done":return"bg-emerald-50 text-emerald-700 border-emerald-200 dark:bg-emerald-900/20 dark:text-emerald-300 dark:border-emerald-800";default:return"bg-gray-50 text-gray-700 border-gray-200 dark:bg-gray-800 dark:text-gray-300 dark:border-gray-700"}},R=D=>{switch(D){case"in-progress":return"In Progress";case"todo":return"To Do";default:return D.charAt(0).toUpperCase()+D.slice(1)}},M=()=>{x(!y)},P=D=>{a&&a(D),x(!1)},C=[{value:"todo",label:"To Do"},{value:"in-progress",label:"In Progress"},{value:"review",label:"Review"},{value:"done",label:"Done"}];return l.jsx("div",{className:`sticky top-0 z-40 px-6 py-4 border-b ${n?"border-gray-700 bg-gray-900/95 backdrop-blur":"border-gray-200 bg-white/95 backdrop-blur"}`,children:l.jsxs("div",{className:"flex items-start justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[l.jsxs("div",{className:"relative",children:[l.jsxs("button",{onClick:M,className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium border hover:opacity-80 transition-opacity ${O(t.status)}`,children:[S(t.status),l.jsx("span",{children:R(t.status)}),l.jsx(Va,{className:"w-3 h-3"})]}),y&&l.jsx("div",{className:`absolute top-full left-0 mt-1 w-44 rounded-md shadow-lg border z-50 ${n?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:C.map(D=>l.jsxs("button",{onClick:()=>P(D.value),className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2 ${t.status===D.value?"bg-gray-50 dark:bg-gray-700":""}`,children:[S(D.value),D.label]},D.value))})]}),d?l.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[l.jsx(ZP,{value:p,onChange:D=>m(D.target.value),onKeyDown:k,className:`text-xl font-bold ${n?"bg-gray-800 text-white border-transparent":"bg-white text-gray-900 border-transparent"} flex-1 overflow-x-auto max-w-full`,autoFocus:!0}),l.jsx(ct,{variant:"ghost",size:"sm",onClick:w,className:"h-8 w-8 p-0",children:l.jsx(WP,{className:"w-4 h-4"})}),l.jsx(ct,{variant:"ghost",size:"sm",onClick:N,className:"h-8 w-8 p-0",children:l.jsx(yn,{className:"w-4 h-4"})})]}):l.jsx("h1",{className:`text-xl md:text-2xl font-bold truncate max-w-[calc(100%-8rem)] ${n?"text-white":"text-gray-900"} cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-800 px-2 py-1 rounded`,onClick:_,children:r.title??t.title})]}),l.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[l.jsx(ct,{variant:"ghost",size:"sm",className:`h-8 w-8 p-0 ${r.pinned??t.pinned?"text-green-600 dark:text-green-400":""}`,onClick:()=>{const D=!(r.pinned??t.pinned);o&&o(D)},"aria-label":r.pinned??t.pinned?"Unpin task":"Pin task",title:r.pinned??t.pinned?"Unpin task":"Pin task",children:l.jsx(gW,{className:`w-4 h-4 ${r.pinned??t.pinned?"fill-current":""}`})}),l.jsx(ct,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:()=>{c&&c()},"aria-label":"Delete task",title:"Delete task",children:l.jsx(Vi,{className:"w-4 h-4"})}),l.jsx("div",{className:"w-px h-6 bg-gray-300 dark:bg-gray-600 mx-2"}),l.jsx(ct,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:e,"aria-label":"Close",title:"Close",children:l.jsx(yn,{className:"w-4 h-4"})})]})]})})};function wW(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=wW(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Et(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=wW(t))&&(r&&(r+=" "),r+=e);return r}const _W=6048e5,Nye=864e5,i_=6e4,a_=36e5,Sye=1e3,H3=Symbol.for("constructDateFrom");function on(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&H3 in t?t[H3](e):t instanceof Date?new t.constructor(e):new Date(e)}function it(t,e){return on(e||t,t)}function Wa(t,e,n){const r=it(t,n?.in);return isNaN(e)?on(n?.in||t,NaN):(e&&r.setDate(r.getDate()+e),r)}function Ga(t,e,n){const r=it(t,n?.in);if(isNaN(e))return on(t,NaN);if(!e)return r;const s=r.getDate(),i=on(t,r.getTime());i.setMonth(r.getMonth()+e+1,0);const a=i.getDate();return s>=a?i:(r.setFullYear(i.getFullYear(),i.getMonth(),s),r)}function EW(t,e,n){return on(t,+it(t)+e)}function kye(t,e,n){return EW(t,e*a_)}let Tye={};function gh(){return Tye}function Bl(t,e){const n=gh(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,s=it(t,e?.in),i=s.getDay(),a=(i<r?7:0)+i-r;return s.setDate(s.getDate()-a),s.setHours(0,0,0,0),s}function yp(t,e){return Bl(t,{...e,weekStartsOn:1})}function NW(t,e){const n=it(t,e?.in),r=n.getFullYear(),s=on(n,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const i=yp(s),a=on(n,0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);const o=yp(a);return n.getTime()>=i.getTime()?r+1:n.getTime()>=o.getTime()?r:r-1}function uw(t){const e=it(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function Ql(t,...e){const n=on.bind(null,e.find(r=>typeof r=="object"));return e.map(n)}function nh(t,e){const n=it(t,e?.in);return n.setHours(0,0,0,0),n}function vp(t,e,n){const[r,s]=Ql(n?.in,t,e),i=nh(r),a=nh(s),o=+i-uw(i),c=+a-uw(a);return Math.round((o-c)/Nye)}function Cye(t,e){const n=NW(t,e),r=on(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),yp(r)}function RC(t,e,n){const r=it(t,n?.in);return r.setTime(r.getTime()+e*i_),r}function eA(t,e,n){return Ga(t,e*3,n)}function jye(t,e,n){return EW(t,e*1e3)}function dw(t,e,n){return Wa(t,e*7,n)}function Cl(t,e,n){return Ga(t,e*12,n)}function q3(t,e){let n,r=e?.in;return t.forEach(s=>{!r&&typeof s=="object"&&(r=on.bind(null,s));const i=it(s,r);(!n||n<i||isNaN(+i))&&(n=i)}),on(r,n||NaN)}function K3(t,e){let n,r=e?.in;return t.forEach(s=>{!r&&typeof s=="object"&&(r=on.bind(null,s));const i=it(s,r);(!n||n>i||isNaN(+i))&&(n=i)}),on(r,n||NaN)}function Pye(t,e,n){const[r,s]=Ql(n?.in,t,e);return+nh(r)==+nh(s)}function jl(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function hw(t){return!(!jl(t)&&typeof t!="number"||isNaN(+it(t)))}function fw(t,e,n){const[r,s]=Ql(n?.in,t,e),i=r.getFullYear()-s.getFullYear(),a=r.getMonth()-s.getMonth();return i*12+a}function Md(t,e){const n=it(t,e?.in);return Math.trunc(n.getMonth()/3)+1}function pw(t,e,n){const[r,s]=Ql(n?.in,t,e),i=r.getFullYear()-s.getFullYear(),a=Md(r)-Md(s);return i*4+a}function mw(t,e,n){const[r,s]=Ql(n?.in,t,e);return r.getFullYear()-s.getFullYear()}function Aye(t,e,n){const[r,s]=Ql(n?.in,t,e),i=Y3(r,s),a=Math.abs(vp(r,s));r.setDate(r.getDate()-i*a);const o=+(Y3(r,s)===-i),c=i*(a-o);return c===0?0:c}function Y3(t,e){const n=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return n<0?-1:n>0?1:n}function SW(t,e){const n=it(t,e?.in);return n.setHours(23,59,59,999),n}function kW(t,e){const n=it(t,e?.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function OC(t,e){const n=it(t,e?.in),r=n.getMonth(),s=r-r%3;return n.setMonth(s,1),n.setHours(0,0,0,0),n}function TW(t,e){const n=it(t,e?.in);return n.setDate(1),n.setHours(0,0,0,0),n}function CW(t,e){const n=it(t,e?.in),r=n.getFullYear();return n.setFullYear(r+1,0,0),n.setHours(23,59,59,999),n}function o_(t,e){const n=it(t,e?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function Iye(t,e){const n=gh(),r=n.weekStartsOn??n.locale?.options?.weekStartsOn??0,s=it(t,e?.in),i=s.getDay(),a=(i<r?-7:0)+6-(i-r);return s.setDate(s.getDate()+a),s.setHours(23,59,59,999),s}const Dye={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Rye=(t,e,n)=>{let r;const s=Dye[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function wS(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const Oye={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Mye={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Lye={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Fye={date:wS({formats:Oye,defaultWidth:"full"}),time:wS({formats:Mye,defaultWidth:"full"}),dateTime:wS({formats:Lye,defaultWidth:"full"})},$ye={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Vye=(t,e,n,r)=>$ye[t];function ig(t){return(e,n)=>{const r=n?.context?String(n.context):"standalone";let s;if(r==="formatting"&&t.formattingValues){const a=t.defaultFormattingWidth||t.defaultWidth,o=n?.width?String(n.width):a;s=t.formattingValues[o]||t.formattingValues[a]}else{const a=t.defaultWidth,o=n?.width?String(n.width):t.defaultWidth;s=t.values[o]||t.values[a]}const i=t.argumentCallback?t.argumentCallback(e):e;return s[i]}}const Bye={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Uye={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},zye={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Wye={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Hye={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},qye={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Kye=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Yye={ordinalNumber:Kye,era:ig({values:Bye,defaultWidth:"wide"}),quarter:ig({values:Uye,defaultWidth:"wide",argumentCallback:t=>t-1}),month:ig({values:zye,defaultWidth:"wide"}),day:ig({values:Wye,defaultWidth:"wide"}),dayPeriod:ig({values:Hye,defaultWidth:"wide",formattingValues:qye,defaultFormattingWidth:"wide"})};function ag(t){return(e,n={})=>{const r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;const a=i[0],o=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(o)?Qye(o,p=>p.test(a)):Gye(o,p=>p.test(a));let d;d=t.valueCallback?t.valueCallback(c):c,d=n.valueCallback?n.valueCallback(d):d;const h=e.slice(a.length);return{value:d,rest:h}}}function Gye(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function Qye(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function Xye(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const s=r[0],i=e.match(t.parsePattern);if(!i)return null;let a=t.valueCallback?t.valueCallback(i[0]):i[0];a=n.valueCallback?n.valueCallback(a):a;const o=e.slice(s.length);return{value:a,rest:o}}}const Jye=/^(\d+)(th|st|nd|rd)?/i,Zye=/\d+/i,eve={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},tve={any:[/^b/i,/^(a|c)/i]},nve={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},rve={any:[/1/i,/2/i,/3/i,/4/i]},sve={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},ive={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},ave={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},ove={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},lve={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},cve={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},uve={ordinalNumber:Xye({matchPattern:Jye,parsePattern:Zye,valueCallback:t=>parseInt(t,10)}),era:ag({matchPatterns:eve,defaultMatchWidth:"wide",parsePatterns:tve,defaultParseWidth:"any"}),quarter:ag({matchPatterns:nve,defaultMatchWidth:"wide",parsePatterns:rve,defaultParseWidth:"any",valueCallback:t=>t+1}),month:ag({matchPatterns:sve,defaultMatchWidth:"wide",parsePatterns:ive,defaultParseWidth:"any"}),day:ag({matchPatterns:ave,defaultMatchWidth:"wide",parsePatterns:ove,defaultParseWidth:"any"}),dayPeriod:ag({matchPatterns:lve,defaultMatchWidth:"any",parsePatterns:cve,defaultParseWidth:"any"})},jW={code:"en-US",formatDistance:Rye,formatLong:Fye,formatRelative:Vye,localize:Yye,match:uve,options:{weekStartsOn:0,firstWeekContainsDate:1}};function dve(t,e){const n=it(t,e?.in);return vp(n,o_(n))+1}function tA(t,e){const n=it(t,e?.in),r=+yp(n)-+Cye(n);return Math.round(r/_W)+1}function nA(t,e){const n=it(t,e?.in),r=n.getFullYear(),s=gh(),i=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,a=on(e?.in||t,0);a.setFullYear(r+1,0,i),a.setHours(0,0,0,0);const o=Bl(a,e),c=on(e?.in||t,0);c.setFullYear(r,0,i),c.setHours(0,0,0,0);const d=Bl(c,e);return+n>=+o?r+1:+n>=+d?r:r-1}function hve(t,e){const n=gh(),r=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,s=nA(t,e),i=on(e?.in||t,0);return i.setFullYear(s,0,r),i.setHours(0,0,0,0),Bl(i,e)}function PW(t,e){const n=it(t,e?.in),r=+Bl(n,e)-+hve(n,e);return Math.round(r/_W)+1}function sn(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const Dc={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return sn(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):sn(n+1,2)},d(t,e){return sn(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return sn(t.getHours()%12||12,e.length)},H(t,e){return sn(t.getHours(),e.length)},m(t,e){return sn(t.getMinutes(),e.length)},s(t,e){return sn(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return sn(s,e.length)}},hf={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},G3={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return Dc.y(t,e)},Y:function(t,e,n,r){const s=nA(t,r),i=s>0?s:1-s;if(e==="YY"){const a=i%100;return sn(a,2)}return e==="Yo"?n.ordinalNumber(i,{unit:"year"}):sn(i,e.length)},R:function(t,e){const n=NW(t);return sn(n,e.length)},u:function(t,e){const n=t.getFullYear();return sn(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return sn(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return sn(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return Dc.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return sn(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const s=PW(t,r);return e==="wo"?n.ordinalNumber(s,{unit:"week"}):sn(s,e.length)},I:function(t,e,n){const r=tA(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):sn(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Dc.d(t,e)},D:function(t,e,n){const r=dve(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):sn(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return sn(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return sn(i,e.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return sn(s,e.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let s;switch(r===12?s=hf.noon:r===0?s=hf.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let s;switch(r>=17?s=hf.evening:r>=12?s=hf.afternoon:r>=4?s=hf.morning:s=hf.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Dc.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Dc.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):sn(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):sn(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Dc.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Dc.s(t,e)},S:function(t,e){return Dc.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return X3(r);case"XXXX":case"XX":return ad(r);case"XXXXX":case"XXX":default:return ad(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return X3(r);case"xxxx":case"xx":return ad(r);case"xxxxx":case"xxx":default:return ad(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Q3(r,":");case"OOOO":default:return"GMT"+ad(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Q3(r,":");case"zzzz":default:return"GMT"+ad(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return sn(r,e.length)},T:function(t,e,n){return sn(+t,e.length)}};function Q3(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Math.trunc(r/60),i=r%60;return i===0?n+String(s):n+String(s)+e+sn(i,2)}function X3(t,e){return t%60===0?(t>0?"-":"+")+sn(Math.abs(t)/60,2):ad(t,e)}function ad(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=sn(Math.trunc(r/60),2),i=sn(r%60,2);return n+s+e+i}const J3=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},AW=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},fve=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return J3(t,e);let i;switch(r){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",J3(r,e)).replace("{{time}}",AW(s,e))},MC={p:AW,P:fve},pve=/^D+$/,mve=/^Y+$/,gve=["D","DD","YY","YYYY"];function yve(t){return pve.test(t)}function vve(t){return mve.test(t)}function xve(t,e,n){const r=bve(t,e,n);if(console.warn(r),gve.includes(t))throw new RangeError(r)}function bve(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const wve=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,_ve=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Eve=/^'([^]*?)'?$/,Nve=/''/g,Sve=/[a-zA-Z]/;function Z3(t,e,n){const r=gh(),s=n?.locale??r.locale??jW,i=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,a=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,o=it(t,n?.in);if(!hw(o))throw new RangeError("Invalid time value");let c=e.match(_ve).map(h=>{const p=h[0];if(p==="p"||p==="P"){const m=MC[p];return m(h,s.formatLong)}return h}).join("").match(wve).map(h=>{if(h==="''")return{isToken:!1,value:"'"};const p=h[0];if(p==="'")return{isToken:!1,value:kve(h)};if(G3[p])return{isToken:!0,value:h};if(p.match(Sve))throw new RangeError("Format string contains an unescaped latin alphabet character `"+p+"`");return{isToken:!1,value:h}});s.localize.preprocessor&&(c=s.localize.preprocessor(o,c));const d={firstWeekContainsDate:i,weekStartsOn:a,locale:s};return c.map(h=>{if(!h.isToken)return h.value;const p=h.value;(!n?.useAdditionalWeekYearTokens&&vve(p)||!n?.useAdditionalDayOfYearTokens&&yve(p))&&xve(p,e,String(t));const m=G3[p[0]];return m(o,p,s.localize,d)}).join("")}function kve(t){const e=t.match(Eve);return e?e[1].replace(Nve,"'"):t}function e5(t,e){return it(t,e?.in).getDate()}function Tve(t,e){return it(t,e?.in).getDay()}function Cve(t,e){const n=it(t,e?.in),r=n.getFullYear(),s=n.getMonth(),i=on(n,0);return i.setFullYear(r,s+1,0),i.setHours(0,0,0,0),i.getDate()}function jve(){return Object.assign({},gh())}function Pl(t,e){return it(t,e?.in).getHours()}function Pve(t,e){const n=it(t,e?.in).getDay();return n===0?7:n}function Al(t,e){return it(t,e?.in).getMinutes()}function Cs(t,e){return it(t,e?.in).getMonth()}function Xc(t){return it(t).getSeconds()}function LC(t){return+it(t)}function It(t,e){return it(t,e?.in).getFullYear()}function cu(t,e){return+it(t)>+it(e)}function To(t,e){return+it(t)<+it(e)}function Ave(t,e){return+it(t)==+it(e)}function Ive(t,e){const n=Dve(e)?new e(0):on(e,0);return n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),n.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),n}function Dve(t){return typeof t=="function"&&t.prototype?.constructor===t}const Rve=10;class IW{subPriority=0;validate(e,n){return!0}}class Ove extends IW{constructor(e,n,r,s,i){super(),this.value=e,this.validateValue=n,this.setValue=r,this.priority=s,i&&(this.subPriority=i)}validate(e,n){return this.validateValue(e,this.value,n)}set(e,n,r){return this.setValue(e,n,this.value,r)}}class Mve extends IW{priority=Rve;subPriority=-1;constructor(e,n){super(),this.context=e||(r=>on(n,r))}set(e,n){return n.timestampIsSet?e:on(e,Ive(e,this.context))}}class en{run(e,n,r,s){const i=this.parse(e,n,r,s);return i?{setter:new Ove(i.value,this.validate,this.set,this.priority,this.subPriority),rest:i.rest}:null}validate(e,n,r){return!0}}class Lve extends en{priority=140;parse(e,n,r){switch(n){case"G":case"GG":case"GGG":return r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"});case"GGGGG":return r.era(e,{width:"narrow"});case"GGGG":default:return r.era(e,{width:"wide"})||r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"})}}set(e,n,r){return n.era=r,e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["R","u","t","T"]}const dr={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},_o={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function hr(t,e){return t&&{value:e(t.value),rest:t.rest}}function Gn(t,e){const n=e.match(t);return n?{value:parseInt(n[0],10),rest:e.slice(n[0].length)}:null}function Eo(t,e){const n=e.match(t);if(!n)return null;if(n[0]==="Z")return{value:0,rest:e.slice(1)};const r=n[1]==="+"?1:-1,s=n[2]?parseInt(n[2],10):0,i=n[3]?parseInt(n[3],10):0,a=n[5]?parseInt(n[5],10):0;return{value:r*(s*a_+i*i_+a*Sye),rest:e.slice(n[0].length)}}function DW(t){return Gn(dr.anyDigitsSigned,t)}function ir(t,e){switch(t){case 1:return Gn(dr.singleDigit,e);case 2:return Gn(dr.twoDigits,e);case 3:return Gn(dr.threeDigits,e);case 4:return Gn(dr.fourDigits,e);default:return Gn(new RegExp("^\\d{1,"+t+"}"),e)}}function gw(t,e){switch(t){case 1:return Gn(dr.singleDigitSigned,e);case 2:return Gn(dr.twoDigitsSigned,e);case 3:return Gn(dr.threeDigitsSigned,e);case 4:return Gn(dr.fourDigitsSigned,e);default:return Gn(new RegExp("^-?\\d{1,"+t+"}"),e)}}function rA(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function RW(t,e){const n=e>0,r=n?e:1-e;let s;if(r<=50)s=t||100;else{const i=r+50,a=Math.trunc(i/100)*100,o=t>=i%100;s=t+a-(o?100:0)}return n?s:1-s}function OW(t){return t%400===0||t%4===0&&t%100!==0}class Fve extends en{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(e,n,r){const s=i=>({year:i,isTwoDigitYear:n==="yy"});switch(n){case"y":return hr(ir(4,e),s);case"yo":return hr(r.ordinalNumber(e,{unit:"year"}),s);default:return hr(ir(n.length,e),s)}}validate(e,n){return n.isTwoDigitYear||n.year>0}set(e,n,r){const s=e.getFullYear();if(r.isTwoDigitYear){const a=RW(r.year,s);return e.setFullYear(a,0,1),e.setHours(0,0,0,0),e}const i=!("era"in n)||n.era===1?r.year:1-r.year;return e.setFullYear(i,0,1),e.setHours(0,0,0,0),e}}class $ve extends en{priority=130;parse(e,n,r){const s=i=>({year:i,isTwoDigitYear:n==="YY"});switch(n){case"Y":return hr(ir(4,e),s);case"Yo":return hr(r.ordinalNumber(e,{unit:"year"}),s);default:return hr(ir(n.length,e),s)}}validate(e,n){return n.isTwoDigitYear||n.year>0}set(e,n,r,s){const i=nA(e,s);if(r.isTwoDigitYear){const o=RW(r.year,i);return e.setFullYear(o,0,s.firstWeekContainsDate),e.setHours(0,0,0,0),Bl(e,s)}const a=!("era"in n)||n.era===1?r.year:1-r.year;return e.setFullYear(a,0,s.firstWeekContainsDate),e.setHours(0,0,0,0),Bl(e,s)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]}class Vve extends en{priority=130;parse(e,n){return gw(n==="R"?4:n.length,e)}set(e,n,r){const s=on(e,0);return s.setFullYear(r,0,4),s.setHours(0,0,0,0),yp(s)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]}class Bve extends en{priority=130;parse(e,n){return gw(n==="u"?4:n.length,e)}set(e,n,r){return e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]}class Uve extends en{priority=120;parse(e,n,r){switch(n){case"Q":case"QQ":return ir(n.length,e);case"Qo":return r.ordinalNumber(e,{unit:"quarter"});case"QQQ":return r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return r.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(e,{width:"wide",context:"formatting"})||r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=1&&n<=4}set(e,n,r){return e.setMonth((r-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]}class zve extends en{priority=120;parse(e,n,r){switch(n){case"q":case"qq":return ir(n.length,e);case"qo":return r.ordinalNumber(e,{unit:"quarter"});case"qqq":return r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return r.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(e,{width:"wide",context:"standalone"})||r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,n){return n>=1&&n<=4}set(e,n,r){return e.setMonth((r-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]}class Wve extends en{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(e,n,r){const s=i=>i-1;switch(n){case"M":return hr(Gn(dr.month,e),s);case"MM":return hr(ir(2,e),s);case"Mo":return hr(r.ordinalNumber(e,{unit:"month"}),s);case"MMM":return r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return r.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(e,{width:"wide",context:"formatting"})||r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=0&&n<=11}set(e,n,r){return e.setMonth(r,1),e.setHours(0,0,0,0),e}}class Hve extends en{priority=110;parse(e,n,r){const s=i=>i-1;switch(n){case"L":return hr(Gn(dr.month,e),s);case"LL":return hr(ir(2,e),s);case"Lo":return hr(r.ordinalNumber(e,{unit:"month"}),s);case"LLL":return r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return r.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(e,{width:"wide",context:"standalone"})||r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"})}}validate(e,n){return n>=0&&n<=11}set(e,n,r){return e.setMonth(r,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]}function qve(t,e,n){const r=it(t,n?.in),s=PW(r,n)-e;return r.setDate(r.getDate()-s*7),it(r,n?.in)}class Kve extends en{priority=100;parse(e,n,r){switch(n){case"w":return Gn(dr.week,e);case"wo":return r.ordinalNumber(e,{unit:"week"});default:return ir(n.length,e)}}validate(e,n){return n>=1&&n<=53}set(e,n,r,s){return Bl(qve(e,r,s),s)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]}function Yve(t,e,n){const r=it(t,n?.in),s=tA(r,n)-e;return r.setDate(r.getDate()-s*7),r}class Gve extends en{priority=100;parse(e,n,r){switch(n){case"I":return Gn(dr.week,e);case"Io":return r.ordinalNumber(e,{unit:"week"});default:return ir(n.length,e)}}validate(e,n){return n>=1&&n<=53}set(e,n,r){return yp(Yve(e,r))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]}const Qve=[31,28,31,30,31,30,31,31,30,31,30,31],Xve=[31,29,31,30,31,30,31,31,30,31,30,31];class Jve extends en{priority=90;subPriority=1;parse(e,n,r){switch(n){case"d":return Gn(dr.date,e);case"do":return r.ordinalNumber(e,{unit:"date"});default:return ir(n.length,e)}}validate(e,n){const r=e.getFullYear(),s=OW(r),i=e.getMonth();return s?n>=1&&n<=Xve[i]:n>=1&&n<=Qve[i]}set(e,n,r){return e.setDate(r),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]}class Zve extends en{priority=90;subpriority=1;parse(e,n,r){switch(n){case"D":case"DD":return Gn(dr.dayOfYear,e);case"Do":return r.ordinalNumber(e,{unit:"date"});default:return ir(n.length,e)}}validate(e,n){const r=e.getFullYear();return OW(r)?n>=1&&n<=366:n>=1&&n<=365}set(e,n,r){return e.setMonth(0,r),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]}function sA(t,e,n){const r=gh(),s=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,i=it(t,n?.in),a=i.getDay(),c=(e%7+7)%7,d=7-s,h=e<0||e>6?e-(a+d)%7:(c+d)%7-(a+d)%7;return Wa(i,h,n)}class exe extends en{priority=90;parse(e,n,r){switch(n){case"E":case"EE":case"EEE":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return r.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=0&&n<=6}set(e,n,r,s){return e=sA(e,r,s),e.setHours(0,0,0,0),e}incompatibleTokens=["D","i","e","c","t","T"]}class txe extends en{priority=90;parse(e,n,r,s){const i=a=>{const o=Math.floor((a-1)/7)*7;return(a+s.weekStartsOn+6)%7+o};switch(n){case"e":case"ee":return hr(ir(n.length,e),i);case"eo":return hr(r.ordinalNumber(e,{unit:"day"}),i);case"eee":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"eeeee":return r.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=0&&n<=6}set(e,n,r,s){return e=sA(e,r,s),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]}class nxe extends en{priority=90;parse(e,n,r,s){const i=a=>{const o=Math.floor((a-1)/7)*7;return(a+s.weekStartsOn+6)%7+o};switch(n){case"c":case"cc":return hr(ir(n.length,e),i);case"co":return hr(r.ordinalNumber(e,{unit:"day"}),i);case"ccc":return r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});case"ccccc":return r.day(e,{width:"narrow",context:"standalone"});case"cccccc":return r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return r.day(e,{width:"wide",context:"standalone"})||r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"})}}validate(e,n){return n>=0&&n<=6}set(e,n,r,s){return e=sA(e,r,s),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]}function rxe(t,e,n){const r=it(t,n?.in),s=Pve(r,n),i=e-s;return Wa(r,i,n)}class sxe extends en{priority=90;parse(e,n,r){const s=i=>i===0?7:i;switch(n){case"i":case"ii":return ir(n.length,e);case"io":return r.ordinalNumber(e,{unit:"day"});case"iii":return hr(r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),s);case"iiiii":return hr(r.day(e,{width:"narrow",context:"formatting"}),s);case"iiiiii":return hr(r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),s);case"iiii":default:return hr(r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),s)}}validate(e,n){return n>=1&&n<=7}set(e,n,r){return e=rxe(e,r),e.setHours(0,0,0,0),e}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]}class ixe extends en{priority=80;parse(e,n,r){switch(n){case"a":case"aa":case"aaa":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,n,r){return e.setHours(rA(r),0,0,0),e}incompatibleTokens=["b","B","H","k","t","T"]}class axe extends en{priority=80;parse(e,n,r){switch(n){case"b":case"bb":case"bbb":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,n,r){return e.setHours(rA(r),0,0,0),e}incompatibleTokens=["a","B","H","k","t","T"]}class oxe extends en{priority=80;parse(e,n,r){switch(n){case"B":case"BB":case"BBB":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,n,r){return e.setHours(rA(r),0,0,0),e}incompatibleTokens=["a","b","t","T"]}class lxe extends en{priority=70;parse(e,n,r){switch(n){case"h":return Gn(dr.hour12h,e);case"ho":return r.ordinalNumber(e,{unit:"hour"});default:return ir(n.length,e)}}validate(e,n){return n>=1&&n<=12}set(e,n,r){const s=e.getHours()>=12;return s&&r<12?e.setHours(r+12,0,0,0):!s&&r===12?e.setHours(0,0,0,0):e.setHours(r,0,0,0),e}incompatibleTokens=["H","K","k","t","T"]}class cxe extends en{priority=70;parse(e,n,r){switch(n){case"H":return Gn(dr.hour23h,e);case"Ho":return r.ordinalNumber(e,{unit:"hour"});default:return ir(n.length,e)}}validate(e,n){return n>=0&&n<=23}set(e,n,r){return e.setHours(r,0,0,0),e}incompatibleTokens=["a","b","h","K","k","t","T"]}class uxe extends en{priority=70;parse(e,n,r){switch(n){case"K":return Gn(dr.hour11h,e);case"Ko":return r.ordinalNumber(e,{unit:"hour"});default:return ir(n.length,e)}}validate(e,n){return n>=0&&n<=11}set(e,n,r){return e.getHours()>=12&&r<12?e.setHours(r+12,0,0,0):e.setHours(r,0,0,0),e}incompatibleTokens=["h","H","k","t","T"]}class dxe extends en{priority=70;parse(e,n,r){switch(n){case"k":return Gn(dr.hour24h,e);case"ko":return r.ordinalNumber(e,{unit:"hour"});default:return ir(n.length,e)}}validate(e,n){return n>=1&&n<=24}set(e,n,r){const s=r<=24?r%24:r;return e.setHours(s,0,0,0),e}incompatibleTokens=["a","b","h","H","K","t","T"]}class hxe extends en{priority=60;parse(e,n,r){switch(n){case"m":return Gn(dr.minute,e);case"mo":return r.ordinalNumber(e,{unit:"minute"});default:return ir(n.length,e)}}validate(e,n){return n>=0&&n<=59}set(e,n,r){return e.setMinutes(r,0,0),e}incompatibleTokens=["t","T"]}class fxe extends en{priority=50;parse(e,n,r){switch(n){case"s":return Gn(dr.second,e);case"so":return r.ordinalNumber(e,{unit:"second"});default:return ir(n.length,e)}}validate(e,n){return n>=0&&n<=59}set(e,n,r){return e.setSeconds(r,0),e}incompatibleTokens=["t","T"]}class pxe extends en{priority=30;parse(e,n){const r=s=>Math.trunc(s*Math.pow(10,-n.length+3));return hr(ir(n.length,e),r)}set(e,n,r){return e.setMilliseconds(r),e}incompatibleTokens=["t","T"]}class mxe extends en{priority=10;parse(e,n){switch(n){case"X":return Eo(_o.basicOptionalMinutes,e);case"XX":return Eo(_o.basic,e);case"XXXX":return Eo(_o.basicOptionalSeconds,e);case"XXXXX":return Eo(_o.extendedOptionalSeconds,e);case"XXX":default:return Eo(_o.extended,e)}}set(e,n,r){return n.timestampIsSet?e:on(e,e.getTime()-uw(e)-r)}incompatibleTokens=["t","T","x"]}class gxe extends en{priority=10;parse(e,n){switch(n){case"x":return Eo(_o.basicOptionalMinutes,e);case"xx":return Eo(_o.basic,e);case"xxxx":return Eo(_o.basicOptionalSeconds,e);case"xxxxx":return Eo(_o.extendedOptionalSeconds,e);case"xxx":default:return Eo(_o.extended,e)}}set(e,n,r){return n.timestampIsSet?e:on(e,e.getTime()-uw(e)-r)}incompatibleTokens=["t","T","X"]}class yxe extends en{priority=40;parse(e){return DW(e)}set(e,n,r){return[on(e,r*1e3),{timestampIsSet:!0}]}incompatibleTokens="*"}class vxe extends en{priority=20;parse(e){return DW(e)}set(e,n,r){return[on(e,r),{timestampIsSet:!0}]}incompatibleTokens="*"}const xxe={G:new Lve,y:new Fve,Y:new $ve,R:new Vve,u:new Bve,Q:new Uve,q:new zve,M:new Wve,L:new Hve,w:new Kve,I:new Gve,d:new Jve,D:new Zve,E:new exe,e:new txe,c:new nxe,i:new sxe,a:new ixe,b:new axe,B:new oxe,h:new lxe,H:new cxe,K:new uxe,k:new dxe,m:new hxe,s:new fxe,S:new pxe,X:new mxe,x:new gxe,t:new yxe,T:new vxe},bxe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,wxe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,_xe=/^'([^]*?)'?$/,Exe=/''/g,Nxe=/\S/,Sxe=/[a-zA-Z]/;function kxe(t,e,n,r){const s=()=>on(r?.in||n,NaN),i=jve(),a=r?.locale??i.locale??jW,o=r?.firstWeekContainsDate??r?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,c=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??i.weekStartsOn??i.locale?.options?.weekStartsOn??0;if(!e)return t?s():it(n,r?.in);const d={firstWeekContainsDate:o,weekStartsOn:c,locale:a},h=[new Mve(r?.in,n)],p=e.match(wxe).map(w=>{const N=w[0];if(N in MC){const k=MC[N];return k(w,a.formatLong)}return w}).join("").match(bxe),m=[];for(let w of p){const N=w[0],k=xxe[N];if(k){const{incompatibleTokens:S}=k;if(Array.isArray(S)){const R=m.find(M=>S.includes(M.token)||M.token===N);if(R)throw new RangeError(`The format string mustn't contain \`${R.fullToken}\` and \`${w}\` at the same time`)}else if(k.incompatibleTokens==="*"&&m.length>0)throw new RangeError(`The format string mustn't contain \`${w}\` and any other token at the same time`);m.push({token:N,fullToken:w});const O=k.run(t,w,a.match,d);if(!O)return s();h.push(O.setter),t=O.rest}else{if(N.match(Sxe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+N+"`");if(w==="''"?w="'":N==="'"&&(w=Txe(w)),t.indexOf(w)===0)t=t.slice(w.length);else return s()}}if(t.length>0&&Nxe.test(t))return s();const y=h.map(w=>w.priority).sort((w,N)=>N-w).filter((w,N,k)=>k.indexOf(w)===N).map(w=>h.filter(N=>N.priority===w).sort((N,k)=>k.subPriority-N.subPriority)).map(w=>w[0]);let x=it(n,r?.in);if(isNaN(+x))return s();const _={};for(const w of y){if(!w.validate(x,d))return s();const N=w.set(x,_,d);Array.isArray(N)?(x=N[0],Object.assign(_,N[1])):x=N}return x}function Txe(t){return t.match(_xe)[1].replace(Exe,"'")}function Cxe(t,e,n){const[r,s]=Ql(n?.in,t,e);return r.getFullYear()===s.getFullYear()&&r.getMonth()===s.getMonth()}function jxe(t,e,n){const[r,s]=Ql(n?.in,t,e);return+OC(r)==+OC(s)}function Pxe(t,e,n){const[r,s]=Ql(n?.in,t,e);return r.getFullYear()===s.getFullYear()}function E0(t,e,n){const r=+it(t,n?.in),[s,i]=[+it(e.start,n?.in),+it(e.end,n?.in)].sort((a,o)=>a-o);return r>=s&&r<=i}function Axe(t,e,n){return Wa(t,-1,n)}function Ixe(t,e){const n=()=>on(e?.in,NaN),s=Mxe(t);let i;if(s.date){const d=Lxe(s.date,2);i=Fxe(d.restDateString,d.year)}if(!i||isNaN(+i))return n();const a=+i;let o=0,c;if(s.time&&(o=$xe(s.time),isNaN(o)))return n();if(s.timezone){if(c=Vxe(s.timezone),isNaN(c))return n()}else{const d=new Date(a+o),h=it(0,e?.in);return h.setFullYear(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()),h.setHours(d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds()),h}return it(a+o+c,e?.in)}const ox={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Dxe=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Rxe=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Oxe=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Mxe(t){const e={},n=t.split(ox.dateTimeDelimiter);let r;if(n.length>2)return e;if(/:/.test(n[0])?r=n[0]:(e.date=n[0],r=n[1],ox.timeZoneDelimiter.test(e.date)&&(e.date=t.split(ox.timeZoneDelimiter)[0],r=t.substr(e.date.length,t.length))),r){const s=ox.timezone.exec(r);s?(e.time=r.replace(s[1],""),e.timezone=s[1]):e.time=r}return e}function Lxe(t,e){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=t.match(n);if(!r)return{year:NaN,restDateString:""};const s=r[1]?parseInt(r[1]):null,i=r[2]?parseInt(r[2]):null;return{year:i===null?s:i*100,restDateString:t.slice((r[1]||r[2]).length)}}function Fxe(t,e){if(e===null)return new Date(NaN);const n=t.match(Dxe);if(!n)return new Date(NaN);const r=!!n[4],s=og(n[1]),i=og(n[2])-1,a=og(n[3]),o=og(n[4]),c=og(n[5])-1;if(r)return Hxe(e,o,c)?Bxe(e,o,c):new Date(NaN);{const d=new Date(0);return!zxe(e,i,a)||!Wxe(e,s)?new Date(NaN):(d.setUTCFullYear(e,i,Math.max(s,a)),d)}}function og(t){return t?parseInt(t):1}function $xe(t){const e=t.match(Rxe);if(!e)return NaN;const n=_S(e[1]),r=_S(e[2]),s=_S(e[3]);return qxe(n,r,s)?n*a_+r*i_+s*1e3:NaN}function _S(t){return t&&parseFloat(t.replace(",","."))||0}function Vxe(t){if(t==="Z")return 0;const e=t.match(Oxe);if(!e)return 0;const n=e[1]==="+"?-1:1,r=parseInt(e[2]),s=e[3]&&parseInt(e[3])||0;return Kxe(r,s)?n*(r*a_+s*i_):NaN}function Bxe(t,e,n){const r=new Date(0);r.setUTCFullYear(t,0,4);const s=r.getUTCDay()||7,i=(e-1)*7+n+1-s;return r.setUTCDate(r.getUTCDate()+i),r}const Uxe=[31,null,31,30,31,30,31,31,30,31,30,31];function MW(t){return t%400===0||t%4===0&&t%100!==0}function zxe(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(Uxe[e]||(MW(t)?29:28))}function Wxe(t,e){return e>=1&&e<=(MW(t)?366:365)}function Hxe(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function qxe(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function Kxe(t,e){return e>=0&&e<=59}function aa(t,e,n){const r=it(t,n?.in),s=r.getFullYear(),i=r.getDate(),a=on(t,0);a.setFullYear(s,e,15),a.setHours(0,0,0,0);const o=Cve(a);return r.setMonth(e,Math.min(i,o)),r}function sb(t,e,n){const r=it(t,n?.in);return r.setHours(e),r}function ib(t,e,n){const r=it(t,n?.in);return r.setMinutes(e),r}function xf(t,e,n){const r=it(t,n?.in),s=Math.trunc(r.getMonth()/3)+1,i=e-s;return aa(r,r.getMonth()+i*3)}function ab(t,e,n){const r=it(t,n?.in);return r.setSeconds(e),r}function xo(t,e,n){const r=it(t,n?.in);return isNaN(+r)?on(t,NaN):(r.setFullYear(e),r)}function Ld(t,e,n){return Ga(t,-e,n)}function LW(t,e,n){return eA(t,-1,n)}function t5(t,e,n){return dw(t,-1,n)}function xp(t,e,n){return Cl(t,-e,n)}function l_(){return typeof window<"u"}function tm(t){return FW(t)?(t.nodeName||"").toLowerCase():"#document"}function Li(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function zo(t){var e;return(e=(FW(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function FW(t){return l_()?t instanceof Node||t instanceof Li(t).Node:!1}function Bs(t){return l_()?t instanceof Element||t instanceof Li(t).Element:!1}function Fo(t){return l_()?t instanceof HTMLElement||t instanceof Li(t).HTMLElement:!1}function n5(t){return!l_()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Li(t).ShadowRoot}const Yxe=new Set(["inline","contents"]);function uy(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=pa(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!Yxe.has(s)}const Gxe=new Set(["table","td","th"]);function Qxe(t){return Gxe.has(tm(t))}const Xxe=[":popover-open",":modal"];function c_(t){return Xxe.some(e=>{try{return t.matches(e)}catch{return!1}})}const Jxe=["transform","translate","scale","rotate","perspective"],Zxe=["transform","translate","scale","rotate","perspective","filter"],ebe=["paint","layout","strict","content"];function iA(t){const e=aA(),n=Bs(t)?pa(t):t;return Jxe.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||Zxe.some(r=>(n.willChange||"").includes(r))||ebe.some(r=>(n.contain||"").includes(r))}function tbe(t){let e=uu(t);for(;Fo(e)&&!bp(e);){if(iA(e))return e;if(c_(e))return null;e=uu(e)}return null}function aA(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const nbe=new Set(["html","body","#document"]);function bp(t){return nbe.has(tm(t))}function pa(t){return Li(t).getComputedStyle(t)}function u_(t){return Bs(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function uu(t){if(tm(t)==="html")return t;const e=t.assignedSlot||t.parentNode||n5(t)&&t.host||zo(t);return n5(e)?e.host:e}function $W(t){const e=uu(t);return bp(e)?t.ownerDocument?t.ownerDocument.body:t.body:Fo(e)&&uy(e)?e:$W(e)}function N0(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=$W(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),a=Li(s);if(i){const o=FC(a);return e.concat(a,a.visualViewport||[],uy(s)?s:[],o&&n?N0(o):[])}return e.concat(s,N0(s,[],n))}function FC(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}const wp=Math.min,Fd=Math.max,yw=Math.round,lx=Math.floor,Oo=t=>({x:t,y:t}),rbe={left:"right",right:"left",bottom:"top",top:"bottom"},sbe={start:"end",end:"start"};function ibe(t,e,n){return Fd(t,wp(e,n))}function d_(t,e){return typeof t=="function"?t(e):t}function _p(t){return t.split("-")[0]}function dy(t){return t.split("-")[1]}function abe(t){return t==="x"?"y":"x"}function oA(t){return t==="y"?"height":"width"}const obe=new Set(["top","bottom"]);function _d(t){return obe.has(_p(t))?"y":"x"}function lA(t){return abe(_d(t))}function lbe(t,e,n){n===void 0&&(n=!1);const r=dy(t),s=lA(t),i=oA(s);let a=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(a=vw(a)),[a,vw(a)]}function cbe(t){const e=vw(t);return[$C(t),e,$C(e)]}function $C(t){return t.replace(/start|end/g,e=>sbe[e])}const r5=["left","right"],s5=["right","left"],ube=["top","bottom"],dbe=["bottom","top"];function hbe(t,e,n){switch(t){case"top":case"bottom":return n?e?s5:r5:e?r5:s5;case"left":case"right":return e?ube:dbe;default:return[]}}function fbe(t,e,n,r){const s=dy(t);let i=hbe(_p(t),n==="start",r);return s&&(i=i.map(a=>a+"-"+s),e&&(i=i.concat(i.map($C)))),i}function vw(t){return t.replace(/left|right|bottom|top/g,e=>rbe[e])}function pbe(t){return{top:0,right:0,bottom:0,left:0,...t}}function VW(t){return typeof t!="number"?pbe(t):{top:t,right:t,bottom:t,left:t}}function xw(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}var mbe=typeof document<"u",gbe=function(){},bw=mbe?v.useLayoutEffect:gbe;const ybe={...Oj},vbe=ybe.useInsertionEffect,xbe=vbe||(t=>t());function bbe(t){const e=v.useRef(()=>{});return xbe(()=>{e.current=t}),v.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}function i5(t,e,n){let{reference:r,floating:s}=t;const i=_d(e),a=lA(e),o=oA(a),c=_p(e),d=i==="y",h=r.x+r.width/2-s.width/2,p=r.y+r.height/2-s.height/2,m=r[o]/2-s[o]/2;let y;switch(c){case"top":y={x:h,y:r.y-s.height};break;case"bottom":y={x:h,y:r.y+r.height};break;case"right":y={x:r.x+r.width,y:p};break;case"left":y={x:r.x-s.width,y:p};break;default:y={x:r.x,y:r.y}}switch(dy(e)){case"start":y[a]-=m*(n&&d?-1:1);break;case"end":y[a]+=m*(n&&d?-1:1);break}return y}const wbe=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:a}=n,o=i.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(e));let d=await a.getElementRects({reference:t,floating:e,strategy:s}),{x:h,y:p}=i5(d,r,c),m=r,y={},x=0;for(let _=0;_<o.length;_++){const{name:w,fn:N}=o[_],{x:k,y:S,data:O,reset:R}=await N({x:h,y:p,initialPlacement:r,placement:m,strategy:s,middlewareData:y,rects:d,platform:a,elements:{reference:t,floating:e}});h=k??h,p=S??p,y={...y,[w]:{...y[w],...O}},R&&x<=50&&(x++,typeof R=="object"&&(R.placement&&(m=R.placement),R.rects&&(d=R.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:s}):R.rects),{x:h,y:p}=i5(d,m,c)),_=-1)}return{x:h,y:p,placement:m,strategy:s,middlewareData:y}};async function _be(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:a,elements:o,strategy:c}=t,{boundary:d="clippingAncestors",rootBoundary:h="viewport",elementContext:p="floating",altBoundary:m=!1,padding:y=0}=d_(e,t),x=VW(y),w=o[m?p==="floating"?"reference":"floating":p],N=xw(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(w)))==null||n?w:w.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(o.floating)),boundary:d,rootBoundary:h,strategy:c})),k=p==="floating"?{x:r,y:s,width:a.floating.width,height:a.floating.height}:a.reference,S=await(i.getOffsetParent==null?void 0:i.getOffsetParent(o.floating)),O=await(i.isElement==null?void 0:i.isElement(S))?await(i.getScale==null?void 0:i.getScale(S))||{x:1,y:1}:{x:1,y:1},R=xw(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:k,offsetParent:S,strategy:c}):k);return{top:(N.top-R.top+x.top)/O.y,bottom:(R.bottom-N.bottom+x.bottom)/O.y,left:(N.left-R.left+x.left)/O.x,right:(R.right-N.right+x.right)/O.x}}const Ebe=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:a,elements:o,middlewareData:c}=e,{element:d,padding:h=0}=d_(t,e)||{};if(d==null)return{};const p=VW(h),m={x:n,y:r},y=lA(s),x=oA(y),_=await a.getDimensions(d),w=y==="y",N=w?"top":"left",k=w?"bottom":"right",S=w?"clientHeight":"clientWidth",O=i.reference[x]+i.reference[y]-m[y]-i.floating[x],R=m[y]-i.reference[y],M=await(a.getOffsetParent==null?void 0:a.getOffsetParent(d));let P=M?M[S]:0;(!P||!await(a.isElement==null?void 0:a.isElement(M)))&&(P=o.floating[S]||i.floating[x]);const C=O/2-R/2,D=P/2-_[x]/2-1,$=wp(p[N],D),F=wp(p[k],D),U=$,I=P-_[x]-F,z=P/2-_[x]/2+C,Q=ibe(U,z,I),ne=!c.arrow&&dy(s)!=null&&z!==Q&&i.reference[x]/2-(z<U?$:F)-_[x]/2<0,W=ne?z<U?z-U:z-I:0;return{[y]:m[y]+W,data:{[y]:Q,centerOffset:z-Q-W,...ne&&{alignmentOffset:W}},reset:ne}}}),Nbe=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:a,initialPlacement:o,platform:c,elements:d}=e,{mainAxis:h=!0,crossAxis:p=!0,fallbackPlacements:m,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:_=!0,...w}=d_(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const N=_p(s),k=_d(o),S=_p(o)===o,O=await(c.isRTL==null?void 0:c.isRTL(d.floating)),R=m||(S||!_?[vw(o)]:cbe(o)),M=x!=="none";!m&&M&&R.push(...fbe(o,_,x,O));const P=[o,...R],C=await _be(e,w),D=[];let $=((r=i.flip)==null?void 0:r.overflows)||[];if(h&&D.push(C[N]),p){const z=lbe(s,a,O);D.push(C[z[0]],C[z[1]])}if($=[...$,{placement:s,overflows:D}],!D.every(z=>z<=0)){var F,U;const z=(((F=i.flip)==null?void 0:F.index)||0)+1,Q=P[z];if(Q&&(!(p==="alignment"?k!==_d(Q):!1)||$.every(K=>_d(K.placement)===k?K.overflows[0]>0:!0)))return{data:{index:z,overflows:$},reset:{placement:Q}};let ne=(U=$.filter(W=>W.overflows[0]<=0).sort((W,K)=>W.overflows[1]-K.overflows[1])[0])==null?void 0:U.placement;if(!ne)switch(y){case"bestFit":{var I;const W=(I=$.filter(K=>{if(M){const Y=_d(K.placement);return Y===k||Y==="y"}return!0}).map(K=>[K.placement,K.overflows.filter(Y=>Y>0).reduce((Y,G)=>Y+G,0)]).sort((K,Y)=>K[1]-Y[1])[0])==null?void 0:I[0];W&&(ne=W);break}case"initialPlacement":ne=o;break}if(s!==ne)return{reset:{placement:ne}}}return{}}}},Sbe=new Set(["left","top"]);async function kbe(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),a=_p(n),o=dy(n),c=_d(n)==="y",d=Sbe.has(a)?-1:1,h=i&&c?-1:1,p=d_(e,t);let{mainAxis:m,crossAxis:y,alignmentAxis:x}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return o&&typeof x=="number"&&(y=o==="end"?x*-1:x),c?{x:y*h,y:m*d}:{x:m*d,y:y*h}}const Tbe=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:a,middlewareData:o}=e,c=await kbe(e,t);return a===((n=o.offset)==null?void 0:n.placement)&&(r=o.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:a}}}}};function BW(t){const e=pa(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Fo(t),i=s?t.offsetWidth:n,a=s?t.offsetHeight:r,o=yw(n)!==i||yw(r)!==a;return o&&(n=i,r=a),{width:n,height:r,$:o}}function cA(t){return Bs(t)?t:t.contextElement}function Bf(t){const e=cA(t);if(!Fo(e))return Oo(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=BW(e);let a=(i?yw(n.width):n.width)/r,o=(i?yw(n.height):n.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!o||!Number.isFinite(o))&&(o=1),{x:a,y:o}}const Cbe=Oo(0);function UW(t){const e=Li(t);return!aA()||!e.visualViewport?Cbe:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function jbe(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Li(t)?!1:e}function rh(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=cA(t);let a=Oo(1);e&&(r?Bs(r)&&(a=Bf(r)):a=Bf(t));const o=jbe(i,n,r)?UW(i):Oo(0);let c=(s.left+o.x)/a.x,d=(s.top+o.y)/a.y,h=s.width/a.x,p=s.height/a.y;if(i){const m=Li(i),y=r&&Bs(r)?Li(r):r;let x=m,_=FC(x);for(;_&&r&&y!==x;){const w=Bf(_),N=_.getBoundingClientRect(),k=pa(_),S=N.left+(_.clientLeft+parseFloat(k.paddingLeft))*w.x,O=N.top+(_.clientTop+parseFloat(k.paddingTop))*w.y;c*=w.x,d*=w.y,h*=w.x,p*=w.y,c+=S,d+=O,x=Li(_),_=FC(x)}}return xw({width:h,height:p,x:c,y:d})}function h_(t,e){const n=u_(t).scrollLeft;return e?e.left+n:rh(zo(t)).left+n}function zW(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-h_(t,n),s=n.top+e.scrollTop;return{x:r,y:s}}function Pbe(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",a=zo(r),o=e?c_(e.floating):!1;if(r===a||o&&i)return n;let c={scrollLeft:0,scrollTop:0},d=Oo(1);const h=Oo(0),p=Fo(r);if((p||!p&&!i)&&((tm(r)!=="body"||uy(a))&&(c=u_(r)),Fo(r))){const y=rh(r);d=Bf(r),h.x=y.x+r.clientLeft,h.y=y.y+r.clientTop}const m=a&&!p&&!i?zW(a,c):Oo(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-c.scrollLeft*d.x+h.x+m.x,y:n.y*d.y-c.scrollTop*d.y+h.y+m.y}}function Abe(t){return Array.from(t.getClientRects())}function Ibe(t){const e=zo(t),n=u_(t),r=t.ownerDocument.body,s=Fd(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=Fd(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+h_(t);const o=-n.scrollTop;return pa(r).direction==="rtl"&&(a+=Fd(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:a,y:o}}const a5=25;function Dbe(t,e){const n=Li(t),r=zo(t),s=n.visualViewport;let i=r.clientWidth,a=r.clientHeight,o=0,c=0;if(s){i=s.width,a=s.height;const h=aA();(!h||h&&e==="fixed")&&(o=s.offsetLeft,c=s.offsetTop)}const d=h_(r);if(d<=0){const h=r.ownerDocument,p=h.body,m=getComputedStyle(p),y=h.compatMode==="CSS1Compat"&&parseFloat(m.marginLeft)+parseFloat(m.marginRight)||0,x=Math.abs(r.clientWidth-p.clientWidth-y);x<=a5&&(i-=x)}else d<=a5&&(i+=d);return{width:i,height:a,x:o,y:c}}const Rbe=new Set(["absolute","fixed"]);function Obe(t,e){const n=rh(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=Fo(t)?Bf(t):Oo(1),a=t.clientWidth*i.x,o=t.clientHeight*i.y,c=s*i.x,d=r*i.y;return{width:a,height:o,x:c,y:d}}function o5(t,e,n){let r;if(e==="viewport")r=Dbe(t,n);else if(e==="document")r=Ibe(zo(t));else if(Bs(e))r=Obe(e,n);else{const s=UW(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return xw(r)}function WW(t,e){const n=uu(t);return n===e||!Bs(n)||bp(n)?!1:pa(n).position==="fixed"||WW(n,e)}function Mbe(t,e){const n=e.get(t);if(n)return n;let r=N0(t,[],!1).filter(o=>Bs(o)&&tm(o)!=="body"),s=null;const i=pa(t).position==="fixed";let a=i?uu(t):t;for(;Bs(a)&&!bp(a);){const o=pa(a),c=iA(a);!c&&o.position==="fixed"&&(s=null),(i?!c&&!s:!c&&o.position==="static"&&!!s&&Rbe.has(s.position)||uy(a)&&!c&&WW(t,a))?r=r.filter(h=>h!==a):s=o,a=uu(a)}return e.set(t,r),r}function Lbe(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const a=[...n==="clippingAncestors"?c_(e)?[]:Mbe(e,this._c):[].concat(n),r],o=a[0],c=a.reduce((d,h)=>{const p=o5(e,h,s);return d.top=Fd(p.top,d.top),d.right=wp(p.right,d.right),d.bottom=wp(p.bottom,d.bottom),d.left=Fd(p.left,d.left),d},o5(e,o,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function Fbe(t){const{width:e,height:n}=BW(t);return{width:e,height:n}}function $be(t,e,n){const r=Fo(e),s=zo(e),i=n==="fixed",a=rh(t,!0,i,e);let o={scrollLeft:0,scrollTop:0};const c=Oo(0);function d(){c.x=h_(s)}if(r||!r&&!i)if((tm(e)!=="body"||uy(s))&&(o=u_(e)),r){const y=rh(e,!0,i,e);c.x=y.x+e.clientLeft,c.y=y.y+e.clientTop}else s&&d();i&&!r&&s&&d();const h=s&&!r&&!i?zW(s,o):Oo(0),p=a.left+o.scrollLeft-c.x-h.x,m=a.top+o.scrollTop-c.y-h.y;return{x:p,y:m,width:a.width,height:a.height}}function ES(t){return pa(t).position==="static"}function l5(t,e){if(!Fo(t)||pa(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return zo(t)===n&&(n=n.ownerDocument.body),n}function HW(t,e){const n=Li(t);if(c_(t))return n;if(!Fo(t)){let s=uu(t);for(;s&&!bp(s);){if(Bs(s)&&!ES(s))return s;s=uu(s)}return n}let r=l5(t,e);for(;r&&Qxe(r)&&ES(r);)r=l5(r,e);return r&&bp(r)&&ES(r)&&!iA(r)?n:r||tbe(t)||n}const Vbe=async function(t){const e=this.getOffsetParent||HW,n=this.getDimensions,r=await n(t.floating);return{reference:$be(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Bbe(t){return pa(t).direction==="rtl"}const Ube={convertOffsetParentRelativeRectToViewportRelativeRect:Pbe,getDocumentElement:zo,getClippingRect:Lbe,getOffsetParent:HW,getElementRects:Vbe,getClientRects:Abe,getDimensions:Fbe,getScale:Bf,isElement:Bs,isRTL:Bbe};function qW(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function zbe(t,e){let n=null,r;const s=zo(t);function i(){var o;clearTimeout(r),(o=n)==null||o.disconnect(),n=null}function a(o,c){o===void 0&&(o=!1),c===void 0&&(c=1),i();const d=t.getBoundingClientRect(),{left:h,top:p,width:m,height:y}=d;if(o||e(),!m||!y)return;const x=lx(p),_=lx(s.clientWidth-(h+m)),w=lx(s.clientHeight-(p+y)),N=lx(h),S={rootMargin:-x+"px "+-_+"px "+-w+"px "+-N+"px",threshold:Fd(0,wp(1,c))||1};let O=!0;function R(M){const P=M[0].intersectionRatio;if(P!==c){if(!O)return a();P?a(!1,P):r=setTimeout(()=>{a(!1,1e-7)},1e3)}P===1&&!qW(d,t.getBoundingClientRect())&&a(),O=!1}try{n=new IntersectionObserver(R,{...S,root:s.ownerDocument})}catch{n=new IntersectionObserver(R,S)}n.observe(t)}return a(!0),i}function Wbe(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,d=cA(t),h=s||i?[...d?N0(d):[],...N0(e)]:[];h.forEach(N=>{s&&N.addEventListener("scroll",n,{passive:!0}),i&&N.addEventListener("resize",n)});const p=d&&o?zbe(d,n):null;let m=-1,y=null;a&&(y=new ResizeObserver(N=>{let[k]=N;k&&k.target===d&&y&&(y.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var S;(S=y)==null||S.observe(e)})),n()}),d&&!c&&y.observe(d),y.observe(e));let x,_=c?rh(t):null;c&&w();function w(){const N=rh(t);_&&!qW(_,N)&&n(),_=N,x=requestAnimationFrame(w)}return n(),()=>{var N;h.forEach(k=>{s&&k.removeEventListener("scroll",n),i&&k.removeEventListener("resize",n)}),p?.(),(N=y)==null||N.disconnect(),y=null,c&&cancelAnimationFrame(x)}}const Hbe=Tbe,qbe=Nbe,c5=Ebe,Kbe=(t,e,n)=>{const r=new Map,s={platform:Ube,...n},i={...s.platform,_c:r};return wbe(t,e,{...s,platform:i})};var Ybe=typeof document<"u",Gbe=function(){},ob=Ybe?v.useLayoutEffect:Gbe;function ww(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!ww(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!ww(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function KW(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function u5(t,e){const n=KW(t);return Math.round(e*n)/n}function NS(t){const e=v.useRef(t);return ob(()=>{e.current=t}),e}function Qbe(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:a}={},transform:o=!0,whileElementsMounted:c,open:d}=t,[h,p]=v.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[m,y]=v.useState(r);ww(m,r)||y(r);const[x,_]=v.useState(null),[w,N]=v.useState(null),k=v.useCallback(K=>{K!==M.current&&(M.current=K,_(K))},[]),S=v.useCallback(K=>{K!==P.current&&(P.current=K,N(K))},[]),O=i||x,R=a||w,M=v.useRef(null),P=v.useRef(null),C=v.useRef(h),D=c!=null,$=NS(c),F=NS(s),U=NS(d),I=v.useCallback(()=>{if(!M.current||!P.current)return;const K={placement:e,strategy:n,middleware:m};F.current&&(K.platform=F.current),Kbe(M.current,P.current,K).then(Y=>{const G={...Y,isPositioned:U.current!==!1};z.current&&!ww(C.current,G)&&(C.current=G,ml.flushSync(()=>{p(G)}))})},[m,e,n,F,U]);ob(()=>{d===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,p(K=>({...K,isPositioned:!1})))},[d]);const z=v.useRef(!1);ob(()=>(z.current=!0,()=>{z.current=!1}),[]),ob(()=>{if(O&&(M.current=O),R&&(P.current=R),O&&R){if($.current)return $.current(O,R,I);I()}},[O,R,I,$,D]);const Q=v.useMemo(()=>({reference:M,floating:P,setReference:k,setFloating:S}),[k,S]),ne=v.useMemo(()=>({reference:O,floating:R}),[O,R]),W=v.useMemo(()=>{const K={position:n,left:0,top:0};if(!ne.floating)return K;const Y=u5(ne.floating,h.x),G=u5(ne.floating,h.y);return o?{...K,transform:"translate("+Y+"px, "+G+"px)",...KW(ne.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:Y,top:G}},[n,o,ne.floating,h.x,h.y]);return v.useMemo(()=>({...h,update:I,refs:Q,elements:ne,floatingStyles:W}),[h,I,Q,ne,W])}const Xbe=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?c5({element:r.current,padding:s}).fn(n):{}:r?c5({element:r,padding:s}).fn(n):{}}}},Jbe=(t,e)=>({...Hbe(t),options:[t,e]}),Zbe=(t,e)=>({...qbe(t),options:[t,e]}),ewe=(t,e)=>({...Xbe(t),options:[t,e]}),twe={...Oj};let d5=!1,nwe=0;const h5=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+nwe++;function rwe(){const[t,e]=v.useState(()=>d5?h5():void 0);return bw(()=>{t==null&&e(h5())},[]),v.useEffect(()=>{d5=!0},[]),t}const swe=twe.useId,YW=swe||rwe,iwe=v.forwardRef(function(e,n){const{context:{placement:r,elements:{floating:s},middlewareData:{arrow:i,shift:a}},width:o=14,height:c=7,tipRadius:d=0,strokeWidth:h=0,staticOffset:p,stroke:m,d:y,style:{transform:x,..._}={},...w}=e,N=YW(),[k,S]=v.useState(!1);if(bw(()=>{if(!s)return;pa(s).direction==="rtl"&&S(!0)},[s]),!s)return null;const[O,R]=r.split("-"),M=O==="top"||O==="bottom";let P=p;(M&&a!=null&&a.x||!M&&a!=null&&a.y)&&(P=null);const C=h*2,D=C/2,$=o/2*(d/-8+1),F=c/2*d/4,U=!!y,I=P&&R==="end"?"bottom":"top";let z=P&&R==="end"?"right":"left";P&&k&&(z=R==="end"?"left":"right");const Q=i?.x!=null?P||i.x:"",ne=i?.y!=null?P||i.y:"",W=y||"M0,0"+(" H"+o)+(" L"+(o-$)+","+(c-F))+(" Q"+o/2+","+c+" "+$+","+(c-F))+" Z",K={top:U?"rotate(180deg)":"",left:U?"rotate(90deg)":"rotate(-90deg)",bottom:U?"":"rotate(180deg)",right:U?"rotate(-90deg)":"rotate(90deg)"}[O];return l.jsxs("svg",{...w,"aria-hidden":!0,ref:n,width:U?o:o+C,height:o,viewBox:"0 0 "+o+" "+(c>o?c:o),style:{position:"absolute",pointerEvents:"none",[z]:Q,[I]:ne,[O]:M||U?"100%":"calc(100% - "+C/2+"px)",transform:[K,x].filter(Y=>!!Y).join(" "),..._},children:[C>0&&l.jsx("path",{clipPath:"url(#"+N+")",fill:"none",stroke:m,strokeWidth:C+(y?0:1),d:W}),l.jsx("path",{stroke:C&&!y?w.fill:"none",d:W}),l.jsx("clipPath",{id:N,children:l.jsx("rect",{x:-D,y:D*(U?-1:1),width:o+C,height:o})})]})});function awe(){const t=new Map;return{emit(e,n){var r;(r=t.get(e))==null||r.forEach(s=>s(n))},on(e,n){t.has(e)||t.set(e,new Set),t.get(e).add(n)},off(e,n){var r;(r=t.get(e))==null||r.delete(n)}}}const owe=v.createContext(null),lwe=v.createContext(null),cwe=()=>{var t;return((t=v.useContext(owe))==null?void 0:t.id)||null},uwe=()=>v.useContext(lwe);function dwe(t){const{open:e=!1,onOpenChange:n,elements:r}=t,s=YW(),i=v.useRef({}),[a]=v.useState(()=>awe()),o=cwe()!=null,[c,d]=v.useState(r.reference),h=bbe((y,x,_)=>{i.current.openEvent=y?x:void 0,a.emit("openchange",{open:y,event:x,reason:_,nested:o}),n?.(y,x,_)}),p=v.useMemo(()=>({setPositionReference:d}),[]),m=v.useMemo(()=>({reference:c||r.reference||null,floating:r.floating||null,domReference:r.reference}),[c,r.reference,r.floating]);return v.useMemo(()=>({dataRef:i,open:e,onOpenChange:h,elements:m,events:a,floatingId:s,refs:p}),[e,h,m,a,s,p])}function hwe(t){t===void 0&&(t={});const{nodeId:e}=t,n=dwe({...t,elements:{reference:null,floating:null,...t.elements}}),r=t.rootContext||n,s=r.elements,[i,a]=v.useState(null),[o,c]=v.useState(null),h=s?.domReference||i,p=v.useRef(null),m=uwe();bw(()=>{h&&(p.current=h)},[h]);const y=Qbe({...t,elements:{...s,...o&&{reference:o}}}),x=v.useCallback(S=>{const O=Bs(S)?{getBoundingClientRect:()=>S.getBoundingClientRect(),getClientRects:()=>S.getClientRects(),contextElement:S}:S;c(O),y.refs.setReference(O)},[y.refs]),_=v.useCallback(S=>{(Bs(S)||S===null)&&(p.current=S,a(S)),(Bs(y.refs.reference.current)||y.refs.reference.current===null||S!==null&&!Bs(S))&&y.refs.setReference(S)},[y.refs]),w=v.useMemo(()=>({...y.refs,setReference:_,setPositionReference:x,domReference:p}),[y.refs,_,x]),N=v.useMemo(()=>({...y.elements,domReference:h}),[y.elements,h]),k=v.useMemo(()=>({...y,...r,refs:w,elements:N,nodeId:e}),[y,w,N,e,r]);return bw(()=>{r.dataRef.current.floatingContext=k;const S=m?.nodesRef.current.find(O=>O.id===e);S&&(S.context=k)}),v.useMemo(()=>({...y,context:k,refs:w,elements:N}),[y,w,N,k])}/*!
  react-datepicker v8.7.0
  https://github.com/Hacker0x01/react-datepicker
  Released under the MIT License.
*/var VC=function(e,n){return VC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(r[i]=s[i])},VC(e,n)};function fs(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");VC(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Bt=function(){return Bt=Object.assign||function(n){for(var r,s=1,i=arguments.length;s<i;s++){r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])}return n},Bt.apply(this,arguments)};function Co(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var fwe=function(t){var e=t.showTimeSelectOnly,n=e===void 0?!1:e,r=t.showTime,s=r===void 0?!1:r,i=t.className,a=t.children,o=n?"Choose Time":"Choose Date".concat(s?" and Time":"");return oe.createElement("div",{className:i,role:"dialog","aria-label":o,"aria-modal":"true"},a)},pwe=function(t,e){var n=v.useRef(null),r=v.useRef(t);r.current=t;var s=v.useCallback(function(i){var a,o=i.composed&&i.composedPath&&i.composedPath().find(function(c){return c instanceof Node})||i.target;n.current&&!n.current.contains(o)&&(e&&o instanceof HTMLElement&&o.classList.contains(e)||(a=r.current)===null||a===void 0||a.call(r,i))},[e]);return v.useEffect(function(){return document.addEventListener("mousedown",s),function(){document.removeEventListener("mousedown",s)}},[s]),n},f_=function(t){var e=t.children,n=t.onClickOutside,r=t.className,s=t.containerRef,i=t.style,a=t.ignoreClass,o=pwe(n,a);return oe.createElement("div",{className:r,style:i,ref:function(c){o.current=c,s&&(s.current=c)}},e)},qe;(function(t){t.ArrowUp="ArrowUp",t.ArrowDown="ArrowDown",t.ArrowLeft="ArrowLeft",t.ArrowRight="ArrowRight",t.PageUp="PageUp",t.PageDown="PageDown",t.Home="Home",t.End="End",t.Enter="Enter",t.Space=" ",t.Tab="Tab",t.Escape="Escape",t.Backspace="Backspace",t.X="x"})(qe||(qe={}));function GW(){var t=typeof window<"u"?window:globalThis;return t}var hy=12;function nn(t){if(t==null)return new Date;var e=typeof t=="string"?Ixe(t):it(t);return p_(e)?e:new Date}function SS(t,e,n,r,s){s===void 0&&(s=nn());for(var i=Ep(n)||Ep(uA()),a=Array.isArray(e)?e:[e],o=0,c=a;o<c.length;o++){var d=c[o],h=kxe(t,d,s,{locale:i});if(p_(h)&&(!r||t===Pn(h,d,n)))return h}return null}function p_(t,e){return hw(t)&&!To(t,new Date("1/1/1800"))}function Pn(t,e,n){if(n==="en")return Z3(t,e,{useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});var r=n?Ep(n):void 0;return n&&!r&&console.warn('A locale object was not found for the provided string ["'.concat(n,'"].')),r=r||Ep(uA()),Z3(t,e,{locale:r,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0})}function ia(t,e){var n=e.dateFormat,r=e.locale,s=Array.isArray(n)&&n.length>0?n[0]:n;return t&&Pn(t,s,r)||""}var QW=" - ";function mwe(t,e,n){if(!t&&!e)return"";var r=t?ia(t,n):"",s=e?ia(e,n):"",i=n.rangeSeparator||QW;return"".concat(r).concat(i).concat(s)}function gwe(t,e){if(!t?.length)return"";var n=t[0]?ia(t[0],e):"";if(t.length===1)return n;if(t.length===2&&t[1]){var r=ia(t[1],e);return"".concat(n,", ").concat(r)}var s=t.length-1;return"".concat(n," (+").concat(s,")")}function kS(t,e){var n=e.hour,r=n===void 0?0:n,s=e.minute,i=s===void 0?0:s,a=e.second,o=a===void 0?0:a;return sb(ib(ab(t,o),i),r)}function ywe(t){return tA(t)}function vwe(t,e){return Pn(t,"ddd",e)}function lb(t){return nh(t)}function Jc(t,e,n){var r=Ep(e||uA());return Bl(t,{locale:r,weekStartsOn:n})}function Il(t){return TW(t)}function _g(t){return o_(t)}function f5(t){return OC(t)}function p5(){return nh(nn())}function m5(t){return SW(t)}function xwe(t){return Iye(t)}function bwe(t){return kW(t)}function bo(t,e){return t&&e?Pxe(t,e):!t&&!e}function Fs(t,e){return t&&e?Cxe(t,e):!t&&!e}function _w(t,e){return t&&e?jxe(t,e):!t&&!e}function Vt(t,e){return t&&e?Pye(t,e):!t&&!e}function Ed(t,e){return t&&e?Ave(t,e):!t&&!e}function od(t,e,n){var r,s=nh(e),i=SW(n);try{r=E0(t,{start:s,end:i})}catch{r=!1}return r}function uA(){var t=GW();return t.__localeId__}function Ep(t){if(typeof t=="string"){var e=GW();return e.__localeData__?e.__localeData__[t]:void 0}else return t}function wwe(t,e,n){return e(Pn(t,"EEEE",n))}function _we(t,e){return Pn(t,"EEEEEE",e)}function Ewe(t,e){return Pn(t,"EEE",e)}function dA(t,e){return Pn(aa(nn(),t),"LLLL",e)}function XW(t,e){return Pn(aa(nn(),t),"LLL",e)}function Nwe(t,e){return Pn(xf(nn(),t),"QQQ",e)}function la(t,e){var n=e===void 0?{}:e,r=n.minDate,s=n.maxDate,i=n.excludeDates,a=n.excludeDateIntervals,o=n.includeDates,c=n.includeDateIntervals,d=n.filterDate;return fy(t,{minDate:r,maxDate:s})||i&&i.some(function(h){return h instanceof Date?Vt(t,h):Vt(t,h.date)})||a&&a.some(function(h){var p=h.start,m=h.end;return E0(t,{start:p,end:m})})||o&&!o.some(function(h){return Vt(t,h)})||c&&!c.some(function(h){var p=h.start,m=h.end;return E0(t,{start:p,end:m})})||d&&!d(nn(t))||!1}function hA(t,e){var n=e===void 0?{}:e,r=n.excludeDates,s=n.excludeDateIntervals;return s&&s.length>0?s.some(function(i){var a=i.start,o=i.end;return E0(t,{start:a,end:o})}):r&&r.some(function(i){var a;return i instanceof Date?Vt(t,i):Vt(t,(a=i.date)!==null&&a!==void 0?a:new Date)})||!1}function JW(t,e){var n=e===void 0?{}:e,r=n.minDate,s=n.maxDate,i=n.excludeDates,a=n.includeDates,o=n.filterDate;return fy(t,{minDate:r?TW(r):void 0,maxDate:s?kW(s):void 0})||i?.some(function(c){return Fs(t,c instanceof Date?c:c.date)})||a&&!a.some(function(c){return Fs(t,c)})||o&&!o(nn(t))||!1}function cx(t,e,n,r){var s=It(t),i=Cs(t),a=It(e),o=Cs(e),c=It(r);return s===a&&s===c?i<=n&&n<=o:s<a?c===s&&i<=n||c===a&&o>=n||c<a&&c>s:!1}function Swe(t,e){var n=e===void 0?{}:e,r=n.minDate,s=n.maxDate,i=n.excludeDates,a=n.includeDates;return fy(t,{minDate:r,maxDate:s})||i&&i.some(function(o){return Fs(o instanceof Date?o:o.date,t)})||a&&!a.some(function(o){return Fs(o,t)})||!1}function ux(t,e){var n=e===void 0?{}:e,r=n.minDate,s=n.maxDate,i=n.excludeDates,a=n.includeDates,o=n.filterDate;return fy(t,{minDate:r,maxDate:s})||i?.some(function(c){return _w(t,c instanceof Date?c:c.date)})||a&&!a.some(function(c){return _w(t,c)})||o&&!o(nn(t))||!1}function dx(t,e,n){if(!e||!n||!hw(e)||!hw(n))return!1;var r=It(e),s=It(n);return r<=t&&s>=t}function cb(t,e){var n=e===void 0?{}:e,r=n.minDate,s=n.maxDate,i=n.excludeDates,a=n.includeDates,o=n.filterDate,c=new Date(t,0,1);return fy(c,{minDate:r?o_(r):void 0,maxDate:s?CW(s):void 0})||i?.some(function(d){return bo(c,d instanceof Date?d:d.date)})||a&&!a.some(function(d){return bo(c,d)})||o&&!o(nn(c))||!1}function hx(t,e,n,r){var s=It(t),i=Md(t),a=It(e),o=Md(e),c=It(r);return s===a&&s===c?i<=n&&n<=o:s<a?c===s&&i<=n||c===a&&o>=n||c<a&&c>s:!1}function fy(t,e){var n,r=e===void 0?{}:e,s=r.minDate,i=r.maxDate;return(n=s&&vp(t,s)<0||i&&vp(t,i)>0)!==null&&n!==void 0?n:!1}function g5(t,e){return e.some(function(n){return Pl(n)===Pl(t)&&Al(n)===Al(t)&&Xc(n)===Xc(t)})}function y5(t,e){var n=e===void 0?{}:e,r=n.excludeTimes,s=n.includeTimes,i=n.filterTime;return r&&g5(t,r)||s&&!g5(t,s)||i&&!i(t)||!1}function v5(t,e){var n=e.minTime,r=e.maxTime;if(!n||!r)throw new Error("Both minTime and maxTime props required");var s=nn();s=sb(s,Pl(t)),s=ib(s,Al(t)),s=ab(s,Xc(t));var i=nn();i=sb(i,Pl(n)),i=ib(i,Al(n)),i=ab(i,Xc(n));var a=nn();a=sb(a,Pl(r)),a=ib(a,Al(r)),a=ab(a,Xc(r));var o;try{o=!E0(s,{start:i,end:a})}catch{o=!1}return o}function x5(t,e){var n=e===void 0?{}:e,r=n.minDate,s=n.includeDates,i=Ld(t,1);return r&&fw(r,i)>0||s&&s.every(function(a){return fw(a,i)>0})||!1}function b5(t,e){var n=e===void 0?{}:e,r=n.maxDate,s=n.includeDates,i=Ga(t,1);return r&&fw(i,r)>0||s&&s.every(function(a){return fw(i,a)>0})||!1}function kwe(t,e){var n=e===void 0?{}:e,r=n.minDate,s=n.includeDates,i=o_(t),a=LW(i);return r&&pw(r,a)>0||s&&s.every(function(o){return pw(o,a)>0})||!1}function Twe(t,e){var n=e===void 0?{}:e,r=n.maxDate,s=n.includeDates,i=CW(t),a=eA(i,1);return r&&pw(a,r)>0||s&&s.every(function(o){return pw(a,o)>0})||!1}function w5(t,e){var n=e===void 0?{}:e,r=n.minDate,s=n.includeDates,i=xp(t,1);return r&&mw(r,i)>0||s&&s.every(function(a){return mw(a,i)>0})||!1}function Cwe(t,e){var n=e===void 0?{}:e,r=n.minDate,s=n.yearItemNumber,i=s===void 0?hy:s,a=_g(xp(t,i)),o=wl(a,i).endPeriod,c=r&&It(r);return c&&c>o||!1}function _5(t,e){var n=e===void 0?{}:e,r=n.maxDate,s=n.includeDates,i=Cl(t,1);return r&&mw(i,r)>0||s&&s.every(function(a){return mw(i,a)>0})||!1}function jwe(t,e){var n=e===void 0?{}:e,r=n.maxDate,s=n.yearItemNumber,i=s===void 0?hy:s,a=Cl(t,i),o=wl(a,i).startPeriod,c=r&&It(r);return c&&c<o||!1}function ZW(t){var e=t.minDate,n=t.includeDates;if(n&&e){var r=n.filter(function(s){return vp(s,e)>=0});return K3(r)}else return n?K3(n):e}function eH(t){var e=t.maxDate,n=t.includeDates;if(n&&e){var r=n.filter(function(s){return vp(s,e)<=0});return q3(r)}else return n?q3(n):e}function E5(t,e){var n;t===void 0&&(t=[]),e===void 0&&(e="react-datepicker__day--highlighted");for(var r=new Map,s=0,i=t.length;s<i;s++){var a=t[s];if(jl(a)){var o=Pn(a,"MM.dd.yyyy"),c=r.get(o)||[];c.includes(e)||(c.push(e),r.set(o,c))}else if(typeof a=="object"){var d=Object.keys(a),h=(n=d[0])!==null&&n!==void 0?n:"",p=a[h];if(typeof h=="string"&&Array.isArray(p))for(var m=0,y=p.length;m<y;m++){var x=p[m];if(x){var o=Pn(x,"MM.dd.yyyy"),c=r.get(o)||[];c.includes(h)||(c.push(h),r.set(o,c))}}}}return r}function Pwe(t,e){return t.length!==e.length?!1:t.every(function(n,r){return n===e[r]})}function Awe(t,e){t===void 0&&(t=[]),e===void 0&&(e="react-datepicker__day--holidays");var n=new Map;return t.forEach(function(r){var s=r.date,i=r.holidayName;if(jl(s)){var a=Pn(s,"MM.dd.yyyy"),o=n.get(a)||{className:"",holidayNames:[]};if(!("className"in o&&o.className===e&&Pwe(o.holidayNames,[i]))){o.className=e;var c=o.holidayNames;o.holidayNames=c?Co(Co([],c,!0),[i],!1):[i],n.set(a,o)}}}),n}function Iwe(t,e,n,r,s){for(var i=s.length,a=[],o=0;o<i;o++){var c=t,d=s[o];d&&(c=kye(c,Pl(d)),c=RC(c,Al(d)),c=jye(c,Xc(d)));var h=RC(t,(n+1)*r);cu(c,e)&&To(c,h)&&d!=null&&a.push(d)}return a}function N5(t){return t<10?"0".concat(t):"".concat(t)}function wl(t,e){e===void 0&&(e=hy);var n=Math.ceil(It(t)/e)*e,r=n-(e-1);return{startPeriod:r,endPeriod:n}}function Dwe(t){var e=new Date(t.getFullYear(),t.getMonth(),t.getDate()),n=new Date(t.getFullYear(),t.getMonth(),t.getDate(),24);return Math.round((+n-+e)/36e5)}function S5(t){var e=t.getSeconds(),n=t.getMilliseconds();return it(t.getTime()-e*1e3-n)}function Rwe(t,e){return S5(t).getTime()===S5(e).getTime()}function k5(t){if(!jl(t))throw new Error("Invalid date");var e=new Date(t);return e.setHours(0,0,0,0),e}function TS(t,e){if(!jl(t)||!jl(e))throw new Error("Invalid date received");var n=k5(t),r=k5(e);return To(n,r)}function tH(t){return t.key===qe.Space}var Owe=(function(t){fs(e,t);function e(n){var r=t.call(this,n)||this;return r.inputRef=oe.createRef(),r.onTimeChange=function(s){var i,a;r.setState({time:s});var o=r.props.date,c=o instanceof Date&&!isNaN(+o),d=c?o:new Date;if(s?.includes(":")){var h=s.split(":"),p=h[0],m=h[1];d.setHours(Number(p)),d.setMinutes(Number(m))}(a=(i=r.props).onChange)===null||a===void 0||a.call(i,d)},r.renderTimeInput=function(){var s=r.state.time,i=r.props,a=i.date,o=i.timeString,c=i.customTimeInput;return c?v.cloneElement(c,{date:a,value:s,onChange:r.onTimeChange}):oe.createElement("input",{type:"time",className:"react-datepicker-time__input",placeholder:"Time",name:"time-input",ref:r.inputRef,onClick:function(){var d;(d=r.inputRef.current)===null||d===void 0||d.focus()},required:!0,value:s,onChange:function(d){r.onTimeChange(d.target.value||o)}})},r.state={time:r.props.timeString},r}return e.getDerivedStateFromProps=function(n,r){return n.timeString!==r.time?{time:n.timeString}:null},e.prototype.render=function(){return oe.createElement("div",{className:"react-datepicker__input-time-container"},oe.createElement("div",{className:"react-datepicker-time__caption"},this.props.timeInputLabel),oe.createElement("div",{className:"react-datepicker-time__input-container"},oe.createElement("div",{className:"react-datepicker-time__input"},this.renderTimeInput())))},e})(v.Component),Mwe=(function(t){fs(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.dayEl=v.createRef(),n.handleClick=function(r){!n.isDisabled()&&n.props.onClick&&n.props.onClick(r)},n.handleMouseEnter=function(r){!n.isDisabled()&&n.props.onMouseEnter&&n.props.onMouseEnter(r)},n.handleOnKeyDown=function(r){var s,i,a=r.key;a===qe.Space&&(r.preventDefault(),r.key=qe.Enter),(i=(s=n.props).handleOnKeyDown)===null||i===void 0||i.call(s,r)},n.isSameDay=function(r){return Vt(n.props.day,r)},n.isKeyboardSelected=function(){var r;if(n.props.disabledKeyboardNavigation)return!1;var s=n.props.selectsMultiple?(r=n.props.selectedDates)===null||r===void 0?void 0:r.some(function(a){return n.isSameDayOrWeek(a)}):n.isSameDayOrWeek(n.props.selected),i=n.props.preSelection&&n.isDisabled(n.props.preSelection);return!s&&n.isSameDayOrWeek(n.props.preSelection)&&!i},n.isDisabled=function(r){return r===void 0&&(r=n.props.day),la(r,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals,includeDateIntervals:n.props.includeDateIntervals,includeDates:n.props.includeDates,filterDate:n.props.filterDate})},n.isExcluded=function(){return hA(n.props.day,{excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals})},n.isStartOfWeek=function(){return Vt(n.props.day,Jc(n.props.day,n.props.locale,n.props.calendarStartDay))},n.isSameWeek=function(r){return n.props.showWeekPicker&&Vt(r,Jc(n.props.day,n.props.locale,n.props.calendarStartDay))},n.isSameDayOrWeek=function(r){return n.isSameDay(r)||n.isSameWeek(r)},n.getHighLightedClass=function(){var r=n.props,s=r.day,i=r.highlightDates;if(!i)return!1;var a=Pn(s,"MM.dd.yyyy");return i.get(a)},n.getHolidaysClass=function(){var r,s=n.props,i=s.day,a=s.holidays;if(!a)return[void 0];var o=Pn(i,"MM.dd.yyyy");return a.has(o)?[(r=a.get(o))===null||r===void 0?void 0:r.className]:[void 0]},n.isInRange=function(){var r=n.props,s=r.day,i=r.startDate,a=r.endDate;return!i||!a?!1:od(s,i,a)},n.isInSelectingRange=function(){var r,s=n.props,i=s.day,a=s.selectsStart,o=s.selectsEnd,c=s.selectsRange,d=s.selectsDisabledDaysInRange,h=s.startDate,p=s.swapRange,m=s.endDate,y=(r=n.props.selectingDate)!==null&&r!==void 0?r:n.props.preSelection;if(!(a||o||c)||!y||!d&&n.isDisabled())return!1;if(a&&m&&(To(y,m)||Ed(y,m)))return od(i,y,m);if(o&&h&&(cu(y,h)||Ed(y,h)))return od(i,h,y);if(c&&h&&!m){if(Ed(y,h)||cu(y,h))return od(i,h,y);if(p&&To(y,h))return od(i,y,h)}return!1},n.isSelectingRangeStart=function(){var r;if(!n.isInSelectingRange())return!1;var s=n.props,i=s.day,a=s.startDate,o=s.selectsStart,c=s.swapRange,d=s.selectsRange,h=(r=n.props.selectingDate)!==null&&r!==void 0?r:n.props.preSelection;return o?Vt(i,h):d&&c&&a&&h?Vt(i,To(h,a)?h:a):Vt(i,a)},n.isSelectingRangeEnd=function(){var r;if(!n.isInSelectingRange())return!1;var s=n.props,i=s.day,a=s.endDate,o=s.selectsEnd,c=s.selectsRange,d=s.swapRange,h=s.startDate,p=(r=n.props.selectingDate)!==null&&r!==void 0?r:n.props.preSelection;return o?Vt(i,p):c&&d&&h&&p?Vt(i,To(p,h)?h:p):c?Vt(i,p):Vt(i,a)},n.isRangeStart=function(){var r=n.props,s=r.day,i=r.startDate,a=r.endDate;return!i||!a?!1:Vt(i,s)},n.isRangeEnd=function(){var r=n.props,s=r.day,i=r.startDate,a=r.endDate;return!i||!a?!1:Vt(a,s)},n.isWeekend=function(){var r=Tve(n.props.day);return r===0||r===6},n.isAfterMonth=function(){return n.props.month!==void 0&&(n.props.month+1)%12===Cs(n.props.day)},n.isBeforeMonth=function(){return n.props.month!==void 0&&(Cs(n.props.day)+1)%12===n.props.month},n.isCurrentDay=function(){return n.isSameDay(nn())},n.isSelected=function(){var r;return n.props.selectsMultiple?(r=n.props.selectedDates)===null||r===void 0?void 0:r.some(function(s){return n.isSameDayOrWeek(s)}):n.isSameDayOrWeek(n.props.selected)},n.getClassNames=function(r){var s=n.props.dayClassName?n.props.dayClassName(r):void 0;return Et("react-datepicker__day",s,"react-datepicker__day--"+vwe(n.props.day),{"react-datepicker__day--disabled":n.isDisabled(),"react-datepicker__day--excluded":n.isExcluded(),"react-datepicker__day--selected":n.isSelected(),"react-datepicker__day--keyboard-selected":n.isKeyboardSelected(),"react-datepicker__day--range-start":n.isRangeStart(),"react-datepicker__day--range-end":n.isRangeEnd(),"react-datepicker__day--in-range":n.isInRange(),"react-datepicker__day--in-selecting-range":n.isInSelectingRange(),"react-datepicker__day--selecting-range-start":n.isSelectingRangeStart(),"react-datepicker__day--selecting-range-end":n.isSelectingRangeEnd(),"react-datepicker__day--today":n.isCurrentDay(),"react-datepicker__day--weekend":n.isWeekend(),"react-datepicker__day--outside-month":n.isAfterMonth()||n.isBeforeMonth()},n.getHighLightedClass(),n.getHolidaysClass())},n.getAriaLabel=function(){var r=n.props,s=r.day,i=r.ariaLabelPrefixWhenEnabled,a=i===void 0?"Choose":i,o=r.ariaLabelPrefixWhenDisabled,c=o===void 0?"Not available":o,d=n.isDisabled()||n.isExcluded()?c:a;return"".concat(d," ").concat(Pn(s,"PPPP",n.props.locale))},n.getTitle=function(){var r=n.props,s=r.day,i=r.holidays,a=i===void 0?new Map:i,o=r.excludeDates,c=Pn(s,"MM.dd.yyyy"),d=[];return a.has(c)&&d.push.apply(d,a.get(c).holidayNames),n.isExcluded()&&d.push(o?.filter(function(h){return h instanceof Date?Vt(h,s):Vt(h?.date,s)}).map(function(h){if(!(h instanceof Date))return h?.message})),d.join(", ")},n.getTabIndex=function(){var r=n.props.selected,s=n.props.preSelection,i=!(n.props.showWeekPicker&&(n.props.showWeekNumber||!n.isStartOfWeek()))&&(n.isKeyboardSelected()||n.isSameDay(r)&&Vt(s,r))?0:-1;return i},n.handleFocusDay=function(){var r;n.shouldFocusDay()&&((r=n.dayEl.current)===null||r===void 0||r.focus({preventScroll:!0}))},n.renderDayContents=function(){return n.props.monthShowsDuplicateDaysEnd&&n.isAfterMonth()||n.props.monthShowsDuplicateDaysStart&&n.isBeforeMonth()?null:n.props.renderDayContents?n.props.renderDayContents(e5(n.props.day),n.props.day):e5(n.props.day)},n.render=function(){return oe.createElement("div",{ref:n.dayEl,className:n.getClassNames(n.props.day),onKeyDown:n.handleOnKeyDown,onClick:n.handleClick,onMouseEnter:n.props.usePointerEvent?void 0:n.handleMouseEnter,onPointerEnter:n.props.usePointerEvent?n.handleMouseEnter:void 0,tabIndex:n.getTabIndex(),"aria-label":n.getAriaLabel(),role:"gridcell",title:n.getTitle(),"aria-disabled":n.isDisabled(),"aria-current":n.isCurrentDay()?"date":void 0,"aria-selected":n.isSelected()||n.isInRange()},n.renderDayContents(),n.getTitle()!==""&&oe.createElement("span",{className:"overlay"},n.getTitle()))},n}return e.prototype.componentDidMount=function(){this.handleFocusDay()},e.prototype.componentDidUpdate=function(){this.handleFocusDay()},e.prototype.shouldFocusDay=function(){var n=!1;return this.getTabIndex()===0&&this.isSameDay(this.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(n=!0),this.props.inline&&!this.props.shouldFocusDayInline&&(n=!1),this.isDayActiveElement()&&(n=!0),this.isDuplicateDay()&&(n=!1)),n},e.prototype.isDayActiveElement=function(){var n,r,s;return((r=(n=this.props.containerRef)===null||n===void 0?void 0:n.current)===null||r===void 0?void 0:r.contains(document.activeElement))&&((s=document.activeElement)===null||s===void 0?void 0:s.classList.contains("react-datepicker__day"))},e.prototype.isDuplicateDay=function(){return this.props.monthShowsDuplicateDaysEnd&&this.isAfterMonth()||this.props.monthShowsDuplicateDaysStart&&this.isBeforeMonth()},e})(v.Component),Lwe=(function(t){fs(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.weekNumberEl=v.createRef(),n.handleClick=function(r){n.props.onClick&&n.props.onClick(r)},n.handleOnKeyDown=function(r){var s,i,a=r.key;a===qe.Space&&(r.preventDefault(),r.key=qe.Enter),(i=(s=n.props).handleOnKeyDown)===null||i===void 0||i.call(s,r)},n.isKeyboardSelected=function(){return!n.props.disabledKeyboardNavigation&&!Vt(n.props.date,n.props.selected)&&Vt(n.props.date,n.props.preSelection)},n.getTabIndex=function(){return n.props.showWeekPicker&&n.props.showWeekNumber&&(n.isKeyboardSelected()||Vt(n.props.date,n.props.selected)&&Vt(n.props.preSelection,n.props.selected))?0:-1},n.handleFocusWeekNumber=function(r){var s=!1;n.getTabIndex()===0&&!r?.isInputFocused&&Vt(n.props.date,n.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(s=!0),n.props.inline&&!n.props.shouldFocusDayInline&&(s=!1),n.props.containerRef&&n.props.containerRef.current&&n.props.containerRef.current.contains(document.activeElement)&&document.activeElement&&document.activeElement.classList.contains("react-datepicker__week-number")&&(s=!0)),s&&n.weekNumberEl.current&&n.weekNumberEl.current.focus({preventScroll:!0})},n}return Object.defineProperty(e,"defaultProps",{get:function(){return{ariaLabelPrefix:"week "}},enumerable:!1,configurable:!0}),e.prototype.componentDidMount=function(){this.handleFocusWeekNumber()},e.prototype.componentDidUpdate=function(n){this.handleFocusWeekNumber(n)},e.prototype.render=function(){var n=this.props,r=n.weekNumber,s=n.isWeekDisabled,i=n.ariaLabelPrefix,a=i===void 0?e.defaultProps.ariaLabelPrefix:i,o=n.onClick,c={"react-datepicker__week-number":!0,"react-datepicker__week-number--clickable":!!o&&!s,"react-datepicker__week-number--selected":!!o&&Vt(this.props.date,this.props.selected)};return oe.createElement("div",{ref:this.weekNumberEl,className:Et(c),"aria-label":"".concat(a," ").concat(this.props.weekNumber),onClick:this.handleClick,onKeyDown:this.handleOnKeyDown,tabIndex:this.getTabIndex(),role:"gridcell"},r)},e})(v.Component),Fwe=(function(t){fs(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.isDisabled=function(r){return la(r,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals,includeDateIntervals:n.props.includeDateIntervals,includeDates:n.props.includeDates,filterDate:n.props.filterDate})},n.handleDayClick=function(r,s){n.props.onDayClick&&n.props.onDayClick(r,s)},n.handleDayMouseEnter=function(r){n.props.onDayMouseEnter&&n.props.onDayMouseEnter(r)},n.handleWeekClick=function(r,s,i){for(var a,o,c,d=new Date(r),h=0;h<7;h++){var p=new Date(r);p.setDate(p.getDate()+h);var m=!n.isDisabled(p);if(m){d=p;break}}typeof n.props.onWeekSelect=="function"&&n.props.onWeekSelect(d,s,i),n.props.showWeekPicker&&n.handleDayClick(d,i),((a=n.props.shouldCloseOnSelect)!==null&&a!==void 0?a:e.defaultProps.shouldCloseOnSelect)&&((c=(o=n.props).setOpen)===null||c===void 0||c.call(o,!1))},n.formatWeekNumber=function(r){return n.props.formatWeekNumber?n.props.formatWeekNumber(r):ywe(r)},n.isWeekDisabled=function(){for(var r=n.startOfWeek(),s=Wa(r,6),i=new Date(r);i<=s;){if(!n.isDisabled(i))return!1;i=Wa(i,1)}return!0},n.renderDays=function(){var r=n.startOfWeek(),s=[],i=n.formatWeekNumber(r);if(n.props.showWeekNumber){var a=n.props.onWeekSelect||n.props.showWeekPicker?n.handleWeekClick.bind(n,r,i):void 0;s.push(oe.createElement(Lwe,Bt({key:"W"},e.defaultProps,n.props,{weekNumber:i,isWeekDisabled:n.isWeekDisabled(),date:r,onClick:a})))}return s.concat([0,1,2,3,4,5,6].map(function(o){var c=Wa(r,o);return oe.createElement(Mwe,Bt({},e.defaultProps,n.props,{ariaLabelPrefixWhenEnabled:n.props.chooseDayAriaLabelPrefix,ariaLabelPrefixWhenDisabled:n.props.disabledDayAriaLabelPrefix,key:c.valueOf(),day:c,onClick:n.handleDayClick.bind(n,c),onMouseEnter:n.handleDayMouseEnter.bind(n,c)}))}))},n.startOfWeek=function(){return Jc(n.props.day,n.props.locale,n.props.calendarStartDay)},n.isKeyboardSelected=function(){return!n.props.disabledKeyboardNavigation&&!Vt(n.startOfWeek(),n.props.selected)&&Vt(n.startOfWeek(),n.props.preSelection)},n}return Object.defineProperty(e,"defaultProps",{get:function(){return{shouldCloseOnSelect:!0}},enumerable:!1,configurable:!0}),e.prototype.render=function(){var n={"react-datepicker__week":!0,"react-datepicker__week--selected":Vt(this.startOfWeek(),this.props.selected),"react-datepicker__week--keyboard-selected":this.isKeyboardSelected()},r=this.props.weekClassName?this.props.weekClassName(this.startOfWeek()):void 0;return oe.createElement("div",{className:Et(n,r),role:"row"},this.renderDays())},e})(v.Component),lg,$we=6,Uf={TWO_COLUMNS:"two_columns",THREE_COLUMNS:"three_columns",FOUR_COLUMNS:"four_columns"},CS=(lg={},lg[Uf.TWO_COLUMNS]={grid:[[0,1],[2,3],[4,5],[6,7],[8,9],[10,11]],verticalNavigationOffset:2},lg[Uf.THREE_COLUMNS]={grid:[[0,1,2],[3,4,5],[6,7,8],[9,10,11]],verticalNavigationOffset:3},lg[Uf.FOUR_COLUMNS]={grid:[[0,1,2,3],[4,5,6,7],[8,9,10,11]],verticalNavigationOffset:4},lg),fx=1;function T5(t,e){return t?Uf.FOUR_COLUMNS:e?Uf.TWO_COLUMNS:Uf.THREE_COLUMNS}var Vwe=(function(t){fs(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.MONTH_REFS=Co([],Array(12),!0).map(function(){return v.createRef()}),n.QUARTER_REFS=Co([],Array(4),!0).map(function(){return v.createRef()}),n.isDisabled=function(r){return la(r,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals,includeDateIntervals:n.props.includeDateIntervals,includeDates:n.props.includeDates,filterDate:n.props.filterDate})},n.isExcluded=function(r){return hA(r,{excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals})},n.handleDayClick=function(r,s){var i,a;(a=(i=n.props).onDayClick)===null||a===void 0||a.call(i,r,s,n.props.orderInDisplay)},n.handleDayMouseEnter=function(r){var s,i;(i=(s=n.props).onDayMouseEnter)===null||i===void 0||i.call(s,r)},n.handleMouseLeave=function(){var r,s;(s=(r=n.props).onMouseLeave)===null||s===void 0||s.call(r)},n.isRangeStartMonth=function(r){var s=n.props,i=s.day,a=s.startDate,o=s.endDate;return!a||!o?!1:Fs(aa(i,r),a)},n.isRangeStartQuarter=function(r){var s=n.props,i=s.day,a=s.startDate,o=s.endDate;return!a||!o?!1:_w(xf(i,r),a)},n.isRangeEndMonth=function(r){var s=n.props,i=s.day,a=s.startDate,o=s.endDate;return!a||!o?!1:Fs(aa(i,r),o)},n.isRangeEndQuarter=function(r){var s=n.props,i=s.day,a=s.startDate,o=s.endDate;return!a||!o?!1:_w(xf(i,r),o)},n.isInSelectingRangeMonth=function(r){var s,i=n.props,a=i.day,o=i.selectsStart,c=i.selectsEnd,d=i.selectsRange,h=i.startDate,p=i.endDate,m=(s=n.props.selectingDate)!==null&&s!==void 0?s:n.props.preSelection;return!(o||c||d)||!m?!1:o&&p?cx(m,p,r,a):c&&h||d&&h&&!p?cx(h,m,r,a):!1},n.isSelectingMonthRangeStart=function(r){var s;if(!n.isInSelectingRangeMonth(r))return!1;var i=n.props,a=i.day,o=i.startDate,c=i.selectsStart,d=aa(a,r),h=(s=n.props.selectingDate)!==null&&s!==void 0?s:n.props.preSelection;return c?Fs(d,h):Fs(d,o)},n.isSelectingMonthRangeEnd=function(r){var s;if(!n.isInSelectingRangeMonth(r))return!1;var i=n.props,a=i.day,o=i.endDate,c=i.selectsEnd,d=i.selectsRange,h=aa(a,r),p=(s=n.props.selectingDate)!==null&&s!==void 0?s:n.props.preSelection;return c||d?Fs(h,p):Fs(h,o)},n.isInSelectingRangeQuarter=function(r){var s,i=n.props,a=i.day,o=i.selectsStart,c=i.selectsEnd,d=i.selectsRange,h=i.startDate,p=i.endDate,m=(s=n.props.selectingDate)!==null&&s!==void 0?s:n.props.preSelection;return!(o||c||d)||!m?!1:o&&p?hx(m,p,r,a):c&&h||d&&h&&!p?hx(h,m,r,a):!1},n.isWeekInMonth=function(r){var s=n.props.day,i=Wa(r,6);return Fs(r,s)||Fs(i,s)},n.isCurrentMonth=function(r,s){return It(r)===It(nn())&&s===Cs(nn())},n.isCurrentQuarter=function(r,s){return It(r)===It(nn())&&s===Md(nn())},n.isSelectedMonth=function(r,s,i){return Cs(i)===s&&It(r)===It(i)},n.isSelectMonthInList=function(r,s,i){return i.some(function(a){return n.isSelectedMonth(r,s,a)})},n.isSelectedQuarter=function(r,s,i){return Md(r)===s&&It(r)===It(i)},n.isMonthSelected=function(){var r=n.props,s=r.day,i=r.selected,a=r.selectedDates,o=r.selectsMultiple,c=Cs(s);return o?a?.some(function(d){return n.isSelectedMonth(s,c,d)}):!!i&&n.isSelectedMonth(s,c,i)},n.renderWeeks=function(){for(var r=[],s=n.props.fixedHeight,i=0,a=!1,o=Jc(Il(n.props.day),n.props.locale,n.props.calendarStartDay),c=function(x){return n.props.showWeekPicker?Jc(x,n.props.locale,n.props.calendarStartDay):n.props.preSelection},d=function(x){return n.props.showWeekPicker?Jc(x,n.props.locale,n.props.calendarStartDay):n.props.selected},h=n.props.selected?d(n.props.selected):void 0,p=n.props.preSelection?c(n.props.preSelection):void 0;r.push(oe.createElement(Fwe,Bt({},n.props,{ariaLabelPrefix:n.props.weekAriaLabelPrefix,key:i,day:o,month:Cs(n.props.day),onDayClick:n.handleDayClick,onDayMouseEnter:n.handleDayMouseEnter,selected:h,preSelection:p,showWeekNumber:n.props.showWeekNumbers}))),!a;){i++,o=dw(o,1);var m=s&&i>=$we,y=!s&&!n.isWeekInMonth(o);if(m||y)if(n.props.peekNextMonth)a=!0;else break}return r},n.onMonthClick=function(r,s){var i=n.isMonthDisabledForLabelDate(s),a=i.isDisabled,o=i.labelDate;a||n.handleDayClick(Il(o),r)},n.onMonthMouseEnter=function(r){var s=n.isMonthDisabledForLabelDate(r),i=s.isDisabled,a=s.labelDate;i||n.handleDayMouseEnter(Il(a))},n.handleMonthNavigation=function(r,s){var i,a,o,c;(a=(i=n.props).setPreSelection)===null||a===void 0||a.call(i,s),(c=(o=n.MONTH_REFS[r])===null||o===void 0?void 0:o.current)===null||c===void 0||c.focus()},n.handleKeyboardNavigation=function(r,s,i){var a,o=n.props,c=o.selected,d=o.preSelection,h=o.setPreSelection,p=o.minDate,m=o.maxDate,y=o.showFourColumnMonthYearPicker,x=o.showTwoColumnMonthYearPicker;if(d){var _=T5(y,x),w=n.getVerticalOffset(_),N=(a=CS[_])===null||a===void 0?void 0:a.grid,k=function(P,C,D){var $,F,U=C,I=D;switch(P){case qe.ArrowRight:U=Ga(C,fx),I=D===11?0:D+fx;break;case qe.ArrowLeft:U=Ld(C,fx),I=D===0?11:D-fx;break;case qe.ArrowUp:U=Ld(C,w),I=!(($=N?.[0])===null||$===void 0)&&$.includes(D)?D+12-w:D-w;break;case qe.ArrowDown:U=Ga(C,w),I=!((F=N?.[N.length-1])===null||F===void 0)&&F.includes(D)?D-12+w:D+w;break}return{newCalculatedDate:U,newCalculatedMonth:I}},S=function(P,C,D){for(var $=40,F=P,U=!1,I=0,z=k(F,C,D),Q=z.newCalculatedDate,ne=z.newCalculatedMonth;!U;){if(I>=$){Q=C,ne=D;break}if(p&&Q<p){F=qe.ArrowRight;var W=k(F,Q,ne);Q=W.newCalculatedDate,ne=W.newCalculatedMonth}if(m&&Q>m){F=qe.ArrowLeft;var W=k(F,Q,ne);Q=W.newCalculatedDate,ne=W.newCalculatedMonth}if(Swe(Q,n.props)){var W=k(F,Q,ne);Q=W.newCalculatedDate,ne=W.newCalculatedMonth}else U=!0;I++}return{newCalculatedDate:Q,newCalculatedMonth:ne}};if(s===qe.Enter){n.isMonthDisabled(i)||(n.onMonthClick(r,i),h?.(c));return}var O=S(s,d,i),R=O.newCalculatedDate,M=O.newCalculatedMonth;switch(s){case qe.ArrowRight:case qe.ArrowLeft:case qe.ArrowUp:case qe.ArrowDown:n.handleMonthNavigation(M,R);break}}},n.getVerticalOffset=function(r){var s,i;return(i=(s=CS[r])===null||s===void 0?void 0:s.verticalNavigationOffset)!==null&&i!==void 0?i:0},n.onMonthKeyDown=function(r,s){var i=n.props,a=i.disabledKeyboardNavigation,o=i.handleOnMonthKeyDown,c=r.key;c!==qe.Tab&&r.preventDefault(),a||n.handleKeyboardNavigation(r,c,s),o&&o(r)},n.onQuarterClick=function(r,s){var i=xf(n.props.day,s);ux(i,n.props)||n.handleDayClick(f5(i),r)},n.onQuarterMouseEnter=function(r){var s=xf(n.props.day,r);ux(s,n.props)||n.handleDayMouseEnter(f5(s))},n.handleQuarterNavigation=function(r,s){var i,a,o,c;n.isDisabled(s)||n.isExcluded(s)||((a=(i=n.props).setPreSelection)===null||a===void 0||a.call(i,s),(c=(o=n.QUARTER_REFS[r-1])===null||o===void 0?void 0:o.current)===null||c===void 0||c.focus())},n.onQuarterKeyDown=function(r,s){var i,a,o=r.key;if(!n.props.disabledKeyboardNavigation)switch(o){case qe.Enter:n.onQuarterClick(r,s),(a=(i=n.props).setPreSelection)===null||a===void 0||a.call(i,n.props.selected);break;case qe.ArrowRight:if(!n.props.preSelection)break;n.handleQuarterNavigation(s===4?1:s+1,eA(n.props.preSelection,1));break;case qe.ArrowLeft:if(!n.props.preSelection)break;n.handleQuarterNavigation(s===1?4:s-1,LW(n.props.preSelection));break}},n.isMonthDisabledForLabelDate=function(r){var s,i=n.props,a=i.day,o=i.minDate,c=i.maxDate,d=i.excludeDates,h=i.includeDates,p=aa(a,r);return{isDisabled:(s=(o||c||d||h)&&JW(p,n.props))!==null&&s!==void 0?s:!1,labelDate:p}},n.isMonthDisabled=function(r){var s=n.isMonthDisabledForLabelDate(r).isDisabled;return s},n.getMonthClassNames=function(r){var s=n.props,i=s.day,a=s.startDate,o=s.endDate,c=s.preSelection,d=s.monthClassName,h=d?d(aa(i,r)):void 0,p=n.getSelection();return Et("react-datepicker__month-text","react-datepicker__month-".concat(r),h,{"react-datepicker__month-text--disabled":n.isMonthDisabled(r),"react-datepicker__month-text--selected":p?n.isSelectMonthInList(i,r,p):void 0,"react-datepicker__month-text--keyboard-selected":!n.props.disabledKeyboardNavigation&&c&&n.isSelectedMonth(i,r,c)&&!n.isMonthSelected()&&!n.isMonthDisabled(r),"react-datepicker__month-text--in-selecting-range":n.isInSelectingRangeMonth(r),"react-datepicker__month-text--in-range":a&&o?cx(a,o,r,i):void 0,"react-datepicker__month-text--range-start":n.isRangeStartMonth(r),"react-datepicker__month-text--range-end":n.isRangeEndMonth(r),"react-datepicker__month-text--selecting-range-start":n.isSelectingMonthRangeStart(r),"react-datepicker__month-text--selecting-range-end":n.isSelectingMonthRangeEnd(r),"react-datepicker__month-text--today":n.isCurrentMonth(i,r)})},n.getTabIndex=function(r){if(n.props.preSelection==null)return"-1";var s=Cs(n.props.preSelection),i=n.isMonthDisabledForLabelDate(s).isDisabled,a=r===s&&!(i||n.props.disabledKeyboardNavigation)?"0":"-1";return a},n.getQuarterTabIndex=function(r){if(n.props.preSelection==null)return"-1";var s=Md(n.props.preSelection),i=ux(n.props.day,n.props),a=r===s&&!(i||n.props.disabledKeyboardNavigation)?"0":"-1";return a},n.getAriaLabel=function(r){var s=n.props,i=s.chooseDayAriaLabelPrefix,a=i===void 0?"Choose":i,o=s.disabledDayAriaLabelPrefix,c=o===void 0?"Not available":o,d=s.day,h=s.locale,p=aa(d,r),m=n.isDisabled(p)||n.isExcluded(p)?c:a;return"".concat(m," ").concat(Pn(p,"MMMM yyyy",h))},n.getQuarterClassNames=function(r){var s=n.props,i=s.day,a=s.startDate,o=s.endDate,c=s.selected,d=s.minDate,h=s.maxDate,p=s.excludeDates,m=s.includeDates,y=s.filterDate,x=s.preSelection,_=s.disabledKeyboardNavigation,w=(d||h||p||m||y)&&ux(xf(i,r),n.props);return Et("react-datepicker__quarter-text","react-datepicker__quarter-".concat(r),{"react-datepicker__quarter-text--disabled":w,"react-datepicker__quarter-text--selected":c?n.isSelectedQuarter(i,r,c):void 0,"react-datepicker__quarter-text--keyboard-selected":!_&&x&&n.isSelectedQuarter(i,r,x)&&!w,"react-datepicker__quarter-text--in-selecting-range":n.isInSelectingRangeQuarter(r),"react-datepicker__quarter-text--in-range":a&&o?hx(a,o,r,i):void 0,"react-datepicker__quarter-text--range-start":n.isRangeStartQuarter(r),"react-datepicker__quarter-text--range-end":n.isRangeEndQuarter(r),"react-datepicker__quarter-text--today":n.isCurrentQuarter(i,r)})},n.getMonthContent=function(r){var s=n.props,i=s.showFullMonthYearPicker,a=s.renderMonthContent,o=s.locale,c=s.day,d=XW(r,o),h=dA(r,o);return a?a(r,d,h,c):i?h:d},n.getQuarterContent=function(r){var s,i=n.props,a=i.renderQuarterContent,o=i.locale,c=Nwe(r,o);return(s=a?.(r,c))!==null&&s!==void 0?s:c},n.renderMonths=function(){var r,s=n.props,i=s.showTwoColumnMonthYearPicker,a=s.showFourColumnMonthYearPicker,o=s.day,c=s.selected,d=(r=CS[T5(a,i)])===null||r===void 0?void 0:r.grid;return d?.map(function(h,p){return oe.createElement("div",{className:"react-datepicker__month-wrapper",key:p},h.map(function(m,y){return oe.createElement("div",{ref:n.MONTH_REFS[m],key:y,onClick:function(x){n.onMonthClick(x,m)},onKeyDown:function(x){tH(x)&&(x.preventDefault(),x.key=qe.Enter),n.onMonthKeyDown(x,m)},onMouseEnter:n.props.usePointerEvent?void 0:function(){return n.onMonthMouseEnter(m)},onPointerEnter:n.props.usePointerEvent?function(){return n.onMonthMouseEnter(m)}:void 0,tabIndex:Number(n.getTabIndex(m)),className:n.getMonthClassNames(m),"aria-disabled":n.isMonthDisabled(m),role:"option","aria-label":n.getAriaLabel(m),"aria-current":n.isCurrentMonth(o,m)?"date":void 0,"aria-selected":c?n.isSelectedMonth(o,m,c):void 0},n.getMonthContent(m))}))})},n.renderQuarters=function(){var r=n.props,s=r.day,i=r.selected,a=[1,2,3,4];return oe.createElement("div",{className:"react-datepicker__quarter-wrapper"},a.map(function(o,c){return oe.createElement("div",{key:c,ref:n.QUARTER_REFS[c],role:"option",onClick:function(d){n.onQuarterClick(d,o)},onKeyDown:function(d){n.onQuarterKeyDown(d,o)},onMouseEnter:n.props.usePointerEvent?void 0:function(){return n.onQuarterMouseEnter(o)},onPointerEnter:n.props.usePointerEvent?function(){return n.onQuarterMouseEnter(o)}:void 0,className:n.getQuarterClassNames(o),"aria-selected":i?n.isSelectedQuarter(s,o,i):void 0,tabIndex:Number(n.getQuarterTabIndex(o)),"aria-current":n.isCurrentQuarter(s,o)?"date":void 0},n.getQuarterContent(o))}))},n.getClassNames=function(){var r=n.props,s=r.selectingDate,i=r.selectsStart,a=r.selectsEnd,o=r.showMonthYearPicker,c=r.showQuarterYearPicker,d=r.showWeekPicker;return Et("react-datepicker__month",{"react-datepicker__month--selecting-range":s&&(i||a)},{"react-datepicker__monthPicker":o},{"react-datepicker__quarterPicker":c},{"react-datepicker__weekPicker":d})},n}return e.prototype.getSelection=function(){var n=this.props,r=n.selected,s=n.selectedDates,i=n.selectsMultiple;if(i)return s;if(r)return[r]},e.prototype.render=function(){var n=this.props,r=n.showMonthYearPicker,s=n.showQuarterYearPicker,i=n.day,a=n.ariaLabelPrefix,o=a===void 0?"Month ":a,c=o?o.trim()+" ":"",d=r||s;return d?oe.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":"".concat(c).concat(Pn(i,"MMMM, yyyy",this.props.locale)),role:"listbox"},r?this.renderMonths():this.renderQuarters()):oe.createElement("div",{role:"table"},this.props.dayNamesHeader&&oe.createElement("div",{role:"rowgroup"},this.props.dayNamesHeader),oe.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":"".concat(c).concat(Pn(i,"MMMM, yyyy",this.props.locale)),role:"rowgroup"},this.renderWeeks()))},e})(v.Component),Bwe=(function(t){fs(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.monthOptionButtonsRef={},n.isSelectedMonth=function(r){return n.props.month===r},n.handleOptionKeyDown=function(r,s){var i;switch(s.key){case"Enter":s.preventDefault(),n.onChange(r);break;case"Escape":s.preventDefault(),n.props.onCancel();break;case"ArrowUp":case"ArrowDown":{s.preventDefault();var a=(r+(s.key==="ArrowUp"?-1:1)+n.props.monthNames.length)%n.props.monthNames.length;(i=n.monthOptionButtonsRef[a])===null||i===void 0||i.focus();break}}},n.renderOptions=function(){return n.monthOptionButtonsRef={},n.props.monthNames.map(function(r,s){return oe.createElement("div",{ref:function(i){n.monthOptionButtonsRef[s]=i,n.isSelectedMonth(s)&&i?.focus()},role:"button",tabIndex:0,className:n.isSelectedMonth(s)?"react-datepicker__month-option react-datepicker__month-option--selected_month":"react-datepicker__month-option",key:r,onClick:n.onChange.bind(n,s),onKeyDown:n.handleOptionKeyDown.bind(n,s),"aria-selected":n.isSelectedMonth(s)?"true":void 0},n.isSelectedMonth(s)?oe.createElement("span",{className:"react-datepicker__month-option--selected"},"✓"):"",r)})},n.onChange=function(r){return n.props.onChange(r)},n.handleClickOutside=function(){return n.props.onCancel()},n}return e.prototype.render=function(){return oe.createElement(f_,{className:"react-datepicker__month-dropdown",onClickOutside:this.handleClickOutside},this.renderOptions())},e})(v.Component),Uwe=(function(t){fs(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state={dropdownVisible:!1},n.renderSelectOptions=function(r){return r.map(function(s,i){return oe.createElement("option",{key:s,value:i},s)})},n.renderSelectMode=function(r){return oe.createElement("select",{value:n.props.month,className:"react-datepicker__month-select",onChange:function(s){return n.onChange(parseInt(s.target.value))}},n.renderSelectOptions(r))},n.renderReadView=function(r,s){return oe.createElement("button",{key:"read",type:"button",style:{visibility:r?"visible":"hidden"},className:"react-datepicker__month-read-view",onClick:n.toggleDropdown},oe.createElement("span",{className:"react-datepicker__month-read-view--down-arrow"}),oe.createElement("span",{className:"react-datepicker__month-read-view--selected-month"},s[n.props.month]))},n.renderDropdown=function(r){return oe.createElement(Bwe,Bt({key:"dropdown"},n.props,{monthNames:r,onChange:n.onChange,onCancel:n.toggleDropdown}))},n.renderScrollMode=function(r){var s=n.state.dropdownVisible,i=[n.renderReadView(!s,r)];return s&&i.unshift(n.renderDropdown(r)),i},n.onChange=function(r){n.toggleDropdown(),r!==n.props.month&&n.props.onChange(r)},n.toggleDropdown=function(){return n.setState({dropdownVisible:!n.state.dropdownVisible})},n}return e.prototype.render=function(){var n=this,r=[0,1,2,3,4,5,6,7,8,9,10,11].map(this.props.useShortMonthInDropdown?function(i){return XW(i,n.props.locale)}:function(i){return dA(i,n.props.locale)}),s;switch(this.props.dropdownMode){case"scroll":s=this.renderScrollMode(r);break;case"select":s=this.renderSelectMode(r);break}return oe.createElement("div",{className:"react-datepicker__month-dropdown-container react-datepicker__month-dropdown-container--".concat(this.props.dropdownMode)},s)},e})(v.Component);function zwe(t,e){for(var n=[],r=Il(t),s=Il(e);!cu(r,s);)n.push(nn(r)),r=Ga(r,1);return n}var Wwe=(function(t){fs(e,t);function e(n){var r=t.call(this,n)||this;return r.renderOptions=function(){return r.state.monthYearsList.map(function(s){var i=LC(s),a=bo(r.props.date,s)&&Fs(r.props.date,s);return oe.createElement("div",{className:a?"react-datepicker__month-year-option--selected_month-year":"react-datepicker__month-year-option",key:i,onClick:r.onChange.bind(r,i),"aria-selected":a?"true":void 0},a?oe.createElement("span",{className:"react-datepicker__month-year-option--selected"},"✓"):"",Pn(s,r.props.dateFormat,r.props.locale))})},r.onChange=function(s){return r.props.onChange(s)},r.handleClickOutside=function(){r.props.onCancel()},r.state={monthYearsList:zwe(r.props.minDate,r.props.maxDate)},r}return e.prototype.render=function(){var n=Et({"react-datepicker__month-year-dropdown":!0,"react-datepicker__month-year-dropdown--scrollable":this.props.scrollableMonthYearDropdown});return oe.createElement(f_,{className:n,onClickOutside:this.handleClickOutside},this.renderOptions())},e})(v.Component),Hwe=(function(t){fs(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state={dropdownVisible:!1},n.renderSelectOptions=function(){for(var r=Il(n.props.minDate),s=Il(n.props.maxDate),i=[];!cu(r,s);){var a=LC(r);i.push(oe.createElement("option",{key:a,value:a},Pn(r,n.props.dateFormat,n.props.locale))),r=Ga(r,1)}return i},n.onSelectChange=function(r){n.onChange(parseInt(r.target.value))},n.renderSelectMode=function(){return oe.createElement("select",{value:LC(Il(n.props.date)),className:"react-datepicker__month-year-select",onChange:n.onSelectChange},n.renderSelectOptions())},n.renderReadView=function(r){var s=Pn(n.props.date,n.props.dateFormat,n.props.locale);return oe.createElement("div",{key:"read",style:{visibility:r?"visible":"hidden"},className:"react-datepicker__month-year-read-view",onClick:n.toggleDropdown},oe.createElement("span",{className:"react-datepicker__month-year-read-view--down-arrow"}),oe.createElement("span",{className:"react-datepicker__month-year-read-view--selected-month-year"},s))},n.renderDropdown=function(){return oe.createElement(Wwe,Bt({key:"dropdown"},n.props,{onChange:n.onChange,onCancel:n.toggleDropdown}))},n.renderScrollMode=function(){var r=n.state.dropdownVisible,s=[n.renderReadView(!r)];return r&&s.unshift(n.renderDropdown()),s},n.onChange=function(r){n.toggleDropdown();var s=nn(r);bo(n.props.date,s)&&Fs(n.props.date,s)||n.props.onChange(s)},n.toggleDropdown=function(){return n.setState({dropdownVisible:!n.state.dropdownVisible})},n}return e.prototype.render=function(){var n;switch(this.props.dropdownMode){case"scroll":n=this.renderScrollMode();break;case"select":n=this.renderSelectMode();break}return oe.createElement("div",{className:"react-datepicker__month-year-dropdown-container react-datepicker__month-year-dropdown-container--".concat(this.props.dropdownMode)},n)},e})(v.Component),qwe=(function(t){fs(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state={height:null},n.scrollToTheSelectedTime=function(){requestAnimationFrame(function(){var r,s,i;n.list&&(n.list.scrollTop=(i=n.centerLi&&e.calcCenterPosition(n.props.monthRef?n.props.monthRef.clientHeight-((s=(r=n.header)===null||r===void 0?void 0:r.clientHeight)!==null&&s!==void 0?s:0):n.list.clientHeight,n.centerLi))!==null&&i!==void 0?i:0)})},n.handleClick=function(r){var s,i;(n.props.minTime||n.props.maxTime)&&v5(r,n.props)||(n.props.excludeTimes||n.props.includeTimes||n.props.filterTime)&&y5(r,n.props)||(i=(s=n.props).onChange)===null||i===void 0||i.call(s,r)},n.isSelectedTime=function(r){return n.props.selected&&Rwe(n.props.selected,r)},n.isDisabledTime=function(r){return(n.props.minTime||n.props.maxTime)&&v5(r,n.props)||(n.props.excludeTimes||n.props.includeTimes||n.props.filterTime)&&y5(r,n.props)},n.liClasses=function(r){var s,i=["react-datepicker__time-list-item",n.props.timeClassName?n.props.timeClassName(r):void 0];return n.isSelectedTime(r)&&i.push("react-datepicker__time-list-item--selected"),n.isDisabledTime(r)&&i.push("react-datepicker__time-list-item--disabled"),n.props.injectTimes&&(Pl(r)*3600+Al(r)*60+Xc(r))%(((s=n.props.intervals)!==null&&s!==void 0?s:e.defaultProps.intervals)*60)!==0&&i.push("react-datepicker__time-list-item--injected"),i.join(" ")},n.handleOnKeyDown=function(r,s){var i,a;r.key===qe.Space&&(r.preventDefault(),r.key=qe.Enter),(r.key===qe.ArrowUp||r.key===qe.ArrowLeft)&&r.target instanceof HTMLElement&&r.target.previousSibling&&(r.preventDefault(),r.target.previousSibling instanceof HTMLElement&&r.target.previousSibling.focus()),(r.key===qe.ArrowDown||r.key===qe.ArrowRight)&&r.target instanceof HTMLElement&&r.target.nextSibling&&(r.preventDefault(),r.target.nextSibling instanceof HTMLElement&&r.target.nextSibling.focus()),r.key===qe.Enter&&n.handleClick(s),(a=(i=n.props).handleOnKeyDown)===null||a===void 0||a.call(i,r)},n.renderTimes=function(){for(var r,s=[],i=typeof n.props.format=="string"?n.props.format:"p",a=(r=n.props.intervals)!==null&&r!==void 0?r:e.defaultProps.intervals,o=n.props.selected||n.props.openToDate||nn(),c=lb(o),d=n.props.injectTimes&&n.props.injectTimes.sort(function(w,N){return w.getTime()-N.getTime()}),h=60*Dwe(o),p=h/a,m=0;m<p;m++){var y=RC(c,m*a);if(s.push(y),d){var x=Iwe(c,y,m,a,d);s=s.concat(x)}}var _=s.reduce(function(w,N){return N.getTime()<=o.getTime()?N:w},s[0]);return s.map(function(w){return oe.createElement("li",{key:w.valueOf(),onClick:n.handleClick.bind(n,w),className:n.liClasses(w),ref:function(N){w===_&&(n.centerLi=N)},onKeyDown:function(N){n.handleOnKeyDown(N,w)},tabIndex:w===_?0:-1,role:"option","aria-selected":n.isSelectedTime(w)?"true":void 0,"aria-disabled":n.isDisabledTime(w)?"true":void 0},Pn(w,i,n.props.locale))})},n.renderTimeCaption=function(){return n.props.showTimeCaption===!1?oe.createElement(oe.Fragment,null):oe.createElement("div",{className:"react-datepicker__header react-datepicker__header--time ".concat(n.props.showTimeSelectOnly?"react-datepicker__header--time--only":""),ref:function(r){n.header=r}},oe.createElement("div",{className:"react-datepicker-time__header"},n.props.timeCaption))},n}return Object.defineProperty(e,"defaultProps",{get:function(){return{intervals:30,todayButton:null,timeCaption:"Time",showTimeCaption:!0}},enumerable:!1,configurable:!0}),e.prototype.componentDidMount=function(){this.scrollToTheSelectedTime(),this.observeDatePickerHeightChanges()},e.prototype.componentWillUnmount=function(){var n;(n=this.resizeObserver)===null||n===void 0||n.disconnect()},e.prototype.observeDatePickerHeightChanges=function(){var n=this,r=this.props.monthRef;this.updateContainerHeight(),r&&(this.resizeObserver=new ResizeObserver(function(){n.updateContainerHeight()}),this.resizeObserver.observe(r))},e.prototype.updateContainerHeight=function(){this.props.monthRef&&this.header&&this.setState({height:this.props.monthRef.clientHeight-this.header.clientHeight})},e.prototype.render=function(){var n=this,r,s=this.state.height;return oe.createElement("div",{className:"react-datepicker__time-container ".concat(((r=this.props.todayButton)!==null&&r!==void 0?r:e.defaultProps.todayButton)?"react-datepicker__time-container--with-today-button":"")},this.renderTimeCaption(),oe.createElement("div",{className:"react-datepicker__time"},oe.createElement("div",{className:"react-datepicker__time-box"},oe.createElement("ul",{className:"react-datepicker__time-list",ref:function(i){n.list=i},style:s?{height:s}:{},role:"listbox","aria-label":this.props.timeCaption},this.renderTimes()))))},e.calcCenterPosition=function(n,r){return r.offsetTop-(n/2-r.clientHeight/2)},e})(v.Component),C5=3,Kwe=(function(t){fs(e,t);function e(n){var r=t.call(this,n)||this;return r.YEAR_REFS=Co([],Array(r.props.yearItemNumber),!0).map(function(){return v.createRef()}),r.isDisabled=function(s){return la(s,{minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,includeDates:r.props.includeDates,filterDate:r.props.filterDate})},r.isExcluded=function(s){return hA(s,{excludeDates:r.props.excludeDates})},r.selectingDate=function(){var s;return(s=r.props.selectingDate)!==null&&s!==void 0?s:r.props.preSelection},r.updateFocusOnPaginate=function(s){var i=function(){var a,o;(o=(a=r.YEAR_REFS[s])===null||a===void 0?void 0:a.current)===null||o===void 0||o.focus()};window.requestAnimationFrame(i)},r.handleYearClick=function(s,i){r.props.onDayClick&&r.props.onDayClick(s,i)},r.handleYearNavigation=function(s,i){var a,o,c,d,h=r.props,p=h.date,m=h.yearItemNumber;if(!(p===void 0||m===void 0)){var y=wl(p,m).startPeriod;r.isDisabled(i)||r.isExcluded(i)||((o=(a=r.props).setPreSelection)===null||o===void 0||o.call(a,i),s-y<0?r.updateFocusOnPaginate(m-(y-s)):s-y>=m?r.updateFocusOnPaginate(Math.abs(m-(s-y))):(d=(c=r.YEAR_REFS[s-y])===null||c===void 0?void 0:c.current)===null||d===void 0||d.focus())}},r.isSameDay=function(s,i){return Vt(s,i)},r.isCurrentYear=function(s){return s===It(nn())},r.isRangeStart=function(s){return r.props.startDate&&r.props.endDate&&bo(xo(nn(),s),r.props.startDate)},r.isRangeEnd=function(s){return r.props.startDate&&r.props.endDate&&bo(xo(nn(),s),r.props.endDate)},r.isInRange=function(s){return dx(s,r.props.startDate,r.props.endDate)},r.isInSelectingRange=function(s){var i=r.props,a=i.selectsStart,o=i.selectsEnd,c=i.selectsRange,d=i.startDate,h=i.endDate;return!(a||o||c)||!r.selectingDate()?!1:a&&h?dx(s,r.selectingDate(),h):o&&d||c&&d&&!h?dx(s,d,r.selectingDate()):!1},r.isSelectingRangeStart=function(s){var i;if(!r.isInSelectingRange(s))return!1;var a=r.props,o=a.startDate,c=a.selectsStart,d=xo(nn(),s);return c?bo(d,(i=r.selectingDate())!==null&&i!==void 0?i:null):bo(d,o??null)},r.isSelectingRangeEnd=function(s){var i;if(!r.isInSelectingRange(s))return!1;var a=r.props,o=a.endDate,c=a.selectsEnd,d=a.selectsRange,h=xo(nn(),s);return c||d?bo(h,(i=r.selectingDate())!==null&&i!==void 0?i:null):bo(h,o??null)},r.isKeyboardSelected=function(s){if(!(r.props.disabledKeyboardNavigation||r.props.date===void 0||r.props.preSelection==null)){var i=r.props,a=i.minDate,o=i.maxDate,c=i.excludeDates,d=i.includeDates,h=i.filterDate,p=i.selected,m=_g(xo(r.props.date,s)),y=(a||o||c||d||h)&&cb(s,r.props),x=!!p&&Vt(m,_g(p)),_=Vt(m,_g(r.props.preSelection));return!r.props.inline&&!x&&_&&!y}},r.isSelectedYear=function(s){var i=r.props,a=i.selectsMultiple,o=i.selected,c=i.selectedDates;return a?c?.some(function(d){return s===It(d)}):!!o&&s===It(o)},r.onYearClick=function(s,i){var a=r.props.date;a!==void 0&&r.handleYearClick(_g(xo(a,i)),s)},r.onYearKeyDown=function(s,i){var a,o,c=s.key,d=r.props,h=d.date,p=d.yearItemNumber,m=d.handleOnKeyDown;if(c!==qe.Tab&&s.preventDefault(),!r.props.disabledKeyboardNavigation)switch(c){case qe.Enter:if(r.props.selected==null)break;r.onYearClick(s,i),(o=(a=r.props).setPreSelection)===null||o===void 0||o.call(a,r.props.selected);break;case qe.ArrowRight:if(r.props.preSelection==null)break;r.handleYearNavigation(i+1,Cl(r.props.preSelection,1));break;case qe.ArrowLeft:if(r.props.preSelection==null)break;r.handleYearNavigation(i-1,xp(r.props.preSelection,1));break;case qe.ArrowUp:{if(h===void 0||p===void 0||r.props.preSelection==null)break;var y=wl(h,p).startPeriod,x=C5,_=i-x;if(_<y){var w=p%x;i>=y&&i<y+w?x=w:x+=w,_=i-x}r.handleYearNavigation(_,xp(r.props.preSelection,x));break}case qe.ArrowDown:{if(h===void 0||p===void 0||r.props.preSelection==null)break;var N=wl(h,p).endPeriod,x=C5,_=i+x;if(_>N){var w=p%x;i<=N&&i>N-w?x=w:x+=w,_=i+x}r.handleYearNavigation(_,Cl(r.props.preSelection,x));break}}m&&m(s)},r.getYearClassNames=function(s){var i=r.props,a=i.date,o=i.minDate,c=i.maxDate,d=i.excludeDates,h=i.includeDates,p=i.filterDate,m=i.yearClassName;return Et("react-datepicker__year-text","react-datepicker__year-".concat(s),a?m?.(xo(a,s)):void 0,{"react-datepicker__year-text--selected":r.isSelectedYear(s),"react-datepicker__year-text--disabled":(o||c||d||h||p)&&cb(s,r.props),"react-datepicker__year-text--keyboard-selected":r.isKeyboardSelected(s),"react-datepicker__year-text--range-start":r.isRangeStart(s),"react-datepicker__year-text--range-end":r.isRangeEnd(s),"react-datepicker__year-text--in-range":r.isInRange(s),"react-datepicker__year-text--in-selecting-range":r.isInSelectingRange(s),"react-datepicker__year-text--selecting-range-start":r.isSelectingRangeStart(s),"react-datepicker__year-text--selecting-range-end":r.isSelectingRangeEnd(s),"react-datepicker__year-text--today":r.isCurrentYear(s)})},r.getYearTabIndex=function(s){if(r.props.disabledKeyboardNavigation||r.props.preSelection==null)return"-1";var i=It(r.props.preSelection),a=cb(s,r.props);return s===i&&!a?"0":"-1"},r.getYearContent=function(s){return r.props.renderYearContent?r.props.renderYearContent(s):s},r}return e.prototype.render=function(){var n=this,r=[],s=this.props,i=s.date,a=s.yearItemNumber,o=s.onYearMouseEnter,c=s.onYearMouseLeave;if(i===void 0)return null;for(var d=wl(i,a),h=d.startPeriod,p=d.endPeriod,m=function(_){r.push(oe.createElement("div",{ref:y.YEAR_REFS[_-h],onClick:function(w){n.onYearClick(w,_)},onKeyDown:function(w){tH(w)&&(w.preventDefault(),w.key=qe.Enter),n.onYearKeyDown(w,_)},tabIndex:Number(y.getYearTabIndex(_)),className:y.getYearClassNames(_),onMouseEnter:y.props.usePointerEvent?void 0:function(w){return o(w,_)},onPointerEnter:y.props.usePointerEvent?function(w){return o(w,_)}:void 0,onMouseLeave:y.props.usePointerEvent?void 0:function(w){return c(w,_)},onPointerLeave:y.props.usePointerEvent?function(w){return c(w,_)}:void 0,key:_,"aria-current":y.isCurrentYear(_)?"date":void 0},y.getYearContent(_)))},y=this,x=h;x<=p;x++)m(x);return oe.createElement("div",{className:"react-datepicker__year"},oe.createElement("div",{className:"react-datepicker__year-wrapper",onMouseLeave:this.props.usePointerEvent?void 0:this.props.clearSelectingDate,onPointerLeave:this.props.usePointerEvent?this.props.clearSelectingDate:void 0},r))},e})(v.Component);function Ywe(t,e,n,r){for(var s=[],i=0;i<2*e+1;i++){var a=t+e-i,o=!0;n&&(o=It(n)<=a),r&&o&&(o=It(r)>=a),o&&s.push(a)}return s}var Gwe=(function(t){fs(e,t);function e(n){var r=t.call(this,n)||this;r.yearOptionButtonsRef={},r.handleOptionKeyDown=function(o,c){var d;switch(c.key){case"Enter":c.preventDefault(),r.onChange(o);break;case"Escape":c.preventDefault(),r.props.onCancel();break;case"ArrowUp":case"ArrowDown":{c.preventDefault();var h=o+(c.key==="ArrowUp"?1:-1);r.yearOptionButtonsRef[h]&&((d=r.yearOptionButtonsRef[h])===null||d===void 0||d.focus());break}}},r.renderOptions=function(){r.yearOptionButtonsRef={};var o=r.props.year,c=r.state.yearsList.map(function(p){return oe.createElement("div",{ref:function(m){r.yearOptionButtonsRef[p]=m,p===o&&m?.focus()},role:"button",tabIndex:0,className:o===p?"react-datepicker__year-option react-datepicker__year-option--selected_year":"react-datepicker__year-option",key:p,onClick:r.onChange.bind(r,p),onKeyDown:r.handleOptionKeyDown.bind(r,p),"aria-selected":o===p?"true":void 0},o===p?oe.createElement("span",{className:"react-datepicker__year-option--selected"},"✓"):"",p)}),d=r.props.minDate?It(r.props.minDate):null,h=r.props.maxDate?It(r.props.maxDate):null;return(!h||!r.state.yearsList.find(function(p){return p===h}))&&c.unshift(oe.createElement("div",{className:"react-datepicker__year-option",key:"upcoming",onClick:r.incrementYears},oe.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-upcoming"}))),(!d||!r.state.yearsList.find(function(p){return p===d}))&&c.push(oe.createElement("div",{className:"react-datepicker__year-option",key:"previous",onClick:r.decrementYears},oe.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-previous"}))),c},r.onChange=function(o){r.props.onChange(o)},r.handleClickOutside=function(){r.props.onCancel()},r.shiftYears=function(o){var c=r.state.yearsList.map(function(d){return d+o});r.setState({yearsList:c})},r.incrementYears=function(){return r.shiftYears(1)},r.decrementYears=function(){return r.shiftYears(-1)};var s=n.yearDropdownItemNumber,i=n.scrollableYearDropdown,a=s||(i?10:5);return r.state={yearsList:Ywe(r.props.year,a,r.props.minDate,r.props.maxDate)},r.dropdownRef=v.createRef(),r}return e.prototype.componentDidMount=function(){var n=this.dropdownRef.current;if(n){var r=n.children?Array.from(n.children):null,s=r?r.find(function(i){return i.ariaSelected}):null;n.scrollTop=s&&s instanceof HTMLElement?s.offsetTop+(s.clientHeight-n.clientHeight)/2:(n.scrollHeight-n.clientHeight)/2}},e.prototype.render=function(){var n=Et({"react-datepicker__year-dropdown":!0,"react-datepicker__year-dropdown--scrollable":this.props.scrollableYearDropdown});return oe.createElement(f_,{className:n,containerRef:this.dropdownRef,onClickOutside:this.handleClickOutside},this.renderOptions())},e})(v.Component),Qwe=(function(t){fs(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state={dropdownVisible:!1},n.renderSelectOptions=function(){for(var r=n.props.minDate?It(n.props.minDate):1900,s=n.props.maxDate?It(n.props.maxDate):2100,i=[],a=r;a<=s;a++)i.push(oe.createElement("option",{key:a,value:a},a));return i},n.onSelectChange=function(r){n.onChange(parseInt(r.target.value))},n.renderSelectMode=function(){return oe.createElement("select",{value:n.props.year,className:"react-datepicker__year-select",onChange:n.onSelectChange},n.renderSelectOptions())},n.renderReadView=function(r){return oe.createElement("button",{key:"read",type:"button",style:{visibility:r?"visible":"hidden"},className:"react-datepicker__year-read-view",onClick:n.toggleDropdown},oe.createElement("span",{className:"react-datepicker__year-read-view--down-arrow"}),oe.createElement("span",{className:"react-datepicker__year-read-view--selected-year"},n.props.year))},n.renderDropdown=function(){return oe.createElement(Gwe,Bt({key:"dropdown"},n.props,{onChange:n.onChange,onCancel:n.toggleDropdown}))},n.renderScrollMode=function(){var r=n.state.dropdownVisible,s=[n.renderReadView(!r)];return r&&s.unshift(n.renderDropdown()),s},n.onChange=function(r){n.toggleDropdown(),r!==n.props.year&&n.props.onChange(r)},n.toggleDropdown=function(r){n.setState({dropdownVisible:!n.state.dropdownVisible},function(){n.props.adjustDateOnChange&&n.handleYearChange(n.props.date,r)})},n.handleYearChange=function(r,s){var i;(i=n.onSelect)===null||i===void 0||i.call(n,r,s),n.setOpen()},n.onSelect=function(r,s){var i,a;(a=(i=n.props).onSelect)===null||a===void 0||a.call(i,r,s)},n.setOpen=function(){var r,s;(s=(r=n.props).setOpen)===null||s===void 0||s.call(r,!0)},n}return e.prototype.render=function(){var n;switch(this.props.dropdownMode){case"scroll":n=this.renderScrollMode();break;case"select":n=this.renderSelectMode();break}return oe.createElement("div",{className:"react-datepicker__year-dropdown-container react-datepicker__year-dropdown-container--".concat(this.props.dropdownMode)},n)},e})(v.Component),Xwe=["react-datepicker__year-select","react-datepicker__month-select","react-datepicker__month-year-select"],nH="react-datepicker-ignore-onclickoutside",Jwe=function(t){var e=(t.className||"").split(/\s+/);return Xwe.some(function(n){return e.indexOf(n)>=0})},Zwe=(function(t){fs(e,t);function e(n){var r=t.call(this,n)||this;return r.monthContainer=void 0,r.handleClickOutside=function(s){r.props.onClickOutside(s)},r.setClickOutsideRef=function(){return r.containerRef.current},r.handleDropdownFocus=function(s){var i,a;Jwe(s.target)&&((a=(i=r.props).onDropdownFocus)===null||a===void 0||a.call(i,s))},r.getDateInView=function(){var s=r.props,i=s.preSelection,a=s.selected,o=s.openToDate,c=ZW(r.props),d=eH(r.props),h=nn(),p=o||a||i;return p||(c&&To(h,c)?c:d&&cu(h,d)?d:h)},r.increaseMonth=function(){r.setState(function(s){var i=s.date;return{date:Ga(i,1)}},function(){return r.handleMonthChange(r.state.date)})},r.decreaseMonth=function(){r.setState(function(s){var i=s.date;return{date:Ld(i,1)}},function(){return r.handleMonthChange(r.state.date)})},r.handleDayClick=function(s,i,a){r.props.onSelect(s,i,a),r.props.setPreSelection&&r.props.setPreSelection(s)},r.handleDayMouseEnter=function(s){r.setState({selectingDate:s}),r.props.onDayMouseEnter&&r.props.onDayMouseEnter(s)},r.handleMonthMouseLeave=function(){r.setState({selectingDate:void 0}),r.props.onMonthMouseLeave&&r.props.onMonthMouseLeave()},r.handleYearMouseEnter=function(s,i){r.setState({selectingDate:xo(nn(),i)}),r.props.onYearMouseEnter&&r.props.onYearMouseEnter(s,i)},r.handleYearMouseLeave=function(s,i){r.props.onYearMouseLeave&&r.props.onYearMouseLeave(s,i)},r.handleYearChange=function(s){var i,a,o,c;(a=(i=r.props).onYearChange)===null||a===void 0||a.call(i,s),r.setState({isRenderAriaLiveMessage:!0}),r.props.adjustDateOnChange&&(r.props.onSelect(s),(c=(o=r.props).setOpen)===null||c===void 0||c.call(o,!0)),r.props.setPreSelection&&r.props.setPreSelection(s)},r.getEnabledPreSelectionDateForMonth=function(s){if(!la(s,r.props))return s;for(var i=Il(s),a=bwe(s),o=Aye(a,i),c=null,d=0;d<=o;d++){var h=Wa(i,d);if(!la(h,r.props)){c=h;break}}return c},r.handleMonthChange=function(s){var i,a,o,c=(i=r.getEnabledPreSelectionDateForMonth(s))!==null&&i!==void 0?i:s;r.handleCustomMonthChange(c),r.props.adjustDateOnChange&&(r.props.onSelect(c),(o=(a=r.props).setOpen)===null||o===void 0||o.call(a,!0)),r.props.setPreSelection&&r.props.setPreSelection(c)},r.handleCustomMonthChange=function(s){var i,a;(a=(i=r.props).onMonthChange)===null||a===void 0||a.call(i,s),r.setState({isRenderAriaLiveMessage:!0})},r.handleMonthYearChange=function(s){r.handleYearChange(s),r.handleMonthChange(s)},r.changeYear=function(s){r.setState(function(i){var a=i.date;return{date:xo(a,Number(s))}},function(){return r.handleYearChange(r.state.date)})},r.changeMonth=function(s){r.setState(function(i){var a=i.date;return{date:aa(a,Number(s))}},function(){return r.handleMonthChange(r.state.date)})},r.changeMonthYear=function(s){r.setState(function(i){var a=i.date;return{date:xo(aa(a,Cs(s)),It(s))}},function(){return r.handleMonthYearChange(r.state.date)})},r.header=function(s){s===void 0&&(s=r.state.date);var i=Jc(s,r.props.locale,r.props.calendarStartDay),a=[];return r.props.showWeekNumbers&&a.push(oe.createElement("div",{key:"W",className:"react-datepicker__day-name",role:"columnheader"},oe.createElement("span",{className:"react-datepicker__sr-only"},"Week number"),oe.createElement("span",{"aria-hidden":"true"},r.props.weekLabel||"#"))),a.concat([0,1,2,3,4,5,6].map(function(o){var c=Wa(i,o),d=r.formatWeekday(c,r.props.locale),h=r.props.weekDayClassName?r.props.weekDayClassName(c):void 0;return oe.createElement("div",{key:o,role:"columnheader",className:Et("react-datepicker__day-name",h)},oe.createElement("span",{className:"react-datepicker__sr-only"},Pn(c,"EEEE",r.props.locale)),oe.createElement("span",{"aria-hidden":"true"},d))}))},r.formatWeekday=function(s,i){return r.props.formatWeekDay?wwe(s,r.props.formatWeekDay,i):r.props.useWeekdaysShort?Ewe(s,i):_we(s,i)},r.decreaseYear=function(){r.setState(function(s){var i,a=s.date;return{date:xp(a,r.props.showYearPicker?(i=r.props.yearItemNumber)!==null&&i!==void 0?i:e.defaultProps.yearItemNumber:1)}},function(){return r.handleYearChange(r.state.date)})},r.clearSelectingDate=function(){r.setState({selectingDate:void 0})},r.renderPreviousButton=function(){var s,i,a;if(!r.props.renderCustomHeader){var o=(s=r.props.monthsShown)!==null&&s!==void 0?s:e.defaultProps.monthsShown,c=r.props.showPreviousMonths?o-1:0,d=(i=r.props.monthSelectedIn)!==null&&i!==void 0?i:c,h=Ld(r.state.date,d),p;switch(!0){case r.props.showMonthYearPicker:p=w5(r.state.date,r.props);break;case r.props.showYearPicker:p=Cwe(r.state.date,r.props);break;case r.props.showQuarterYearPicker:p=kwe(r.state.date,r.props);break;default:p=x5(h,r.props);break}if(!(!((a=r.props.forceShowMonthNavigation)!==null&&a!==void 0?a:e.defaultProps.forceShowMonthNavigation)&&!r.props.showDisabledMonthNavigation&&p||r.props.showTimeSelectOnly)){var m=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--previous"],y=["react-datepicker__navigation","react-datepicker__navigation--previous"],x=r.decreaseMonth;(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker)&&(x=r.decreaseYear),p&&r.props.showDisabledMonthNavigation&&(y.push("react-datepicker__navigation--previous--disabled"),x=void 0);var _=r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker,w=r.props,N=w.previousMonthButtonLabel,k=N===void 0?e.defaultProps.previousMonthButtonLabel:N,S=w.previousYearButtonLabel,O=S===void 0?e.defaultProps.previousYearButtonLabel:S,R=r.props,M=R.previousMonthAriaLabel,P=M===void 0?typeof k=="string"?k:"Previous Month":M,C=R.previousYearAriaLabel,D=C===void 0?typeof O=="string"?O:"Previous Year":C;return oe.createElement("button",{type:"button",className:y.join(" "),onClick:x,onKeyDown:r.props.handleOnKeyDown,"aria-label":_?D:P},oe.createElement("span",{className:m.join(" ")},_?O:k))}}},r.increaseYear=function(){r.setState(function(s){var i,a=s.date;return{date:Cl(a,r.props.showYearPicker?(i=r.props.yearItemNumber)!==null&&i!==void 0?i:e.defaultProps.yearItemNumber:1)}},function(){return r.handleYearChange(r.state.date)})},r.renderNextButton=function(){var s;if(!r.props.renderCustomHeader){var i;switch(!0){case r.props.showMonthYearPicker:i=_5(r.state.date,r.props);break;case r.props.showYearPicker:i=jwe(r.state.date,r.props);break;case r.props.showQuarterYearPicker:i=Twe(r.state.date,r.props);break;default:i=b5(r.state.date,r.props);break}if(!(!((s=r.props.forceShowMonthNavigation)!==null&&s!==void 0?s:e.defaultProps.forceShowMonthNavigation)&&!r.props.showDisabledMonthNavigation&&i||r.props.showTimeSelectOnly)){var a=["react-datepicker__navigation","react-datepicker__navigation--next"],o=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--next"];r.props.showTimeSelect&&a.push("react-datepicker__navigation--next--with-time"),r.props.todayButton&&a.push("react-datepicker__navigation--next--with-today-button");var c=r.increaseMonth;(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker)&&(c=r.increaseYear),i&&r.props.showDisabledMonthNavigation&&(a.push("react-datepicker__navigation--next--disabled"),c=void 0);var d=r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker,h=r.props,p=h.nextMonthButtonLabel,m=p===void 0?e.defaultProps.nextMonthButtonLabel:p,y=h.nextYearButtonLabel,x=y===void 0?e.defaultProps.nextYearButtonLabel:y,_=r.props,w=_.nextMonthAriaLabel,N=w===void 0?typeof m=="string"?m:"Next Month":w,k=_.nextYearAriaLabel,S=k===void 0?typeof x=="string"?x:"Next Year":k;return oe.createElement("button",{type:"button",className:a.join(" "),onClick:c,onKeyDown:r.props.handleOnKeyDown,"aria-label":d?S:N},oe.createElement("span",{className:o.join(" ")},d?x:m))}}},r.renderCurrentMonth=function(s){s===void 0&&(s=r.state.date);var i=["react-datepicker__current-month"];return r.props.showYearDropdown&&i.push("react-datepicker__current-month--hasYearDropdown"),r.props.showMonthDropdown&&i.push("react-datepicker__current-month--hasMonthDropdown"),r.props.showMonthYearDropdown&&i.push("react-datepicker__current-month--hasMonthYearDropdown"),oe.createElement("h2",{className:i.join(" ")},Pn(s,r.props.dateFormat,r.props.locale))},r.renderYearDropdown=function(s){if(s===void 0&&(s=!1),!(!r.props.showYearDropdown||s))return oe.createElement(Qwe,Bt({},e.defaultProps,r.props,{date:r.state.date,onChange:r.changeYear,year:It(r.state.date)}))},r.renderMonthDropdown=function(s){if(s===void 0&&(s=!1),!(!r.props.showMonthDropdown||s))return oe.createElement(Uwe,Bt({},e.defaultProps,r.props,{month:Cs(r.state.date),onChange:r.changeMonth}))},r.renderMonthYearDropdown=function(s){if(s===void 0&&(s=!1),!(!r.props.showMonthYearDropdown||s))return oe.createElement(Hwe,Bt({},e.defaultProps,r.props,{date:r.state.date,onChange:r.changeMonthYear}))},r.handleTodayButtonClick=function(s){r.props.onSelect(p5(),s),r.props.setPreSelection&&r.props.setPreSelection(p5())},r.renderTodayButton=function(){if(!(!r.props.todayButton||r.props.showTimeSelectOnly))return oe.createElement("div",{className:"react-datepicker__today-button",onClick:r.handleTodayButtonClick},r.props.todayButton)},r.renderDayNamesHeader=function(s){return oe.createElement("div",{className:"react-datepicker__day-names",role:"row"},r.header(s))},r.renderDefaultHeader=function(s){var i=s.monthDate,a=s.i;return oe.createElement("div",{className:"react-datepicker__header ".concat(r.props.showTimeSelect?"react-datepicker__header--has-time-select":"")},r.renderCurrentMonth(i),oe.createElement("div",{className:"react-datepicker__header__dropdown react-datepicker__header__dropdown--".concat(r.props.dropdownMode),onFocus:r.handleDropdownFocus},r.renderMonthDropdown(a!==0),r.renderMonthYearDropdown(a!==0),r.renderYearDropdown(a!==0)))},r.renderCustomHeader=function(s){var i,a,o=s.monthDate,c=s.i;if(r.props.showTimeSelect&&!r.state.monthContainer||r.props.showTimeSelectOnly)return null;var d=r.props,h=d.showYearPicker,p=d.yearItemNumber,m;if(h){var y=wl(o,p),x=y.startPeriod,_=y.endPeriod;m={startYear:x,endYear:_}}var w=x5(r.state.date,r.props),N=b5(r.state.date,r.props),k=w5(r.state.date,r.props),S=_5(r.state.date,r.props);return oe.createElement("div",{className:"react-datepicker__header react-datepicker__header--custom",onFocus:r.props.onDropdownFocus},(a=(i=r.props).renderCustomHeader)===null||a===void 0?void 0:a.call(i,Bt(Bt(Bt({},r.state),h&&{visibleYearsRange:m}),{customHeaderCount:c,monthDate:o,changeMonth:r.changeMonth,changeYear:r.changeYear,decreaseMonth:r.decreaseMonth,increaseMonth:r.increaseMonth,decreaseYear:r.decreaseYear,increaseYear:r.increaseYear,prevMonthButtonDisabled:w,nextMonthButtonDisabled:N,prevYearButtonDisabled:k,nextYearButtonDisabled:S})))},r.renderYearHeader=function(s){var i=s.monthDate,a=r.props,o=a.showYearPicker,c=a.yearItemNumber,d=c===void 0?e.defaultProps.yearItemNumber:c,h=wl(i,d),p=h.startPeriod,m=h.endPeriod;return oe.createElement("div",{className:"react-datepicker__header react-datepicker-year-header"},o?"".concat(p," - ").concat(m):It(i))},r.renderHeader=function(s){var i=s.monthDate,a=s.i,o=a===void 0?0:a,c={monthDate:i,i:o};switch(!0){case r.props.renderCustomHeader!==void 0:return r.renderCustomHeader(c);case(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker):return r.renderYearHeader(c);default:return r.renderDefaultHeader(c)}},r.renderMonths=function(){var s,i;if(!(r.props.showTimeSelectOnly||r.props.showYearPicker)){for(var a=[],o=(s=r.props.monthsShown)!==null&&s!==void 0?s:e.defaultProps.monthsShown,c=r.props.showPreviousMonths?o-1:0,d=r.props.showMonthYearPicker||r.props.showQuarterYearPicker?Cl(r.state.date,c):Ld(r.state.date,c),h=(i=r.props.monthSelectedIn)!==null&&i!==void 0?i:c,p=0;p<o;++p){var m=p-h+c,y=r.props.showMonthYearPicker||r.props.showQuarterYearPicker?Cl(d,m):Ga(d,m),x="month-".concat(p),_=p<o-1,w=p>0;a.push(oe.createElement("div",{key:x,ref:function(N){r.monthContainer=N??void 0},className:"react-datepicker__month-container"},r.renderHeader({monthDate:y,i:p}),oe.createElement(Vwe,Bt({},e.defaultProps,r.props,{containerRef:r.containerRef,ariaLabelPrefix:r.props.monthAriaLabelPrefix,day:y,onDayClick:r.handleDayClick,handleOnKeyDown:r.props.handleOnDayKeyDown,handleOnMonthKeyDown:r.props.handleOnKeyDown,onDayMouseEnter:r.handleDayMouseEnter,onMouseLeave:r.handleMonthMouseLeave,orderInDisplay:p,selectingDate:r.state.selectingDate,monthShowsDuplicateDaysEnd:_,monthShowsDuplicateDaysStart:w,dayNamesHeader:r.renderDayNamesHeader(y)}))))}return a}},r.renderYears=function(){if(!r.props.showTimeSelectOnly&&r.props.showYearPicker)return oe.createElement("div",{className:"react-datepicker__year--container"},r.renderHeader({monthDate:r.state.date}),oe.createElement(Kwe,Bt({},e.defaultProps,r.props,{selectingDate:r.state.selectingDate,date:r.state.date,onDayClick:r.handleDayClick,clearSelectingDate:r.clearSelectingDate,onYearMouseEnter:r.handleYearMouseEnter,onYearMouseLeave:r.handleYearMouseLeave})))},r.renderTimeSection=function(){if(r.props.showTimeSelect&&(r.state.monthContainer||r.props.showTimeSelectOnly))return oe.createElement(qwe,Bt({},e.defaultProps,r.props,{onChange:r.props.onTimeChange,format:r.props.timeFormat,intervals:r.props.timeIntervals,monthRef:r.state.monthContainer}))},r.renderInputTimeSection=function(){var s=r.props.selected?new Date(r.props.selected):void 0,i=s&&p_(s)&&!!r.props.selected,a=i?"".concat(N5(s.getHours()),":").concat(N5(s.getMinutes())):"";if(r.props.showTimeInput)return oe.createElement(Owe,Bt({},e.defaultProps,r.props,{date:s,timeString:a,onChange:r.props.onTimeChange}))},r.renderAriaLiveRegion=function(){var s,i=wl(r.state.date,(s=r.props.yearItemNumber)!==null&&s!==void 0?s:e.defaultProps.yearItemNumber),a=i.startPeriod,o=i.endPeriod,c;return r.props.showYearPicker?c="".concat(a," - ").concat(o):r.props.showMonthYearPicker||r.props.showQuarterYearPicker?c=It(r.state.date):c="".concat(dA(Cs(r.state.date),r.props.locale)," ").concat(It(r.state.date)),oe.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},r.state.isRenderAriaLiveMessage&&c)},r.renderChildren=function(){if(r.props.children)return oe.createElement("div",{className:"react-datepicker__children-container"},r.props.children)},r.containerRef=v.createRef(),r.state={date:r.getDateInView(),selectingDate:void 0,monthContainer:void 0,isRenderAriaLiveMessage:!1},r}return Object.defineProperty(e,"defaultProps",{get:function(){return{monthsShown:1,forceShowMonthNavigation:!1,outsideClickIgnoreClass:nH,timeCaption:"Time",previousYearButtonLabel:"Previous Year",nextYearButtonLabel:"Next Year",previousMonthButtonLabel:"Previous Month",nextMonthButtonLabel:"Next Month",yearItemNumber:hy}},enumerable:!1,configurable:!0}),e.prototype.componentDidMount=function(){var n=this;this.props.showTimeSelect&&(this.assignMonthContainer=(function(){n.setState({monthContainer:n.monthContainer})})())},e.prototype.componentDidUpdate=function(n){var r=this;if(this.props.preSelection&&(!Vt(this.props.preSelection,n.preSelection)||this.props.monthSelectedIn!==n.monthSelectedIn)){var s=!Fs(this.state.date,this.props.preSelection);this.setState({date:this.props.preSelection},function(){return s&&r.handleCustomMonthChange(r.state.date)})}else this.props.openToDate&&!Vt(this.props.openToDate,n.openToDate)&&this.setState({date:this.props.openToDate})},e.prototype.render=function(){var n=this.props.container||fwe;return oe.createElement(f_,{onClickOutside:this.handleClickOutside,style:{display:"contents"},ignoreClass:this.props.outsideClickIgnoreClass},oe.createElement("div",{style:{display:"contents"},ref:this.containerRef},oe.createElement(n,{className:Et("react-datepicker",this.props.className,{"react-datepicker--time-only":this.props.showTimeSelectOnly}),showTime:this.props.showTimeSelect||this.props.showTimeInput,showTimeSelectOnly:this.props.showTimeSelectOnly},this.renderAriaLiveRegion(),this.renderPreviousButton(),this.renderNextButton(),this.renderMonths(),this.renderYears(),this.renderTodayButton(),this.renderTimeSection(),this.renderInputTimeSection(),this.renderChildren())))},e})(v.Component),e1e=function(t){var e=t.icon,n=t.className,r=n===void 0?"":n,s=t.onClick,i="react-datepicker__calendar-icon";if(typeof e=="string")return oe.createElement("i",{className:"".concat(i," ").concat(e," ").concat(r),"aria-hidden":"true",onClick:s});if(oe.isValidElement(e)){var a=e;return oe.cloneElement(a,{className:"".concat(a.props.className||""," ").concat(i," ").concat(r),onClick:function(o){typeof a.props.onClick=="function"&&a.props.onClick(o),typeof s=="function"&&s(o)}})}return oe.createElement("svg",{className:"".concat(i," ").concat(r),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",onClick:s},oe.createElement("path",{d:"M96 32V64H48C21.5 64 0 85.5 0 112v48H448V112c0-26.5-21.5-48-48-48H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32V64H160V32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192H0V464c0 26.5 21.5 48 48 48H400c26.5 0 48-21.5 48-48V192z"}))},rH=(function(t){fs(e,t);function e(n){var r=t.call(this,n)||this;return r.portalRoot=null,r.el=document.createElement("div"),r}return e.prototype.componentDidMount=function(){this.portalRoot=(this.props.portalHost||document).getElementById(this.props.portalId),this.portalRoot||(this.portalRoot=document.createElement("div"),this.portalRoot.setAttribute("id",this.props.portalId),(this.props.portalHost||document.body).appendChild(this.portalRoot)),this.portalRoot.appendChild(this.el)},e.prototype.componentWillUnmount=function(){this.portalRoot&&this.portalRoot.removeChild(this.el)},e.prototype.render=function(){return HJ.createPortal(this.props.children,this.el)},e})(v.Component),t1e="[tabindex], a, button, input, select, textarea",n1e=function(t){return(t instanceof HTMLAnchorElement||!t.disabled)&&t.tabIndex!==-1},sH=(function(t){fs(e,t);function e(n){var r=t.call(this,n)||this;return r.getTabChildren=function(){var s;return Array.prototype.slice.call((s=r.tabLoopRef.current)===null||s===void 0?void 0:s.querySelectorAll(t1e),1,-1).filter(n1e)},r.handleFocusStart=function(){var s=r.getTabChildren();s&&s.length>1&&s[s.length-1].focus()},r.handleFocusEnd=function(){var s=r.getTabChildren();s&&s.length>1&&s[0].focus()},r.tabLoopRef=v.createRef(),r}return e.prototype.render=function(){var n;return((n=this.props.enableTabLoop)!==null&&n!==void 0?n:e.defaultProps.enableTabLoop)?oe.createElement("div",{className:"react-datepicker__tab-loop",ref:this.tabLoopRef},oe.createElement("div",{className:"react-datepicker__tab-loop__start",tabIndex:0,onFocus:this.handleFocusStart}),this.props.children,oe.createElement("div",{className:"react-datepicker__tab-loop__end",tabIndex:0,onFocus:this.handleFocusEnd})):this.props.children},e.defaultProps={enableTabLoop:!0},e})(v.Component);function r1e(t){function e(n){var r,s=typeof n.hidePopper=="boolean"?n.hidePopper:!0,i=v.useRef(null),a=hwe(Bt({open:!s,whileElementsMounted:Wbe,placement:n.popperPlacement,middleware:Co([Zbe({padding:15}),Jbe(10),ewe({element:i})],(r=n.popperModifiers)!==null&&r!==void 0?r:[],!0)},n.popperProps)),o=Bt(Bt({},n),{hidePopper:s,popperProps:Bt(Bt({},a),{arrowRef:i})});return oe.createElement(t,Bt({},o))}return e.displayName="withFloating(".concat(t.displayName||t.name||"Component",")"),e}var s1e=function(t){var e=t.className,n=t.wrapperClassName,r=t.hidePopper,s=r===void 0?!0:r,i=t.popperComponent,a=t.targetComponent,o=t.enableTabLoop,c=t.popperOnKeyDown,d=t.portalId,h=t.portalHost,p=t.popperProps,m=t.showArrow,y=void 0;if(!s){var x=Et("react-datepicker-popper",e);y=oe.createElement(sH,{enableTabLoop:o},oe.createElement("div",{ref:p.refs.setFloating,style:p.floatingStyles,className:x,"data-placement":p.placement,onKeyDown:c},i,m&&oe.createElement(iwe,{ref:p.arrowRef,context:p.context,fill:"currentColor",strokeWidth:1,height:8,width:16,style:{transform:"translateY(-1px)"},className:"react-datepicker__triangle"})))}t.popperContainer&&(y=v.createElement(t.popperContainer,{},y)),d&&!s&&(y=oe.createElement(rH,{portalId:d,portalHost:h},y));var _=Et("react-datepicker-wrapper",n);return oe.createElement(oe.Fragment,null,oe.createElement("div",{ref:p.refs.setReference,className:_},a),y)},i1e=r1e(s1e);function a1e(t,e){return t&&e?Cs(t)!==Cs(e)||It(t)!==It(e):t!==e}var jS="Date input not valid.",o1e=(function(t){fs(e,t);function e(n){var r=t.call(this,n)||this;return r.calendar=null,r.input=null,r.getPreSelection=function(){return r.props.openToDate?r.props.openToDate:r.props.selectsEnd&&r.props.startDate?r.props.startDate:r.props.selectsStart&&r.props.endDate?r.props.endDate:nn()},r.modifyHolidays=function(){var s;return(s=r.props.holidays)===null||s===void 0?void 0:s.reduce(function(i,a){var o=new Date(a.date);return p_(o)?Co(Co([],i,!0),[Bt(Bt({},a),{date:o})],!1):i},[])},r.calcInitialState=function(){var s,i=r.getPreSelection(),a=ZW(r.props),o=eH(r.props),c=a&&To(i,lb(a))?a:o&&cu(i,m5(o))?o:i;return{open:r.props.startOpen||!1,preventFocus:!1,inputValue:null,preSelection:(s=r.props.selectsRange?r.props.startDate:r.props.selected)!==null&&s!==void 0?s:c,highlightDates:E5(r.props.highlightDates),focused:!1,shouldFocusDayInline:!1,isRenderAriaLiveMessage:!1,wasHidden:!1}},r.getInputValue=function(){var s,i=r.props,a=i.locale,o=i.startDate,c=i.endDate,d=i.rangeSeparator,h=i.selected,p=i.selectedDates,m=i.selectsMultiple,y=i.selectsRange,x=i.value,_=(s=r.props.dateFormat)!==null&&s!==void 0?s:e.defaultProps.dateFormat,w=r.state.inputValue;return typeof x=="string"?x:typeof w=="string"?w:y?mwe(o,c,{dateFormat:_,locale:a,rangeSeparator:d}):m?gwe(p??[],{dateFormat:_,locale:a}):ia(h,{dateFormat:_,locale:a})},r.resetHiddenStatus=function(){r.setState(Bt(Bt({},r.state),{wasHidden:!1}))},r.setHiddenStatus=function(){r.setState(Bt(Bt({},r.state),{wasHidden:!0}))},r.setHiddenStateOnVisibilityHidden=function(){document.visibilityState==="hidden"&&r.setHiddenStatus()},r.clearPreventFocusTimeout=function(){r.preventFocusTimeout&&clearTimeout(r.preventFocusTimeout)},r.setFocus=function(){var s,i;(i=(s=r.input)===null||s===void 0?void 0:s.focus)===null||i===void 0||i.call(s,{preventScroll:!0})},r.setBlur=function(){var s,i;(i=(s=r.input)===null||s===void 0?void 0:s.blur)===null||i===void 0||i.call(s),r.cancelFocusInput()},r.deferBlur=function(){requestAnimationFrame(function(){r.setBlur()})},r.setOpen=function(s,i){i===void 0&&(i=!1),r.setState({open:s,preSelection:s&&r.state.open?r.state.preSelection:r.calcInitialState().preSelection,lastPreSelectChange:PS},function(){s||r.setState(function(a){return{focused:i?a.focused:!1}},function(){!i&&r.deferBlur(),r.setState({inputValue:null})})})},r.inputOk=function(){return jl(r.state.preSelection)},r.isCalendarOpen=function(){return r.props.open===void 0?r.state.open&&!r.props.disabled&&!r.props.readOnly:r.props.open},r.handleFocus=function(s){var i,a,o=r.state.wasHidden,c=o?r.state.open:!0;o&&r.resetHiddenStatus(),r.state.preventFocus||((a=(i=r.props).onFocus)===null||a===void 0||a.call(i,s),c&&!r.props.preventOpenOnFocus&&!r.props.readOnly&&r.setOpen(!0)),r.setState({focused:!0})},r.sendFocusBackToInput=function(){r.preventFocusTimeout&&r.clearPreventFocusTimeout(),r.setState({preventFocus:!0},function(){r.preventFocusTimeout=setTimeout(function(){r.setFocus(),r.setState({preventFocus:!1})})})},r.cancelFocusInput=function(){clearTimeout(r.inputFocusTimeout),r.inputFocusTimeout=void 0},r.deferFocusInput=function(){r.cancelFocusInput(),r.inputFocusTimeout=setTimeout(function(){return r.setFocus()},1)},r.handleDropdownFocus=function(){r.cancelFocusInput()},r.resetInputValue=function(){r.setState(Bt(Bt({},r.state),{inputValue:null}))},r.handleBlur=function(s){var i,a;(!r.state.open||r.props.withPortal||r.props.showTimeInput)&&((a=(i=r.props).onBlur)===null||a===void 0||a.call(i,s)),r.resetInputValue(),r.state.open&&r.props.open===!1&&r.setOpen(!1),r.setState({focused:!1})},r.handleCalendarClickOutside=function(s){var i,a;r.props.inline||r.setOpen(!1),(a=(i=r.props).onClickOutside)===null||a===void 0||a.call(i,s),r.props.withPortal&&s.preventDefault()},r.handleChange=function(){for(var s,i,a,o,c,d=[],h=0;h<arguments.length;h++)d[h]=arguments[h];var p=d[0];if(!(r.props.onChangeRaw&&(r.props.onChangeRaw.apply(r,d),!p||typeof p.isDefaultPrevented!="function"||p.isDefaultPrevented()))){r.setState({inputValue:p?.target instanceof HTMLInputElement?p.target.value:null,lastPreSelectChange:l1e});var m=r.props,y=m.selectsRange,x=m.startDate,_=m.endDate,w=(s=r.props.dateFormat)!==null&&s!==void 0?s:e.defaultProps.dateFormat,N=(i=r.props.strictParsing)!==null&&i!==void 0?i:e.defaultProps.strictParsing,k=p?.target instanceof HTMLInputElement?p.target.value:"";if(y){var S=r.props.rangeSeparator,O=S.trim(),R=k.split(w.includes(O)?S:O,2).map(function(I){return I.trim()}),M=R[0],P=R[1],C=SS(M??"",w,r.props.locale,N),D=C?SS(P??"",w,r.props.locale,N):null,$=x?.getTime()!==C?.getTime(),F=_?.getTime()!==D?.getTime();if(!$&&!F||C&&la(C,r.props)||D&&la(D,r.props))return;(o=(a=r.props).onChange)===null||o===void 0||o.call(a,[C,D],p)}else{var U=SS(k,w,r.props.locale,N,(c=r.props.selected)!==null&&c!==void 0?c:void 0);(U||!k)&&r.setSelected(U,p,!0)}}},r.handleSelect=function(s,i,a){if(!r.props.readOnly){var o=r.props,c=o.selectsRange,d=o.startDate,h=o.endDate,p=o.swapRange,m=!c||d&&!h&&(p||!TS(s,d));r.props.shouldCloseOnSelect&&!r.props.showTimeSelect&&m&&r.sendFocusBackToInput(),r.props.onChangeRaw&&r.props.onChangeRaw(i),r.setSelected(s,i,!1,a),r.props.showDateSelect&&r.setState({isRenderAriaLiveMessage:!0}),!r.props.shouldCloseOnSelect||r.props.showTimeSelect?r.setPreSelection(s):m&&r.setOpen(!1)}},r.setSelected=function(s,i,a,o){var c,d,h=s;if(r.props.showYearPicker){if(h!==null&&cb(It(h),r.props))return}else if(r.props.showMonthYearPicker){if(h!==null&&JW(h,r.props))return}else if(h!==null&&la(h,r.props))return;var p=r.props,m=p.onChange,y=p.selectsRange,x=p.startDate,_=p.endDate,w=p.selectsMultiple,N=p.selectedDates,k=p.minTime,S=p.swapRange;if(!Ed(r.props.selected,h)||r.props.allowSameDay||y||w)if(h!==null&&(r.props.selected&&(!a||!r.props.showTimeSelect&&!r.props.showTimeSelectOnly&&!r.props.showTimeInput)&&(h=kS(h,{hour:Pl(r.props.selected),minute:Al(r.props.selected),second:Xc(r.props.selected)})),!a&&(r.props.showTimeSelect||r.props.showTimeSelectOnly)&&k&&(h=kS(h,{hour:k.getHours(),minute:k.getMinutes(),second:k.getSeconds()})),r.props.inline||r.setState({preSelection:h}),r.props.focusSelectedMonth||r.setState({monthSelectedIn:o})),y){var O=!x&&!_,R=x&&!_,M=!x&&!!_,P=x&&_;O?m?.([h,null],i):R?h===null?m?.([null,null],i):TS(h,x)?m?.(S?[h,x]:[h,null],i):m?.([x,h],i):M&&(h&&TS(h,_)?m?.([h,_],i):m?.([h,null],i)),P&&m?.([h,null],i)}else if(w){if(h!==null)if(!N?.length)m?.([h],i);else{var C=N.some(function($){return Vt($,h)});if(C){var D=N.filter(function($){return!Vt($,h)});m?.(D,i)}else m?.(Co(Co([],N,!0),[h],!1),i)}}else m?.(h,i);a||((d=(c=r.props).onSelect)===null||d===void 0||d.call(c,h,i),r.setState({inputValue:null}))},r.setPreSelection=function(s){if(!r.props.readOnly){var i=jl(r.props.minDate),a=jl(r.props.maxDate),o=!0;if(s){var c=lb(s);if(i&&a)o=od(s,r.props.minDate,r.props.maxDate);else if(i){var d=lb(r.props.minDate);o=cu(s,d)||Ed(c,d)}else if(a){var h=m5(r.props.maxDate);o=To(s,h)||Ed(c,h)}}o&&r.setState({preSelection:s})}},r.toggleCalendar=function(){r.setOpen(!r.state.open)},r.handleTimeChange=function(s){var i,a;if(!(r.props.selectsRange||r.props.selectsMultiple)){var o=r.props.selected?r.props.selected:r.getPreSelection(),c=r.props.selected?s:kS(o,{hour:Pl(s),minute:Al(s)});r.setState({preSelection:c}),(a=(i=r.props).onChange)===null||a===void 0||a.call(i,c),r.props.shouldCloseOnSelect&&!r.props.showTimeInput&&(r.sendFocusBackToInput(),r.setOpen(!1)),r.props.showTimeInput&&r.setOpen(!0),(r.props.showTimeSelectOnly||r.props.showTimeSelect)&&r.setState({isRenderAriaLiveMessage:!0}),r.setState({inputValue:null})}},r.onInputClick=function(){var s,i;!r.props.disabled&&!r.props.readOnly&&r.setOpen(!0),(i=(s=r.props).onInputClick)===null||i===void 0||i.call(s)},r.onInputKeyDown=function(s){var i,a,o,c,d,h;(a=(i=r.props).onKeyDown)===null||a===void 0||a.call(i,s);var p=s.key;if(!r.state.open&&!r.props.inline&&!r.props.preventOpenOnFocus){(p===qe.ArrowDown||p===qe.ArrowUp||p===qe.Enter)&&((o=r.onInputClick)===null||o===void 0||o.call(r));return}if(r.state.open){if(p===qe.ArrowDown||p===qe.ArrowUp){s.preventDefault();var m=r.props.showTimeSelectOnly?".react-datepicker__time-list-item[tabindex='0']":r.props.showWeekPicker&&r.props.showWeekNumbers?'.react-datepicker__week-number[tabindex="0"]':r.props.showFullMonthYearPicker||r.props.showMonthYearPicker?'.react-datepicker__month-text[tabindex="0"]':'.react-datepicker__day[tabindex="0"]',y=((c=r.calendar)===null||c===void 0?void 0:c.containerRef.current)instanceof Element&&r.calendar.containerRef.current.querySelector(m);y instanceof HTMLElement&&y.focus({preventScroll:!0});return}var x=nn(r.state.preSelection);p===qe.Enter?(s.preventDefault(),s.target.blur(),r.inputOk()&&r.state.lastPreSelectChange===PS?(r.handleSelect(x,s),!r.props.shouldCloseOnSelect&&r.setPreSelection(x)):r.setOpen(!1)):p===qe.Escape?(s.preventDefault(),s.target.blur(),r.sendFocusBackToInput(),r.setOpen(!1)):p===qe.Tab&&r.setOpen(!1),r.inputOk()||(h=(d=r.props).onInputError)===null||h===void 0||h.call(d,{code:1,msg:jS})}},r.onPortalKeyDown=function(s){var i=s.key;i===qe.Escape&&(s.preventDefault(),r.setState({preventFocus:!0},function(){r.setOpen(!1),setTimeout(function(){r.setFocus(),r.setState({preventFocus:!1})})}))},r.onDayKeyDown=function(s){var i,a,o,c,d,h,p=r.props,m=p.minDate,y=p.maxDate,x=p.disabledKeyboardNavigation,_=p.showWeekPicker,w=p.shouldCloseOnSelect,N=p.locale,k=p.calendarStartDay,S=p.adjustDateOnChange,O=p.inline;if((a=(i=r.props).onKeyDown)===null||a===void 0||a.call(i,s),!x){var R=s.key,M=s.shiftKey,P=nn(r.state.preSelection),C=function(Q,ne){var W=ne;switch(Q){case qe.ArrowRight:W=_?dw(ne,1):Wa(ne,1);break;case qe.ArrowLeft:W=_?t5(ne):Axe(ne);break;case qe.ArrowUp:W=t5(ne);break;case qe.ArrowDown:W=dw(ne,1);break;case qe.PageUp:W=M?xp(ne,1):Ld(ne,1);break;case qe.PageDown:W=M?Cl(ne,1):Ga(ne,1);break;case qe.Home:W=Jc(ne,N,k);break;case qe.End:W=xwe(ne);break}return W},D=function(Q,ne){for(var W=40,K=Q,Y=!1,G=0,q=C(Q,ne);!Y;){if(G>=W){q=ne;break}m&&q<m&&(K=qe.ArrowRight,q=la(m,r.props)?C(K,q):m),y&&q>y&&(K=qe.ArrowLeft,q=la(y,r.props)?C(K,q):y),la(q,r.props)?((K===qe.PageUp||K===qe.Home)&&(K=qe.ArrowRight),(K===qe.PageDown||K===qe.End)&&(K=qe.ArrowLeft),q=C(K,q)):Y=!0,G++}return q};if(R===qe.Enter){s.preventDefault(),r.handleSelect(P,s),!w&&r.setPreSelection(P);return}else if(R===qe.Escape){s.preventDefault(),r.setOpen(!1),r.inputOk()||(c=(o=r.props).onInputError)===null||c===void 0||c.call(o,{code:1,msg:jS});return}var $=null;switch(R){case qe.ArrowLeft:case qe.ArrowRight:case qe.ArrowUp:case qe.ArrowDown:case qe.PageUp:case qe.PageDown:case qe.Home:case qe.End:$=D(R,P);break}if(!$){(h=(d=r.props).onInputError)===null||h===void 0||h.call(d,{code:1,msg:jS});return}if(s.preventDefault(),r.setState({lastPreSelectChange:PS}),S&&r.setSelected($),r.setPreSelection($),O){var F=Cs(P),U=Cs($),I=It(P),z=It($);F!==U||I!==z?r.setState({shouldFocusDayInline:!0}):r.setState({shouldFocusDayInline:!1})}}},r.onPopperKeyDown=function(s){var i=s.key;i===qe.Escape&&(s.preventDefault(),r.sendFocusBackToInput(),r.setOpen(!1))},r.onClearClick=function(s){s&&s.preventDefault&&s.preventDefault(),r.sendFocusBackToInput();var i=r.props,a=i.selectsRange,o=i.onChange;o?.(a?[null,null]:null,s),r.setState({inputValue:null})},r.clear=function(){r.onClearClick()},r.onScroll=function(s){typeof r.props.closeOnScroll=="boolean"&&r.props.closeOnScroll?(s.target===document||s.target===document.documentElement||s.target===document.body)&&r.setOpen(!1):typeof r.props.closeOnScroll=="function"&&r.props.closeOnScroll(s)&&r.setOpen(!1)},r.renderCalendar=function(){var s,i;return!r.props.inline&&!r.isCalendarOpen()?null:oe.createElement(Zwe,Bt({showMonthYearDropdown:void 0,ref:function(a){r.calendar=a}},r.props,r.state,{setOpen:r.setOpen,dateFormat:(s=r.props.dateFormatCalendar)!==null&&s!==void 0?s:e.defaultProps.dateFormatCalendar,onSelect:r.handleSelect,onClickOutside:r.handleCalendarClickOutside,holidays:Awe(r.modifyHolidays()),outsideClickIgnoreClass:r.props.outsideClickIgnoreClass,onDropdownFocus:r.handleDropdownFocus,onTimeChange:r.handleTimeChange,className:r.props.calendarClassName,container:r.props.calendarContainer,handleOnKeyDown:r.props.onKeyDown,handleOnDayKeyDown:r.onDayKeyDown,setPreSelection:r.setPreSelection,dropdownMode:(i=r.props.dropdownMode)!==null&&i!==void 0?i:e.defaultProps.dropdownMode}),r.props.children)},r.renderAriaLiveRegion=function(){var s,i=r.props.locale,a=(s=r.props.dateFormat)!==null&&s!==void 0?s:e.defaultProps.dateFormat,o=r.props.showTimeInput||r.props.showTimeSelect,c=o?"PPPPp":"PPPP",d;return r.props.selectsRange?d="Selected start date: ".concat(ia(r.props.startDate,{dateFormat:c,locale:i}),". ").concat(r.props.endDate?"End date: "+ia(r.props.endDate,{dateFormat:c,locale:i}):""):r.props.showTimeSelectOnly?d="Selected time: ".concat(ia(r.props.selected,{dateFormat:a,locale:i})):r.props.showYearPicker?d="Selected year: ".concat(ia(r.props.selected,{dateFormat:"yyyy",locale:i})):r.props.showMonthYearPicker?d="Selected month: ".concat(ia(r.props.selected,{dateFormat:"MMMM yyyy",locale:i})):r.props.showQuarterYearPicker?d="Selected quarter: ".concat(ia(r.props.selected,{dateFormat:"yyyy, QQQ",locale:i})):d="Selected date: ".concat(ia(r.props.selected,{dateFormat:c,locale:i})),oe.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},d)},r.renderDateInput=function(){var s,i,a=Et(r.props.className,(s={},s[r.props.outsideClickIgnoreClass||e.defaultProps.outsideClickIgnoreClass]=r.state.open,s)),o=r.props.customInput||oe.createElement("input",{type:"text"}),c=r.props.customInputRef||"ref";return v.cloneElement(o,(i={},i[c]=function(d){r.input=d},i.value=r.getInputValue(),i.onBlur=r.handleBlur,i.onChange=r.handleChange,i.onClick=r.onInputClick,i.onFocus=r.handleFocus,i.onKeyDown=r.onInputKeyDown,i.id=r.props.id,i.name=r.props.name,i.form=r.props.form,i.autoFocus=r.props.autoFocus,i.placeholder=r.props.placeholderText,i.disabled=r.props.disabled,i.autoComplete=r.props.autoComplete,i.className=Et(o.props.className,a),i.title=r.props.title,i.readOnly=r.props.readOnly,i.required=r.props.required,i.tabIndex=r.props.tabIndex,i["aria-describedby"]=r.props.ariaDescribedBy,i["aria-invalid"]=r.props.ariaInvalid,i["aria-labelledby"]=r.props.ariaLabelledBy,i["aria-required"]=r.props.ariaRequired,i))},r.renderClearButton=function(){var s=r.props,i=s.isClearable,a=s.disabled,o=s.selected,c=s.startDate,d=s.endDate,h=s.clearButtonTitle,p=s.clearButtonClassName,m=p===void 0?"":p,y=s.ariaLabelClose,x=y===void 0?"Close":y,_=s.selectedDates,w=s.readOnly;return i&&!w&&(o!=null||c!=null||d!=null||_?.length)?oe.createElement("button",{type:"button",className:Et("react-datepicker__close-icon",m,{"react-datepicker__close-icon--disabled":a}),disabled:a,"aria-label":x,onClick:r.onClearClick,title:h,tabIndex:-1}):null},r.state=r.calcInitialState(),r.preventFocusTimeout=void 0,r}return Object.defineProperty(e,"defaultProps",{get:function(){return{allowSameDay:!1,dateFormat:"MM/dd/yyyy",dateFormatCalendar:"LLLL yyyy",disabled:!1,disabledKeyboardNavigation:!1,dropdownMode:"scroll",preventOpenOnFocus:!1,monthsShown:1,outsideClickIgnoreClass:nH,readOnly:!1,rangeSeparator:QW,withPortal:!1,selectsDisabledDaysInRange:!1,shouldCloseOnSelect:!0,showTimeSelect:!1,showTimeInput:!1,showPreviousMonths:!1,showMonthYearPicker:!1,showFullMonthYearPicker:!1,showTwoColumnMonthYearPicker:!1,showFourColumnMonthYearPicker:!1,showYearPicker:!1,showQuarterYearPicker:!1,showWeekPicker:!1,strictParsing:!1,swapRange:!1,timeIntervals:30,timeCaption:"Time",previousMonthAriaLabel:"Previous Month",previousMonthButtonLabel:"Previous Month",nextMonthAriaLabel:"Next Month",nextMonthButtonLabel:"Next Month",previousYearAriaLabel:"Previous Year",previousYearButtonLabel:"Previous Year",nextYearAriaLabel:"Next Year",nextYearButtonLabel:"Next Year",timeInputLabel:"Time",enableTabLoop:!0,yearItemNumber:hy,focusSelectedMonth:!1,showPopperArrow:!0,excludeScrollbar:!0,customTimeInput:null,calendarStartDay:void 0,toggleCalendarOnIconClick:!1,usePointerEvent:!1}},enumerable:!1,configurable:!0}),e.prototype.componentDidMount=function(){window.addEventListener("scroll",this.onScroll,!0),document.addEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},e.prototype.componentDidUpdate=function(n,r){var s,i,a,o;n.inline&&a1e(n.selected,this.props.selected)&&this.setPreSelection(this.props.selected),this.state.monthSelectedIn!==void 0&&n.monthsShown!==this.props.monthsShown&&this.setState({monthSelectedIn:0}),n.highlightDates!==this.props.highlightDates&&this.setState({highlightDates:E5(this.props.highlightDates)}),!r.focused&&!Ed(n.selected,this.props.selected)&&this.setState({inputValue:null}),r.open!==this.state.open&&(r.open===!1&&this.state.open===!0&&((i=(s=this.props).onCalendarOpen)===null||i===void 0||i.call(s)),r.open===!0&&this.state.open===!1&&((o=(a=this.props).onCalendarClose)===null||o===void 0||o.call(a)))},e.prototype.componentWillUnmount=function(){this.clearPreventFocusTimeout(),window.removeEventListener("scroll",this.onScroll,!0),document.removeEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},e.prototype.renderInputContainer=function(){var n=this.props,r=n.showIcon,s=n.icon,i=n.calendarIconClassname,a=n.calendarIconClassName,o=n.toggleCalendarOnIconClick,c=this.state.open;return i&&console.warn("calendarIconClassname props is deprecated. should use calendarIconClassName props."),oe.createElement("div",{className:"react-datepicker__input-container".concat(r?" react-datepicker__view-calendar-icon":"")},r&&oe.createElement(e1e,Bt({icon:s,className:Et(a,!a&&i,c&&"react-datepicker-ignore-onclickoutside")},o?{onClick:this.toggleCalendar}:null)),this.state.isRenderAriaLiveMessage&&this.renderAriaLiveRegion(),this.renderDateInput(),this.renderClearButton())},e.prototype.render=function(){var n=this.renderCalendar();if(this.props.inline)return n;if(this.props.withPortal){var r=this.state.open?oe.createElement(sH,{enableTabLoop:this.props.enableTabLoop},oe.createElement("div",{className:"react-datepicker__portal",tabIndex:-1,onKeyDown:this.onPortalKeyDown},n)):null;return this.state.open&&this.props.portalId&&(r=oe.createElement(rH,Bt({portalId:this.props.portalId},this.props),r)),oe.createElement("div",null,this.renderInputContainer(),r)}return oe.createElement(i1e,Bt({},this.props,{className:this.props.popperClassName,hidePopper:!this.isCalendarOpen(),targetComponent:this.renderInputContainer(),popperComponent:n,popperOnKeyDown:this.onPopperKeyDown,showArrow:this.props.showPopperArrow}))},e})(v.Component),l1e="input",PS="navigate";const c1e=({task:t,isDarkMode:e,editedTask:n={},onFieldChange:r,onFieldChangeAndSave:s,comments:i=[],activityLogs:a=[],onSwitchToComments:o,subtasks:c=[],facilityId:d,excludeUserId:h,dependencies:p=[],onSwitchToDependencies:m,onSwitchToSubtasks:y})=>{const{memberRefreshTriggers:x,triggerUserProfileRefresh:_}=ph(),[w,N]=oe.useState(null),[k,S]=oe.useState([]),[O,R]=oe.useState(!1),[M,P]=oe.useState(!1),[C,D]=oe.useState(""),[$,F]=oe.useState(""),[U,I]=oe.useState(!1),[z,Q]=oe.useState([]),[ne,W]=oe.useState(!1),[K,Y]=oe.useState([]),G=oe.useRef(null),q=oe.useRef(null);oe.useEffect(()=>{d&&Z()},[d,x[d||""]]),oe.useEffect(()=>{const pe=we=>{G.current&&!G.current.contains(we.target)&&N(null)};return w==="priority"&&document.addEventListener("mousedown",pe),()=>{document.removeEventListener("mousedown",pe)}},[w]);const Z=async()=>{if(d){R(!0);try{const we=(await Gr.getFacilityMembers(d)).filter((Te,ve,Re)=>ve===Re.findIndex(Qe=>Qe.id===Te.id));S(we)}catch(pe){console.error("Failed to load facility members:",pe)}finally{R(!1)}}},Le=k.filter(pe=>{const we=C.trim().toLowerCase();if(!we)return!0;const Te=pe.name?.toLowerCase?.()||"",ve=pe.email?.toLowerCase?.()||"";return Te.includes(we)||ve.includes(we)}).filter(pe=>{if(pe.id===h)return!1;const we=n.assigneeIds||t.assigneeIds||[],Te=n.assignee||t.assignee,ve=we.length>0?we:Te?[Te]:[];return![...new Set(ve)].includes(pe.id)}),Pe=n.tags??t.tags??[],Ue={priority:["urgent","high-priority","low-priority","critical"],type:["bug","feature","enhancement","documentation","testing","research"],status:["blocked","waiting-review","in-review","ready-for-testing"],team:["frontend","backend","design","devops","marketing"],time:["quick-win","sprint-goal","technical-debt"],client:["client-urgent","internal","client-request"]},V=pe=>{if(!pe.trim()){const ve=["bug","feature","urgent","frontend","backend","testing","documentation","enhancement","quick-win"];return[...K,...ve.filter(Re=>!K.includes(Re))].slice(0,8)}return Object.values(Ue).flat().filter(ve=>ve.toLowerCase().includes(pe.toLowerCase())&&!Pe.includes(ve)).slice(0,6)},ee=pe=>{F(pe);const we=V(pe);Q(we),W(we.length>0)},X=async pe=>{if(Pe.includes(pe))return;const we=[...Pe,pe];Ne("tags",we),F(""),W(!1),Y(Te=>[pe,...Te.filter(ve=>ve!==pe)].slice(0,10));try{s&&await s("tags",we)}catch(Te){console.error("Failed to save tags:",Te)}},te=async()=>{const pe=$.trim();if(!pe)return;if(Pe.includes(pe)){F("");return}const we=[...Pe,pe];Ne("tags",we),F(""),I(!1),W(!1),Y(Te=>[pe,...Te.filter(ve=>ve!==pe)].slice(0,10));try{s&&await s("tags",we)}catch(Te){console.error("Failed to save tags:",Te)}},he=async pe=>{const we=Pe.filter(Te=>Te!==pe);Ne("tags",we);try{s&&await s("tags",we)}catch(Te){console.error("Failed to save tags:",Te)}},ie=pe=>{switch(pe){case"low":return"text-green-600 dark:text-green-400 bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800";case"medium":return"text-yellow-600 dark:text-yellow-400 bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800";case"high":return"text-orange-600 dark:text-orange-400 bg-orange-50 dark:bg-orange-900/20 border-orange-200 dark:border-orange-800";case"urgent":return"text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800";default:return"text-gray-600 dark:text-gray-400 bg-gray-50 dark:bg-gray-800 border-gray-200 dark:border-gray-700"}},le=pe=>{switch(pe){case"urgent":return l.jsx(gp,{className:"w-3 h-3"});default:return l.jsx(aw,{className:"w-3 h-3"})}},Ne=(pe,we)=>{r&&r(pe,we)},Se=pe=>pe?new Date(pe)<new Date:!1,ae=(pe,we=!1)=>{if(!pe)return"";let Te;if(pe.toDate&&typeof pe.toDate=="function")Te=pe.toDate();else if(typeof pe=="string"||pe instanceof Date)Te=new Date(pe);else return"";if(isNaN(Te.getTime()))return"";const ve={year:"numeric",month:"short",day:"numeric"};return we&&(ve.hour="2-digit",ve.minute="2-digit",ve.second="2-digit"),Te.toLocaleDateString("en-US",ve)},ke=pe=>pe>=80?"bg-gradient-to-r from-green-400 to-green-600":pe>=50?"bg-gradient-to-r from-blue-400 to-blue-600":pe>=25?"bg-gradient-to-r from-yellow-400 to-yellow-600":"bg-gradient-to-r from-gray-400 to-gray-500",ce=pe=>pe>=80?"Excellent":pe>=50?"Good":pe>=25?"In Progress":"Getting Started",Ee=pe=>{if(!pe)return pe;if(/<[^>]*>/g.test(pe)){let Te=pe.replace(/<div><br\s*\/?><\/div>/gi,"").replace(/<div><br\s*\/?><\/div>/gi,"<br>").replace(/<p><br\s*\/?><\/p>/gi,"").replace(/<p><br\s*\/?><\/p>/gi,"<br>").replace(/<(\w+)><\/\1>/gi,"").trim();return!Te||Te===""?l.jsx("span",{className:"italic opacity-60",children:"Empty content"}):l.jsx("span",{dangerouslySetInnerHTML:{__html:Te}})}else return pe},Fe=c||[],ut=Fe.filter(pe=>pe&&pe.completed===!0),Pt=Fe.length>0?Math.round(ut.length/Fe.length*100):0,Dt=p.filter(pe=>pe.dependencyType==="blocked-by").length,xn=p.filter(pe=>pe.dependencyType==="blocks").length,gr=p.filter(pe=>pe.dependencyType==="related").length,Wt=p.length,at=Fe.length>0?Pt:t.progress!==void 0?t.progress:0,ln=[...i.map(pe=>({...pe,type:"comment"})),...a.map(pe=>({...pe,type:"activity"}))].sort((pe,we)=>new Date(we.createdAt||we.timestamp).getTime()-new Date(pe.createdAt||pe.timestamp).getTime()).slice(0,2);return l.jsxs("div",{className:"p-6 space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsx(Mn,{className:`p-4 shadow-sm ${e?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:`p-2 rounded-lg ${e?"bg-green-900/20":"bg-green-50"}`,children:l.jsx(As,{className:`w-4 h-4 ${e?"text-green-400":"text-green-600"}`})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:`text-xs font-medium uppercase tracking-wide ${e?"text-gray-400":"text-gray-500"}`,children:"Assignee"}),l.jsxs("div",{className:"mt-1 relative",children:[l.jsx("div",{className:"flex items-center gap-2 min-h-[32px]",children:(()=>{const pe=n.assigneeIds||t.assigneeIds||[],we=n.assignee||t.assignee,Te=pe.length>0?pe:we?[we]:[],ve=[...new Set(Te)];return l.jsxs("div",{className:"flex items-center gap-1",children:[ve.map((Re,Qe)=>{const Ke=k.find(gs=>gs.id===Re),At=Ke?Ke.name:"",bn=Ke?.profilePicture,ms=(Ke?.name?.charAt(0)||Ke?.email?.charAt(0)||"?").toUpperCase();return l.jsxs("div",{className:"relative group",children:[l.jsx("div",{className:"w-7 h-7 rounded-full overflow-hidden bg-brand text-white flex items-center justify-center text-xs font-medium cursor-pointer",title:At,children:bn?l.jsx("img",{src:bn,alt:At,className:"w-full h-full object-cover"}):ms}),l.jsx("button",{onClick:async gs=>{gs.stopPropagation();const Wn=ve.filter(hn=>hn!==Re);Ne("assigneeIds",Wn);try{s&&(await s("assignees",Wn),_(Wn))}catch(hn){console.error("Failed to remove assignee:",hn)}},className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 text-white rounded-full flex items-center justify-center text-xs opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-600",title:`Remove ${At}`,children:"×"})]},`assignee-${Re}-${Qe}`)}),l.jsx("button",{onClick:Re=>{Re.stopPropagation(),P(!0)},className:`w-7 h-7 rounded-full border-2 border-dashed flex items-center justify-center transition-colors ${e?"border-gray-600 text-gray-400 hover:border-gray-500 hover:text-gray-300":"border-gray-300 text-gray-500 hover:border-gray-400 hover:text-gray-600"}`,title:"Add assignee",children:l.jsx(Ps,{className:"w-3 h-3"})})]})})()}),M&&l.jsxs("div",{className:`absolute top-full left-0 right-0 mt-1 border rounded shadow-lg z-50 max-h-60 overflow-y-auto ${e?"bg-gray-800 border-gray-700":"bg-white border-gray-300"}`,onMouseLeave:()=>{P(!1),D("")},onClick:pe=>pe.stopPropagation(),children:[l.jsx("div",{className:`px-3 pt-3 pb-2 border-b ${e?"border-gray-700":"border-gray-200"}`,children:l.jsx("input",{type:"text",value:C,onChange:pe=>D(pe.target.value),placeholder:"Search members...",className:`w-full px-3 py-2 rounded text-sm ${e?"bg-gray-700 text-white placeholder-gray-400 border border-gray-600 focus:ring-2 focus:ring-brand focus:border-transparent":"bg-white text-gray-900 placeholder-gray-500 border border-gray-300 focus:ring-2 focus:ring-brand focus:border-transparent"}`})}),O?l.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"Loading..."}):Le.length===0?l.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No members found"}):Le.map(pe=>l.jsxs("div",{className:"px-3 py-2 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-3 transition-colors",onClick:async we=>{we.stopPropagation();const Te=n.assigneeIds||t.assigneeIds||[],ve=n.assignee||t.assignee,Re=Te.length>0?Te:ve?[ve]:[],Qe=[...new Set(Re)];if(!Qe.includes(pe.id)){const Ke=[...Qe,pe.id];Ne("assigneeIds",Ke);try{s&&(await s("assignees",Ke),_(Ke))}catch(At){console.error("Failed to save assignee:",At)}}P(!1),D("")},children:[l.jsx("div",{className:"w-7 h-7 rounded-full overflow-hidden bg-brand text-white flex items-center justify-center text-xs font-medium",children:pe.profilePicture?l.jsx("img",{src:pe.profilePicture,alt:pe.name,className:"w-full h-full object-cover"}):(pe.name?.charAt(0)||pe.email?.charAt(0)||"?").toUpperCase()}),l.jsx("div",{className:"min-w-0",children:l.jsx("div",{className:`${e?"text-white":"text-gray-900"} text-sm font-medium truncate`,children:pe.name||"Member"})})]},pe.id))]})]})]})]})}),l.jsx(Mn,{className:`p-4 shadow-sm ${e?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:`p-2 rounded-lg ${e?"bg-green-900/20":"bg-green-50"}`,children:l.jsx(fp,{className:`w-4 h-4 ${e?"text-green-400":"text-green-600"}`})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:`text-xs font-medium uppercase tracking-wide ${e?"text-gray-400":"text-gray-500"}`,children:"Due Date"}),l.jsx("div",{className:"mt-1 relative",children:w==="dueDate"?l.jsx(o1e,{selected:n.dueDate?new Date(n.dueDate):t.dueDate?new Date(t.dueDate):null,onChange:async pe=>{const we=pe?pe.toISOString().split("T")[0]:"";Ne("dueDate",we),N(null);try{s&&await s("dueDate",we)}catch(Te){console.error("Failed to save due date:",Te)}},dateFormat:"MMM dd, yyyy",className:`text-sm font-medium w-full ${e?"bg-gray-800 text-white border-gray-600":"bg-white text-gray-900 border-gray-300"} border rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-brand focus:border-transparent`,placeholderText:"Select due date",autoFocus:!0}):l.jsxs("div",{className:"flex items-center gap-2 min-h-[32px]",onClick:()=>N("dueDate"),children:[l.jsx("div",{className:"flex items-center gap-2 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 rounded px-2 py-1 transition-colors",children:l.jsx("span",{className:`text-sm font-medium ${(n.dueDate||t.dueDate)&&Se(n.dueDate||t.dueDate)?"text-red-600 dark:text-red-400":e?"text-white":"text-gray-900"}`,children:n.dueDate||t.dueDate?l.jsxs(l.Fragment,{children:[ae(n.dueDate||t.dueDate),Se(n.dueDate||t.dueDate)&&l.jsx("span",{className:"ml-1 text-xs",children:"(Overdue)"})]}):"Set due date"})}),(n.dueDate||t.dueDate)&&l.jsx("button",{onClick:async pe=>{pe.stopPropagation(),Ne("dueDate","");try{s&&await s("dueDate","")}catch(we){console.error("Failed to remove due date:",we)}},className:`w-5 h-5 rounded-full flex items-center justify-center text-xs opacity-0 hover:opacity-100 transition-opacity ${e?"bg-gray-600 text-gray-300 hover:bg-gray-500":"bg-gray-200 text-gray-600 hover:bg-gray-300"}`,title:"Remove due date",children:"×"})]})})]})]})}),l.jsx(Mn,{className:`p-4 shadow-sm ${e?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:`p-2 rounded-lg ${e?"bg-green-900/20":"bg-green-50"}`,children:l.jsx(aw,{className:`w-4 h-4 ${e?"text-green-400":"text-green-600"}`})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:`text-xs font-medium uppercase tracking-wide ${e?"text-gray-400":"text-gray-500"}`,children:"Priority"}),l.jsxs("div",{className:"mt-1 relative",ref:G,children:[l.jsx("div",{className:"flex items-center gap-2 min-h-[32px]",onClick:()=>N(w==="priority"?null:"priority"),children:l.jsx("div",{className:"flex items-center gap-2 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 rounded px-2 py-1 transition-colors",children:l.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 text-xs font-medium rounded-full border ${ie(n.priority??t.priority)}`,children:[le(n.priority??t.priority),((n.priority??t.priority)||"medium").charAt(0).toUpperCase()+((n.priority??t.priority)||"medium").slice(1)]})})}),w==="priority"&&l.jsx("div",{className:"absolute top-full left-0 mt-1 z-50 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-md shadow-lg p-1 min-w-[140px]",children:l.jsx("div",{className:"flex flex-col gap-0.5",children:["low","medium","high","urgent"].map(pe=>l.jsxs("button",{onClick:async()=>{Ne("priority",pe),N(null);try{s&&await s("priority",pe)}catch(we){console.error("Failed to save priority:",we)}},className:`inline-flex items-center gap-1.5 px-2 py-1.5 text-xs font-medium rounded-full border transition-all hover:scale-105 w-full justify-start ${ie(pe)}`,children:[le(pe),pe.charAt(0).toUpperCase()+pe.slice(1)]},pe))})})]})]})]})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsx(Mn,{className:`p-4 shadow-sm ${e?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:`p-2 rounded-lg ${e?"bg-blue-900/20":"bg-blue-50"}`,children:l.jsx(Od,{className:`w-4 h-4 ${e?"text-blue-400":"text-blue-600"}`})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("p",{className:`text-xs font-medium uppercase tracking-wide ${e?"text-gray-400":"text-gray-500"}`,children:"Dependencies"}),m&&l.jsx(ct,{variant:"ghost",size:"sm",onClick:m,className:"text-xs h-6 px-2",children:"View All"})]}),Wt>0?l.jsxs("div",{className:"space-y-1",children:[Dt>0&&l.jsxs("div",{className:`text-sm ${e?"text-orange-400":"text-orange-600"}`,children:["Blocked by ",Dt," task",Dt!==1?"s":""]}),xn>0&&l.jsxs("div",{className:`text-sm ${e?"text-red-400":"text-red-600"}`,children:["Blocks ",xn," task",xn!==1?"s":""]}),gr>0&&l.jsxs("div",{className:`text-sm ${e?"text-blue-400":"text-blue-600"}`,children:["Related to ",gr," task",gr!==1?"s":""]})]}):l.jsx("p",{className:`text-sm ${e?"text-gray-400":"text-gray-500"}`,children:"No dependencies"})]})]})}),l.jsx(Mn,{className:`p-4 shadow-sm ${e?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:`p-2 rounded-lg ${e?"bg-purple-900/20":"bg-purple-50"}`,children:l.jsx(U3,{className:`w-4 h-4 ${e?"text-purple-400":"text-purple-600"}`})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("p",{className:`text-xs font-medium uppercase tracking-wide ${e?"text-gray-400":"text-gray-500"}`,children:"Progress & Subtasks"}),y&&l.jsx(ct,{variant:"ghost",size:"sm",onClick:y,className:"text-xs h-6 px-2",children:"View All"})]}),Fe.length>0?l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:`text-sm font-medium ${e?"text-gray-300":"text-gray-700"}`,children:"Progress"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${at>=80?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":at>=50?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400":at>=25?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-400"}`,children:ce(at)}),l.jsxs("span",{className:`text-sm font-bold ${e?"text-white":"text-gray-900"}`,children:[at,"%"]})]})]}),l.jsxs("div",{className:"relative group",children:[l.jsx("div",{className:"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-3 shadow-inner",children:l.jsx("div",{className:`h-3 rounded-full transition-all duration-500 ease-out ${ke(at)} shadow-sm relative overflow-hidden`,style:{width:`${at}%`},children:l.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent animate-pulse"})})}),l.jsxs("div",{className:`absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 rounded-lg shadow-lg text-sm whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none z-10 ${e?"bg-gray-800 text-white border border-gray-700":"bg-white text-gray-900 border border-gray-200"}`,children:[l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"font-semibold",children:[at,"% Complete"]}),l.jsxs("div",{className:"text-xs opacity-75",children:[ut.length," of ",Fe.length," subtasks done"]})]}),l.jsx("div",{className:`absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent ${e?"border-t-gray-800":"border-t-white"}`})]})]})]}),l.jsxs("div",{className:`flex items-center justify-between text-sm p-2 rounded-lg ${e?"bg-gray-700/50":"bg-gray-50"}`,children:[l.jsx("span",{className:`${e?"text-gray-300":"text-gray-600"}`,children:"Subtask Progress"}),l.jsxs("span",{className:`font-medium ${e?"text-green-400":"text-green-600"}`,children:[ut.length," of ",Fe.length," completed"]})]})]}):t.progress!==void 0?l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:`text-sm font-medium ${e?"text-gray-300":"text-gray-700"}`,children:"Progress"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${at>=80?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":at>=50?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400":at>=25?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-400"}`,children:ce(at)}),l.jsxs("span",{className:`text-sm font-bold ${e?"text-white":"text-gray-900"}`,children:[at,"%"]})]})]}),l.jsxs("div",{className:"relative group",children:[l.jsx("div",{className:"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-3 shadow-inner",children:l.jsx("div",{className:`h-3 rounded-full transition-all duration-500 ease-out ${ke(at)} shadow-sm relative overflow-hidden`,style:{width:`${at}%`},children:l.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent animate-pulse"})})}),l.jsxs("div",{className:`absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 rounded-lg shadow-lg text-sm whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none z-10 ${e?"bg-gray-800 text-white border border-gray-700":"bg-white text-gray-900 border border-gray-200"}`,children:[l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"font-semibold",children:[at,"% Complete"]}),l.jsx("div",{className:"text-xs opacity-75",children:"Manual progress tracking"})]}),l.jsx("div",{className:`absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent ${e?"border-t-gray-800":"border-t-white"}`})]})]})]}),l.jsxs("div",{className:`flex items-center justify-between text-sm p-2 rounded-lg ${e?"bg-gray-700/50":"bg-gray-50"}`,children:[l.jsx("span",{className:`${e?"text-gray-300":"text-gray-600"}`,children:"Progress Type"}),l.jsx("span",{className:`font-medium ${e?"text-blue-400":"text-blue-600"}`,children:"Manual tracking"})]})]}):l.jsx("div",{className:"space-y-3",children:l.jsxs("div",{className:`text-center p-4 rounded-lg border-2 border-dashed ${e?"border-gray-600 bg-gray-800/50":"border-gray-300 bg-gray-50"}`,children:[l.jsx("div",{className:`w-12 h-12 mx-auto mb-3 rounded-full flex items-center justify-center ${e?"bg-gray-700":"bg-gray-200"}`,children:l.jsx(U3,{className:`w-6 h-6 ${e?"text-gray-400":"text-gray-500"}`})}),l.jsx("p",{className:`text-sm font-medium ${e?"text-gray-300":"text-gray-700"}`,children:"No Progress Tracking"}),l.jsx("p",{className:`text-xs mt-1 ${e?"text-gray-400":"text-gray-500"}`,children:"Add subtasks or set manual progress to track completion"})]})})]})]})}),l.jsx(Mn,{className:`p-4 shadow-sm ${e?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:`p-2 rounded-lg ${e?"bg-green-900/20":"bg-green-50"}`,children:l.jsx(sr,{className:`w-4 h-4 ${e?"text-green-400":"text-green-600"}`})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:`text-xs font-medium uppercase tracking-wide ${e?"text-gray-400":"text-gray-500"}`,children:"Dates"}),l.jsxs("div",{className:"mt-2 space-y-2",children:[l.jsxs("div",{children:[l.jsx("p",{className:`text-xs ${e?"text-gray-400":"text-gray-500"}`,children:"Created"}),l.jsx("p",{className:`text-sm font-medium ${e?"text-white":"text-gray-900"}`,children:ae(t.createdAt)})]}),l.jsxs("div",{children:[l.jsx("p",{className:`text-xs ${e?"text-gray-400":"text-gray-500"}`,children:"Last Updated"}),l.jsx("p",{className:`text-sm font-medium ${e?"text-white":"text-gray-900"}`,children:ae(t.updatedAt)})]})]})]})]})})]}),l.jsx(Mn,{className:`p-4 shadow-sm ${e?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:`p-2 rounded-lg ${e?"bg-green-900/20":"bg-green-50"}`,children:l.jsx(Cf,{className:`w-4 h-4 ${e?"text-green-400":"text-green-600"}`})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("p",{className:`text-xs font-medium uppercase tracking-wide ${e?"text-gray-400":"text-gray-500"}`,children:"Tags"}),Pe.length>0&&l.jsxs("span",{className:`text-xs px-2 py-0.5 rounded-full ${e?"bg-gray-700 text-gray-300":"bg-gray-100 text-gray-600"}`,children:[Pe.length," tag",Pe.length!==1?"s":""]})]}),l.jsx("div",{className:"mb-4",children:Pe.length===0?l.jsxs("div",{className:`text-center py-6 border-2 border-dashed rounded-lg ${e?"border-gray-600 text-gray-400":"border-gray-300 text-gray-500"}`,children:[l.jsx(Cf,{className:"w-6 h-6 mx-auto mb-2 opacity-50"}),l.jsx("p",{className:"text-sm",children:"No tags added yet"}),l.jsx("p",{className:"text-xs mt-1 opacity-75",children:"Add tags to organize and categorize this task"})]}):l.jsx("div",{className:"flex flex-wrap gap-2",children:Pe.map(pe=>l.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm font-medium transition-all duration-200 ${e?"bg-brand/20 border border-brand/30 text-brand-300 hover:bg-brand/30":"bg-brand/10 border border-brand/20 text-brand-700 hover:bg-brand/20"}`,children:[l.jsx("span",{className:"truncate max-w-[120px]",title:pe,children:pe}),l.jsx("button",{onClick:()=>he(pe),className:`rounded-full p-0.5 transition-colors ${e?"hover:bg-red-500/20 text-red-400 hover:text-red-300":"hover:bg-red-100 text-red-500 hover:text-red-600"}`,title:"Remove tag",children:l.jsx(yn,{className:"w-3 h-3"})})]},pe))})}),U?l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("div",{className:"relative flex-1",children:[l.jsx("input",{ref:q,type:"text",value:$,onChange:pe=>ee(pe.target.value),onKeyDown:pe=>{pe.key==="Enter"?(pe.preventDefault(),z.length>0?X(z[0]):te()):pe.key==="Escape"&&(I(!1),F(""),W(!1))},onFocus:()=>{const pe=V($);Q(pe),W(pe.length>0)},onBlur:()=>{setTimeout(()=>W(!1),200)},placeholder:"Type a tag name or select from suggestions...",className:`w-full px-3 py-2 pl-10 border rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-brand focus:border-transparent transition-all ${e?"bg-gray-800 border-gray-600 text-white placeholder-gray-400 focus:bg-gray-750":"bg-white border-gray-300 text-gray-900 placeholder-gray-500 focus:bg-gray-50"}`,autoFocus:!0}),l.jsx(Cf,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 ${e?"text-gray-400":"text-gray-500"}`}),ne&&z.length>0&&l.jsx("div",{className:`absolute top-full left-0 right-0 mt-1 border rounded-lg shadow-lg z-50 max-h-48 overflow-y-auto ${e?"bg-gray-800 border-gray-600":"bg-white border-gray-300"}`,children:z.map((pe,we)=>l.jsx("button",{onClick:()=>X(pe),className:`w-full text-left px-3 py-2 text-sm hover:bg-opacity-50 transition-colors ${we===0?"bg-brand/10":""} ${e?"text-gray-300 hover:bg-gray-700":"text-gray-700 hover:bg-gray-100"}`,children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Cf,{className:"w-3 h-3 opacity-50"}),l.jsx("span",{children:pe})]})},pe))})]}),l.jsxs(ct,{size:"sm",onClick:te,disabled:!$.trim(),className:"px-4 py-2 bg-brand hover:bg-brand/90 text-white border-0 transition-all duration-200",children:[l.jsx(Ps,{className:"w-4 h-4 mr-1"}),"Add"]}),l.jsx(ct,{size:"sm",variant:"ghost",onClick:()=>{I(!1),F("")},className:"px-3 py-2",children:l.jsx(yn,{className:"w-4 h-4"})})]}),l.jsx("p",{className:`text-xs ${e?"text-gray-400":"text-gray-500"}`,children:"Press Enter to add, Escape to cancel"})]}):l.jsx("div",{className:"flex flex-wrap gap-2",children:l.jsxs("button",{onClick:()=>I(!0),className:`inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm font-medium transition-all duration-200 border-2 border-dashed ${e?"border-gray-600 text-gray-400 hover:border-brand/50 hover:text-brand-300 hover:bg-brand/10":"border-gray-300 text-gray-500 hover:border-brand/50 hover:text-brand-600 hover:bg-brand/10"}`,children:[l.jsx(Ps,{className:"w-3 h-3"}),l.jsx("span",{children:"Add Tag"})]})})]})]})}),l.jsx(Mn,{className:`p-4 shadow-sm ${e?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:`p-2 rounded-lg ${e?"bg-green-900/20":"bg-green-50"}`,children:l.jsx(pW,{className:`w-4 h-4 ${e?"text-green-400":"text-green-600"}`})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:`text-xs font-medium uppercase tracking-wide mb-2 ${e?"text-gray-400":"text-gray-500"}`,children:"Description"}),l.jsx("div",{className:"rounded px-2 py-1 relative",onClick:()=>N(w==="description"?null:"description"),children:w==="description"?l.jsx("textarea",{className:`text-sm leading-relaxed w-full min-h-[100px] resize-y ${e?"bg-gray-800 text-white border-gray-600":"bg-white text-gray-900 border-gray-300"} border rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-brand focus:border-transparent`,placeholder:"Add task details here...",value:n.description??t.description??"",onChange:async pe=>{const we=pe.target.value;Ne("description",we);try{s&&await s("description",we)}catch(Te){console.error("Failed to save description:",Te)}},onBlur:()=>{N(null)},autoFocus:!0}):l.jsx("p",{className:`text-sm leading-relaxed ${e?"text-gray-300":"text-gray-600"}`,children:t.description||"Add task details here..."})})]})]})}),ln.length>0&&l.jsx(Mn,{className:`p-4 shadow-sm ${e?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:`p-2 rounded-lg ${e?"bg-green-900/20":"bg-green-50"}`,children:l.jsx(Hge,{className:`w-4 h-4 ${e?"text-green-400":"text-green-600"}`})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("p",{className:`text-xs font-medium uppercase tracking-wide ${e?"text-gray-400":"text-gray-500"}`,children:"Recent Activity"}),l.jsx(ct,{variant:"ghost",size:"sm",onClick:o,className:"text-xs text-brand hover:text-brand/80",children:"View all"})]}),l.jsx("div",{className:"space-y-2",children:ln.map((pe,we)=>l.jsxs("div",{className:`p-3 rounded-lg ${e?"bg-gray-700":"bg-gray-50"}`,children:[l.jsx("div",{className:`text-sm ${e?"text-gray-300":"text-gray-600"}`,children:Ee(pe.type==="comment"?pe.content:pe.description)}),l.jsx("p",{className:`text-xs mt-1 ${e?"text-gray-400":"text-gray-500"}`,children:ae(pe.createdAt||pe.timestamp)})]},`activity-${pe.type}-${pe.id||pe.timestamp||we}`))})]})]})})]})},u1e=t=>{const[e,n]=v.useState([]),[r,s]=v.useState(!0),[i,a]=v.useState(!1),[o,c]=v.useState(null),d=v.useRef({}),{user:h}=cy(),p=async(m,y=0,x=!0)=>{const _=m.filter(w=>!w.userProfile&&w.creatorId).map(w=>w.creatorId).filter((w,N,k)=>k.indexOf(w)===N&&!d.current[w]);if(_.length===0)return m;try{const w=await gt.fetchUserProfilesByIds(_);return d.current={...d.current,...w},m.map(N=>({...N,userProfile:N.userProfile??d.current[N.creatorId]??{firstName:"Unknown",lastName:"",profilePicture:void 0}}))}catch(w){return console.error("Failed to fetch user profiles:",w),y<2?(await new Promise(N=>setTimeout(N,1e3*(y+1))),p(m,y+1,x)):x?m.map(N=>({...N,userProfile:N.userProfile??{firstName:"Unknown",lastName:"",profilePicture:void 0}})):m}};return v.useEffect(()=>{if(!t){n([]),s(!1);return}if(s(!0),c(null),h&&h.uid&&!d.current[h.uid]){const y=h.displayName||"",[x,..._]=y.split(" ");d.current[h.uid]={firstName:x||"Unknown",lastName:_.join(" ")||"",profilePicture:h.photoURL||void 0}}h&&h.uid&&gt.fetchUserProfilesByIds([h.uid]).then(y=>{d.current={...d.current,...y}}).catch(y=>console.error("Failed to fetch current user profile:",y)),gt.getComments(t).then(async y=>{const x=await p(y);n(x),s(!1)}).catch(y=>{console.error("Failed to fetch comments:",y),c("Failed to load comments"),s(!1)});const m=rce(vce,"taskComments");return ice(m,async y=>{const x=y.val();if(x){const w=Object.entries(x).map(([O,R])=>({id:O,...R})).filter(O=>O.taskId===t);w.sort((O,R)=>new Date(O.createdAt).getTime()-new Date(R.createdAt).getTime());const N={};e.forEach(O=>{O.userProfile&&(N[O.id]=O.userProfile)});const S=(await p(w,0,!1)).map(O=>({...O,userProfile:N[O.id]||O.userProfile||{firstName:"Unknown",lastName:"",profilePicture:void 0}}));n(S)}else n([])},y=>{console.error("Realtime comments error:",y),c("Failed to listen for comments updates")}),()=>{ace(m)}},[t]),{comments:e,loading:r,profilesLoading:i,error:o}},d1e=({taskId:t,isDarkMode:e,onShowWarning:n,onCountChange:r})=>{const{comments:s}=u1e(t),[i,a]=v.useState([]),[o,c]=v.useState(""),[d,h]=v.useState(!1),[p,m]=v.useState(null),[y,x]=v.useState(null),_=v.useRef(null),{user:w}=cy(),[N,k]=v.useState(null),[S,O]=v.useState(""),[R,M]=v.useState(!1),[P,C]=v.useState(!1),[D,$]=v.useState(null),[F,U]=v.useState("recent"),[I,z]=v.useState(!1),[Q,ne]=v.useState({top:0,left:0}),[W,K]=v.useState(""),[Y,G]=v.useState([]);v.useEffect(()=>{a(s)},[s]),v.useEffect(()=>{(async()=>{try{const ke=await gt.getById(t);if(ke?.assignees&&ke.assignees.length>0){const ce=await gt.fetchUserProfilesByIds(ke.assignees),Ee=Object.entries(ce).filter(([Fe])=>Fe!==w?.uid).map(([Fe,ut])=>({id:Fe,...ut}));G(Ee)}}catch(ke){console.error("Failed to fetch user profiles for mentions:",ke)}})()},[t,w?.uid]),v.useEffect(()=>{const ae=ke=>{I&&(ke.target.closest("[data-mention-dropdown]")||z(!1))};return document.addEventListener("mousedown",ae),()=>{document.removeEventListener("mousedown",ae)}},[I]),v.useEffect(()=>{x(null)},[i]),v.useEffect(()=>{_.current&&_.current.scrollIntoView({behavior:"smooth"})},[i]),v.useEffect(()=>{r?.(i.length)},[i.length,r]);const q=async ae=>{ae.preventDefault();const ke=document.querySelector('[data-placeholder="Add comment..."]'),ce=ke?.innerHTML||"";if(ce.trim()){h(!0),m(null);try{await gt.createComment(t,{content:ce.trim()}),c(""),ke&&(ke.innerHTML=""),n?.("Comment added successfully","success")}catch(Ee){console.error("Failed to add comment:",Ee),m("Failed to add comment. Please try again."),n?.("Failed to add comment. Please try again.","error")}finally{h(!1)}}},Z=async()=>{if(S.trim()){M(!0);try{const ae=await gt.updateComment(t,N,{content:S.trim()});a(ke=>ke.map(ce=>ce.id===N?ae:ce)),k(null),O(""),x(null),n?.("Comment updated successfully","success")}catch(ae){console.error("Failed to update comment:",ae),n?.("Failed to update comment. Please try again.","error")}finally{M(!1)}}},ge=()=>{k(null),O(""),x(null)},Le=async()=>{if(D)try{await gt.deleteComment(t,D),a(ae=>ae.filter(ke=>ke.id!==D)),C(!1),$(null),x(null),n?.("Comment deleted successfully","success")}catch(ae){console.error("Failed to delete comment:",ae),n?.("Failed to delete comment. Please try again.","error")}},Pe=(ae,ke)=>{const ce=i.find(ut=>ut.id===ae),Ee=ce?.userProfile?`${ce.userProfile.firstName} ${ce.userProfile.lastName}`.trim():ke,Fe=document.querySelector('[data-placeholder="Add comment..."]');if(Fe){Fe.focus();const ut=`<span class="text-green-600 dark:text-green-400 font-medium bg-green-50 dark:bg-green-900/20 px-1 py-0.5 rounded">@${Ee}</span> `;Fe.innerHTML+=ut,c(Fe.textContent||"");const Pt=document.createRange(),Dt=window.getSelection();Pt.selectNodeContents(Fe),Pt.collapse(!1),Dt?.removeAllRanges(),Dt?.addRange(Pt)}},Ue=ae=>{const ke=ae.currentTarget,ce=ke.textContent||"",Ee=window.getSelection()?.getRangeAt(0).startOffset||0,Fe=ce.substring(0,Ee),ut=Fe.lastIndexOf("@");if(ut!==-1){const Pt=Fe.substring(ut+1);if(!Pt.includes(" ")){K(Pt);const Dt=document.createRange(),xn=ke.firstChild;if(xn&&xn.nodeType===Node.TEXT_NODE){Dt.setStart(xn,ut),Dt.setEnd(xn,ut+1);const gr=Dt.getBoundingClientRect(),Wt=ke.getBoundingClientRect();ne({top:Wt.top+window.scrollY-5,left:gr.left+window.scrollX})}z(!0);return}}z(!1)},V=ae=>{const ke=document.querySelector('[data-placeholder="Add comment..."]');if(ke){const ce=ke.textContent||"",Ee=window.getSelection()?.getRangeAt(0).startOffset||0,ut=ce.substring(0,Ee).lastIndexOf("@");if(ut!==-1){const Pt=ce.substring(0,ut),Dt=ce.substring(Ee),xn=`@${ae.firstName} ${ae.lastName}`,gr=`<span class="text-green-600 dark:text-green-400 font-medium bg-green-50 dark:bg-green-900/20 px-1 py-0.5 rounded">${xn}</span>`,Wt=Pt+gr+" "+Dt;ke.innerHTML=Wt,c(ke.textContent||"");const at=document.createRange(),ln=window.getSelection();at.setStart(ke.firstChild||ke,Pt.length+xn.length+1),at.collapse(!0),ln?.removeAllRanges(),ln?.addRange(at)}}z(!1),K("")},ee=async ae=>{try{const ke=await gt.likeComment(t,ae);a(ce=>ce.map(Ee=>Ee.id===ae?{...Ee,likes:ke.likes,dislikes:ke.dislikes}:Ee))}catch(ke){console.error("Failed to like comment:",ke),n?.("Failed to like comment. Please try again.","error")}},X=async ae=>{try{const ke=await gt.dislikeComment(t,ae);a(ce=>ce.map(Ee=>Ee.id===ae?{...Ee,likes:ke.likes,dislikes:ke.dislikes}:Ee))}catch(ke){console.error("Failed to dislike comment:",ke),n?.("Failed to dislike comment. Please try again.","error")}},te=ae=>{const ke=window.getSelection();if(ke&&ke.rangeCount>0&&!ke.getRangeAt(0).collapsed)switch(ae){case"bold":document.execCommand("bold",!1);break;case"italic":document.execCommand("italic",!1);break;case"underline":document.execCommand("underline",!1);break}},he=ae=>{const ke=document.querySelector('[data-placeholder="Add comment..."]');ke&&(ke.focus(),te(ae))},ie=()=>{const ae=document.querySelector('[data-placeholder="Add comment..."]');if(ae){ae.focus();const ce=(ae.textContent||"")+"@";ae.textContent=ce,c(ce);const Ee=document.createRange(),Fe=window.getSelection();Ee.selectNodeContents(ae),Ee.collapse(!1),Fe?.removeAllRanges(),Fe?.addRange(Ee);const ut=new Event("input",{bubbles:!0});ae.dispatchEvent(ut)}},le=ae=>{if(!ae)return ae;let ke=ae;const ce=/(https?:\/\/[^\s<>"{}|\\^`[\]]+|ftp:\/\/[^\s<>"{}|\\^`[\]]+|www\.[^\s<>"{}|\\^`[\]]+|[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*\.[a-zA-Z]{2,}(?:\/[^\s<>"{}|\\^`[\]]*)?)/g;return ke=ke.replace(ce,Ee=>{const Fe=Ee.replace(/[.,;:!?]+$/,""),ut=Ee.slice(Fe.length);return`<a href="${Fe.startsWith("http")?Fe:`https://${Fe}`}" target="_blank" rel="noopener noreferrer" class="text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 underline decoration-1 underline-offset-2 hover:decoration-2 transition-all duration-200">${Fe}</a>${ut}`}),ke=ke.replace(/@(\w+(?:\s+\w+)*)/g,'<span class="text-green-600 dark:text-green-400 font-medium bg-green-50 dark:bg-green-900/20 px-1 py-0.5 rounded">@$1</span>'),l.jsx("span",{dangerouslySetInnerHTML:{__html:ke}})},Ne=ae=>{const ke=new Date(ae),Ee=Math.floor((new Date().getTime()-ke.getTime())/1e3);return Ee<60?"Just now":Ee<3600?`${Math.floor(Ee/60)}m ago`:Ee<86400?`${Math.floor(Ee/3600)}h ago`:Ee<604800?`${Math.floor(Ee/86400)}d ago`:ke.toLocaleDateString()};v.useCallback(ae=>{x(ke=>ke===ae?null:ae)},[]);const Se=v.useCallback(()=>{x(null)},[]);return oe.useEffect(()=>(document.addEventListener("click",Se),()=>{document.removeEventListener("click",Se)}),[Se]),l.jsxs("div",{className:"p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("h3",{className:`text-lg font-bold flex items-center gap-2 ${e?"text-white":"text-gray-900"}`,children:[l.jsx("span",{children:"Comments"}),i.length>0&&l.jsx("span",{className:`text-xs font-medium px-2 py-1 rounded-full ${e?"bg-green-900 text-green-100":"bg-green-100 text-green-800"}`,children:i.length})]}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsxs("select",{value:F,onChange:ae=>U(ae.target.value),className:`text-sm border rounded px-2 py-1 ${e?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300 text-gray-700"}`,children:[l.jsx("option",{value:"recent",children:"Most recent"}),l.jsx("option",{value:"oldest",children:"Oldest first"})]})})]}),l.jsxs("div",{className:"space-y-4 h-96 overflow-y-auto mb-6 pr-2 scrollbar-none",children:[i.length===0?l.jsxs("div",{className:`text-center py-8 rounded-lg border-2 border-dashed ${e?"text-gray-400 border-gray-700":"text-gray-500 border-gray-300"}`,children:[l.jsx(Qc,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),l.jsx("p",{className:"text-sm",children:"No comments yet. Be the first to comment!"})]}):i.map(ae=>l.jsx("div",{className:`p-4 rounded-lg transition-all ${e?"bg-gray-800 hover:bg-gray-750":"bg-gray-50 hover:bg-white"}`,children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 overflow-hidden ${e?"bg-gray-700":"bg-gray-200"}`,children:ae.userProfile?.profilePicture?l.jsx("img",{src:ae.userProfile.profilePicture,alt:`${ae.userProfile.firstName} ${ae.userProfile.lastName}`,className:"w-full h-full object-cover"}):l.jsx("span",{className:`text-sm font-semibold ${e?"text-gray-400":"text-gray-600"}`,children:(ae.userProfile?.firstName?.charAt(0)||"U").toUpperCase()})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"flex items-center justify-between mb-2",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:`text-sm font-medium ${e?"text-white":"text-gray-900"}`,children:ae.userProfile?`${ae.userProfile.firstName} ${ae.userProfile.lastName}`.trim():ae.creatorId}),l.jsx("span",{className:`text-xs ${e?"text-gray-400":"text-gray-500"}`,children:Ne(ae.createdAt)})]})}),N===ae.id?l.jsxs("div",{onClick:ke=>ke.stopPropagation(),className:"space-y-2",children:[l.jsx("textarea",{value:S,onChange:ke=>O(ke.target.value),className:`w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-green-500 resize-none ${e?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,rows:3}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs(ct,{onClick:Z,disabled:R||!S.trim(),size:"sm",children:[l.jsx(WP,{className:"w-4 h-4 mr-1"}),R?"Saving...":"Save"]}),l.jsxs(ct,{onClick:ge,variant:"ghost",size:"sm",children:[l.jsx(yn,{className:"w-4 h-4 mr-1"}),"Cancel"]})]})]}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:`text-sm leading-relaxed mb-3 ${e?"text-gray-300":"text-gray-700"}`,children:le(ae.content)}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("button",{onClick:()=>ee(ae.id),className:`flex items-center gap-1 text-xs hover:opacity-80 transition-opacity ${ae.likes?.includes(w?.uid||"")?e?"text-green-400":"text-green-600":e?"text-gray-400":"text-gray-600"}`,children:[l.jsx(V0e,{className:"w-3 h-3"}),l.jsx("span",{children:ae.likes?.length||0})]}),l.jsxs("button",{onClick:()=>X(ae.id),className:`flex items-center gap-1 text-xs hover:opacity-80 transition-opacity ${ae.dislikes?.includes(w?.uid||"")?e?"text-red-400":"text-red-600":e?"text-gray-400":"text-gray-600"}`,children:[l.jsx(F0e,{className:"w-3 h-3"}),l.jsx("span",{children:ae.dislikes?.length||0})]}),l.jsxs("button",{onClick:()=>Pe(ae.id,ae.userProfile?`${ae.userProfile.firstName} ${ae.userProfile.lastName}`.trim():ae.creatorId),className:`flex items-center gap-1 text-xs hover:opacity-80 transition-opacity ${e?"text-gray-400":"text-gray-600"}`,children:[l.jsx(E0e,{className:"w-3 h-3"}),l.jsx("span",{children:"Reply"})]})]})]})]})]})},ae.id)),l.jsx("div",{ref:_})]}),l.jsx("form",{onSubmit:q,className:`sticky bottom-0 p-4 border-t ${e?"bg-gray-900 border-gray-700":"bg-white border-gray-200"}`,children:l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"relative",children:[l.jsx("div",{contentEditable:!0,onInput:ae=>{c(ae.currentTarget.textContent||""),Ue(ae)},className:`w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent resize-none transition-all min-h-[80px] ${e?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,style:{minHeight:"80px",whiteSpace:"pre-wrap",wordWrap:"break-word"},"data-placeholder":"Add comment...",suppressContentEditableWarning:!0}),!o&&l.jsx("div",{className:`absolute top-3 left-4 pointer-events-none ${e?"text-gray-400":"text-gray-500"}`,children:"Add comment..."})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("button",{type:"button",onClick:()=>he("bold"),className:`p-2 rounded hover:bg-opacity-20 ${e?"hover:bg-gray-600 text-gray-400":"hover:bg-gray-200 text-gray-600"}`,title:"Bold (select text and click)",children:l.jsx(sge,{className:"w-4 h-4"})}),l.jsx("button",{type:"button",onClick:()=>he("italic"),className:`p-2 rounded hover:bg-opacity-20 ${e?"hover:bg-gray-600 text-gray-400":"hover:bg-gray-200 text-gray-600"}`,title:"Italic (select text and click)",children:l.jsx(Gge,{className:"w-4 h-4"})}),l.jsx("button",{type:"button",onClick:()=>he("underline"),className:`p-2 rounded hover:bg-opacity-20 ${e?"hover:bg-gray-600 text-gray-400":"hover:bg-gray-200 text-gray-600"}`,title:"Underline (select text and click)",children:l.jsx(H0e,{className:"w-4 h-4"})}),l.jsx("button",{type:"button",onClick:()=>ie(),className:`p-2 rounded hover:bg-opacity-20 ${e?"hover:bg-gray-600 text-gray-400":"hover:bg-gray-200 text-gray-600"}`,title:"Mention someone",children:l.jsx(tge,{className:"w-4 h-4"})})]}),l.jsx("div",{className:"flex items-center gap-1"})]}),l.jsxs(ct,{type:"submit",disabled:d||!o.trim(),className:"flex items-center gap-2 rounded-lg bg-green-600 hover:bg-green-700 text-white",children:[l.jsx(k0e,{className:"w-4 h-4"}),l.jsx("span",{children:d?"Posting...":"Submit"})]})]})]})}),l.jsx(lw,{isOpen:P,title:"Delete Comment",message:"Are you sure you want to delete this comment? This action cannot be undone.",confirmText:"Delete",cancelText:"Cancel",onConfirm:Le,onCancel:()=>C(!1),variant:"danger"}),I&&Y.length>0&&l.jsxs(l.Fragment,{children:[l.jsx("style",{children:`
              [data-mention-dropdown]::-webkit-scrollbar {
                display: none;
              }
            `}),l.jsxs("div",{"data-mention-dropdown":!0,className:`fixed z-50 w-64 max-h-48 overflow-y-auto border rounded-lg shadow-xl ${e?"bg-gray-800 border-gray-600":"bg-white border-gray-300"}`,style:{top:Q.top,left:Q.left,transform:"translateY(-100%)",scrollbarWidth:"none",msOverflowStyle:"none"},children:[l.jsx("div",{className:`absolute top-full left-4 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent ${e?"border-t-gray-800":"border-t-white"}`,style:{borderLeftColor:"transparent",borderRightColor:"transparent"}}),Y.filter(ae=>`${ae.firstName} ${ae.lastName}`.toLowerCase().includes(W.toLowerCase())).map(ae=>l.jsxs("button",{onClick:()=>V(ae),className:`w-full px-3 py-2 text-left hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2 ${e?"text-white":"text-gray-900"}`,children:[l.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 overflow-hidden ${e?"bg-gray-600":"bg-gray-200"}`,children:ae.profilePicture?l.jsx("img",{src:ae.profilePicture,alt:`${ae.firstName} ${ae.lastName}`,className:"w-full h-full object-cover"}):l.jsx("span",{className:`text-xs font-semibold ${e?"text-gray-400":"text-gray-600"}`,children:ae.firstName?.charAt(0)?.toUpperCase()||"U"})}),l.jsx("div",{children:l.jsxs("div",{className:`text-sm font-medium ${e?"text-white":"text-gray-900"}`,children:[ae.firstName," ",ae.lastName]})})]},ae.id))]})]})]})},h1e="http://localhost:5000/api",f1e=h1e.replace("/api",""),p1e=({taskId:t,attachments:e,isDarkMode:n,onRefresh:r,onShowWarning:s,onShowConfirmation:i})=>{const[a,o]=v.useState(!1),[c,d]=v.useState(!1),{user:h}=cy(),p=S=>S.startsWith("image/")?l.jsx(Kge,{className:"w-4 h-4 text-blue-500"}):S.includes("pdf")||S.includes("document")?l.jsx(s_,{className:"w-4 h-4 text-red-500"}):l.jsx(pW,{className:"w-4 h-4 text-gray-500"}),m=S=>{if(S===0)return"0 Bytes";const O=1024,R=["Bytes","KB","MB","GB"],M=Math.floor(Math.log(S)/Math.log(O));return parseFloat((S/Math.pow(O,M)).toFixed(2))+" "+R[M]},y=S=>{let O;if(!S)return"Unknown";if(S instanceof Date)O=S;else if(typeof S=="string")O=new Date(S);else if(S&&typeof S=="object"&&S.toDate)O=S.toDate();else if(S&&typeof S=="object"&&S._seconds)O=new Date(S._seconds*1e3+(S._nanoseconds||0)/1e6);else return"Unknown";if(isNaN(O.getTime()))return"Unknown";const M=Math.floor((new Date().getTime()-O.getTime())/1e3);return M<60?"Just now":M<3600?`${Math.floor(M/60)}m ago`:M<86400?`${Math.floor(M/3600)}h ago`:M<604800?`${Math.floor(M/86400)}d ago`:O.toLocaleDateString()},x=async S=>{if(!(!S||S.length===0)){o(!0);try{await gt.uploadAttachment(t,S),r?.(),s?.("Files uploaded successfully","success")}catch(O){console.error("Failed to upload files:",O),s?.("Failed to upload files","error")}finally{o(!1)}}},_=S=>{i&&i("Delete Attachment","Are you sure you want to delete this attachment?",async()=>{try{await gt.deleteAttachment(t,S),r?.(),s?.("Attachment deleted successfully","success")}catch(O){console.error("Failed to delete attachment:",O),s?.("Failed to delete attachment","error")}},"Delete","Cancel")},w=S=>{S.preventDefault(),d(!0)},N=S=>{S.preventDefault(),d(!1)},k=S=>{S.preventDefault(),d(!1),x(S.dataTransfer.files)};return l.jsxs("div",{className:"p-4",children:[l.jsx("div",{className:"flex items-center justify-between mb-4",children:l.jsxs("h3",{className:`text-lg font-semibold flex items-center gap-2 ${n?"text-white":"text-gray-900"}`,children:[l.jsx(pp,{className:"w-4 h-4"}),l.jsx("span",{children:"Attachments"}),e.length>0&&l.jsx("span",{className:`text-sm font-normal px-2 py-0.5 rounded-full ${n?"bg-gray-700 text-gray-300":"bg-gray-100 text-gray-600"}`,children:e.length})]})}),l.jsxs("div",{className:`mb-6 border-2 border-dashed rounded-lg p-6 text-center transition-all ${c?"border-brand bg-brand/5":n?"border-gray-600 hover:border-gray-500":"border-gray-300 hover:border-gray-400"}`,onDragOver:w,onDragLeave:N,onDrop:k,children:[l.jsx(z3,{className:`w-8 h-8 mx-auto mb-2 ${n?"text-gray-400":"text-gray-500"}`}),l.jsx("p",{className:`text-sm mb-2 ${n?"text-gray-300":"text-gray-700"}`,children:"Drag and drop files here, or click to browse"}),l.jsxs(ct,{variant:"secondary",size:"sm",disabled:a,onClick:()=>{const S=document.createElement("input");S.type="file",S.multiple=!0,S.onchange=O=>x(O.target.files),S.click()},children:[l.jsx(z3,{className:"w-3 h-3 mr-2"}),a?"Uploading...":"Choose Files"]})]}),l.jsx("div",{className:"space-y-3",children:e.length===0?l.jsxs("div",{className:`text-center py-12 ${n?"text-gray-400":"text-gray-500"}`,children:[l.jsx(pp,{className:"w-8 h-8 mx-auto mb-3 opacity-50"}),l.jsx("p",{className:"text-sm",children:"No attachments yet. Upload files to get started!"})]}):e.map(S=>l.jsx("div",{className:`p-3 rounded-lg border transition-all hover:shadow-sm ${n?"bg-gray-800 border-gray-700 hover:bg-gray-750":"bg-gray-50 border-gray-200 hover:bg-gray-100"}`,children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"flex-shrink-0",children:p(S.fileType)}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h4",{className:`text-sm font-medium truncate ${n?"text-white":"text-gray-900"}`,children:S.fileName}),l.jsxs("div",{className:"flex items-center gap-2 mt-1 text-xs text-gray-500 dark:text-gray-400",children:[l.jsx("span",{children:m(S.fileSize)}),l.jsx("span",{children:"•"}),l.jsx("span",{children:y(S.uploadedAt||S.createdAt)}),l.jsx("span",{children:"•"}),l.jsxs("span",{children:["by ",S.uploaderName||S.uploaderId]})]})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("button",{onClick:()=>window.open(`${f1e}${S.fileUrl}`,"_blank"),title:"Download",className:`p-2 rounded-md transition-colors hover:bg-gray-100 dark:hover:bg-gray-700 ${n?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"}`,children:l.jsx(Age,{className:"w-4 h-4"})}),h&&l.jsx("button",{onClick:()=>_(S.id),title:"Delete",className:`p-2 rounded-md transition-colors hover:bg-red-100 dark:hover:bg-red-700 ${n?"text-red-400 hover:text-white":"text-red-600 hover:text-red-900"}`,children:l.jsx(yn,{className:"w-4 h-4"})})]})]})},S.id))})]})},m1e=({taskId:t,dependencies:e,isDarkMode:n,onShowWarning:r,onShowConfirmation:s,onRefresh:i})=>{const[a,o]=v.useState(!1),[c,d]=v.useState(!1),[h,p]=v.useState({dependencyId:"",dependencyType:"blocks",description:""}),[m,y]=v.useState(e),[x,_]=v.useState(""),[w,N]=v.useState([]),[k,S]=v.useState(!1),[O,R]=v.useState(!1),M=v.useRef(null),P=v.useRef(null);v.useEffect(()=>{y(e)},[e]),v.useEffect(()=>(x.trim().length>=2?(M.current&&clearTimeout(M.current),M.current=setTimeout(async()=>{R(!0);try{const W=await gt.searchTasksForDependency(t,x);N(W),S(!0)}catch(W){console.error("Error searching tasks:",W),N([])}finally{R(!1)}},300)):(N([]),S(!1)),()=>{M.current&&clearTimeout(M.current)}),[x,t]),v.useEffect(()=>{const W=K=>{const Y=K.target;if(P.current&&!P.current.contains(Y)){const G=document.querySelector("[data-search-dropdown]");(!G||!G.contains(Y))&&S(!1)}};return document.addEventListener("mousedown",W),()=>{document.removeEventListener("mousedown",W)}},[]);const C=W=>{switch(W){case"done":return l.jsx(Mi,{className:"w-3 h-3 text-green-500"});case"in-progress":return l.jsx(sr,{className:"w-3 h-3 text-blue-500"});case"review":return l.jsx(sr,{className:"w-3 h-3 text-yellow-500"});default:return l.jsx(Ege,{className:"w-3 h-3 text-gray-400"})}},D=W=>{switch(W){case"done":return"Completed";case"in-progress":return"In Progress";case"review":return"In Review";default:return"Not Started"}},$=W=>{switch(W){case"blocks":return l.jsx(Zme,{className:"w-4 h-4 text-red-500"});case"blocked-by":return l.jsx(Xme,{className:"w-4 h-4 text-orange-500"});case"related":return l.jsx(Od,{className:"w-4 h-4 text-blue-500"});default:return l.jsx(Xge,{className:"w-4 h-4 text-gray-500"})}},F=W=>{switch(W){case"blocks":return"border-red-200 bg-red-50 dark:border-red-800 dark:bg-red-900/20";case"blocked-by":return"border-orange-200 bg-orange-50 dark:border-orange-800 dark:bg-orange-900/20";case"related":return"border-blue-200 bg-blue-50 dark:border-blue-800 dark:bg-blue-900/20";default:return"border-gray-200 bg-gray-50 dark:border-gray-700 dark:bg-gray-800"}},U=W=>{switch(W){case"blocks":return"Blocks";case"blocked-by":return"Blocked by";case"related":return"Related to";default:return"Linked to"}},I=W=>{p(K=>({...K,dependencyId:W.id})),_(W.title),S(!1)},z=W=>{if(!W)return"Unknown";let K;try{if(W&&typeof W=="object"&&typeof W.toDate=="function")K=W.toDate();else if(W&&typeof W=="object"&&W._seconds)K=new Date(W._seconds*1e3);else if(typeof W=="string")K=new Date(W);else if(W instanceof Date)K=W;else return"Unknown";if(isNaN(K.getTime()))return"Invalid Date";const G=Math.floor((new Date().getTime()-K.getTime())/1e3);return G<60?"Just now":G<3600?`${Math.floor(G/60)}m ago`:G<86400?`${Math.floor(G/3600)}h ago`:G<604800?`${Math.floor(G/86400)}d ago`:K.toLocaleDateString()}catch(Y){return console.error("Error formatting date:",Y,"Input:",W),"Error"}},Q=async()=>{if(h.dependencyId.trim()){d(!0);try{const W=await gt.createDependency(t,{dependencyId:h.dependencyId.trim(),dependencyType:h.dependencyType,description:h.description.trim()});y(K=>[...K,W]),p({dependencyId:"",dependencyType:"blocks",description:""}),o(!1),i?.(),r?.("Dependency added successfully","success")}catch(W){console.error("Failed to add dependency:",W);const K=W.response?.data?.message||"Failed to add dependency";r?.(K,"error")}finally{d(!1)}}},ne=async W=>{s?.("Remove Dependency","Are you sure you want to remove this dependency? This action cannot be undone.",async()=>{try{await gt.deleteDependency(t,W),y(K=>K.filter(Y=>Y.id!==W)),i?.(),r?.("Dependency removed successfully","success")}catch(K){console.error("Failed to remove dependency:",K);const Y=K.response?.data?.message||"Failed to remove dependency";r?.(Y,"error")}},"Remove","Cancel")};return l.jsxs("div",{className:"p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("h3",{className:`text-lg font-semibold flex items-center gap-2 ${n?"text-white":"text-gray-900"}`,children:[l.jsx(Od,{className:"w-4 h-4"}),l.jsx("span",{children:"Dependencies"}),m.length>0&&l.jsx("span",{className:`text-sm font-normal px-2 py-0.5 rounded-full ${n?"bg-gray-700 text-gray-300":"bg-gray-100 text-gray-600"}`,children:m.length})]}),l.jsxs(ct,{variant:"secondary",size:"sm",onClick:()=>o(!a),className:"flex items-center gap-2",children:[l.jsx(Ps,{className:"w-3 h-3"}),"Add Dependency"]})]}),a&&l.jsx("div",{className:`mb-6 p-4 rounded-lg border ${n?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"}`,children:l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[l.jsxs("div",{className:"relative",children:[l.jsx("label",{className:`block text-sm font-medium mb-1 ${n?"text-gray-300":"text-gray-700"}`,children:"Search Task"}),l.jsx("p",{className:`text-xs mb-2 ${n?"text-gray-400":"text-gray-500"}`,children:"Only tasks from the same project can be linked as dependencies"}),l.jsxs("div",{className:"relative",children:[l.jsx(mh,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 ${n?"text-gray-400":"text-gray-500"}`}),l.jsx("input",{ref:P,type:"text",value:x,onChange:W=>{_(W.target.value),p(K=>({...K,dependencyId:""}))},placeholder:"Search tasks in this project...",className:`w-full pl-10 pr-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand focus:border-brand ${n?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-900 placeholder-gray-500"}`}),O&&l.jsx("div",{className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${n?"text-gray-400":"text-gray-500"}`,children:l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current"})})]}),k&&w.length>0&&l.jsx("div",{"data-search-dropdown":!0,className:"absolute z-50 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-xl max-h-60 overflow-y-auto",style:{pointerEvents:"auto"},children:w.map(W=>l.jsx("button",{onClick:K=>{K.preventDefault(),K.stopPropagation(),I(W)},className:`w-full px-3 py-2 text-left hover:bg-gray-50 dark:hover:bg-gray-700 border-b border-gray-100 dark:border-gray-700 last:border-b-0 transition-colors cursor-pointer ${n?"text-white":"text-gray-900"}`,type:"button",style:{pointerEvents:"auto"},children:l.jsxs("div",{className:"flex items-center gap-2",children:[C(W.status),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"font-medium truncate",children:W.title}),l.jsxs("div",{className:`text-xs ${n?"text-gray-400":"text-gray-500"}`,children:["#",W.id," • ",D(W.status)]})]})]})},W.id))}),k&&w.length===0&&!O&&x.trim().length>=2&&l.jsxs("div",{"data-search-dropdown":!0,className:`absolute z-50 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-xl p-3 ${n?"text-gray-400":"text-gray-500"}`,children:[l.jsxs("div",{className:"text-sm",children:['No tasks found matching "',x,'"']}),l.jsx("div",{className:"text-xs mt-1 opacity-75",children:"Only tasks from the same project can be linked as dependencies"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:`block text-sm font-medium mb-1 ${n?"text-gray-300":"text-gray-700"}`,children:"Relationship"}),l.jsxs("select",{value:h.dependencyType,onChange:W=>p({...h,dependencyType:W.target.value}),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand focus:border-brand ${n?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,children:[l.jsx("option",{value:"blocks",children:"Blocks"}),l.jsx("option",{value:"blocked-by",children:"Blocked by"}),l.jsx("option",{value:"related",children:"Related to"})]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:`block text-sm font-medium mb-1 ${n?"text-gray-300":"text-gray-700"}`,children:"Description (optional)"}),l.jsx("input",{type:"text",value:h.description,onChange:W=>p({...h,description:W.target.value}),placeholder:"Describe the relationship...",className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand focus:border-brand ${n?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-900 placeholder-gray-500"}`})]}),l.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[l.jsx(ct,{onClick:Q,disabled:!h.dependencyId.trim()||c,size:"sm",children:c?"Adding...":"Add Dependency"}),l.jsx(ct,{variant:"ghost",onClick:()=>{o(!1),p({dependencyId:"",dependencyType:"blocks",description:""})},size:"sm",disabled:c,children:"Cancel"})]})]})}),l.jsx("div",{className:"space-y-3",children:m.length===0?l.jsxs("div",{className:`text-center py-12 ${n?"text-gray-400":"text-gray-500"}`,children:[l.jsx(Od,{className:"w-8 h-8 mx-auto mb-3 opacity-50"}),l.jsx("p",{className:"text-sm",children:"No dependencies defined yet."})]}):m.map(W=>l.jsx("div",{className:`p-4 rounded-lg border transition-all hover:shadow-sm ${F(W.dependencyType)}`,children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"flex-shrink-0 mt-0.5",children:$(W.dependencyType)}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx("span",{className:`text-sm font-medium ${n?"text-white":"text-gray-900"}`,children:U(W.dependencyType)}),l.jsxs("span",{className:`text-xs px-2 py-0.5 rounded-full ${n?"bg-gray-700 text-gray-300":"bg-gray-200 text-gray-700"}`,children:["#",W.dependencyId]})]}),W.dependentTask?l.jsxs("div",{className:"mb-2",children:[l.jsx("div",{className:`font-medium ${n?"text-white":"text-gray-900"}`,children:W.dependentTask.title}),l.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[C(W.dependentTask.status),l.jsx("span",{className:`text-xs ${n?"text-gray-400":"text-gray-500"}`,children:D(W.dependentTask.status)})]})]}):l.jsx("div",{className:`text-sm ${n?"text-gray-400":"text-gray-500"}`,children:"Task not found or deleted"}),W.description&&l.jsx("p",{className:`text-sm mb-2 ${n?"text-gray-300":"text-gray-700"}`,children:W.description}),l.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[l.jsxs("span",{className:n?"text-gray-400":"text-gray-500",children:["Added by ",W.creatorProfile?`${W.creatorProfile.firstName} ${W.creatorProfile.lastName}`:W.creatorId]}),l.jsx("span",{className:n?"text-gray-500":"text-gray-400",children:"•"}),l.jsx("span",{className:n?"text-gray-400":"text-gray-500",children:z(W.createdAt)})]})]}),l.jsx("button",{onClick:()=>ne(W.id),className:`flex-shrink-0 p-1.5 rounded-md transition-colors ${n?"text-gray-500 hover:text-red-400 hover:bg-gray-700":"text-gray-400 hover:text-red-600 hover:bg-gray-100"}`,title:"Remove dependency",children:l.jsx(yn,{className:"w-4 h-4"})})]})},W.id))})]})},g1e=({subtasks:t,taskId:e,isDarkMode:n,onShowWarning:r,onShowConfirmation:s,onRefresh:i})=>{const[a,o]=v.useState(""),[c,d]=v.useState(!1),[h,p]=v.useState(t),[m,y]=v.useState(null),[x,_]=v.useState(""),w=v.useRef(null);v.useEffect(()=>{p(t)},[t]),v.useEffect(()=>{m&&w.current&&(w.current.focus(),w.current.select())},[m]);const N=async()=>{if(a.trim()){d(!0);try{const F=await gt.createSubtask(e,{title:a.trim()});p(U=>[...U,F]),o(""),i?.(),r?.("Subtask added successfully","success")}catch(F){console.error("Failed to add subtask:",F);const U=F.response?.data?.message||"Failed to add subtask";r?.(U,"error")}finally{d(!1)}}},k=async(F,U)=>{try{const I=await gt.updateSubtask(e,F,{completed:!U});p(z=>z.map(Q=>Q.id===F?{...Q,completed:!U}:Q)),i?.()}catch(I){console.error("Failed to update subtask:",I);const z=I.response?.data?.message||"Failed to update subtask";r?.(z,"error")}},S=async F=>{const U=h.find(I=>I.id===F);U&&s?.("Delete Subtask",`Are you sure you want to delete "${U.title}"? This action cannot be undone.`,async()=>{try{await gt.deleteSubtask(e,F),p(I=>I.filter(z=>z.id!==F)),i?.(),r?.("Subtask deleted successfully","success")}catch(I){console.error("Failed to delete subtask:",I);const z=I.response?.data?.message||"Failed to delete subtask";r?.(z,"error")}},"Delete","Cancel")},O=F=>{y(F.id),_(F.title)},R=async()=>{if(!(!m||!x.trim()))try{const F=await gt.updateSubtask(e,m,{title:x.trim()});p(U=>U.map(I=>I.id===m?{...I,title:x.trim()}:I)),i?.(),y(null),_("")}catch(F){console.error("Failed to update subtask:",F);const U=F.response?.data?.message||"Failed to update subtask";r?.(U,"error")}},M=()=>{y(null),_("")},P=F=>{F.key==="Enter"?R():F.key==="Escape"&&M()},C=h.filter(F=>F.completed).length,D=h.length,$=D>0?C/D*100:0;return l.jsxs("div",{className:"p-4",children:[l.jsx("div",{className:"flex items-center justify-between mb-4",children:l.jsxs("h3",{className:`text-lg font-semibold flex items-center gap-2 ${n?"text-white":"text-gray-900"}`,children:[l.jsx(bl,{className:"w-4 h-4"}),l.jsx("span",{children:"Subtasks"}),D>0&&l.jsxs("span",{className:`text-sm font-normal px-2 py-0.5 rounded-full ${n?"bg-gray-700 text-gray-300":"bg-gray-100 text-gray-600"}`,children:[C,"/",D]})]})}),D>0&&l.jsxs("div",{className:"mb-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("span",{className:`text-sm font-medium ${n?"text-gray-300":"text-gray-700"}`,children:"Progress"}),l.jsxs("span",{className:`text-sm ${n?"text-gray-400":"text-gray-500"}`,children:[Math.round($),"%"]})]}),l.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:l.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:`${$}%`}})})]}),l.jsx("div",{className:"mb-6",children:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"text",value:a,onChange:F=>o(F.target.value),placeholder:"Add a subtask...",className:`flex-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand focus:border-brand transition-all ${n?"bg-gray-800 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-900 placeholder-gray-500"}`,onKeyPress:F=>F.key==="Enter"&&N()}),l.jsxs(ct,{onClick:N,disabled:c||!a.trim(),size:"sm",className:"flex items-center gap-2",children:[l.jsx(Ps,{className:"w-3 h-3"}),l.jsx("span",{children:c?"Adding...":"Add"})]})]})}),l.jsx("div",{className:"space-y-2",children:h.length===0?l.jsxs("div",{className:`text-center py-12 ${n?"text-gray-400":"text-gray-500"}`,children:[l.jsx(bl,{className:"w-8 h-8 mx-auto mb-3 opacity-50"}),l.jsx("p",{className:"text-sm",children:"No subtasks yet. Add one above!"})]}):h.map(F=>l.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg border transition-all hover:shadow-sm ${n?"bg-gray-800 border-gray-700 hover:bg-gray-750":"bg-gray-50 border-gray-200 hover:bg-gray-100"} ${F.completed?"opacity-75":""}`,children:[l.jsx("button",{onClick:()=>k(F.id,F.completed),className:`flex-shrink-0 transition-colors ${n?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"}`,children:F.completed?l.jsx(bl,{className:"w-4 h-4 text-green-500"}):l.jsx(ow,{className:"w-4 h-4"})}),m===F.id?l.jsxs("div",{className:"flex-1 flex items-center gap-2",children:[l.jsx("input",{ref:w,type:"text",value:x,onChange:U=>_(U.target.value),onKeyDown:P,className:`flex-1 px-2 py-1 text-sm border rounded focus:outline-none focus:ring-2 focus:ring-green-500 ${n?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`}),l.jsx("button",{onClick:R,className:"p-1 text-green-600 hover:text-green-700 transition-colors",title:"Save",children:l.jsx(WP,{className:"w-4 h-4"})}),l.jsx("button",{onClick:M,className:"p-1 text-gray-500 hover:text-gray-700 transition-colors",title:"Cancel",children:l.jsx(yn,{className:"w-4 h-4"})})]}):l.jsx("span",{className:`flex-1 text-sm cursor-pointer ${F.completed?"line-through":""} ${n?"text-gray-300":"text-gray-700"}`,onClick:()=>O(F),title:"Click to edit",children:F.title}),m!==F.id&&l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("button",{onClick:()=>O(F),className:`p-1.5 rounded-md transition-colors ${n?"text-gray-500 hover:text-blue-400 hover:bg-gray-700":"text-gray-400 hover:text-blue-600 hover:bg-gray-100"}`,title:"Edit subtask",children:l.jsx(y0e,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>S(F.id),className:`p-1.5 rounded-md transition-colors ${n?"text-gray-500 hover:text-red-400 hover:bg-gray-700":"text-gray-400 hover:text-red-600 hover:bg-gray-100"}`,title:"Delete subtask",children:l.jsx(Vi,{className:"w-4 h-4"})})]})]},F.id))})]})},y1e=({timeLogs:t,isDarkMode:e,taskId:n,onShowWarning:r,onTimeLogsUpdate:s,onShowConfirmation:i})=>{const[a,o]=v.useState(!1),[c,d]=v.useState(null),[h,p]=v.useState(""),[m,y]=v.useState(!1),[x,_]=v.useState({description:"",startTime:"",endTime:"",duration:0}),[w,N]=v.useState(null),[k,S]=v.useState({description:"",startTime:"",endTime:"",duration:0}),[O,R]=v.useState(!1),[M,P]=v.useState({});v.useEffect(()=>{(async()=>{if(t.length===0)return;const G=[...new Set(t.map(q=>q.userId))];try{const q=await gt.fetchUserProfilesByIds(G);P(q)}catch(q){console.error("Failed to fetch user profiles:",q)}})()},[t]);const C=Y=>{if(!Y)return"0m";const G=Math.floor(Y/3600),q=Math.floor(Y%3600/60),Z=Y%60;return G>0?`${G}h ${q}m`:q>0?`${q}m ${Z>0?`${Z}s`:""}`:`${Z}s`},D=()=>t.reduce((Y,G)=>Y+(G.duration||0),0),$=Y=>{const G=new Date(Y),Z=Math.floor((new Date().getTime()-G.getTime())/1e3);return Z<60?"Just now":Z<3600?`${Math.floor(Z/60)}m ago`:Z<86400?`${Math.floor(Z/3600)}h ago`:Z<604800?`${Math.floor(Z/86400)}d ago`:G.toLocaleDateString()},F=()=>{d({startTime:new Date,description:h||"Work session"}),o(!0),p("")},U=async()=>{if(!c)return;const Y=new Date,G=Math.floor((Y.getTime()-c.startTime.getTime())/1e3);try{R(!0),await gt.createTimeLog(n,{description:c.description,startTime:c.startTime.toISOString(),endTime:Y.toISOString(),duration:G}),o(!1),d(null),s?.(),r?.("Time log saved successfully","success")}catch(q){console.error("Failed to save time log:",q),r?.("Failed to save time log","error")}finally{R(!1)}},I=async()=>{if(!x.description||!x.startTime||!x.endTime)return;const Y=new Date(x.startTime),G=new Date(x.endTime),q=Math.floor((G.getTime()-Y.getTime())/1e3);if(q<=0){r?.("End time must be after start time","error");return}try{R(!0),await gt.createTimeLog(n,{description:x.description,startTime:Y.toISOString(),endTime:G.toISOString(),duration:q}),_({description:"",startTime:"",endTime:"",duration:0}),y(!1),s?.(),r?.("Time log added successfully","success")}catch(Z){console.error("Failed to add manual time log:",Z),r?.("Failed to add time log","error")}finally{R(!1)}},z=Y=>{N(Y.id),S({description:Y.description||"",startTime:new Date(Y.startTime).toISOString().slice(0,16),endTime:Y.endTime?new Date(Y.endTime).toISOString().slice(0,16):"",duration:Y.duration||0})},Q=()=>{N(null),S({description:"",startTime:"",endTime:"",duration:0})},ne=async Y=>{if(!k.description||!k.startTime||!k.endTime)return;const G=new Date(k.startTime),q=new Date(k.endTime),Z=Math.floor((q.getTime()-G.getTime())/1e3);if(Z<=0){r?.("End time must be after start time","error");return}try{R(!0),await gt.updateTimeLog(n,Y,{description:k.description,startTime:G.toISOString(),endTime:q.toISOString(),duration:Z}),N(null),S({description:"",startTime:"",endTime:"",duration:0}),s?.(),r?.("Time log updated successfully","success")}catch(ge){console.error("Failed to update time log:",ge),r?.("Failed to update time log","error")}finally{R(!1)}},W=Y=>{if(!i){console.error("onShowConfirmation not provided");return}i("Delete Time Log","Are you sure you want to delete this time log? This action cannot be undone.",async()=>{try{R(!0),await gt.deleteTimeLog(n,Y),s?.(),r?.("Time log deleted successfully","success")}catch(G){console.error("Failed to delete time log:",G),r?.("Failed to delete time log","error")}finally{R(!1)}},"Delete","Cancel")},K=D();return l.jsxs("div",{className:"p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("h3",{className:`text-lg font-semibold flex items-center gap-2 ${e?"text-white":"text-gray-900"}`,children:[l.jsx(sr,{className:"w-4 h-4"}),l.jsx("span",{children:"Time Logs"}),t.length>0&&l.jsx("span",{className:`text-sm font-normal px-2 py-0.5 rounded-full ${e?"bg-gray-700 text-gray-300":"bg-gray-100 text-gray-600"}`,children:t.length})]}),l.jsxs(ct,{variant:"secondary",size:"sm",onClick:()=>y(!m),className:"flex items-center gap-2",children:[l.jsx(Ps,{className:"w-3 h-3"}),"Add Manual"]})]}),l.jsxs("div",{className:`mb-6 p-4 rounded-lg border ${a?e?"bg-green-900/20 border-green-800":"bg-green-50 border-green-200":e?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"}`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h4",{className:`font-medium ${e?"text-white":"text-gray-900"}`,children:"Time Tracker"}),a&&c&&l.jsxs("span",{className:`text-sm ${e?"text-green-400":"text-green-600"}`,children:["Started ",$(c.startTime.toISOString())]})]}),a?l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:`text-sm ${e?"text-gray-300":"text-gray-700"}`,children:c?.description}),l.jsxs("p",{className:`text-xs ${e?"text-gray-400":"text-gray-500"}`,children:["Started at ",c?.startTime.toLocaleTimeString()]})]}),l.jsxs(ct,{onClick:U,variant:"destructive",size:"sm",className:"flex items-center gap-2",children:[l.jsx(ow,{className:"w-3 h-3"}),"Stop"]})]}):l.jsxs("div",{className:"space-y-3",children:[l.jsx("input",{type:"text",value:h,onChange:Y=>p(Y.target.value),placeholder:"What are you working on?",className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand focus:border-brand ${e?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-900 placeholder-gray-500"}`}),l.jsxs(ct,{onClick:F,className:"flex items-center gap-2",size:"sm",children:[l.jsx(V3,{className:"w-3 h-3"}),"Start Timer"]})]})]}),m&&l.jsxs("div",{className:`mb-6 p-4 rounded-lg border ${e?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"}`,children:[l.jsx("h4",{className:`font-medium mb-3 ${e?"text-white":"text-gray-900"}`,children:"Add Manual Time Log"}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("input",{type:"text",value:x.description,onChange:Y=>_({...x,description:Y.target.value}),placeholder:"Description...",className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand focus:border-brand ${e?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-900 placeholder-gray-500"}`}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:`block text-sm font-medium mb-1 ${e?"text-gray-300":"text-gray-700"}`,children:"Start Time"}),l.jsx("input",{type:"datetime-local",value:x.startTime,onChange:Y=>_({...x,startTime:Y.target.value}),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand focus:border-brand ${e?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`})]}),l.jsxs("div",{children:[l.jsx("label",{className:`block text-sm font-medium mb-1 ${e?"text-gray-300":"text-gray-700"}`,children:"End Time"}),l.jsx("input",{type:"datetime-local",value:x.endTime,onChange:Y=>_({...x,endTime:Y.target.value}),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand focus:border-brand ${e?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`})]})]}),l.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[l.jsx(ct,{onClick:I,disabled:!x.description||!x.startTime||!x.endTime,size:"sm",children:"Add Time Log"}),l.jsx(ct,{variant:"ghost",onClick:()=>{y(!1),_({description:"",startTime:"",endTime:"",duration:0})},size:"sm",children:"Cancel"})]})]})]}),t.length>0&&l.jsx("div",{className:`mb-4 p-3 rounded-lg ${e?"bg-blue-900/20 border border-blue-800":"bg-blue-50 border border-blue-200"}`,children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(sr,{className:`w-4 h-4 ${e?"text-blue-400":"text-blue-600"}`}),l.jsxs("span",{className:`font-medium ${e?"text-white":"text-gray-900"}`,children:["Total Time: ",C(K)]})]})}),l.jsx("div",{className:"space-y-3",children:t.length===0?l.jsxs("div",{className:`text-center py-12 ${e?"text-gray-400":"text-gray-500"}`,children:[l.jsx(sr,{className:"w-8 h-8 mx-auto mb-3 opacity-50"}),l.jsx("p",{className:"text-sm",children:"No time logs recorded yet."})]}):t.map(Y=>l.jsx("div",{className:`p-3 rounded-lg border transition-all hover:shadow-sm ${e?"bg-gray-800 border-gray-700 hover:bg-gray-750":"bg-gray-50 border-gray-200 hover:bg-gray-100"}`,children:w===Y.id?l.jsxs("div",{className:"space-y-3",children:[l.jsx("input",{type:"text",value:k.description,onChange:G=>S({...k,description:G.target.value}),placeholder:"Description...",className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand focus:border-brand ${e?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-900 placeholder-gray-500"}`}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:`block text-sm font-medium mb-1 ${e?"text-gray-300":"text-gray-700"}`,children:"Start Time"}),l.jsx("input",{type:"datetime-local",value:k.startTime,onChange:G=>S({...k,startTime:G.target.value}),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand focus:border-brand ${e?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`})]}),l.jsxs("div",{children:[l.jsx("label",{className:`block text-sm font-medium mb-1 ${e?"text-gray-300":"text-gray-700"}`,children:"End Time"}),l.jsx("input",{type:"datetime-local",value:k.endTime,onChange:G=>S({...k,endTime:G.target.value}),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand focus:border-brand ${e?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`})]})]}),l.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[l.jsx(ct,{onClick:()=>ne(Y.id),disabled:!k.description||!k.startTime||!k.endTime||O,size:"sm",children:"Save"}),l.jsx(ct,{variant:"ghost",onClick:Q,disabled:O,size:"sm",children:"Cancel"})]})]}):l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"flex-shrink-0 mt-0.5",children:Y.endTime?l.jsx(ow,{className:"w-4 h-4 text-gray-500"}):l.jsx(V3,{className:"w-4 h-4 text-green-500"})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h4",{className:`text-sm font-medium mb-1 ${e?"text-white":"text-gray-900"}`,children:Y.description||"Time tracking session"}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 text-xs",children:[l.jsxs("div",{children:[l.jsx("span",{className:`font-medium ${e?"text-gray-400":"text-gray-500"}`,children:"Started:"}),l.jsx("span",{className:`ml-1 ${e?"text-gray-300":"text-gray-700"}`,children:new Date(Y.startTime).toLocaleString()})]}),l.jsxs("div",{children:[l.jsx("span",{className:`font-medium ${e?"text-gray-400":"text-gray-500"}`,children:"Duration:"}),l.jsx("span",{className:`ml-1 font-medium ${e?"text-white":"text-gray-900"}`,children:C(Y.duration)})]}),l.jsxs("div",{children:[l.jsx("span",{className:`font-medium ${e?"text-gray-400":"text-gray-500"}`,children:"By:"}),l.jsx("span",{className:`ml-1 ${e?"text-gray-300":"text-gray-700"}`,children:M[Y.userId]?`${M[Y.userId].firstName} ${M[Y.userId].lastName}`:Y.userId})]})]})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(ct,{variant:"ghost",size:"sm",onClick:()=>z(Y),disabled:O,className:"p-1 h-8 w-8",children:l.jsx(mp,{className:"w-3 h-3"})}),l.jsx(ct,{variant:"ghost",size:"sm",onClick:()=>W(Y.id),disabled:O,className:"p-1 h-8 w-8 text-red-600 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20",children:l.jsx(Vi,{className:"w-3 h-3"})})]})]})},Y.id))})]})},v1e=({activityLogs:t,isDarkMode:e,onShowWarning:n})=>{const[r,s]=v.useState("all"),[i,a]=v.useState(!1),[o,c]=v.useState(""),[d,h]=v.useState(!0),[p,m]=v.useState(new Set),[y,x]=v.useState({}),[_,w]=v.useState(new Set);v.useEffect(()=>{(async()=>{if(t.length===0)return;const z=[...new Set(t.map(Q=>Q.userId))];try{const Q=await gt.fetchUserProfilesByIds(z);x(Q)}catch(Q){console.error("Failed to fetch user profiles:",Q)}})()},[t]);const N=I=>{const z=I.toLowerCase();return z.includes("task_created")?l.jsx(Mi,{className:"w-4 h-4 text-green-500"}):z.includes("task_updated")||z.includes("task_edited")?l.jsx(mp,{className:"w-4 h-4 text-blue-500"}):z.includes("task_deleted")?l.jsx(DC,{className:"w-4 h-4 text-red-500"}):z.includes("status_changed")?l.jsx(bl,{className:"w-4 h-4 text-indigo-500"}):z.includes("task_assigned")||z.includes("assigned")?l.jsx(yW,{className:"w-4 h-4 text-green-500"}):z.includes("task_unassigned")||z.includes("unassigned")?l.jsx(Q0e,{className:"w-4 h-4 text-orange-500"}):z.includes("comment_added")||z.includes("comment_created")?l.jsx(Qc,{className:"w-4 h-4 text-purple-500"}):z.includes("comment_updated")||z.includes("comment_edited")?l.jsx(Qc,{className:"w-4 h-4 text-blue-500"}):z.includes("comment_deleted")?l.jsx(Qc,{className:"w-4 h-4 text-red-500"}):z.includes("attachment_added")||z.includes("attachment_uploaded")?l.jsx(pp,{className:"w-4 h-4 text-orange-500"}):z.includes("attachment_deleted")?l.jsx(pp,{className:"w-4 h-4 text-red-500"}):z.includes("subtask_added")||z.includes("subtask_created")?l.jsx(bl,{className:"w-4 h-4 text-green-500"}):z.includes("subtask_completed")?l.jsx(Mi,{className:"w-4 h-4 text-green-500"}):z.includes("subtask_uncompleted")?l.jsx(bl,{className:"w-4 h-4 text-yellow-500"}):z.includes("subtask_deleted")?l.jsx(bl,{className:"w-4 h-4 text-red-500"}):z.includes("dependency_added")?l.jsx(Od,{className:"w-4 h-4 text-blue-500"}):z.includes("dependency_removed")?l.jsx(Od,{className:"w-4 h-4 text-red-500"}):z.includes("time_tracking_started")||z.includes("time_started")?l.jsx(sr,{className:"w-4 h-4 text-green-500"}):z.includes("time_tracking_stopped")||z.includes("time_stopped")?l.jsx(sr,{className:"w-4 h-4 text-orange-500"}):z.includes("time_log_added")||z.includes("time_logged")?l.jsx(sr,{className:"w-4 h-4 text-blue-500"}):z.includes("create")||z.includes("add")?l.jsx(Mi,{className:"w-4 h-4 text-green-500"}):z.includes("update")||z.includes("edit")?l.jsx(mp,{className:"w-4 h-4 text-blue-500"}):z.includes("delete")||z.includes("remove")?l.jsx(DC,{className:"w-4 h-4 text-red-500"}):l.jsx(nb,{className:"w-4 h-4 text-gray-500"})},k=I=>{const z=I.toLowerCase();return z.includes("task_created")?"border-l-green-500 bg-green-50 dark:bg-green-900/10":z.includes("task_updated")||z.includes("task_edited")?"border-l-blue-500 bg-blue-50 dark:bg-blue-900/10":z.includes("task_deleted")?"border-l-red-500 bg-red-50 dark:bg-red-900/10":z.includes("status_changed")?"border-l-indigo-500 bg-indigo-50 dark:bg-indigo-900/10":z.includes("task_assigned")||z.includes("assigned")?"border-l-green-500 bg-green-50 dark:bg-green-900/10":z.includes("task_unassigned")||z.includes("unassigned")?"border-l-orange-500 bg-orange-50 dark:bg-orange-900/10":z.includes("comment")?"border-l-purple-500 bg-purple-50 dark:bg-purple-900/10":z.includes("attachment")?"border-l-orange-500 bg-orange-50 dark:bg-orange-900/10":z.includes("subtask")?"border-l-cyan-500 bg-cyan-50 dark:bg-cyan-900/10":z.includes("dependency")?"border-l-blue-500 bg-blue-50 dark:bg-blue-900/10":z.includes("time_tracking")||z.includes("time_log")?"border-l-yellow-500 bg-yellow-50 dark:bg-yellow-900/10":z.includes("create")||z.includes("add")?"border-l-green-500 bg-green-50 dark:bg-green-900/10":z.includes("update")||z.includes("edit")?"border-l-blue-500 bg-blue-50 dark:bg-blue-900/10":z.includes("delete")||z.includes("remove")?"border-l-red-500 bg-red-50 dark:bg-red-900/10":"border-l-gray-500 bg-gray-50 dark:bg-gray-800"},S=I=>{const z=new Date(I),ne=Math.floor((new Date().getTime()-z.getTime())/1e3);return ne<60?"Just now":ne<3600?`${Math.floor(ne/60)}m ago`:ne<86400?`${Math.floor(ne/3600)}h ago`:ne<604800?`${Math.floor(ne/86400)}d ago`:z.toLocaleDateString()},O=I=>{const z=I.toLowerCase();return z.includes("task_created")?"Created task":z.includes("task_updated")?"Updated task":z.includes("task_deleted")?"Deleted task":z.includes("status_changed")?"Changed status":z.includes("task_assigned")?"Assigned task":z.includes("task_unassigned")?"Unassigned task":z.includes("comment_added")?"Added comment":z.includes("comment_updated")?"Updated comment":z.includes("comment_deleted")?"Deleted comment":z.includes("attachment_added")?"Added attachment":z.includes("attachment_deleted")?"Deleted attachment":z.includes("subtask_added")?"Added subtask":z.includes("subtask_completed")?"Completed subtask":z.includes("subtask_uncompleted")?"Uncompleted subtask":z.includes("subtask_deleted")?"Deleted subtask":z.includes("dependency_added")?"Added dependency":z.includes("dependency_removed")?"Removed dependency":z.includes("time_tracking_started")?"Started time tracking":z.includes("time_tracking_stopped")?"Stopped time tracking":z.includes("time_log_added")?"Added time log":I.charAt(0).toUpperCase()+I.slice(1).toLowerCase().replace(/_/g," ")},R=I=>{const z=new Date(I),Q=new Date,ne=new Date(Q);return ne.setDate(ne.getDate()-1),z.toDateString()===Q.toDateString()?"Today":z.toDateString()===ne.toDateString()?"Yesterday":z.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})},M=I=>{const z={};return I.forEach(Q=>{const ne=new Date(Q.timestamp).toDateString();z[ne]||(z[ne]=[]),z[ne].push(Q)}),Object.keys(z).forEach(Q=>{z[Q].sort((ne,W)=>new Date(W.timestamp).getTime()-new Date(ne.timestamp).getTime())}),z},P=I=>{const z=new Set(p);z.has(I)?z.delete(I):z.add(I),m(z)},C=I=>{const z=new Set(_);z.has(I)?z.delete(I):z.add(I),w(z)},D=t.filter(I=>{let z=!0;r!=="all"&&(z=I.action.toLowerCase().includes(r));let Q=!0;if(o.trim()){const ne=o.toLowerCase();Q=I.action.toLowerCase().includes(ne)||(I.details?I.details.toLowerCase().includes(ne):!1)||(I.userId?I.userId.toLowerCase().includes(ne):!1)}return z&&Q}),$=[{value:"all",label:"All Activity",count:t.length},{value:"task",label:"Task",count:t.filter(I=>I.action.toLowerCase().includes("task")).length},{value:"comment",label:"Comments",count:t.filter(I=>I.action.toLowerCase().includes("comment")).length},{value:"attachment",label:"Attachments",count:t.filter(I=>I.action.toLowerCase().includes("attachment")).length},{value:"subtask",label:"Subtasks",count:t.filter(I=>I.action.toLowerCase().includes("subtask")).length},{value:"dependency",label:"Dependencies",count:t.filter(I=>I.action.toLowerCase().includes("dependency")).length},{value:"time",label:"Time Tracking",count:t.filter(I=>I.action.toLowerCase().includes("time")).length},{value:"assign",label:"Assignments",count:t.filter(I=>I.action.toLowerCase().includes("assign")).length}],F=d?M(D):{all:D},U=Object.keys(F).sort((I,z)=>I==="all"?1:z==="all"?-1:new Date(z).getTime()-new Date(I).getTime());return l.jsxs("div",{className:"p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("h3",{className:`text-lg font-semibold flex items-center gap-2 ${e?"text-white":"text-gray-900"}`,children:[l.jsx(nb,{className:"w-4 h-4"}),l.jsx("span",{children:"Activity"}),t.length>0&&l.jsx("span",{className:`text-sm font-normal px-2 py-0.5 rounded-full ${e?"bg-gray-700 text-gray-300":"bg-gray-100 text-gray-600"}`,children:D.length})]}),l.jsx("div",{className:"flex items-center gap-2",children:t.length>0&&l.jsxs(l.Fragment,{children:[l.jsxs(ct,{variant:"secondary",size:"sm",onClick:()=>h(!d),className:"flex items-center gap-2",children:[l.jsx(fp,{className:"w-3 h-3"}),d?"Ungroup":"Group by Date"]}),l.jsxs(ct,{variant:"secondary",size:"sm",onClick:()=>a(!i),className:"flex items-center gap-2",children:[l.jsx(YP,{className:"w-3 h-3"}),"Filter"]})]})})]}),i&&t.length>0&&l.jsxs("div",{className:`mb-4 p-3 rounded-lg border ${e?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"}`,children:[l.jsx("div",{className:"mb-3",children:l.jsxs("div",{className:"relative",children:[l.jsx(mh,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 ${e?"text-gray-400":"text-gray-500"}`}),l.jsx("input",{type:"text",placeholder:"Search activities...",value:o,onChange:I=>c(I.target.value),className:`w-full pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand focus:border-brand ${e?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-900 placeholder-gray-500"}`})]})}),l.jsx("div",{className:"flex flex-wrap gap-2",children:$.map(I=>l.jsxs("button",{onClick:()=>s(I.value),className:`px-3 py-1.5 text-sm rounded-lg transition-all ${r===I.value?"bg-brand text-white":e?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-white text-gray-700 hover:bg-gray-100 border border-gray-200"}`,children:[I.label,I.count>0&&l.jsx("span",{className:`ml-1 px-1.5 py-0.5 text-xs rounded-full ${r===I.value?"bg-white/20 text-white":e?"bg-gray-600 text-gray-300":"bg-gray-200 text-gray-600"}`,children:I.count})]},I.value))})]}),l.jsx("div",{className:"space-y-4",children:D.length===0?l.jsxs("div",{className:`text-center py-12 ${e?"text-gray-400":"text-gray-500"}`,children:[l.jsx(nb,{className:"w-8 h-8 mx-auto mb-3 opacity-50"}),l.jsx("p",{className:"text-sm",children:r==="all"&&!o?"No activity recorded yet.":"No activities found matching your criteria."})]}):U.map(I=>l.jsxs("div",{className:"space-y-3",children:[d&&I!=="all"&&l.jsx("div",{className:"flex items-center gap-2",children:l.jsxs("button",{onClick:()=>P(I),className:"flex items-center gap-2 text-sm font-medium text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200",children:[p.has(I)?l.jsx(Va,{className:"w-4 h-4"}):l.jsx(hW,{className:"w-4 h-4"}),l.jsx("span",{children:R(I)}),l.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full ${e?"bg-gray-700 text-gray-300":"bg-gray-200 text-gray-600"}`,children:F[I].length})]})}),(d?p.has(I):!0)&&l.jsx("div",{className:"space-y-3",children:F[I].map((z,Q)=>l.jsxs("div",{className:`relative border-l-4 p-4 rounded-lg transition-all hover:shadow-sm ${k(z.action)} ${e?"border-gray-700":"border-gray-200"}`,children:[l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"flex-shrink-0 mt-0.5",children:N(z.action)}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-medium ${e?"bg-gray-700 text-gray-300":"bg-gray-200 text-gray-700"}`,children:y[z.userId]?l.jsxs("span",{children:[y[z.userId].firstName[0],y[z.userId].lastName[0]]}):l.jsx(As,{className:"w-4 h-4"})}),l.jsx("div",{className:"flex-1",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:`text-sm font-medium ${e?"text-white":"text-gray-900"}`,children:y[z.userId]?`${y[z.userId].firstName} ${y[z.userId].lastName}`:z.userId}),l.jsx("span",{className:`text-sm ${e?"text-gray-300":"text-gray-700"}`,children:O(z.action)})]})}),l.jsx("div",{className:"flex items-center gap-1",children:l.jsx(ct,{variant:"ghost",size:"sm",onClick:()=>C(z.id),className:"p-1 h-6 w-6",children:_.has(z.id)?l.jsx(Rge,{className:"w-3 h-3"}):l.jsx(KP,{className:"w-3 h-3"})})})]}),z.details&&l.jsx("p",{className:`text-sm mb-2 ${e?"text-gray-300":"text-gray-700"}`,children:z.details}),_.has(z.id)&&z.metadata&&l.jsx("div",{className:`mb-2 p-2 rounded text-xs ${e?"bg-gray-700 text-gray-300":"bg-gray-100 text-gray-600"}`,children:l.jsx("pre",{className:"whitespace-pre-wrap",children:JSON.stringify(z.metadata,null,2)})}),l.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[l.jsx(fp,{className:`w-3 h-3 ${e?"text-gray-500":"text-gray-400"}`}),l.jsx("span",{className:e?"text-gray-400":"text-gray-500",children:S(z.timestamp)}),l.jsx("span",{className:e?"text-gray-500":"text-gray-400",children:"•"}),l.jsx("span",{className:e?"text-gray-400":"text-gray-500",children:new Date(z.timestamp).toLocaleString()})]})]})]}),Q<F[I].length-1&&l.jsx("div",{className:`absolute left-6 top-16 w-px h-8 ${e?"bg-gray-700":"bg-gray-200"}`})]},z.id))})]},I))})]})},x1e=({taskId:t,isOpen:e,onClose:n})=>{const{triggerUserProfileRefresh:r}=ph(),[s,i]=v.useState(null),[a,o]=v.useState(!1),[c,d]=v.useState(""),[h,p]=v.useState(!1),[m,y]=v.useState("overview"),[x,_]=v.useState({}),[w,N]=v.useState(!1),[k,S]=v.useState("");_u(k||void 0);const[O,R]=v.useState(""),M=v.useRef(!1),[P,C]=v.useState({isOpen:!1,title:"",message:"",onConfirm:()=>{}}),[D,$]=v.useState({isVisible:!1,message:"",type:"error"}),[F,U]=v.useState(!1),[I,z]=v.useState(0),[Q,ne]=v.useState(!1),[W,K]=v.useState(!1),Y=v.useRef(null),G=le=>{const Ne=Date.now(),Se=Y.current;if(Se&&Se.taskId===le.id&&Ne-Se.timestamp<100)return;Y.current={taskId:le.id,timestamp:Ne};const ae=new CustomEvent("taskUpdated",{detail:le});window.dispatchEvent(ae)};v.useEffect(()=>{p(document.documentElement.classList.contains("dark"))},[]),v.useEffect(()=>{const le=()=>{ne(window.innerWidth<768)};return le(),window.addEventListener("resize",le),()=>window.removeEventListener("resize",le)},[]),v.useEffect(()=>{e&&t?(q(),y("overview")):e||(M.current=!1)},[e,t]),v.useEffect(()=>{s?.comments&&z(s.comments.length)},[s?.comments]);const q=async()=>{if(!M.current){M.current=!0,o(!0),d("");try{const le=await gt.getTaskDetails(t);if(i(le),le.task.projectId){const Ne=await Uc.getById(le.task.projectId);S(Ne.facilityId),Ne.creatorId&&R(Ne.creatorId)}}catch(le){const Ne=le.response?.status===429?"Too many requests. Please wait a moment and try again.":"Failed to load task details";d(Ne),console.error(le)}finally{o(!1),M.current=!1}}},Z=(le,Ne)=>{_(Se=>({...Se,[le]:Ne}))},ge=async(le,Ne)=>{if(s)try{_(ke=>({...ke,[le]:Ne}));const Se=await gt.update(s.task.id,{[le]:Ne}),ae={...s.task,[le]:Ne,updatedAt:Se.updatedAt};i(ke=>ke&&{...ke,task:ae}),G(ae),le==="assignees"&&r(Array.isArray(Ne)?Ne:[Ne]),$({isVisible:!0,message:"Task updated successfully",type:"success"})}catch(Se){console.error("Failed to save field change:",Se),$({isVisible:!0,message:"Failed to save changes",type:"error"})}},Le=async le=>{if(s){N(!0);try{const Ne=await gt.update(s.task.id,{title:le});await q(),G({...s.task,title:le,updatedAt:Ne.updatedAt}),$({isVisible:!0,message:"Title updated",type:"success"})}catch(Ne){console.error("Failed to update title:",Ne),$({isVisible:!0,message:"Failed to update title",type:"error"})}finally{N(!1)}}},Pe=async le=>{if(s)try{const Ne=await gt.update(s.task.id,{status:le});await q(),G({...s.task,status:le,updatedAt:Ne.updatedAt}),$({isVisible:!0,message:"Status updated",type:"success"})}catch(Ne){console.error("Failed to update status:",Ne),$({isVisible:!0,message:"Failed to update status",type:"error"})}},Ue=async le=>{if(s)try{const Ne=await gt.pin(s.task.id,le);await q(),G({...s.task,pinned:le,updatedAt:Ne.updatedAt}),$({isVisible:!0,message:le?"Task pinned successfully!":"Task unpinned successfully!",type:"success"})}catch(Ne){console.error("Failed to pin task:",Ne),$({isVisible:!0,message:"Failed to update pin status",type:"error"})}},V=()=>{U(!0)},ee=async()=>{if(s)try{await gt.delete(s.task.id),U(!1),n();const le=new CustomEvent("taskDeleted",{detail:{taskId:s.task.id}});window.dispatchEvent(le),$({isVisible:!0,message:"Task deleted successfully!",type:"success"})}catch(le){console.error("Failed to delete task:",le),$({isVisible:!0,message:"Failed to delete task",type:"error"})}},X=()=>{U(!1)},te=(le,Ne,Se,ae,ke)=>{C({isOpen:!0,title:le,message:Ne,onConfirm:Se,confirmText:ae,cancelText:ke})},he=(le,Ne="error")=>{$({isVisible:!0,message:le,type:Ne==="success"?"success":"error"})},ie=async()=>{if(s&&Object.keys(x).length>0)try{const le=await gt.update(s.task.id,x),Ne={...s.task,...x,updatedAt:le.updatedAt};i(Se=>Se&&{...Se,task:Ne}),G(Ne),$({isVisible:!0,message:"Changes saved",type:"success"})}catch(le){console.error("Failed to save changes before closing:",le),$({isVisible:!0,message:"Failed to save changes",type:"error"})}_({}),n()};return e?l.jsxs("div",{className:"fixed inset-0 z-[5000] flex items-center justify-center p-4",children:[l.jsx("div",{className:"absolute inset-0 bg-black/60",onClick:ie}),l.jsxs("div",{className:`relative z-10 w-full max-w-6xl h-[90vh] max-h-[800px] rounded-lg overflow-hidden flex flex-col ${h?"bg-gray-900 text-white":"bg-white text-gray-900"}`,onClick:le=>le.stopPropagation(),children:[a?l.jsx("div",{className:"flex items-center justify-center p-10",children:l.jsx(xW,{})}):c?l.jsx("div",{className:"p-4",children:l.jsx(wye,{title:"Error",message:c})}):s?l.jsxs(Qr,{requiredPermission:"tasks.view_all",facilityId:k,fallback:l.jsxs("div",{className:"p-8 text-center",children:[l.jsx("div",{className:"text-4xl mb-4",children:"🔒"}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Access Restricted"}),l.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"You don't have permission to view task details."}),l.jsx("button",{onClick:n,className:"mt-4 px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded-md hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Close"})]}),children:[l.jsx(Eye,{task:s.task,onClose:ie,isDarkMode:h,editedTask:x,onFieldChange:Z,onSaveTitle:Le,onStatusChange:Pe,onPinChange:Ue,onDeleteClick:V}),l.jsx("div",{className:`sticky top-[64px] z-30 px-4 sm:px-6 border-b ${h?"border-gray-700 bg-gray-900/95 backdrop-blur":"border-gray-200 bg-white/95 backdrop-blur"}`,children:l.jsxs("div",{className:"flex items-center justify-between py-2",children:[l.jsxs("button",{className:`flex items-center justify-center gap-1 sm:gap-2 px-2 sm:px-3 py-2 text-xs sm:text-sm rounded-md whitespace-nowrap flex-1 ${m==="overview"?"bg-brand text-white":h?"text-gray-300 hover:bg-gray-800":"text-gray-700 hover:bg-gray-100"}`,onClick:()=>y("overview"),children:[l.jsx(s_,{className:"w-3 h-3 sm:w-4 sm:h-4"}),l.jsx("span",{className:"hidden sm:inline",children:"Overview"}),l.jsx("span",{className:"sm:hidden",children:"Overview"})]}),l.jsx(Qr,{requiredPermission:"comments.add",facilityId:k,fallback:l.jsxs("button",{disabled:!0,className:`flex items-center justify-center gap-1 sm:gap-2 px-2 sm:px-3 py-2 text-xs sm:text-sm rounded-md whitespace-nowrap flex-1 opacity-50 cursor-not-allowed ${h?"text-gray-500":"text-gray-400"}`,title:"No permission to view comments",children:[l.jsx(Qc,{className:"w-3 h-3 sm:w-4 sm:h-4"}),l.jsx("span",{children:"Comments"})]}),children:l.jsxs("button",{className:`flex items-center justify-center gap-1 sm:gap-2 px-2 sm:px-3 py-2 text-xs sm:text-sm rounded-md whitespace-nowrap flex-1 ${m==="comments"?"bg-green-600 text-white":h?"text-gray-300 hover:bg-gray-800":"text-gray-700 hover:bg-gray-100"}`,onClick:()=>y("comments"),children:[l.jsx(Qc,{className:"w-3 h-3 sm:w-4 sm:h-4"}),l.jsx("span",{children:"Comments"}),I>0&&l.jsx("span",{className:`ml-1 text-xs px-1.5 py-0.5 rounded-full ${m==="comments"?"bg-green-500 text-white":h?"bg-gray-700 text-gray-300":"bg-gray-200 text-gray-700"}`,children:I})]})}),l.jsx(Qr,{requiredPermission:"attachments.add",facilityId:k,fallback:l.jsxs("button",{disabled:!0,className:`flex items-center justify-center gap-1 sm:gap-2 px-2 sm:px-3 py-2 text-xs sm:text-sm rounded-md whitespace-nowrap flex-1 opacity-50 cursor-not-allowed ${h?"text-gray-500":"text-gray-400"}`,title:"No permission to view attachments",children:[l.jsx(pp,{className:"w-3 h-3 sm:w-4 sm:h-4"}),l.jsx("span",{className:"hidden sm:inline",children:"Attachments"}),l.jsx("span",{className:"sm:hidden",children:"Files"})]}),children:l.jsxs("button",{className:`flex items-center justify-center gap-1 sm:gap-2 px-2 sm:px-3 py-2 text-xs sm:text-sm rounded-md whitespace-nowrap flex-1 ${m==="attachments"?"bg-brand text-white":h?"text-gray-300 hover:bg-gray-800":"text-gray-700 hover:bg-gray-100"}`,onClick:()=>y("attachments"),children:[l.jsx(pp,{className:"w-3 h-3 sm:w-4 sm:h-4"}),l.jsx("span",{className:"hidden sm:inline",children:"Attachments"}),l.jsx("span",{className:"sm:hidden",children:"Files"}),s.attachments?.length>0&&l.jsx("span",{className:`ml-1 text-xs px-1.5 py-0.5 rounded-full ${h?"bg-gray-700 text-gray-300":"bg-gray-200 text-gray-700"}`,children:s.attachments.length})]})}),l.jsxs("button",{className:`flex items-center justify-center gap-1 sm:gap-2 px-2 sm:px-3 py-2 text-xs sm:text-sm rounded-md whitespace-nowrap flex-1 ${m==="dependencies"?"bg-brand text-white":h?"text-gray-300 hover:bg-gray-800":"text-gray-700 hover:bg-gray-100"}`,onClick:()=>y("dependencies"),children:[l.jsx(Od,{className:"w-3 h-3 sm:w-4 sm:h-4"}),l.jsx("span",{className:"hidden sm:inline",children:"Dependencies"}),l.jsx("span",{className:"sm:hidden",children:"Deps"}),s.dependencies?.length>0&&l.jsx("span",{className:`ml-1 text-xs px-1.5 py-0.5 rounded-full ${h?"bg-gray-700 text-gray-300":"bg-gray-200 text-gray-700"}`,children:s.dependencies.length})]}),l.jsxs("button",{className:`flex items-center justify-center gap-1 sm:gap-2 px-2 sm:px-3 py-2 text-xs sm:text-sm rounded-md whitespace-nowrap flex-1 ${m==="subtasks"?"bg-brand text-white":h?"text-gray-300 hover:bg-gray-800":"text-gray-700 hover:bg-gray-100"}`,onClick:()=>y("subtasks"),children:[l.jsx(bl,{className:"w-3 h-3 sm:w-4 sm:h-4"}),l.jsx("span",{className:"hidden sm:inline",children:"Subtasks"}),l.jsx("span",{className:"sm:hidden",children:"Tasks"}),s.subtasks?.length>0&&l.jsx("span",{className:`ml-1 text-xs px-1.5 py-0.5 rounded-full ${h?"bg-gray-700 text-gray-300":"bg-gray-200 text-gray-700"}`,children:s.subtasks.length})]}),l.jsx(Qr,{requiredPermission:"time_logs.view_all",facilityId:k,fallback:l.jsxs("button",{disabled:!0,className:`flex items-center justify-center gap-1 sm:gap-2 px-2 sm:px-3 py-2 text-xs sm:text-sm rounded-md whitespace-nowrap flex-1 opacity-50 cursor-not-allowed ${h?"text-gray-500":"text-gray-400"}`,title:"No permission to view time logs",children:[l.jsx(sr,{className:"w-3 h-3 sm:w-4 sm:h-4"}),l.jsx("span",{className:"hidden sm:inline",children:"Time Logs"}),l.jsx("span",{className:"sm:hidden",children:"Time"})]}),children:l.jsxs("button",{className:`flex items-center justify-center gap-1 sm:gap-2 px-2 sm:px-3 py-2 text-xs sm:text-sm rounded-md whitespace-nowrap flex-1 ${m==="timelogs"?"bg-brand text-white":h?"text-gray-300 hover:bg-gray-800":"text-gray-700 hover:bg-gray-100"}`,onClick:()=>y("timelogs"),children:[l.jsx(sr,{className:"w-3 h-3 sm:w-4 sm:h-4"}),l.jsx("span",{className:"hidden sm:inline",children:"Time Logs"}),l.jsx("span",{className:"sm:hidden",children:"Time"}),s.timeLogs?.length>0&&l.jsx("span",{className:`ml-1 text-xs px-1.5 py-0.5 rounded-full ${h?"bg-gray-700 text-gray-300":"bg-gray-200 text-gray-700"}`,children:s.timeLogs.length})]})}),l.jsxs("button",{className:`flex items-center justify-center gap-1 sm:gap-2 px-2 sm:px-3 py-2 text-xs sm:text-sm rounded-md whitespace-nowrap flex-1 ${m==="activity"?"bg-brand text-white":h?"text-gray-300 hover:bg-gray-800":"text-gray-700 hover:bg-gray-100"}`,onClick:()=>y("activity"),children:[l.jsx(nb,{className:"w-3 h-3 sm:w-4 sm:h-4"}),l.jsx("span",{className:"hidden sm:inline",children:"Activity"}),l.jsx("span",{className:"sm:hidden",children:"Log"}),s.activityLogs?.length>0&&l.jsx("span",{className:`ml-1 text-xs px-1.5 py-0.5 rounded-full ${h?"bg-gray-700 text-gray-300":"bg-gray-200 text-gray-700"}`,children:s.activityLogs.length})]})]})}),l.jsxs("div",{className:"flex-1 overflow-y-auto",children:[m==="overview"&&l.jsx(c1e,{task:s.task,isDarkMode:h,editedTask:x,onFieldChange:Z,onFieldChangeAndSave:ge,comments:s.comments,activityLogs:s.activityLogs,onSwitchToComments:()=>y("comments"),subtasks:s.subtasks,facilityId:k,excludeUserId:O,dependencies:s.dependencies,onSwitchToDependencies:()=>y("dependencies"),onSwitchToSubtasks:()=>y("subtasks")}),m==="comments"&&l.jsx(d1e,{taskId:s.task.id,isDarkMode:h,onShowWarning:he,onCountChange:le=>z(le)}),m==="attachments"&&l.jsx(p1e,{taskId:s.task.id,attachments:s.attachments,isDarkMode:h,onRefresh:q,onShowWarning:he,onShowConfirmation:(le,Ne,Se,ae,ke)=>te(le,Ne,Se,ae,ke)}),m==="dependencies"&&l.jsx(m1e,{taskId:s.task.id,dependencies:s.dependencies,isDarkMode:h,onShowWarning:he,onShowConfirmation:(le,Ne,Se,ae,ke)=>te(le,Ne,Se,ae,ke),onRefresh:q}),m==="subtasks"&&l.jsx(g1e,{subtasks:s.subtasks,taskId:s.task.id,isDarkMode:h,onShowWarning:he,onShowConfirmation:(le,Ne,Se,ae,ke)=>te(le,Ne,Se,ae,ke),onRefresh:q}),m==="timelogs"&&l.jsx(y1e,{timeLogs:s.timeLogs,isDarkMode:h,taskId:s.task.id,onShowWarning:he,onTimeLogsUpdate:q,onShowConfirmation:te}),m==="activity"&&l.jsx(v1e,{activityLogs:s.activityLogs,isDarkMode:h,onShowWarning:he})]})]}):null,l.jsx(lw,{isOpen:P.isOpen,title:P.title,message:P.message,confirmText:P.confirmText,cancelText:P.cancelText,onConfirm:()=>{P.onConfirm?.(),C(le=>({...le,isOpen:!1}))},onCancel:()=>C(le=>({...le,isOpen:!1}))}),D.isVisible&&l.jsx(id,{message:D.message,onClose:()=>$(le=>({...le,isVisible:!1})),type:D.type==="success"?"success":"error"}),l.jsx(lw,{isOpen:F,title:"Delete Task",message:`Are you sure you want to delete "${s?.task.title}"? This action cannot be undone.`,confirmText:"Delete",cancelText:"Cancel",onConfirm:ee,onCancel:X,variant:"danger"})]})]}):null},j5=["manager","member","guest"],ff={owner:"Owner",manager:"Manager",member:"Member",guest:"Guest"},b1e=({isOpen:t,onClose:e,facilityId:n,isDarkMode:r})=>{const{refreshFacilities:s}=Z1(),{triggerMemberRefresh:i}=ph(),[a,o]=v.useState("members"),[c,d]=v.useState(""),[h,p]=v.useState("member"),[m,y]=v.useState([]),[x,_]=v.useState([]),[w,N]=v.useState(null),[k,S]=v.useState([]),[O,R]=v.useState([]),[M,P]=v.useState(!1),[C,D]=v.useState(!1),$=v.useRef(null),F=v.useRef(null),[U,I]=v.useState(!1),[z,Q]=v.useState(!1),[ne,W]=v.useState(!1),[K,Y]=v.useState(!1),[G,q]=v.useState(null),[Z,ge]=v.useState(null);v.useEffect(()=>{t&&n&&(Le(),Pe(),Ue())},[t,n]),v.useEffect(()=>{if(G||Z){const ce=setTimeout(()=>{q(null),ge(null)},5e3);return()=>clearTimeout(ce)}},[G,Z]),v.useEffect(()=>{const ce=Ee=>{F.current&&!F.current.contains(Ee.target)&&D(!1)};return document.addEventListener("mousedown",ce),()=>document.removeEventListener("mousedown",ce)},[]),v.useEffect(()=>()=>{$.current&&clearTimeout($.current)},[]);const Le=async()=>{Q(!0);try{const Ee=(await On.getFacilityMembers(n)).members.reduce((Fe,ut)=>(Fe.find(Pt=>Pt.id===ut.id)||Fe.push(ut),Fe),[]);y(Ee)}catch(ce){q(ce.message)}finally{Q(!1)}},Pe=async()=>{W(!0);try{const ce=await On.getJoinRequests(n);_(ce.joinRequests)}catch(ce){q(ce.message)}finally{W(!1)}},Ue=async()=>{Y(!0);try{const ce=await On.getShareLink(n);N(ce.shareLink)}catch(ce){ce.message.includes("No active share link found")||q(ce.message)}finally{Y(!1)}},V=async ce=>{const Ee=ce.target.value;if(d(Ee),q(null),$.current&&clearTimeout($.current),Ee.trim().length<2){S([]),D(!1);return}$.current=setTimeout(async()=>{P(!0);try{const Fe=await On.searchUsers(Ee.trim());S(Fe.users),D(!0)}catch(Fe){console.error("Error searching users:",Fe),S([])}finally{P(!1)}},300)},ee=ce=>{const Ee={id:ce.id,email:ce.email,name:ce.name,role:h,isExistingUser:!0,avatarColor:ce.avatarColor};O.find(Fe=>Fe.email===ce.email)||R([...O,Ee]),d(""),S([]),D(!1)},X=()=>{const ce=c.trim();if(!ce)return;if(!On.validateEmail(ce)){q("Please enter a valid email address");return}if(O.find(Fe=>Fe.email===ce)){q("This email is already added");return}const Ee={email:ce,name:ce.split("@")[0],role:h,isExistingUser:!1};R([...O,Ee]),d(""),q(null)},te=ce=>{R(O.filter(Ee=>Ee.email!==ce))},he=async()=>{if(O.length===0&&!c.trim()){q("Please select at least one user to invite or enter an email address");return}I(!0),q(null),ge(null);try{let ce=[...O];if(c.trim()){if(!On.validateEmail(c.trim())){q("Please enter a valid email address"),I(!1);return}ce.push({email:c.trim(),name:c.split("@")[0],role:h,isExistingUser:!1})}const Ee=await Promise.allSettled(ce.map(Pt=>On.sendInvitation(n,Pt.email,Pt.role))),Fe=Ee.filter(Pt=>Pt.status==="fulfilled").length,ut=Ee.filter(Pt=>Pt.status==="rejected").length;Fe>0&&(ge(`Successfully sent ${Fe} invitation${Fe>1?"s":""}`),R([]),d(""),Le()),ut>0&&(Ee.filter(Dt=>Dt.status==="rejected").map(Dt=>Dt.reason?.message||Dt.reason).filter(Dt=>Dt&&Dt.includes("already sent")).length>0?q("Some invitations were already sent to these users. Please check the email addresses."):q(`Failed to send ${ut} invitation${ut>1?"s":""}`))}catch(ce){q(ce.message||"Failed to send invitations")}finally{I(!1)}},ie=async()=>{if(!(!w||!confirm("Are you sure you want to delete this share link?")))try{await On.deactivateShareLink(n),N(null),ge("Share link deleted successfully!")}catch(ce){q(ce.message)}},le=async()=>{Y(!0);try{const ce=await On.generateShareLink(n,h);N(ce.shareLink),ge("Share link generated successfully!")}catch(ce){q(ce.message)}finally{Y(!1)}},Ne=async()=>{if(w)try{await On.copyLinkToClipboard(w.url),ge("Link copied to clipboard!")}catch{q("Failed to copy link to clipboard")}},Se=async ce=>{if(w)try{await On.updateShareLinkRole(n,ce),N({...w,role:ce}),ge("Share link role updated successfully!")}catch(Ee){q(Ee.message)}},ae=async(ce,Ee="member")=>{try{await On.approveJoinRequest(n,ce,Ee),ge("Join request approved successfully!"),await s(),Pe(),Le()}catch(Fe){q(Fe.message)}},ke=async ce=>{try{await On.rejectJoinRequest(n,ce),ge("Join request rejected successfully!"),Pe()}catch(Ee){q(Ee.message)}};return t?l.jsx("div",{className:"fixed inset-0 z-[5000] flex items-center justify-center bg-black bg-opacity-60",children:l.jsxs("div",{className:`w-full max-w-lg mx-4 rounded-lg shadow-2xl ${r?"bg-gray-900 text-white":"bg-white text-gray-900"}`,children:[l.jsxs("div",{className:`px-6 py-3 border-b flex items-center justify-between ${r?"border-gray-700":"border-gray-300"}`,children:[l.jsx("h2",{className:"text-lg font-semibold",children:"Share facility"}),l.jsx("button",{onClick:e,"aria-label":"Close modal",className:`p-2 rounded-md transition-colors ${r?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:l.jsx(yn,{size:20})})]}),(G||Z)&&l.jsxs("div",{className:`px-6 py-3 border-b ${r?"border-gray-700":"border-gray-300"}`,children:[G&&l.jsxs("div",{className:"flex items-center space-x-2 text-red-500 text-sm",children:[l.jsx(em,{size:16}),l.jsx("span",{children:G})]}),Z&&l.jsxs("div",{className:"flex items-center space-x-2 text-green-500 text-sm",children:[l.jsx(Mi,{size:16}),l.jsx("span",{children:Z})]})]}),l.jsxs("div",{className:`p-6 border-b ${r?"border-gray-700":"border-gray-300"}`,children:[O.length>0&&l.jsxs("div",{className:"mb-4",children:[l.jsxs("p",{className:`text-sm font-medium mb-2 ${r?"text-gray-300":"text-gray-700"}`,children:["Selected users (",O.length,"):"]}),l.jsx("div",{className:"flex flex-wrap gap-2",children:O.map(ce=>l.jsxs("div",{className:`flex items-center space-x-2 px-3 py-1 rounded-full text-sm ${r?"bg-gray-700 text-white":"bg-gray-100 text-gray-900"}`,children:[l.jsx("div",{className:"w-5 h-5 rounded-full flex items-center justify-center text-xs font-semibold text-white bg-gray-500 dark:bg-gray-600",children:ce.name.charAt(0).toUpperCase()}),l.jsx("span",{children:ce.name}),l.jsxs("span",{className:`text-xs ${r?"text-gray-400":"text-gray-500"}`,children:["(",ff[ce.role],")"]}),!ce.isExistingUser&&l.jsx("span",{className:`text-xs px-1 rounded ${r?"bg-yellow-800 text-yellow-200":"bg-yellow-100 text-yellow-800"}`,children:"New"}),l.jsx("button",{onClick:()=>te(ce.email),className:`ml-1 hover:bg-red-500 hover:text-white rounded-full p-0.5 ${r?"text-gray-400":"text-gray-500"}`,children:l.jsx(yn,{size:12})})]},ce.email))})]}),l.jsxs("div",{className:"relative",ref:F,children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsxs("div",{className:"relative flex-grow",children:[l.jsx(ZP,{type:"text",placeholder:"Search by email or name...",value:c,onChange:V,className:`flex-grow pr-8 ${r?"bg-gray-800 border-gray-600 text-white placeholder-gray-400":""}`,disabled:U}),M&&l.jsx("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2",children:l.jsx(Ii,{size:16,className:"animate-spin text-gray-400"})})]}),l.jsx("select",{value:h,onChange:ce=>p(ce.target.value),className:`border rounded-md px-2 py-1 text-sm focus:ring-brand ${r?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-400 text-gray-900"}`,disabled:U,children:j5.map(ce=>l.jsx("option",{value:ce,children:ff[ce]},ce))}),l.jsxs(ct,{variant:"primary",size:"sm",disabled:O.length===0&&!c.trim()||U,className:"bg-green-600 hover:bg-green-700 focus:ring-green-500",onClick:he,children:[U?l.jsx(Ii,{size:16,className:"animate-spin"}):l.jsx(yW,{size:16}),"Invite ",O.length>0||c.trim()?`(${O.length+(c.trim()?1:0)})`:""]})]}),C&&(k.length>0||c.trim().length>=2)&&l.jsxs("div",{className:`absolute top-full left-0 right-0 mt-1 rounded-md shadow-lg z-[5001] max-h-60 overflow-y-auto ${r?"bg-gray-800 border border-gray-600":"bg-white border border-gray-300"}`,children:[k.length>0?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:`px-3 py-2 text-xs font-medium ${r?"text-gray-400 bg-gray-700":"text-gray-500 bg-gray-50"}`,children:"Existing Users"}),k.map(ce=>l.jsxs("button",{onClick:()=>ee(ce),className:`w-full px-3 py-2 text-left hover:bg-opacity-50 flex items-center space-x-3 ${r?"hover:bg-gray-700":"hover:bg-gray-100"}`,disabled:O.some(Ee=>Ee.email===ce.email),children:[l.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center text-xs font-semibold text-white bg-gray-500 dark:bg-gray-600",children:ce.name.charAt(0).toUpperCase()}),l.jsxs("div",{className:"flex-grow",children:[l.jsx("p",{className:"text-sm font-medium",children:ce.name}),l.jsx("p",{className:`text-xs ${r?"text-gray-400":"text-gray-500"}`,children:ce.email})]}),O.some(Ee=>Ee.email===ce.email)&&l.jsx(Mi,{size:16,className:"text-green-500"})]},`search-${ce.id}`))]}):null,c.trim().length>=2&&On.validateEmail(c.trim())&&!k.some(ce=>ce.email.toLowerCase()===c.toLowerCase().trim())&&l.jsxs(l.Fragment,{children:[k.length>0&&l.jsx("div",{className:`border-t ${r?"border-gray-600":"border-gray-200"}`}),l.jsx("div",{className:`px-3 py-2 text-xs font-medium ${r?"text-gray-400 bg-gray-700":"text-gray-500 bg-gray-50"}`,children:"New User"}),l.jsxs("button",{onClick:X,className:`w-full px-3 py-2 text-left hover:bg-opacity-50 flex items-center space-x-3 ${r?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:[l.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center text-xs font-semibold text-white bg-gray-500",children:l.jsx(As,{size:12})}),l.jsxs("div",{className:"flex-grow",children:[l.jsx("p",{className:"text-sm font-medium",children:c.trim()}),l.jsx("p",{className:`text-xs ${r?"text-gray-400":"text-gray-500"}`,children:"It seems like this user doesn't have a Nexora account"})]})]})]}),k.length===0&&c.trim().length>=2&&!On.validateEmail(c.trim())&&l.jsx("div",{className:`px-3 py-4 text-center text-sm ${r?"text-gray-400":"text-gray-500"}`,children:"No users found. Enter a valid email address to send an invitation."})]})]})]}),l.jsx("div",{className:`p-6 border-b ${r?"border-gray-700":"border-gray-300"}`,children:K?l.jsxs("div",{className:"flex items-center justify-center py-4",children:[l.jsx(Ii,{size:20,className:"animate-spin"}),l.jsx("span",{className:"ml-2",children:"Loading share link..."})]}):w?l.jsxs("div",{className:`flex items-start justify-between ${r?"text-gray-300":"text-gray-600"} text-sm`,children:[l.jsxs("div",{className:"flex items-start space-x-2",children:[l.jsx("svg",{className:`w-6 h-6 mt-2 ${r?"text-gray-400":"text-gray-500"}`,fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),l.jsxs("div",{className:"flex flex-col space-y-1",children:[l.jsxs("span",{children:["Anyone with the link can join as a ",ff[w.role]]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsxs("button",{onClick:Ne,className:"text-blue-500 hover:underline font-medium text-xs flex items-center space-x-1",children:[l.jsx(Cge,{size:12}),l.jsx("span",{children:"Copy link"})]}),l.jsxs("button",{onClick:ie,className:"text-red-500 hover:underline dark:text-red-400 dark:hover:text-red-300 font-medium text-xs flex items-center space-x-1 transition-colors",children:[l.jsx(Vi,{size:12}),l.jsx("span",{children:"Delete link"})]})]})]})]}),l.jsx("div",{className:"flex items-center space-x-2",children:l.jsx("select",{value:w.role,onChange:ce=>Se(ce.target.value),className:`${r?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} border rounded-md px-3 py-1 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500`,children:j5.map(ce=>l.jsx("option",{value:ce,children:ff[ce]},ce))})})]}):l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:`text-sm ${r?"text-gray-400":"text-gray-500"} mb-3`,children:"No active share link. Generate one to allow others to join via link."}),l.jsx(ct,{onClick:le,variant:"secondary",size:"sm",className:"text-blue-500 border-blue-500 hover:bg-blue-50",children:"Generate Share Link"})]})}),l.jsxs("div",{className:`flex border-b ${r?"border-gray-700":"border-gray-300"} text-sm font-semibold ${r?"text-gray-300":"text-gray-600"}`,children:[l.jsxs("button",{className:`flex-1 py-2 ${a==="members"?"border-b-2 border-green-500 text-green-500":""}`,onClick:()=>o("members"),children:["Facility members (",m.length,")"]}),l.jsxs("button",{className:`flex-1 py-2 ${a==="joinRequests"?"border-b-2 border-green-500 text-green-500":""}`,onClick:()=>o("joinRequests"),children:["Join requests (",x.length,")"]})]}),l.jsx("div",{className:"flex-grow overflow-y-auto p-6 max-h-80",children:a==="members"?z?l.jsxs("div",{className:"flex items-center justify-center py-8",children:[l.jsx(Ii,{size:20,className:"animate-spin"}),l.jsx("span",{className:"ml-2",children:"Loading members..."})]}):m.length>0?l.jsxs("div",{children:[l.jsx("div",{className:`mb-4 p-3 rounded-lg ${r?"bg-blue-900/20 border border-blue-800":"bg-blue-50 border border-blue-200"}`,children:l.jsxs("p",{className:`text-sm ${r?"text-blue-300":"text-blue-700"}`,children:["💡 ",l.jsx("strong",{children:"Tip:"}),' To change member roles, use the "Manage Roles" button in the facility header for detailed role management.']})}),l.jsx("ul",{className:"space-y-3",children:m.map(ce=>l.jsxs("li",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[ce.profilePicture?l.jsx("img",{src:ce.profilePicture,alt:ce.name,className:"w-8 h-8 rounded-full object-cover",onError:Ee=>{const Fe=Ee.target;Fe.style.display="none";const ut=Fe.nextElementSibling;ut&&(ut.style.display="flex")}}):null,l.jsxs("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-semibold text-white text-xs bg-gray-500 dark:bg-gray-600 ${ce.profilePicture?"hidden":""}`,children:[ce.name.charAt(0).toUpperCase(),ce.name.charAt(1)?.toUpperCase()||""]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold",children:ce.name}),l.jsxs("p",{className:`text-xs ${r?"text-gray-400":"text-gray-500"}`,children:["@",ce.username," • ",ff[ce.role]]})]})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${ce.role==="owner"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":ce.role==="manager"?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":ce.role==="member"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"}`,children:ff[ce.role]}),ce.isOwner&&l.jsx(qP,{className:"w-4 h-4 text-yellow-500 dark:text-yellow-400"})]})]},`member-${ce.id}`))})]}):l.jsx("p",{className:`text-center ${r?"text-gray-400":"text-gray-500"}`,children:"No members found"}):ne?l.jsxs("div",{className:"flex items-center justify-center py-8",children:[l.jsx(Ii,{size:20,className:"animate-spin"}),l.jsx("span",{className:"ml-2",children:"Loading join requests..."})]}):x.length>0?l.jsx("ul",{className:"space-y-3",children:x.map(ce=>l.jsxs("li",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsxs("div",{className:"w-8 h-8 rounded-full relative overflow-hidden flex-shrink-0",children:[ce.user.profilePicture?l.jsx("img",{src:ce.user.profilePicture,alt:ce.user.name,className:"w-full h-full object-cover",onError:Ee=>{const Fe=Ee.target;Fe.style.display="none";const ut=Fe.parentElement;if(ut){const Pt=ut.querySelector(".fallback-initials");Pt&&(Pt.style.display="flex")}}}):null,l.jsxs("div",{className:`fallback-initials absolute inset-0 flex items-center justify-center font-semibold text-white text-xs bg-gray-500 dark:bg-gray-600 ${ce.user.profilePicture?"hidden":"flex"}`,children:[ce.user.name.charAt(0).toUpperCase(),ce.user.name.charAt(1)?.toUpperCase()||""]})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold",children:ce.user.name}),l.jsxs("p",{className:`text-xs ${r?"text-gray-400":"text-gray-500"}`,children:["@",ce.user.username]}),ce.message&&l.jsxs("p",{className:`text-xs ${r?"text-gray-300":"text-gray-600"} mt-1`,children:['"',ce.message,'"']})]})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(ct,{onClick:()=>ae(ce.id),variant:"secondary",size:"sm",className:"text-green-600 border-green-600 hover:bg-green-50",children:"Approve"}),l.jsx(ct,{onClick:()=>ke(ce.id),variant:"destructive",size:"sm",className:"text-red-600 border-red-600 hover:bg-red-50",children:"Reject"})]})]},ce.id))}):l.jsx("p",{className:`text-center ${r?"text-gray-400":"text-gray-500"}`,children:"No join requests"})})]})}):null},w1e=({currentProject:t,projects:e,onProjectSelect:n,isDarkMode:r,className:s=""})=>{const[i,a]=v.useState(!1),[o,c]=v.useState(""),d=v.useRef(null),h=e.filter(y=>y.title.toLowerCase().includes(o.toLowerCase()));v.useEffect(()=>{const y=x=>{d.current&&!d.current.contains(x.target)&&(a(!1),c(""))};return i&&document.addEventListener("mousedown",y),()=>document.removeEventListener("mousedown",y)},[i]),v.useEffect(()=>{const y=x=>{i&&x.key==="Escape"&&(a(!1),c(""))};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[i]);const p=y=>{n(y),a(!1),c("")},m=()=>{a(!i)};return l.jsxs("div",{className:`relative ${s}`,ref:d,children:[l.jsxs("button",{onClick:m,className:`flex items-center space-x-2 px-3 py-1.5 rounded-lg transition-all duration-200 ${i?"bg-brand text-white shadow-md":r?"bg-gray-800 text-gray-300 hover:bg-gray-700 hover:text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200 hover:text-gray-900"}`,children:[l.jsx(Ya,{className:"w-4 h-4"}),l.jsx("span",{className:"text-sm font-medium truncate max-w-32",children:t}),l.jsx(Va,{className:`w-3 h-3 transition-transform duration-200 ${i?"rotate-180":""}`})]}),i&&l.jsxs("div",{className:`absolute top-full left-0 mt-1 w-80 ${r?"bg-gray-800":"bg-white"} border ${r?"border-gray-700":"border-gray-200"} rounded-lg shadow-lg z-[9999]`,style:{position:"absolute",zIndex:9999},children:[l.jsx("div",{className:"p-3 border-b border-gray-200 dark:border-gray-700",children:l.jsxs("div",{className:"relative",children:[l.jsx(mh,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),l.jsx("input",{type:"text",placeholder:"Search projects...",value:o,onChange:y=>c(y.target.value),className:`w-full pl-10 pr-3 py-2 text-sm border-0 rounded-lg ${r?"bg-gray-700 text-white placeholder-gray-400":"bg-gray-100 text-gray-900 placeholder-gray-500"} focus:outline-none focus:ring-2 focus:ring-brand`,autoFocus:!0})]})}),l.jsx("div",{className:"max-h-64 overflow-y-auto",children:h.length===0?l.jsx("div",{className:"px-3 py-4 text-center text-gray-500 dark:text-gray-400 text-sm",children:o?"No projects found":"No projects available"}):l.jsx("div",{className:"py-1",children:h.map(y=>l.jsxs("button",{onClick:()=>p(y.id),className:`w-full flex items-center justify-between px-3 py-2 text-left hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors ${y.isActive?"bg-brand/10 text-brand dark:text-brand-light":""}`,children:[l.jsxs("div",{className:"flex items-center space-x-3 min-w-0 flex-1",children:[l.jsx(Ya,{className:`w-4 h-4 flex-shrink-0 ${y.isActive?"text-brand dark:text-brand-light":"text-gray-400 dark:text-gray-500"}`}),l.jsxs("div",{className:"min-w-0 flex-1",children:[l.jsx("div",{className:`text-sm font-medium truncate ${y.isActive?"text-brand dark:text-brand-light":r?"text-white":"text-gray-900"}`,children:y.title}),y.taskCount!==void 0&&l.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[y.taskCount," tasks"]})]})]}),y.isActive&&l.jsx("div",{className:"ml-2 text-xs text-brand dark:text-brand-light font-medium",children:"Current"})]},y.id))})}),l.jsx("div",{className:"px-3 py-2 border-t border-gray-200 dark:border-gray-700",children:l.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[h.length," project",h.length!==1?"s":""," found"]})})]})]})};class _1e{baseURL="/savedFilterViews";async getByFacility(e){try{return(await Ie.get(`${this.baseURL}/facility/${e}`)).data.data}catch(n){throw console.error("Error fetching saved filter views:",n),n}}async getById(e){try{return(await Ie.get(`${this.baseURL}/${e}`)).data.data}catch(n){throw console.error("Error fetching saved filter view:",n),n}}async getDefaultByFacility(e){try{return(await Ie.get(`${this.baseURL}/facility/${e}/default`)).data.data}catch(n){throw console.error("Error fetching default filter view:",n),n}}async create(e){try{return(await Ie.post(this.baseURL,e)).data.data}catch(n){throw console.error("Error creating saved filter view:",n),n}}async update(e,n){try{return(await Ie.put(`${this.baseURL}/${e}`,n)).data.data}catch(r){throw console.error("Error updating saved filter view:",r),r}}async setAsDefault(e){try{return(await Ie.patch(`${this.baseURL}/${e}/default`,{})).data.data}catch(n){throw console.error("Error setting filter view as default:",n),n}}async delete(e){try{await Ie.delete(`${this.baseURL}/${e}`)}catch(n){throw console.error("Error deleting saved filter view:",n),n}}async saveCurrentFilters(e,n,r,s=!1){return this.create({name:n,facilityId:e,filters:r,isDefault:s})}async applyFilterView(e){return(await this.getById(e)).filters}}const px=new _1e,E1e=({isOpen:t,onClose:e,isDarkMode:n,facilityId:r,currentFilters:s,onApplyFilters:i,onSaveCurrentFilters:a})=>{const[o,c]=v.useState([]),[d,h]=v.useState(!1),[p,m]=v.useState(""),[y,x]=v.useState(null),[_,w]=v.useState(""),[N,k]=v.useState(!1),[S,O]=v.useState(!1),[R,M]=v.useState(null),[P,C]=v.useState(null);v.useEffect(()=>{t&&r&&D()},[t,r]);const D=async()=>{k(!0),C(null);try{const K=(await px.getByFacility(r)).map(Y=>({id:Y.id,name:Y.name,filters:Y.filters,isDefault:Y.isDefault}));c(K)}catch(W){console.error("Failed to load saved filter views from server:",W);try{const K=localStorage.getItem("savedFilterViews");if(K){const Y=JSON.parse(K);c(Y),C("Using offline saved views (server unavailable)")}else c([]),C("Failed to load saved views")}catch(K){console.error("Failed to load from localStorage:",K),c([]),C("Failed to load saved views")}}finally{k(!1)}},$=async()=>{if(p.trim()){O(!0),C(null);try{const W=await px.create({name:p.trim(),facilityId:r,filters:{...s},isDefault:!1}),K={id:W.id,name:W.name,filters:W.filters,isDefault:W.isDefault};c(Y=>[...Y,K]),m(""),h(!1)}catch(W){console.error("Failed to save filter view to server:",W);try{const K={id:Date.now().toString(),name:p.trim(),filters:{...s},isDefault:!1},Y=[...o,K];c(Y),localStorage.setItem("savedFilterViews",JSON.stringify(Y)),m(""),h(!1),C("Saved locally (server unavailable)")}catch(K){console.error("Failed to save to localStorage:",K),C("Failed to save filter view")}}finally{O(!1)}}},F=W=>{i(W.filters),e()},U=async W=>{M(W),C(null);try{await px.delete(W),c(K=>K.filter(Y=>Y.id!==W))}catch(K){console.error("Failed to delete filter view from server:",K);try{const Y=o.filter(G=>G.id!==W);c(Y),localStorage.setItem("savedFilterViews",JSON.stringify(Y)),C("Deleted locally (server unavailable)")}catch(Y){console.error("Failed to delete from localStorage:",Y),C("Failed to delete filter view")}}finally{M(null)}},I=W=>{x(W.id),w(W.name)},z=async()=>{if(!(!_.trim()||!y)){O(!0),C(null);try{const W=await px.update(y,{name:_.trim()});c(K=>K.map(Y=>Y.id===y?{...Y,name:W.name}:Y)),x(null),w("")}catch(W){console.error("Failed to update filter view on server:",W);try{const K=o.map(Y=>Y.id===y?{...Y,name:_.trim()}:Y);c(K),localStorage.setItem("savedFilterViews",JSON.stringify(K)),x(null),w(""),C("Updated locally (server unavailable)")}catch(K){console.error("Failed to update localStorage:",K),C("Failed to update filter view")}}finally{O(!1)}}},Q=()=>{x(null),w("")},ne=o.some(W=>JSON.stringify(W.filters)===JSON.stringify(s));return t?l.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",children:[l.jsx("div",{className:"absolute inset-0 bg-black/20 backdrop-blur-sm",onClick:e}),l.jsxs("div",{className:`relative w-full max-w-md ${n?"bg-gray-900":"bg-white"} rounded-lg shadow-2xl border ${n?"border-gray-700":"border-gray-200"}`,children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[l.jsx("h2",{className:`text-lg font-semibold ${n?"text-white":"text-gray-900"}`,children:"Saved Filter Views"}),l.jsx("button",{onClick:e,className:`p-1 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors ${n?"text-gray-400 hover:text-gray-300":"text-gray-500 hover:text-gray-700"}`,children:l.jsx(yn,{className:"w-5 h-5"})})]}),P&&l.jsx("div",{className:"px-4 py-2 bg-red-50 dark:bg-red-900/20 border-b border-red-200 dark:border-red-800",children:l.jsxs("div",{className:"flex items-center space-x-2 text-red-600 dark:text-red-400 text-sm",children:[l.jsx(yn,{className:"w-4 h-4"}),l.jsx("span",{children:P}),l.jsx("button",{onClick:()=>C(null),className:"ml-auto text-red-500 hover:text-red-700 dark:hover:text-red-300",children:l.jsx(yn,{className:"w-3 h-3"})})]})}),l.jsxs("div",{className:"p-4",children:[!ne&&l.jsx("div",{className:"mb-4",children:d?l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("input",{type:"text",placeholder:"View name...",value:p,onChange:W=>m(W.target.value),className:`flex-1 px-3 py-2 text-sm border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand ${n?"bg-gray-800 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-900 placeholder-gray-500"}`,autoFocus:!0,onKeyDown:W=>{W.key==="Enter"?$():W.key==="Escape"&&(h(!1),m(""))}}),l.jsxs("button",{onClick:$,disabled:!p.trim()||S,className:"px-3 py-2 bg-brand text-white rounded-lg hover:bg-brand-dark disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm flex items-center space-x-1",children:[S&&l.jsx(Ii,{className:"w-3 h-3 animate-spin"}),l.jsx("span",{children:S?"Saving...":"Save"})]}),l.jsx("button",{onClick:()=>{h(!1),m("")},className:"px-3 py-2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 transition-colors text-sm",children:"Cancel"})]}):l.jsxs("button",{onClick:()=>h(!0),className:"w-full flex items-center justify-center space-x-2 px-3 py-2 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg hover:border-brand hover:bg-brand/5 transition-colors text-sm text-gray-700 dark:text-gray-300",children:[l.jsx(Ps,{className:"w-4 h-4"}),l.jsx("span",{children:"Save current filters as view"})]})}),l.jsx("div",{className:"space-y-2",children:N?l.jsxs("div",{className:"flex items-center justify-center py-8 text-gray-500 dark:text-gray-400 text-sm",children:[l.jsx(Ii,{className:"w-4 h-4 animate-spin mr-2"}),"Loading saved views..."]}):o.length===0?l.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400 text-sm",children:"No saved views yet"}):o.map(W=>l.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border ${n?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"}`,children:[l.jsx("div",{className:"flex-1 min-w-0",children:y===W.id?l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("input",{type:"text",value:_,onChange:K=>w(K.target.value),className:`flex-1 px-2 py-1 text-sm border rounded focus:outline-none focus:ring-1 focus:ring-brand ${n?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,autoFocus:!0,onKeyDown:K=>{K.key==="Enter"?z():K.key==="Escape"&&Q()}}),l.jsxs("button",{onClick:z,disabled:S,className:"px-2 py-1 bg-brand text-white rounded text-xs hover:bg-brand-dark disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center space-x-1",children:[S&&l.jsx(Ii,{className:"w-3 h-3 animate-spin"}),l.jsx("span",{children:S?"Saving...":"Save"})]}),l.jsx("button",{onClick:Q,className:"px-2 py-1 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 transition-colors text-xs",children:"Cancel"})]}):l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(uW,{className:"w-4 h-4 text-brand flex-shrink-0"}),l.jsx("span",{className:`text-sm font-medium truncate ${n?"text-white":"text-gray-900"}`,children:W.name})]})}),y!==W.id&&l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx("button",{onClick:()=>F(W),className:"p-1 text-brand hover:bg-brand/10 rounded transition-colors",title:"Apply view",children:l.jsx(age,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>I(W),className:"p-1 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors",title:"Edit view",children:l.jsx(mp,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>U(W.id),disabled:R===W.id,className:"p-1 text-red-500 hover:text-red-700 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Delete view",children:R===W.id?l.jsx(Ii,{className:"w-4 h-4 animate-spin"}):l.jsx(Vi,{className:"w-4 h-4"})})]})]},W.id))})]}),l.jsx("div",{className:"px-4 py-3 border-t border-gray-200 dark:border-gray-700",children:l.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[o.length," saved view",o.length!==1?"s":""]})})]})]}):null},N1e=({isDarkMode:t=!1,facilityId:e})=>{const{userRole:n,loading:r}=JP(e);if(r||!n)return null;const s=()=>{switch(n){case"owner":return l.jsx(qP,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"});case"manager":return l.jsx(XP,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"});case"member":return l.jsx(As,{className:"w-4 h-4 text-green-600 dark:text-green-400"});case"guest":return l.jsx(_0,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"});default:return l.jsx(As,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})}};return l.jsxs("div",{className:"flex items-center gap-1",children:[s(),l.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:n.charAt(0).toUpperCase()+n.slice(1)})]})},S1e=({facility:t,projectsCount:e,memberCount:n,filteredProjectsCount:r,searchTerm:s,setSearchTerm:i,filter:a,setFilter:o,isDarkMode:c,totalTasks:d=0,completedTasks:h=0,overdueTasks:p=0,onInviteMember:m,assigneeFilter:y="all",setAssigneeFilter:x,tagFilter:_="all",setTagFilter:w,priorityFilter:N="all",setPriorityFilter:k,availableAssignees:S=[],availableTags:O=[],projects:R=[],selectedProjectId:M,onProjectSelect:P,onApplyFilters:C,isCollapsed:D=!1,onToggleCollapse:$,onManageRoles:F})=>{const{memberRefreshTriggers:U}=ph();_u();const[I,z]=v.useState(!1),[Q,ne]=v.useState([]),[W,K]=v.useState(!1),[Y,G]=v.useState(!1),[q,Z]=v.useState(!1),[ge,Le]=v.useState(!1),[Pe,Ue]=v.useState([]),[V,ee]=v.useState(!1),[X,te]=v.useState({openTaskCount:0,completionPercentage:0,nearestDueDate:null}),[he,ie]=v.useState(!1),[le,Ne]=v.useState(!1),[Se,ae]=v.useState(!1),ke=d>0?Math.round(h/d*100):0;v.useEffect(()=>{(async()=>{if(t?.id){K(!0);try{const Fe=await Gr.getFacilityMembers(t.id);ne(Fe)}catch(Fe){console.error("Failed to fetch facility members:",Fe)}finally{K(!1)}}})()},[t?.id,U[t?.id||""]]),v.useEffect(()=>{te({openTaskCount:d-h,completionPercentage:ke,nearestDueDate:null})},[d,h,ke]),v.useEffect(()=>{(async()=>{if(t?.id){ee(!0);try{const Fe=await Gr.getFacilityTags(t.id);Ue(Fe)}catch(Fe){console.error("Failed to fetch facility tags:",Fe),Ue([])}finally{ee(!1)}}})()},[t?.id]),v.useEffect(()=>{const Ee=Fe=>{Fe.target.closest(".filter-dropdown")||(G(!1),Z(!1),Le(!1))};return document.addEventListener("mousedown",Ee),()=>document.removeEventListener("mousedown",Ee)},[]);const ce=a!=="all"||y!=="all"||_!=="all"||N!=="all";return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:`border-b ${c?"border-gray-700 bg-gray-800":"border-gray-200 bg-white"} transition-all duration-300 relative z-[1000]`,style:{margin:0,padding:0,width:"100%",height:D?"60px":"auto",maxHeight:D?"60px":"none",zIndex:1e3},children:[l.jsxs("div",{className:`flex items-center justify-between px-6 transition-all duration-300 ${D?"py-2":"py-3"}`,children:[l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx(w1e,{currentProject:M&&R.find(Ee=>Ee.id===M)?.title||t.name,projects:R,onProjectSelect:P||(()=>{}),isDarkMode:c}),!D&&l.jsx("div",{className:"flex items-center space-x-2 px-3 py-1 bg-gray-100 dark:bg-gray-700 rounded-full",children:l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsxs("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-300",children:[ke,"%"]}),l.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"·"}),l.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[X.openTaskCount," open"]})]})})]}),!D&&l.jsx("div",{className:"flex-1 max-w-md mx-6",children:l.jsxs("div",{className:"relative",children:[l.jsx(mh,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 z-10"}),l.jsx("input",{type:"text",placeholder:"Search tasks and projects...",value:s,onChange:Ee=>i(Ee.target.value),className:"w-full pl-10 pr-4 py-2 text-sm border-0 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm hover:shadow-md focus:ring-2 focus:ring-brand focus:shadow-lg focus:outline-none transition-all duration-200"})]})}),l.jsxs("div",{className:"flex items-center space-x-3",children:[!D&&l.jsxs("button",{onClick:()=>ae(!0),className:"flex items-center space-x-1 px-3 py-1.5 text-xs font-medium rounded-lg transition-all duration-200 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600",children:[l.jsx(uW,{className:"w-3 h-3"}),l.jsx("span",{children:"Views"})]}),!D&&l.jsxs("button",{onClick:()=>Ne(!le),className:`flex items-center space-x-1 px-3 py-1.5 text-xs font-medium rounded-lg transition-all duration-200 ${ce?"bg-brand text-white shadow-md":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[l.jsx(YP,{className:"w-3 h-3"}),l.jsx("span",{children:"Filters"}),ce&&l.jsx("span",{className:"ml-1 text-xs px-1.5 py-0.5 bg-white/20 rounded-full",children:[a,y,_,N].filter(Ee=>Ee!=="all").length})]}),l.jsxs("button",{onClick:()=>z(!0),className:"flex items-center space-x-1.5 px-3 py-1.5 bg-brand text-white rounded-lg hover:bg-brand-dark transition-colors text-sm font-medium",children:[l.jsx(j0e,{className:"w-4 h-4"}),!D&&l.jsx("span",{children:"Share"})]}),l.jsx(Qr,{requiredPermission:"users.change_roles",facilityId:t.id,children:l.jsxs("button",{onClick:F,className:"flex items-center space-x-1.5 px-3 py-1.5 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm font-medium",title:"Manage member roles",children:[l.jsx(XP,{className:"w-4 h-4"}),!D&&l.jsx("span",{children:"Roles"})]})}),!D&&l.jsx(N1e,{isDarkMode:c,facilityId:t.id}),l.jsx("button",{onClick:$,className:"flex items-center justify-center w-8 h-8 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 transition-all duration-200",title:D?"Expand header":"Collapse header",children:D?l.jsx(Va,{className:"w-4 h-4"}):l.jsx(hW,{className:"w-4 h-4"})})]})]}),le&&!D&&l.jsx("div",{className:`px-6 py-3 border-t ${c?"border-gray-700 bg-gray-800/50":"border-gray-200 bg-gray-50"} transition-all duration-300 relative z-[1000]`,children:l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("div",{className:"flex items-center space-x-1",children:["all","active","completed","with-tasks","empty"].map(Ee=>l.jsx("button",{onClick:()=>o(Ee),className:`px-3 py-1.5 text-xs font-medium rounded-lg transition-all duration-200 ${a===Ee?"bg-brand text-white shadow-md font-semibold":"bg-white dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600"}`,children:Ee==="all"?"All":Ee==="active"?"Active":Ee==="completed"?"Completed":Ee==="with-tasks"?"With tasks":"Empty"},Ee))}),l.jsxs("div",{className:"flex items-center space-x-1 relative z-[1001]",children:[l.jsxs("div",{className:"relative filter-dropdown",children:[l.jsxs("button",{onClick:()=>{G(!Y),Z(!1),Le(!1)},className:`flex items-center space-x-1 px-3 py-1.5 text-xs font-medium rounded-lg transition-all duration-200 ${y!=="all"?"bg-brand text-white shadow-md":"bg-white dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600"}`,children:[y!=="all"?(()=>{const Ee=S.find(Fe=>Fe.name===y);return Ee?.profilePicture?l.jsx("img",{src:Ee.profilePicture,alt:Ee.name,className:"w-3 h-3 rounded-full object-cover"}):l.jsx("div",{className:"w-3 h-3 rounded-full flex items-center justify-center text-white text-xs font-medium",style:{backgroundColor:"#6B7280"},children:Ee?.name?.charAt(0)?.toUpperCase()||"?"})})():l.jsx(As,{className:"w-3 h-3"}),l.jsx("span",{children:y!=="all"?y:"Assignee"}),l.jsx(Va,{className:"w-3 h-3"})]}),Y&&l.jsx("div",{className:"absolute top-full left-0 mt-1 w-56 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg z-[1002]",children:l.jsxs("div",{className:"py-1",children:[l.jsx("button",{onClick:()=>{x?.("all"),G(!1)},className:`w-full text-left px-3 py-2 text-xs hover:bg-gray-100 dark:hover:bg-gray-700 ${y==="all"?"bg-brand text-white":"text-gray-700 dark:text-gray-300"}`,children:"All Assignees"}),S.length===0?l.jsx("div",{className:"px-3 py-2 text-xs text-gray-500 dark:text-gray-400",children:"No facility members found"}):S.map(Ee=>l.jsx("button",{onClick:()=>{x?.(Ee.name),G(!1)},className:`w-full text-left px-3 py-2 text-xs hover:bg-gray-100 dark:hover:bg-gray-700 ${y===Ee.name?"bg-brand text-white":"text-gray-700 dark:text-gray-300"}`,children:l.jsxs("div",{className:"flex items-center space-x-2",children:[Ee.profilePicture?l.jsx("img",{src:Ee.profilePicture,alt:Ee.name,className:"w-4 h-4 rounded-full object-cover"}):l.jsx("div",{className:"w-4 h-4 rounded-full flex items-center justify-center text-white text-xs font-medium",style:{backgroundColor:"#6B7280"},children:Ee.name?.charAt?.(0)?.toUpperCase()||"?"}),l.jsx("span",{children:Ee.name})]})},Ee.id))]})})]}),l.jsxs("div",{className:"relative filter-dropdown",children:[l.jsxs("button",{onClick:()=>{Z(!q),G(!1),Le(!1)},className:`flex items-center space-x-1 px-3 py-1.5 text-xs font-medium rounded-lg transition-all duration-200 ${N!=="all"?"bg-brand text-white shadow-md":"bg-white dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600"}`,children:[l.jsx(aw,{className:"w-3 h-3"}),l.jsx("span",{children:"Priority"}),l.jsx(Va,{className:"w-3 h-3"})]}),q&&l.jsx("div",{className:"absolute top-full left-0 mt-1 w-32 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg z-[1002]",children:l.jsx("div",{className:"py-1",children:["all","high","medium","low"].map(Ee=>l.jsx("button",{onClick:()=>{k?.(Ee),Z(!1)},className:`w-full text-left px-3 py-2 text-xs hover:bg-gray-100 dark:hover:bg-gray-700 ${N===Ee?"bg-brand text-white":"text-gray-700 dark:text-gray-300"}`,children:Ee==="all"?"All Priorities":Ee.charAt(0).toUpperCase()+Ee.slice(1)},Ee))})})]}),l.jsxs("div",{className:"relative filter-dropdown",children:[l.jsxs("button",{onClick:()=>{Le(!ge),G(!1),Z(!1)},className:`flex items-center space-x-1 px-3 py-1.5 text-xs font-medium rounded-lg transition-all duration-200 ${_!=="all"?"bg-brand text-white shadow-md":"bg-white dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600"}`,children:[l.jsx(Cf,{className:"w-3 h-3"}),l.jsx("span",{children:"Tags"}),l.jsx(Va,{className:"w-3 h-3"})]}),ge&&l.jsx("div",{className:"absolute top-full left-0 mt-1 w-48 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg z-[1002]",children:l.jsxs("div",{className:"py-1",children:[l.jsx("button",{onClick:()=>{w?.("all"),Le(!1)},className:`w-full text-left px-3 py-2 text-xs hover:bg-gray-100 dark:hover:bg-gray-700 ${_==="all"?"bg-brand text-white":"text-gray-700 dark:text-gray-300"}`,children:"All Tags"}),O.length===0?l.jsx("div",{className:"px-3 py-2 text-xs text-gray-500 dark:text-gray-400",children:"No tags found"}):O.map(Ee=>l.jsx("button",{onClick:()=>{w?.(Ee.name),Le(!1)},className:`w-full text-left px-3 py-2 text-xs hover:bg-gray-100 dark:hover:bg-gray-700 ${_===Ee.name?"bg-brand text-white":"text-gray-700 dark:text-gray-300"}`,children:l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:Ee.color}}),l.jsx("span",{children:Ee.name})]})},Ee.id))]})})]})]}),ce&&l.jsxs("button",{onClick:()=>{o("all"),x?.("all"),w?.("all"),k?.("all")},className:"flex items-center space-x-1 px-3 py-1.5 text-xs font-medium text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 transition-colors",children:[l.jsx(yn,{className:"w-3 h-3"}),l.jsx("span",{children:"Clear all"})]})]})})]}),l.jsx(b1e,{isOpen:I,onClose:()=>z(!1),facilityId:t.id,isDarkMode:c}),l.jsx(E1e,{isOpen:Se,onClose:()=>ae(!1),isDarkMode:c,facilityId:t.id,currentFilters:{searchTerm:s,filter:a,assigneeFilter:y,tagFilter:_,priorityFilter:N},onApplyFilters:C||(()=>{}),onSaveCurrentFilters:Ee=>{console.log("Save current filters as:",Ee)}})]})},k1e=({isOpen:t,onClose:e,isDarkMode:n,tasks:r=[],projects:s=[],assignees:i=[],tags:a=[],onTaskClick:o,onProjectClick:c,onViewChange:d,onAssigneeFilter:h,onTagFilter:p,onPriorityFilter:m})=>{const[y,x]=v.useState(""),[_,w]=v.useState(0),N=v.useRef(null),k=v.useRef(null),O=(()=>{const R=[];if((!y||y.toLowerCase().includes("view")||y.toLowerCase().includes("board")||y.toLowerCase().includes("list")||y.toLowerCase().includes("calendar")||y.toLowerCase().includes("timeline"))&&R.push({id:"view-kanban",title:"Switch to Board View",subtitle:"Grid layout with columns",icon:l.jsx(mW,{className:"w-4 h-4"}),type:"view",action:()=>{d?.("kanban"),e()},keywords:["board","kanban","grid","view"]},{id:"view-list",title:"Switch to List View",subtitle:"Table layout",icon:l.jsx(GP,{className:"w-4 h-4"}),type:"view",action:()=>{d?.("list"),e()},keywords:["list","table","view"]},{id:"view-calendar",title:"Switch to Calendar View",subtitle:"Calendar layout",icon:l.jsx(fp,{className:"w-4 h-4"}),type:"view",action:()=>{d?.("calendar"),e()},keywords:["calendar","view"]},{id:"view-timeline",title:"Switch to Timeline View",subtitle:"Timeline layout",icon:l.jsx(sr,{className:"w-4 h-4"}),type:"view",action:()=>{d?.("timeline"),e()},keywords:["timeline","view"]}),(!y||y.toLowerCase().includes("filter")||y.toLowerCase().includes("assignee")||y.toLowerCase().includes("priority")||y.toLowerCase().includes("tag"))&&(i.forEach(M=>{(!y||M.name.toLowerCase().includes(y.toLowerCase()))&&R.push({id:`filter-assignee-${M.id}`,title:`Filter by ${M.name}`,subtitle:"Filter tasks by assignee",icon:l.jsx(As,{className:"w-4 h-4"}),type:"filter",action:()=>{h?.(M.name),e()},keywords:["filter","assignee",M.name.toLowerCase()]})}),["high","medium","low"].forEach(M=>{(!y||M.toLowerCase().includes(y.toLowerCase()))&&R.push({id:`filter-priority-${M}`,title:`Filter by ${M} priority`,subtitle:"Filter tasks by priority",icon:l.jsx(aw,{className:"w-4 h-4"}),type:"filter",action:()=>{m?.(M),e()},keywords:["filter","priority",M.toLowerCase()]})}),a.forEach(M=>{(!y||M.toLowerCase().includes(y.toLowerCase()))&&R.push({id:`filter-tag-${M}`,title:`Filter by ${M}`,subtitle:"Filter tasks by tag",icon:l.jsx(Cf,{className:"w-4 h-4"}),type:"filter",action:()=>{p?.(M),e()},keywords:["filter","tag",M.toLowerCase()]})})),r.forEach(M=>{(!y||M.title.toLowerCase().includes(y.toLowerCase())||M.assigneeName?.toLowerCase().includes(y.toLowerCase())||M.projectTitle?.toLowerCase().includes(y.toLowerCase())||M.status?.toLowerCase().includes(y.toLowerCase())||M.priority?.toLowerCase().includes(y.toLowerCase()))&&R.push({id:`task-${M.id}`,title:M.title,subtitle:`${M.projectTitle||"No project"} • ${M.assigneeName||"Unassigned"} • ${M.status||"No status"}`,icon:l.jsx(bl,{className:"w-4 h-4"}),type:"task",action:()=>{o?.(M.id),e()},keywords:[M.title.toLowerCase(),M.assigneeName?.toLowerCase()||"",M.projectTitle?.toLowerCase()||"",M.status?.toLowerCase()||"",M.priority?.toLowerCase()||""]})}),s.forEach(M=>{(!y||M.title.toLowerCase().includes(y.toLowerCase()))&&R.push({id:`project-${M.id}`,title:M.title,subtitle:`Project • ${M.taskCount||0} tasks`,icon:l.jsx(Ya,{className:"w-4 h-4"}),type:"project",action:()=>{c?.(M.id),e()},keywords:[M.title.toLowerCase(),"project"]})}),y){const M=y.toLowerCase();return R.filter(P=>P.title.toLowerCase().includes(M)||P.subtitle?.toLowerCase().includes(M)||P.keywords.some(C=>C.includes(M)))}return R})();return v.useEffect(()=>{const R=M=>{if(t)switch(M.key){case"ArrowDown":M.preventDefault(),w(P=>Math.min(P+1,O.length-1));break;case"ArrowUp":M.preventDefault(),w(P=>Math.max(P-1,0));break;case"Enter":M.preventDefault(),O[_]&&O[_].action();break;case"Escape":M.preventDefault(),e();break}};return document.addEventListener("keydown",R),()=>document.removeEventListener("keydown",R)},[t,_,O,e]),v.useEffect(()=>{w(0)},[y]),v.useEffect(()=>{t&&N.current&&N.current.focus()},[t]),v.useEffect(()=>{if(k.current&&_>=0){const R=k.current.children[_];R&&R.scrollIntoView({block:"nearest"})}},[_]),t?l.jsxs("div",{className:"fixed inset-0 z-50 flex items-start justify-center pt-20",children:[l.jsx("div",{className:"absolute inset-0 bg-black/20 backdrop-blur-sm",onClick:e}),l.jsxs("div",{className:`relative w-full max-w-2xl mx-4 ${n?"bg-gray-900":"bg-white"} rounded-lg shadow-2xl border ${n?"border-gray-700":"border-gray-200"}`,children:[l.jsxs("div",{className:"flex items-center px-4 py-3 border-b border-gray-200 dark:border-gray-700",children:[l.jsx(mh,{className:"w-4 h-4 text-gray-400 mr-3"}),l.jsx("input",{ref:N,type:"text",placeholder:"Search tasks, projects, or type a command...",value:y,onChange:R=>x(R.target.value),className:"flex-1 bg-transparent text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none"}),l.jsx("button",{onClick:e,className:"ml-3 p-1 hover:bg-gray-100 dark:hover:bg-gray-800 rounded",children:l.jsx(yn,{className:"w-4 h-4 text-gray-400"})})]}),l.jsx("div",{className:"max-h-96 overflow-y-auto",children:O.length===0?l.jsx("div",{className:"px-4 py-8 text-center text-gray-500 dark:text-gray-400",children:y?"No results found":"Start typing to search..."}):l.jsx("div",{ref:k,className:"py-2",children:O.map((R,M)=>l.jsxs("button",{onClick:R.action,className:`w-full flex items-center px-4 py-3 text-left hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors ${M===_?"bg-gray-100 dark:bg-gray-800":""}`,children:[l.jsx("div",{className:`mr-3 p-1 rounded ${R.type==="view"?"text-blue-600 dark:text-blue-400":R.type==="filter"?"text-green-600 dark:text-green-400":R.type==="task"?"text-purple-600 dark:text-purple-400":R.type==="project"?"text-orange-600 dark:text-orange-400":"text-gray-600 dark:text-gray-400"}`,children:R.icon}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:R.title}),R.subtitle&&l.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:R.subtitle})]}),l.jsxs("div",{className:"ml-2 text-xs text-gray-400 dark:text-gray-500",children:[R.type==="view"&&"View",R.type==="filter"&&"Filter",R.type==="task"&&"Task",R.type==="project"&&"Project"]})]},R.id))})}),l.jsx("div",{className:"px-4 py-2 border-t border-gray-200 dark:border-gray-700 text-xs text-gray-500 dark:text-gray-400",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("span",{children:"↑↓ Navigate"}),l.jsx("span",{children:"↵ Select"}),l.jsx("span",{children:"Esc Close"})]}),l.jsx("span",{children:"Ctrl+K to open"})]})})]})]}):null},T1e=({currentView:t,onViewChange:e,isDarkMode:n})=>{const r=[{id:"kanban",icon:mW,label:"Board",title:"Board View"},{id:"list",icon:GP,label:"List",title:"List View"},{id:"calendar",icon:fp,label:"Calendar",title:"Calendar View"},{id:"timeline",icon:sr,label:"Timeline",title:"Timeline View"}];return l.jsx("div",{className:"fixed bottom-4 left-1/2 transform -translate-x-1/2 z-50",children:l.jsx("div",{className:`
        flex items-center space-x-1 p-1 rounded-lg shadow-lg
        ${n?"bg-gray-800 border border-gray-700":"bg-white border border-gray-200"}
        transition-all duration-200 ease-in-out
      `,children:r.map(s=>{const i=s.icon,a=t===s.id;return l.jsx("button",{onClick:()=>e(s.id),className:`
                flex items-center justify-center px-4 py-2 rounded-md transition-all duration-200
                ${a?"bg-brand text-white shadow-sm":`
                    ${n?"text-gray-400 hover:text-white hover:bg-gray-700":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"}
                  `}
              `,title:s.title,children:l.jsx(i,{className:"w-4 h-4"})},s.id)})})})},m_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function nm(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function fA(t){return"nodeType"in t}function Ws(t){var e,n;return t?nm(t)?t:fA(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function pA(t){const{Document:e}=Ws(t);return t instanceof e}function py(t){return nm(t)?!1:t instanceof Ws(t).HTMLElement}function iH(t){return t instanceof Ws(t).SVGElement}function rm(t){return t?nm(t)?t.document:fA(t)?pA(t)?t:py(t)||iH(t)?t.ownerDocument:document:document:document}const Ul=m_?v.useLayoutEffect:v.useEffect;function g_(t){const e=v.useRef(t);return Ul(()=>{e.current=t}),v.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}function C1e(){const t=v.useRef(null),e=v.useCallback((r,s)=>{t.current=setInterval(r,s)},[]),n=v.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function S0(t,e){e===void 0&&(e=[t]);const n=v.useRef(t);return Ul(()=>{n.current!==t&&(n.current=t)},e),n}function my(t,e){const n=v.useRef();return v.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function Ew(t){const e=g_(t),n=v.useRef(null),r=v.useCallback(s=>{s!==n.current&&e?.(s,n.current),n.current=s},[]);return[n,r]}function Nw(t){const e=v.useRef();return v.useEffect(()=>{e.current=t},[t]),e.current}let AS={};function y_(t,e){return v.useMemo(()=>{if(e)return e;const n=AS[t]==null?0:AS[t]+1;return AS[t]=n,t+"-"+n},[t,e])}function aH(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((i,a)=>{const o=Object.entries(a);for(const[c,d]of o){const h=i[c];h!=null&&(i[c]=h+t*d)}return i},{...e})}}const zf=aH(1),Sw=aH(-1);function j1e(t){return"clientX"in t&&"clientY"in t}function mA(t){if(!t)return!1;const{KeyboardEvent:e}=Ws(t.target);return e&&t instanceof e}function P1e(t){if(!t)return!1;const{TouchEvent:e}=Ws(t.target);return e&&t instanceof e}function kw(t){if(P1e(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return j1e(t)?{x:t.clientX,y:t.clientY}:null}const Np=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[Np.Translate.toString(t),Np.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),P5="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function A1e(t){return t.matches(P5)?t:t.querySelector(P5)}const I1e={display:"none"};function D1e(t){let{id:e,value:n}=t;return oe.createElement("div",{id:e,style:I1e},n)}function R1e(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return oe.createElement("div",{id:e,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function O1e(){const[t,e]=v.useState("");return{announce:v.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const oH=v.createContext(null);function M1e(t){const e=v.useContext(oH);v.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function L1e(){const[t]=v.useState(()=>new Set),e=v.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[v.useCallback(r=>{let{type:s,event:i}=r;t.forEach(a=>{var o;return(o=a[s])==null?void 0:o.call(a,i)})},[t]),e]}const F1e={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},$1e={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function V1e(t){let{announcements:e=$1e,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=F1e}=t;const{announce:i,announcement:a}=O1e(),o=y_("DndLiveRegion"),[c,d]=v.useState(!1);if(v.useEffect(()=>{d(!0)},[]),M1e(v.useMemo(()=>({onDragStart(p){let{active:m}=p;i(e.onDragStart({active:m}))},onDragMove(p){let{active:m,over:y}=p;e.onDragMove&&i(e.onDragMove({active:m,over:y}))},onDragOver(p){let{active:m,over:y}=p;i(e.onDragOver({active:m,over:y}))},onDragEnd(p){let{active:m,over:y}=p;i(e.onDragEnd({active:m,over:y}))},onDragCancel(p){let{active:m,over:y}=p;i(e.onDragCancel({active:m,over:y}))}}),[i,e])),!c)return null;const h=oe.createElement(oe.Fragment,null,oe.createElement(D1e,{id:r,value:s.draggable}),oe.createElement(R1e,{id:o,announcement:a}));return n?ml.createPortal(h,n):h}var Ir;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(Ir||(Ir={}));function Tw(){}const Qa=Object.freeze({x:0,y:0});function B1e(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function U1e(t,e){const n=kw(t);if(!n)return"0 0";const r={x:(n.x-e.left)/e.width*100,y:(n.y-e.top)/e.height*100};return r.x+"% "+r.y+"%"}function z1e(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return n-r}function W1e(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function H1e(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function A5(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const q1e=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=A5(e,e.left,e.top),i=[];for(const a of r){const{id:o}=a,c=n.get(o);if(c){const d=B1e(A5(c),s);i.push({id:o,data:{droppableContainer:a,value:d}})}}return i.sort(z1e)};function K1e(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),s=Math.min(e.left+e.width,t.left+t.width),i=Math.min(e.top+e.height,t.top+t.height),a=s-r,o=i-n;if(r<s&&n<i){const c=e.width*e.height,d=t.width*t.height,h=a*o,p=h/(c+d-h);return Number(p.toFixed(4))}return 0}const Y1e=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=[];for(const i of r){const{id:a}=i,o=n.get(a);if(o){const c=K1e(o,e);c>0&&s.push({id:a,data:{droppableContainer:i,value:c}})}}return s.sort(W1e)};function G1e(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function lH(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:Qa}function Q1e(t){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),i=1;i<r;i++)s[i-1]=arguments[i];return s.reduce((a,o)=>({...a,top:a.top+t*o.y,bottom:a.bottom+t*o.y,left:a.left+t*o.x,right:a.right+t*o.x}),{...n})}}const X1e=Q1e(1);function cH(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function J1e(t,e,n){const r=cH(e);if(!r)return t;const{scaleX:s,scaleY:i,x:a,y:o}=r,c=t.left-a-(1-s)*parseFloat(n),d=t.top-o-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),h=s?t.width/s:t.width,p=i?t.height/i:t.height;return{width:h,height:p,top:d,right:c+h,bottom:d+p,left:c}}const Z1e={ignoreTransform:!1};function gy(t,e){e===void 0&&(e=Z1e);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:d,transformOrigin:h}=Ws(t).getComputedStyle(t);d&&(n=J1e(n,d,h))}const{top:r,left:s,width:i,height:a,bottom:o,right:c}=n;return{top:r,left:s,width:i,height:a,bottom:o,right:c}}function I5(t){return gy(t,{ignoreTransform:!0})}function e_e(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function t_e(t,e){return e===void 0&&(e=Ws(t).getComputedStyle(t)),e.position==="fixed"}function n_e(t,e){e===void 0&&(e=Ws(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const i=e[s];return typeof i=="string"?n.test(i):!1})}function gA(t,e){const n=[];function r(s){if(e!=null&&n.length>=e||!s)return n;if(pA(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!py(s)||iH(s)||n.includes(s))return n;const i=Ws(t).getComputedStyle(s);return s!==t&&n_e(s,i)&&n.push(s),t_e(s,i)?n:r(s.parentNode)}return t?r(t):n}function uH(t){const[e]=gA(t,1);return e??null}function IS(t){return!m_||!t?null:nm(t)?t:fA(t)?pA(t)||t===rm(t).scrollingElement?window:py(t)?t:null:null}function dH(t){return nm(t)?t.scrollX:t.scrollLeft}function hH(t){return nm(t)?t.scrollY:t.scrollTop}function BC(t){return{x:dH(t),y:hH(t)}}var Kr;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(Kr||(Kr={}));function fH(t){return!m_||!t?!1:t===document.scrollingElement}function pH(t){const e={x:0,y:0},n=fH(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},s=t.scrollTop<=e.y,i=t.scrollLeft<=e.x,a=t.scrollTop>=r.y,o=t.scrollLeft>=r.x;return{isTop:s,isLeft:i,isBottom:a,isRight:o,maxScroll:r,minScroll:e}}const r_e={x:.2,y:.2};function s_e(t,e,n,r,s){let{top:i,left:a,right:o,bottom:c}=n;r===void 0&&(r=10),s===void 0&&(s=r_e);const{isTop:d,isBottom:h,isLeft:p,isRight:m}=pH(t),y={x:0,y:0},x={x:0,y:0},_={height:e.height*s.y,width:e.width*s.x};return!d&&i<=e.top+_.height?(y.y=Kr.Backward,x.y=r*Math.abs((e.top+_.height-i)/_.height)):!h&&c>=e.bottom-_.height&&(y.y=Kr.Forward,x.y=r*Math.abs((e.bottom-_.height-c)/_.height)),!m&&o>=e.right-_.width?(y.x=Kr.Forward,x.x=r*Math.abs((e.right-_.width-o)/_.width)):!p&&a<=e.left+_.width&&(y.x=Kr.Backward,x.x=r*Math.abs((e.left+_.width-a)/_.width)),{direction:y,speed:x}}function i_e(t){if(t===document.scrollingElement){const{innerWidth:i,innerHeight:a}=window;return{top:0,left:0,right:i,bottom:a,width:i,height:a}}const{top:e,left:n,right:r,bottom:s}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:s,width:t.clientWidth,height:t.clientHeight}}function mH(t){return t.reduce((e,n)=>zf(e,BC(n)),Qa)}function a_e(t){return t.reduce((e,n)=>e+dH(n),0)}function o_e(t){return t.reduce((e,n)=>e+hH(n),0)}function gH(t,e){if(e===void 0&&(e=gy),!t)return;const{top:n,left:r,bottom:s,right:i}=e(t);uH(t)&&(s<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const l_e=[["x",["left","right"],a_e],["y",["top","bottom"],o_e]];class yA{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=gA(n),s=mH(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[i,a,o]of l_e)for(const c of a)Object.defineProperty(this,c,{get:()=>{const d=o(r),h=s[i]-d;return this.rect[c]+h},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class qg{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var s;(s=this.target)==null||s.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function c_e(t){const{EventTarget:e}=Ws(t);return t instanceof e?t:rm(t)}function DS(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var oa;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(oa||(oa={}));function D5(t){t.preventDefault()}function u_e(t){t.stopPropagation()}var pn;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(pn||(pn={}));const yH={start:[pn.Space,pn.Enter],cancel:[pn.Esc],end:[pn.Space,pn.Enter,pn.Tab]},d_e=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case pn.Right:return{...n,x:n.x+25};case pn.Left:return{...n,x:n.x-25};case pn.Down:return{...n,y:n.y+25};case pn.Up:return{...n,y:n.y-25}}};class vH{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new qg(rm(n)),this.windowListeners=new qg(Ws(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(oa.Resize,this.handleCancel),this.windowListeners.add(oa.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(oa.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&gH(r),n(Qa)}handleKeyDown(e){if(mA(e)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:i=yH,coordinateGetter:a=d_e,scrollBehavior:o="smooth"}=s,{code:c}=e;if(i.end.includes(c)){this.handleEnd(e);return}if(i.cancel.includes(c)){this.handleCancel(e);return}const{collisionRect:d}=r.current,h=d?{x:d.left,y:d.top}:Qa;this.referenceCoordinates||(this.referenceCoordinates=h);const p=a(e,{active:n,context:r.current,currentCoordinates:h});if(p){const m=Sw(p,h),y={x:0,y:0},{scrollableAncestors:x}=r.current;for(const _ of x){const w=e.code,{isTop:N,isRight:k,isLeft:S,isBottom:O,maxScroll:R,minScroll:M}=pH(_),P=i_e(_),C={x:Math.min(w===pn.Right?P.right-P.width/2:P.right,Math.max(w===pn.Right?P.left:P.left+P.width/2,p.x)),y:Math.min(w===pn.Down?P.bottom-P.height/2:P.bottom,Math.max(w===pn.Down?P.top:P.top+P.height/2,p.y))},D=w===pn.Right&&!k||w===pn.Left&&!S,$=w===pn.Down&&!O||w===pn.Up&&!N;if(D&&C.x!==p.x){const F=_.scrollLeft+m.x,U=w===pn.Right&&F<=R.x||w===pn.Left&&F>=M.x;if(U&&!m.y){_.scrollTo({left:F,behavior:o});return}U?y.x=_.scrollLeft-F:y.x=w===pn.Right?_.scrollLeft-R.x:_.scrollLeft-M.x,y.x&&_.scrollBy({left:-y.x,behavior:o});break}else if($&&C.y!==p.y){const F=_.scrollTop+m.y,U=w===pn.Down&&F<=R.y||w===pn.Up&&F>=M.y;if(U&&!m.x){_.scrollTo({top:F,behavior:o});return}U?y.y=_.scrollTop-F:y.y=w===pn.Down?_.scrollTop-R.y:_.scrollTop-M.y,y.y&&_.scrollBy({top:-y.y,behavior:o});break}}this.handleMove(e,zf(Sw(p,this.referenceCoordinates),y))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}vH.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=yH,onActivation:s}=e,{active:i}=n;const{code:a}=t.nativeEvent;if(r.start.includes(a)){const o=i.activatorNode.current;return o&&t.target!==o?!1:(t.preventDefault(),s?.({event:t.nativeEvent}),!0)}return!1}}];function R5(t){return!!(t&&"distance"in t)}function O5(t){return!!(t&&"delay"in t)}class vA{constructor(e,n,r){var s;r===void 0&&(r=c_e(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:i}=e,{target:a}=i;this.props=e,this.events=n,this.document=rm(a),this.documentListeners=new qg(this.document),this.listeners=new qg(r),this.windowListeners=new qg(Ws(a)),this.initialCoordinates=(s=kw(i))!=null?s:Qa,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(oa.Resize,this.handleCancel),this.windowListeners.add(oa.DragStart,D5),this.windowListeners.add(oa.VisibilityChange,this.handleCancel),this.windowListeners.add(oa.ContextMenu,D5),this.documentListeners.add(oa.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(O5(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(R5(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:s}=this.props;s(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(oa.Click,u_e,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(oa.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:s,props:i}=this,{onMove:a,options:{activationConstraint:o}}=i;if(!s)return;const c=(n=kw(e))!=null?n:Qa,d=Sw(s,c);if(!r&&o){if(R5(o)){if(o.tolerance!=null&&DS(d,o.tolerance))return this.handleCancel();if(DS(d,o.distance))return this.handleStart()}if(O5(o)&&DS(d,o.tolerance))return this.handleCancel();this.handlePending(o,d);return}e.cancelable&&e.preventDefault(),a(c)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===pn.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const h_e={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class xH extends vA{constructor(e){const{event:n}=e,r=rm(n.target);super(e,h_e,r)}}xH.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r?.({event:n}),!0)}}];const f_e={move:{name:"mousemove"},end:{name:"mouseup"}};var UC;(function(t){t[t.RightClick=2]="RightClick"})(UC||(UC={}));class p_e extends vA{constructor(e){super(e,f_e,rm(e.event.target))}}p_e.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===UC.RightClick?!1:(r?.({event:n}),!0)}}];const RS={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class m_e extends vA{constructor(e){super(e,RS)}static setup(){return window.addEventListener(RS.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(RS.move.name,e)};function e(){}}}m_e.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:s}=n;return s.length>1?!1:(r?.({event:n}),!0)}}];var Kg;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(Kg||(Kg={}));var Cw;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(Cw||(Cw={}));function g_e(t){let{acceleration:e,activator:n=Kg.Pointer,canScroll:r,draggingRect:s,enabled:i,interval:a=5,order:o=Cw.TreeOrder,pointerCoordinates:c,scrollableAncestors:d,scrollableAncestorRects:h,delta:p,threshold:m}=t;const y=v_e({delta:p,disabled:!i}),[x,_]=C1e(),w=v.useRef({x:0,y:0}),N=v.useRef({x:0,y:0}),k=v.useMemo(()=>{switch(n){case Kg.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case Kg.DraggableRect:return s}},[n,s,c]),S=v.useRef(null),O=v.useCallback(()=>{const M=S.current;if(!M)return;const P=w.current.x*N.current.x,C=w.current.y*N.current.y;M.scrollBy(P,C)},[]),R=v.useMemo(()=>o===Cw.TreeOrder?[...d].reverse():d,[o,d]);v.useEffect(()=>{if(!i||!d.length||!k){_();return}for(const M of R){if(r?.(M)===!1)continue;const P=d.indexOf(M),C=h[P];if(!C)continue;const{direction:D,speed:$}=s_e(M,C,k,e,m);for(const F of["x","y"])y[F][D[F]]||($[F]=0,D[F]=0);if($.x>0||$.y>0){_(),S.current=M,x(O,a),w.current=$,N.current=D;return}}w.current={x:0,y:0},N.current={x:0,y:0},_()},[e,O,r,_,i,a,JSON.stringify(k),JSON.stringify(y),x,d,R,h,JSON.stringify(m)])}const y_e={x:{[Kr.Backward]:!1,[Kr.Forward]:!1},y:{[Kr.Backward]:!1,[Kr.Forward]:!1}};function v_e(t){let{delta:e,disabled:n}=t;const r=Nw(e);return my(s=>{if(n||!r||!s)return y_e;const i={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[Kr.Backward]:s.x[Kr.Backward]||i.x===-1,[Kr.Forward]:s.x[Kr.Forward]||i.x===1},y:{[Kr.Backward]:s.y[Kr.Backward]||i.y===-1,[Kr.Forward]:s.y[Kr.Forward]||i.y===1}}},[n,e,r])}function x_e(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return my(s=>{var i;return e==null?null:(i=r??s)!=null?i:null},[r,e])}function b_e(t,e){return v.useMemo(()=>t.reduce((n,r)=>{const{sensor:s}=r,i=s.activators.map(a=>({eventName:a.eventName,handler:e(a.handler,r)}));return[...n,...i]},[]),[t,e])}var k0;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(k0||(k0={}));var zC;(function(t){t.Optimized="optimized"})(zC||(zC={}));const M5=new Map;function w_e(t,e){let{dragging:n,dependencies:r,config:s}=e;const[i,a]=v.useState(null),{frequency:o,measure:c,strategy:d}=s,h=v.useRef(t),p=w(),m=S0(p),y=v.useCallback(function(N){N===void 0&&(N=[]),!m.current&&a(k=>k===null?N:k.concat(N.filter(S=>!k.includes(S))))},[m]),x=v.useRef(null),_=my(N=>{if(p&&!n)return M5;if(!N||N===M5||h.current!==t||i!=null){const k=new Map;for(let S of t){if(!S)continue;if(i&&i.length>0&&!i.includes(S.id)&&S.rect.current){k.set(S.id,S.rect.current);continue}const O=S.node.current,R=O?new yA(c(O),O):null;S.rect.current=R,R&&k.set(S.id,R)}return k}return N},[t,i,n,p,c]);return v.useEffect(()=>{h.current=t},[t]),v.useEffect(()=>{p||y()},[n,p]),v.useEffect(()=>{i&&i.length>0&&a(null)},[JSON.stringify(i)]),v.useEffect(()=>{p||typeof o!="number"||x.current!==null||(x.current=setTimeout(()=>{y(),x.current=null},o))},[o,p,y,...r]),{droppableRects:_,measureDroppableContainers:y,measuringScheduled:i!=null};function w(){switch(d){case k0.Always:return!1;case k0.BeforeDragging:return n;default:return!n}}}function xA(t,e){return my(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function __e(t,e){return xA(t,e)}function E_e(t){let{callback:e,disabled:n}=t;const r=g_(e),s=v.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(r)},[r,n]);return v.useEffect(()=>()=>s?.disconnect(),[s]),s}function v_(t){let{callback:e,disabled:n}=t;const r=g_(e),s=v.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(r)},[n]);return v.useEffect(()=>()=>s?.disconnect(),[s]),s}function N_e(t){return new yA(gy(t),t)}function L5(t,e,n){e===void 0&&(e=N_e);const[r,s]=v.useState(null);function i(){s(c=>{if(!t)return null;if(t.isConnected===!1){var d;return(d=c??n)!=null?d:null}const h=e(t);return JSON.stringify(c)===JSON.stringify(h)?c:h})}const a=E_e({callback(c){if(t)for(const d of c){const{type:h,target:p}=d;if(h==="childList"&&p instanceof HTMLElement&&p.contains(t)){i();break}}}}),o=v_({callback:i});return Ul(()=>{i(),t?(o?.observe(t),a?.observe(document.body,{childList:!0,subtree:!0})):(o?.disconnect(),a?.disconnect())},[t]),r}function S_e(t){const e=xA(t);return lH(t,e)}const F5=[];function k_e(t){const e=v.useRef(t),n=my(r=>t?r&&r!==F5&&t&&e.current&&t.parentNode===e.current.parentNode?r:gA(t):F5,[t]);return v.useEffect(()=>{e.current=t},[t]),n}function T_e(t){const[e,n]=v.useState(null),r=v.useRef(t),s=v.useCallback(i=>{const a=IS(i.target);a&&n(o=>o?(o.set(a,BC(a)),new Map(o)):null)},[]);return v.useEffect(()=>{const i=r.current;if(t!==i){a(i);const o=t.map(c=>{const d=IS(c);return d?(d.addEventListener("scroll",s,{passive:!0}),[d,BC(d)]):null}).filter(c=>c!=null);n(o.length?new Map(o):null),r.current=t}return()=>{a(t),a(i)};function a(o){o.forEach(c=>{const d=IS(c);d?.removeEventListener("scroll",s)})}},[s,t]),v.useMemo(()=>t.length?e?Array.from(e.values()).reduce((i,a)=>zf(i,a),Qa):mH(t):Qa,[t,e])}function $5(t,e){e===void 0&&(e=[]);const n=v.useRef(null);return v.useEffect(()=>{n.current=null},e),v.useEffect(()=>{const r=t!==Qa;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?Sw(t,n.current):Qa}function C_e(t){v.useEffect(()=>{if(!m_)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n?.()}},t.map(e=>{let{sensor:n}=e;return n}))}function j_e(t,e){return v.useMemo(()=>t.reduce((n,r)=>{let{eventName:s,handler:i}=r;return n[s]=a=>{i(a,e)},n},{}),[t,e])}function bH(t){return v.useMemo(()=>t?e_e(t):null,[t])}const V5=[];function P_e(t,e){e===void 0&&(e=gy);const[n]=t,r=bH(n?Ws(n):null),[s,i]=v.useState(V5);function a(){i(()=>t.length?t.map(c=>fH(c)?r:new yA(e(c),c)):V5)}const o=v_({callback:a});return Ul(()=>{o?.disconnect(),a(),t.forEach(c=>o?.observe(c))},[t]),s}function wH(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return py(e)?e:t}function A_e(t){let{measure:e}=t;const[n,r]=v.useState(null),s=v.useCallback(d=>{for(const{target:h}of d)if(py(h)){r(p=>{const m=e(h);return p?{...p,width:m.width,height:m.height}:m});break}},[e]),i=v_({callback:s}),a=v.useCallback(d=>{const h=wH(d);i?.disconnect(),h&&i?.observe(h),r(h?e(h):null)},[e,i]),[o,c]=Ew(a);return v.useMemo(()=>({nodeRef:o,rect:n,setRef:c}),[n,o,c])}const I_e=[{sensor:xH,options:{}},{sensor:vH,options:{}}],D_e={current:{}},ub={draggable:{measure:I5},droppable:{measure:I5,strategy:k0.WhileDragging,frequency:zC.Optimized},dragOverlay:{measure:gy}};class Yg extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const R_e={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Yg,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Tw},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:ub,measureDroppableContainers:Tw,windowRect:null,measuringScheduled:!1},_H={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Tw,draggableNodes:new Map,over:null,measureDroppableContainers:Tw},yy=v.createContext(_H),EH=v.createContext(R_e);function O_e(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Yg}}}function M_e(t,e){switch(e.type){case Ir.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Ir.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case Ir.DragEnd:case Ir.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Ir.RegisterDroppable:{const{element:n}=e,{id:r}=n,s=new Yg(t.droppable.containers);return s.set(r,n),{...t,droppable:{...t.droppable,containers:s}}}case Ir.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=e,i=t.droppable.containers.get(n);if(!i||r!==i.key)return t;const a=new Yg(t.droppable.containers);return a.set(n,{...i,disabled:s}),{...t,droppable:{...t.droppable,containers:a}}}case Ir.UnregisterDroppable:{const{id:n,key:r}=e,s=t.droppable.containers.get(n);if(!s||r!==s.key)return t;const i=new Yg(t.droppable.containers);return i.delete(n),{...t,droppable:{...t.droppable,containers:i}}}default:return t}}function L_e(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:s}=v.useContext(yy),i=Nw(r),a=Nw(n?.id);return v.useEffect(()=>{if(!e&&!r&&i&&a!=null){if(!mA(i)||document.activeElement===i.target)return;const o=s.get(a);if(!o)return;const{activatorNode:c,node:d}=o;if(!c.current&&!d.current)return;requestAnimationFrame(()=>{for(const h of[c.current,d.current]){if(!h)continue;const p=A1e(h);if(p){p.focus();break}}})}},[r,e,s,a,i]),null}function NH(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((s,i)=>i({transform:s,...r}),n):n}function F_e(t){return v.useMemo(()=>({draggable:{...ub.draggable,...t?.draggable},droppable:{...ub.droppable,...t?.droppable},dragOverlay:{...ub.dragOverlay,...t?.dragOverlay}}),[t?.draggable,t?.droppable,t?.dragOverlay])}function $_e(t){let{activeNode:e,measure:n,initialRect:r,config:s=!0}=t;const i=v.useRef(!1),{x:a,y:o}=typeof s=="boolean"?{x:s,y:s}:s;Ul(()=>{if(!a&&!o||!e){i.current=!1;return}if(i.current||!r)return;const d=e?.node.current;if(!d||d.isConnected===!1)return;const h=n(d),p=lH(h,r);if(a||(p.x=0),o||(p.y=0),i.current=!0,Math.abs(p.x)>0||Math.abs(p.y)>0){const m=uH(d);m&&m.scrollBy({top:p.y,left:p.x})}},[e,a,o,r,n])}const x_=v.createContext({...Qa,scaleX:1,scaleY:1});var Oc;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(Oc||(Oc={}));const V_e=v.memo(function(e){var n,r,s,i;let{id:a,accessibility:o,autoScroll:c=!0,children:d,sensors:h=I_e,collisionDetection:p=Y1e,measuring:m,modifiers:y,...x}=e;const _=v.useReducer(M_e,void 0,O_e),[w,N]=_,[k,S]=L1e(),[O,R]=v.useState(Oc.Uninitialized),M=O===Oc.Initialized,{draggable:{active:P,nodes:C,translate:D},droppable:{containers:$}}=w,F=P!=null?C.get(P):null,U=v.useRef({initial:null,translated:null}),I=v.useMemo(()=>{var St;return P!=null?{id:P,data:(St=F?.data)!=null?St:D_e,rect:U}:null},[P,F]),z=v.useRef(null),[Q,ne]=v.useState(null),[W,K]=v.useState(null),Y=S0(x,Object.values(x)),G=y_("DndDescribedBy",a),q=v.useMemo(()=>$.getEnabled(),[$]),Z=F_e(m),{droppableRects:ge,measureDroppableContainers:Le,measuringScheduled:Pe}=w_e(q,{dragging:M,dependencies:[D.x,D.y],config:Z.droppable}),Ue=x_e(C,P),V=v.useMemo(()=>W?kw(W):null,[W]),ee=hn(),X=__e(Ue,Z.draggable.measure);$_e({activeNode:P!=null?C.get(P):null,config:ee.layoutShiftCompensation,initialRect:X,measure:Z.draggable.measure});const te=L5(Ue,Z.draggable.measure,X),he=L5(Ue?Ue.parentElement:null),ie=v.useRef({activatorEvent:null,active:null,activeNode:Ue,collisionRect:null,collisions:null,droppableRects:ge,draggableNodes:C,draggingNode:null,draggingNodeRect:null,droppableContainers:$,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),le=$.getNodeFor((n=ie.current.over)==null?void 0:n.id),Ne=A_e({measure:Z.dragOverlay.measure}),Se=(r=Ne.nodeRef.current)!=null?r:Ue,ae=M?(s=Ne.rect)!=null?s:te:null,ke=!!(Ne.nodeRef.current&&Ne.rect),ce=S_e(ke?null:te),Ee=bH(Se?Ws(Se):null),Fe=k_e(M?le??Ue:null),ut=P_e(Fe),Pt=NH(y,{transform:{x:D.x-ce.x,y:D.y-ce.y,scaleX:1,scaleY:1},activatorEvent:W,active:I,activeNodeRect:te,containerNodeRect:he,draggingNodeRect:ae,over:ie.current.over,overlayNodeRect:Ne.rect,scrollableAncestors:Fe,scrollableAncestorRects:ut,windowRect:Ee}),Dt=V?zf(V,D):null,xn=T_e(Fe),gr=$5(xn),Wt=$5(xn,[te]),at=zf(Pt,gr),ln=ae?X1e(ae,Pt):null,pe=I&&ln?p({active:I,collisionRect:ln,droppableRects:ge,droppableContainers:q,pointerCoordinates:Dt}):null,we=H1e(pe,"id"),[Te,ve]=v.useState(null),Re=ke?Pt:zf(Pt,Wt),Qe=G1e(Re,(i=Te?.rect)!=null?i:null,te),Ke=v.useRef(null),At=v.useCallback((St,Qt)=>{let{sensor:wn,options:ys}=Qt;if(z.current==null)return;const Xn=C.get(z.current);if(!Xn)return;const ar=St.nativeEvent,Jn=new wn({active:z.current,activeNode:Xn,event:ar,options:ys,context:ie,onAbort(jt){if(!C.get(jt))return;const{onDragAbort:In}=Y.current,Sr={id:jt};In?.(Sr),k({type:"onDragAbort",event:Sr})},onPending(jt,es,In,Sr){if(!C.get(jt))return;const{onDragPending:qs}=Y.current,Zn={id:jt,constraint:es,initialCoordinates:In,offset:Sr};qs?.(Zn),k({type:"onDragPending",event:Zn})},onStart(jt){const es=z.current;if(es==null)return;const In=C.get(es);if(!In)return;const{onDragStart:Sr}=Y.current,Ds={activatorEvent:ar,active:{id:es,data:In.data,rect:U}};ml.unstable_batchedUpdates(()=>{Sr?.(Ds),R(Oc.Initializing),N({type:Ir.DragStart,initialCoordinates:jt,active:es}),k({type:"onDragStart",event:Ds}),ne(Ke.current),K(ar)})},onMove(jt){N({type:Ir.DragMove,coordinates:jt})},onEnd:Hs(Ir.DragEnd),onCancel:Hs(Ir.DragCancel)});Ke.current=Jn;function Hs(jt){return async function(){const{active:In,collisions:Sr,over:Ds,scrollAdjustedTranslate:qs}=ie.current;let Zn=null;if(In&&qs){const{cancelDrop:vi}=Y.current;Zn={activatorEvent:ar,active:In,collisions:Sr,delta:qs,over:Ds},jt===Ir.DragEnd&&typeof vi=="function"&&await Promise.resolve(vi(Zn))&&(jt=Ir.DragCancel)}z.current=null,ml.unstable_batchedUpdates(()=>{N({type:jt}),R(Oc.Uninitialized),ve(null),ne(null),K(null),Ke.current=null;const vi=jt===Ir.DragEnd?"onDragEnd":"onDragCancel";if(Zn){const Ho=Y.current[vi];Ho?.(Zn),k({type:vi,event:Zn})}})}}},[C]),bn=v.useCallback((St,Qt)=>(wn,ys)=>{const Xn=wn.nativeEvent,ar=C.get(ys);if(z.current!==null||!ar||Xn.dndKit||Xn.defaultPrevented)return;const Jn={active:ar};St(wn,Qt.options,Jn)===!0&&(Xn.dndKit={capturedBy:Qt.sensor},z.current=ys,At(wn,Qt))},[C,At]),ms=b_e(h,bn);C_e(h),Ul(()=>{te&&O===Oc.Initializing&&R(Oc.Initialized)},[te,O]),v.useEffect(()=>{const{onDragMove:St}=Y.current,{active:Qt,activatorEvent:wn,collisions:ys,over:Xn}=ie.current;if(!Qt||!wn)return;const ar={active:Qt,activatorEvent:wn,collisions:ys,delta:{x:at.x,y:at.y},over:Xn};ml.unstable_batchedUpdates(()=>{St?.(ar),k({type:"onDragMove",event:ar})})},[at.x,at.y]),v.useEffect(()=>{const{active:St,activatorEvent:Qt,collisions:wn,droppableContainers:ys,scrollAdjustedTranslate:Xn}=ie.current;if(!St||z.current==null||!Qt||!Xn)return;const{onDragOver:ar}=Y.current,Jn=ys.get(we),Hs=Jn&&Jn.rect.current?{id:Jn.id,rect:Jn.rect.current,data:Jn.data,disabled:Jn.disabled}:null,jt={active:St,activatorEvent:Qt,collisions:wn,delta:{x:Xn.x,y:Xn.y},over:Hs};ml.unstable_batchedUpdates(()=>{ve(Hs),ar?.(jt),k({type:"onDragOver",event:jt})})},[we]),Ul(()=>{ie.current={activatorEvent:W,active:I,activeNode:Ue,collisionRect:ln,collisions:pe,droppableRects:ge,draggableNodes:C,draggingNode:Se,draggingNodeRect:ae,droppableContainers:$,over:Te,scrollableAncestors:Fe,scrollAdjustedTranslate:at},U.current={initial:ae,translated:ln}},[I,Ue,pe,ln,C,Se,ae,ge,$,Te,Fe,at]),g_e({...ee,delta:D,draggingRect:ln,pointerCoordinates:Dt,scrollableAncestors:Fe,scrollableAncestorRects:ut});const gs=v.useMemo(()=>({active:I,activeNode:Ue,activeNodeRect:te,activatorEvent:W,collisions:pe,containerNodeRect:he,dragOverlay:Ne,draggableNodes:C,droppableContainers:$,droppableRects:ge,over:Te,measureDroppableContainers:Le,scrollableAncestors:Fe,scrollableAncestorRects:ut,measuringConfiguration:Z,measuringScheduled:Pe,windowRect:Ee}),[I,Ue,te,W,pe,he,Ne,C,$,ge,Te,Le,Fe,ut,Z,Pe,Ee]),Wn=v.useMemo(()=>({activatorEvent:W,activators:ms,active:I,activeNodeRect:te,ariaDescribedById:{draggable:G},dispatch:N,draggableNodes:C,over:Te,measureDroppableContainers:Le}),[W,ms,I,te,N,G,C,Te,Le]);return oe.createElement(oH.Provider,{value:S},oe.createElement(yy.Provider,{value:Wn},oe.createElement(EH.Provider,{value:gs},oe.createElement(x_.Provider,{value:Qe},d)),oe.createElement(L_e,{disabled:o?.restoreFocus===!1})),oe.createElement(V1e,{...o,hiddenTextDescribedById:G}));function hn(){const St=Q?.autoScrollEnabled===!1,Qt=typeof c=="object"?c.enabled===!1:c===!1,wn=M&&!St&&!Qt;return typeof c=="object"?{...c,enabled:wn}:{enabled:wn}}}),B_e=v.createContext(null),B5="button",U_e="Draggable";function z_e(t){let{id:e,data:n,disabled:r=!1,attributes:s}=t;const i=y_(U_e),{activators:a,activatorEvent:o,active:c,activeNodeRect:d,ariaDescribedById:h,draggableNodes:p,over:m}=v.useContext(yy),{role:y=B5,roleDescription:x="draggable",tabIndex:_=0}=s??{},w=c?.id===e,N=v.useContext(w?x_:B_e),[k,S]=Ew(),[O,R]=Ew(),M=j_e(a,e),P=S0(n);Ul(()=>(p.set(e,{id:e,key:i,node:k,activatorNode:O,data:P}),()=>{const D=p.get(e);D&&D.key===i&&p.delete(e)}),[p,e]);const C=v.useMemo(()=>({role:y,tabIndex:_,"aria-disabled":r,"aria-pressed":w&&y===B5?!0:void 0,"aria-roledescription":x,"aria-describedby":h.draggable}),[r,y,_,w,x,h.draggable]);return{active:c,activatorEvent:o,activeNodeRect:d,attributes:C,isDragging:w,listeners:r?void 0:M,node:k,over:m,setNodeRef:S,setActivatorNodeRef:R,transform:N}}function W_e(){return v.useContext(EH)}const H_e="Droppable",q_e={timeout:25};function K_e(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:s}=t;const i=y_(H_e),{active:a,dispatch:o,over:c,measureDroppableContainers:d}=v.useContext(yy),h=v.useRef({disabled:n}),p=v.useRef(!1),m=v.useRef(null),y=v.useRef(null),{disabled:x,updateMeasurementsFor:_,timeout:w}={...q_e,...s},N=S0(_??r),k=v.useCallback(()=>{if(!p.current){p.current=!0;return}y.current!=null&&clearTimeout(y.current),y.current=setTimeout(()=>{d(Array.isArray(N.current)?N.current:[N.current]),y.current=null},w)},[w]),S=v_({callback:k,disabled:x||!a}),O=v.useCallback((C,D)=>{S&&(D&&(S.unobserve(D),p.current=!1),C&&S.observe(C))},[S]),[R,M]=Ew(O),P=S0(e);return v.useEffect(()=>{!S||!R.current||(S.disconnect(),p.current=!1,S.observe(R.current))},[R,S]),v.useEffect(()=>(o({type:Ir.RegisterDroppable,element:{id:r,key:i,disabled:n,node:R,rect:m,data:P}}),()=>o({type:Ir.UnregisterDroppable,key:i,id:r})),[r]),v.useEffect(()=>{n!==h.current.disabled&&(o({type:Ir.SetDroppableDisabled,id:r,key:i,disabled:n}),h.current.disabled=n)},[r,i,n,o]),{active:a,rect:m,isOver:c?.id===r,node:R,over:c,setNodeRef:M}}function Y_e(t){let{animation:e,children:n}=t;const[r,s]=v.useState(null),[i,a]=v.useState(null),o=Nw(n);return!n&&!r&&o&&s(o),Ul(()=>{if(!i)return;const c=r?.key,d=r?.props.id;if(c==null||d==null){s(null);return}Promise.resolve(e(d,i)).then(()=>{s(null)})},[e,r,i]),oe.createElement(oe.Fragment,null,n,r?v.cloneElement(r,{ref:a}):null)}const G_e={x:0,y:0,scaleX:1,scaleY:1};function Q_e(t){let{children:e}=t;return oe.createElement(yy.Provider,{value:_H},oe.createElement(x_.Provider,{value:G_e},e))}const X_e={position:"fixed",touchAction:"none"},J_e=t=>mA(t)?"transform 250ms ease":void 0,Z_e=v.forwardRef((t,e)=>{let{as:n,activatorEvent:r,adjustScale:s,children:i,className:a,rect:o,style:c,transform:d,transition:h=J_e}=t;if(!o)return null;const p=s?d:{...d,scaleX:1,scaleY:1},m={...X_e,width:o.width,height:o.height,top:o.top,left:o.left,transform:Np.Transform.toString(p),transformOrigin:s&&r?U1e(r,o):void 0,transition:typeof h=="function"?h(r):h,...c};return oe.createElement(n,{className:a,style:m,ref:e},i)}),eEe=t=>e=>{let{active:n,dragOverlay:r}=e;const s={},{styles:i,className:a}=t;if(i!=null&&i.active)for(const[o,c]of Object.entries(i.active))c!==void 0&&(s[o]=n.node.style.getPropertyValue(o),n.node.style.setProperty(o,c));if(i!=null&&i.dragOverlay)for(const[o,c]of Object.entries(i.dragOverlay))c!==void 0&&r.node.style.setProperty(o,c);return a!=null&&a.active&&n.node.classList.add(a.active),a!=null&&a.dragOverlay&&r.node.classList.add(a.dragOverlay),function(){for(const[c,d]of Object.entries(s))n.node.style.setProperty(c,d);a!=null&&a.active&&n.node.classList.remove(a.active)}},tEe=t=>{let{transform:{initial:e,final:n}}=t;return[{transform:Np.Transform.toString(e)},{transform:Np.Transform.toString(n)}]},nEe={duration:250,easing:"ease",keyframes:tEe,sideEffects:eEe({styles:{active:{opacity:"0"}}})};function rEe(t){let{config:e,draggableNodes:n,droppableContainers:r,measuringConfiguration:s}=t;return g_((i,a)=>{if(e===null)return;const o=n.get(i);if(!o)return;const c=o.node.current;if(!c)return;const d=wH(a);if(!d)return;const{transform:h}=Ws(a).getComputedStyle(a),p=cH(h);if(!p)return;const m=typeof e=="function"?e:sEe(e);return gH(c,s.draggable.measure),m({active:{id:i,data:o.data,node:c,rect:s.draggable.measure(c)},draggableNodes:n,dragOverlay:{node:a,rect:s.dragOverlay.measure(d)},droppableContainers:r,measuringConfiguration:s,transform:p})})}function sEe(t){const{duration:e,easing:n,sideEffects:r,keyframes:s}={...nEe,...t};return i=>{let{active:a,dragOverlay:o,transform:c,...d}=i;if(!e)return;const h={x:o.rect.left-a.rect.left,y:o.rect.top-a.rect.top},p={scaleX:c.scaleX!==1?a.rect.width*c.scaleX/o.rect.width:1,scaleY:c.scaleY!==1?a.rect.height*c.scaleY/o.rect.height:1},m={x:c.x-h.x,y:c.y-h.y,...p},y=s({...d,active:a,dragOverlay:o,transform:{initial:c,final:m}}),[x]=y,_=y[y.length-1];if(JSON.stringify(x)===JSON.stringify(_))return;const w=r?.({active:a,dragOverlay:o,...d}),N=o.node.animate(y,{duration:e,easing:n,fill:"forwards"});return new Promise(k=>{N.onfinish=()=>{w?.(),k()}})}}let U5=0;function iEe(t){return v.useMemo(()=>{if(t!=null)return U5++,U5},[t])}const aEe=oe.memo(t=>{let{adjustScale:e=!1,children:n,dropAnimation:r,style:s,transition:i,modifiers:a,wrapperElement:o="div",className:c,zIndex:d=999}=t;const{activatorEvent:h,active:p,activeNodeRect:m,containerNodeRect:y,draggableNodes:x,droppableContainers:_,dragOverlay:w,over:N,measuringConfiguration:k,scrollableAncestors:S,scrollableAncestorRects:O,windowRect:R}=W_e(),M=v.useContext(x_),P=iEe(p?.id),C=NH(a,{activatorEvent:h,active:p,activeNodeRect:m,containerNodeRect:y,draggingNodeRect:w.rect,over:N,overlayNodeRect:w.rect,scrollableAncestors:S,scrollableAncestorRects:O,transform:M,windowRect:R}),D=xA(m),$=rEe({config:r,draggableNodes:x,droppableContainers:_,measuringConfiguration:k}),F=D?w.setRef:void 0;return oe.createElement(Q_e,null,oe.createElement(Y_e,{animation:$},p&&P?oe.createElement(Z_e,{key:P,id:p.id,ref:F,as:o,activatorEvent:h,adjustScale:e,className:c,transition:i,rect:D,style:{zIndex:d,...s},transform:C},n):null))}),oEe=({task:t,columnId:e,isDarkMode:n,handleDeleteTask:r,handleOpenTaskDetail:s,isDeleting:i=!1,onTaskMove:a,facilityId:o,availableAssignees:c})=>{const{memberRefreshTriggers:d,userProfileRefreshTrigger:h}=ph(),[p,m]=v.useState(!1),[y,x]=v.useState({}),[_,w]=v.useState(!1),[N,k]=v.useState(t),[S,O]=v.useState(!1),[R,M]=v.useState(!1),P=v.useRef(null),{attributes:C,listeners:D,setNodeRef:$,transform:F,isDragging:U}=z_e({id:`task-${N.id}`,data:{type:"task",task:N,columnId:e}}),I={...D,onPointerDown:V=>{const ee=V.target;ee.closest("button")||ee.tagName==="BUTTON"||N.pinned||D?.onPointerDown&&D.onPointerDown(V)}},z={transform:Np.Translate.toString(F)};v.useEffect(()=>{k(V=>{if(V.id!==t.id)return t;if(V._clientUpdatedAt){const ee=t.updatedAt?new Date(t.updatedAt).getTime():0,X=V._clientUpdatedAt;return ee>X+1e3?t:V}return t.updatedAt&&V.updatedAt&&new Date(t.updatedAt).getTime()>new Date(V.updatedAt).getTime()?t:V})},[t]),v.useEffect(()=>{const V=X=>{const te=X.detail;te.id===t.id&&(O(!0),k(he=>({...he,...te,_clientUpdatedAt:Date.now()})),setTimeout(()=>{O(!1)},300))},ee=X=>{const{taskId:te}=X.detail;t.id};return window.addEventListener("taskUpdated",V),window.addEventListener("taskDeleted",ee),()=>{window.removeEventListener("taskUpdated",V),window.removeEventListener("taskDeleted",ee)}},[t.id]),v.useEffect(()=>{if(c&&c.length>0){const V={};c.forEach(ee=>{V[ee.id]={name:ee.name,profilePicture:ee.profilePicture}}),x(V),w(!1)}},[c]);const Q=V=>{const ee=V.target;ee.closest("button")||ee.tagName==="BUTTON"||["input","textarea","select","a",'[role="button"]','[contenteditable="true"]'].some(he=>ee.closest(he))||s(N.id)},ne=V=>{(V.key==="Enter"||V.key===" ")&&(V.preventDefault(),V.stopPropagation(),s(N.id))},W=V=>{V.stopPropagation(),V.preventDefault(),r(N.id,N.title,e)},K=V=>{V.stopPropagation(),V.preventDefault(),s(N.id)},Y=()=>{m(!0)},G=()=>{m(!1)},q=V=>{switch(V){case"todo":return l.jsx(sr,{className:"w-3 h-3"});case"in-progress":return l.jsx(fW,{className:"w-3 h-3"});case"review":return l.jsx(em,{className:"w-3 h-3"});case"done":return l.jsx(Mi,{className:"w-3 h-3"});default:return l.jsx(sr,{className:"w-3 h-3"})}},Z=V=>{switch(V){case"done":return"bg-emerald-50 text-emerald-700 border-emerald-200 dark:bg-emerald-900/20 dark:text-emerald-300 dark:border-emerald-800";case"in-progress":return"bg-blue-50 text-blue-700 border-blue-200 dark:bg-blue-900/20 dark:text-blue-300 dark:border-blue-800";case"review":return"bg-amber-50 text-amber-700 border-amber-200 dark:bg-amber-900/20 dark:text-amber-300 dark:border-amber-800";default:return"bg-gray-50 text-gray-700 border-gray-200 dark:bg-gray-800 dark:text-gray-300 dark:border-gray-700"}},ge=V=>{switch(V){case"in-progress":return"In Progress";case"todo":return"To Do";default:return V.charAt(0).toUpperCase()+V.slice(1)}},Le=V=>new Date(V)<new Date,Pe=V=>{const ee=new Date,te=new Date(V).getTime()-ee.getTime();return Math.ceil(te/(1e3*60*60*24))},Ue=V=>{const ee=Pe(V);return ee<0?`${Math.abs(ee)}d overdue`:ee===0?"Due today":`${ee}d due`};return l.jsx(Mn,{ref:V=>{V&&(P.current=V,$(V))},"aria-label":`Task: ${N.title}. Status: ${ge(N.status)}. Click to view details.`,onClick:Q,onMouseEnter:Y,onMouseLeave:G,onKeyDown:V=>{(V.key==="Enter"||V.key===" ")&&(V.preventDefault(),s(N.id))},style:z,...C,...I,className:`
          group task-card drag-transition
          ${N.pinned?"cursor-default":"cursor-grab active:cursor-grabbing"}
          ${S?"ring-2 ring-blue-500 ring-opacity-50":""}
          ${U?"task-card-dragging":""}
          ${n?"bg-gray-800 border-gray-700 hover:bg-gray-750 hover:shadow-lg":"bg-white border-gray-200 hover:bg-gray-50 hover:shadow-lg"}
          focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2
          rounded-lg shadow-sm p-0 overflow-hidden
          mb-2
        `,children:l.jsxs("div",{className:"p-3",children:[l.jsxs("div",{className:"flex items-start justify-between mb-3",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[N.pinned&&l.jsx("div",{className:"flex items-center",children:l.jsx(gW,{className:"w-3 h-3 text-green-600 dark:text-green-400 fill-current"})}),l.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 text-xs font-semibold rounded-full border ${Z(N.status)}`,"aria-label":`Status: ${ge(N.status)}`,children:[q(N.status),ge(N.status)]})]}),l.jsxs("div",{className:`flex items-center gap-1 transition-all duration-200 ${p?"opacity-100":"opacity-0"}`,children:[l.jsx(ct,{onClick:V=>{V.stopPropagation(),V.preventDefault(),K(V)},variant:"ghost",size:"sm",className:"h-8 w-8 p-0 hover:bg-green-100 dark:hover:bg-green-900/30 hover:text-green-600 dark:hover:text-green-400","aria-label":`View details for task: ${N.title}`,draggable:!1,onMouseDown:V=>{V.stopPropagation(),V.preventDefault()},onMouseUp:V=>{V.stopPropagation(),V.preventDefault()},onDragStart:V=>{V.preventDefault(),V.stopPropagation()},onDrag:V=>{V.preventDefault(),V.stopPropagation()},onDragEnd:V=>{V.preventDefault(),V.stopPropagation()},children:l.jsx(KP,{className:"w-4 h-4 text-green-600 dark:text-green-400"})}),l.jsx(Qr,{requiredPermission:"tasks.delete",facilityId:o,children:l.jsx(ct,{onClick:V=>{V.stopPropagation(),V.preventDefault(),W(V)},variant:"ghost",size:"sm",disabled:i,className:"h-8 w-8 p-0 hover:bg-red-100 dark:hover:bg-red-900/30 hover:text-red-600 dark:hover:text-red-400","aria-label":`Delete task: ${N.title}`,draggable:!1,onMouseDown:V=>{V.stopPropagation(),V.preventDefault()},onMouseUp:V=>{V.stopPropagation(),V.preventDefault()},onDragStart:V=>{V.preventDefault(),V.stopPropagation()},onDrag:V=>{V.preventDefault(),V.stopPropagation()},onDragEnd:V=>{V.preventDefault(),V.stopPropagation()},children:l.jsx(Vi,{className:"w-4 h-4"})})})]})]}),l.jsx("h4",{className:`font-semibold text-sm leading-tight mb-3 cursor-pointer hover:text-blue-600 dark:hover:text-blue-400 transition-colors line-clamp-2 ${n?"text-white":"text-gray-900"}`,tabIndex:-1,onKeyDown:ne,role:"heading","aria-level":4,children:N.title}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"flex items-center",children:(()=>{const V=N,ee=V.assignees||V.assigneeIds||[];if(!(ee.length>0))return l.jsx("span",{className:`text-xs font-medium px-2 py-1 rounded-full ${n?"text-gray-400 bg-gray-700/50":"text-gray-500 bg-gray-100"}`,children:"No assignee"});if(_)return l.jsxs("div",{className:"flex items-center",children:[ee.slice(0,5).map((le,Ne)=>l.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center animate-pulse border-2 border-white dark:border-gray-800 ${n?"bg-gray-600 text-gray-300":"bg-gray-300 text-gray-600"}`,style:{marginLeft:Ne>0?"-8px":"0",zIndex:5-Ne},children:l.jsx(As,{className:"w-3 h-3"})},Ne)),ee.length>5&&l.jsxs("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-medium border-2 border-white dark:border-gray-800 ${n?"bg-gray-600 text-gray-300":"bg-gray-300 text-gray-600"}`,style:{marginLeft:"-8px",zIndex:0},children:["+",ee.length-5]})]});const te=5,he=ee.slice(0,te),ie=ee.length-te;return l.jsxs("div",{className:"flex items-center",children:[he.map((le,Ne)=>{const Se=typeof le=="string"?le:le.id,ae=y[Se],ke=ae?ae.name:"Unknown User",ce=ae?ae.name.charAt(0).toUpperCase():"?";return l.jsx("div",{className:"w-6 h-6 rounded-full overflow-hidden bg-brand text-white flex items-center justify-center text-xs font-medium cursor-pointer border-2 border-white dark:border-gray-800",title:ke,"aria-label":`Assigned to: ${ke}`,style:{marginLeft:Ne>0?"-8px":"0",zIndex:te-Ne},children:ae?.profilePicture?l.jsx("img",{src:ae.profilePicture,alt:ke,className:"w-full h-full object-cover"}):ce},`${Se}-${Ne}`)}),ie>0&&l.jsxs("div",{className:"w-6 h-6 rounded-full flex items-center justify-center text-xs font-medium bg-gray-500 text-white border-2 border-white dark:border-gray-800",title:`${ie} more assignees`,"aria-label":`${ie} more assignees`,style:{marginLeft:"-8px",zIndex:0},children:["+",ie]})]})})()}),l.jsx("div",{className:"flex items-center",children:N.dueDate&&l.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 text-xs font-medium rounded-full ${Le(N.dueDate)?"bg-red-50 text-red-700 dark:bg-red-900/20 dark:text-red-300":Pe(N.dueDate)<=3?"bg-amber-50 text-amber-700 dark:bg-amber-900/20 dark:text-amber-300":"bg-gray-50 text-gray-600 dark:bg-gray-800 dark:text-gray-400"}`,"aria-label":`Due date: ${Ue(N.dueDate)}`,children:[l.jsx(fp,{className:"w-3 h-3"}),Ue(N.dueDate)]})})]})]})})},lEe=({column:t,isDarkMode:e,editingTaskId:n,editingTaskTitle:r,setEditingTaskTitle:s,setEditingTaskId:i,addingTaskColumnId:a,setAddingTaskColumnId:o,openTaskDropdownId:c,setOpenTaskDropdownId:d,openDropdownId:h,setOpenDropdownId:p,editingProjectId:m,editingProjectName:y,setEditingProjectId:x,setEditingProjectName:_,handleCreateTask:w,handleSaveNewTask:N,handleCancelNewTask:k,handleDeleteTask:S,handleSaveTask:O,handleCancelEdit:R,handleArchiveProject:M,handleDeleteProject:P,handleUpdateProjectName:C,handleUpdateProjectStatus:D,handleOpenTaskDetail:$,onTaskMove:F,facilityId:U,selectedProjectId:I,availableAssignees:z})=>{_u();const[Q,ne]=v.useState(!1),[W,K]=v.useState(!1),[Y,G]=v.useState(null),[q,Z]=v.useState(null);v.useEffect(()=>{if(I===t.id){K(!0);const le=setTimeout(()=>{K(!1)},3e3);return()=>clearTimeout(le)}else K(!1)},[I,t.id]),v.useEffect(()=>{!t._status&&t._projectStatus&&Y&&q&&Date.now()-q>2e3&&(G(null),Z(null))},[t,Y,q]);const ge={planning:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300","in-progress":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300",completed:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300","on-hold":"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-300",critical:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"},Le=()=>{if(t.tasks.length===0)return"planning";const le=t.tasks.filter(Se=>Se.status==="done").length,Ne=t.tasks.length;return le===Ne?"completed":le>0?"in-progress":"planning"},Pe=Y||t._status||t._projectStatus||t.status||Le(),Ue=v.useRef(null);v.useEffect(()=>{const le=Ne=>{Ue.current&&!Ue.current.contains(Ne.target)&&ne(!1)};return document.addEventListener("mousedown",le),()=>{document.removeEventListener("mousedown",le)}},[]);const{isOver:V,setNodeRef:ee}=K_e({id:`column-${t.id}`,data:{type:"column",columnId:t.id}}),X=(le,Ne)=>{const Se=["bg-blue-50 border-blue-200 dark:bg-blue-900/20 dark:border-blue-700","bg-green-50 border-green-200 dark:bg-green-900/20 dark:border-green-700","bg-purple-50 border-purple-200 dark:bg-purple-900/20 dark:border-purple-700","bg-orange-50 border-orange-200 dark:bg-orange-900/20 dark:border-orange-700","bg-pink-50 border-pink-200 dark:bg-pink-900/20 dark:border-pink-700"],ae=le.split("").reduce((ke,ce)=>ke+ce.charCodeAt(0),0);return Se[ae%Se.length]},te=(le,Ne)=>{const Se=["text-blue-800 dark:text-blue-300","text-green-800 dark:text-green-300","text-purple-800 dark:text-purple-300","text-orange-800 dark:text-orange-300","text-pink-800 dark:text-pink-300"],ae=le.split("").reduce((ke,ce)=>ke+ce.charCodeAt(0),0);return Se[ae%Se.length]},he=X(t.title),ie=te(t.title);return l.jsxs("div",{ref:ee,"data-column-id":t.id,className:`group flex-shrink-0 flex flex-col max-h-[calc(100vh-160px)] rounded-lg project-column drag-transition ${he} p-3 ${V?"drop-zone-active":""} ${W?"ring-4 ring-green-500 ring-opacity-75 shadow-lg shadow-green-500/25":""}`,style:{width:"16.25rem",minWidth:"16.25rem",maxWidth:"16.25rem"},onMouseLeave:()=>p(null),children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("div",{className:"flex-1 min-w-0 overflow-hidden",children:m===t.id?l.jsx("input",{type:"text",value:y,onChange:le=>_(le.target.value),className:`w-full font-semibold text-sm mb-2 px-3 py-2 rounded-lg focus:outline-none border-none ${e?"bg-gray-600 text-white placeholder-gray-400":"bg-white text-gray-900 placeholder-gray-500"}`,autoFocus:!0,onKeyDown:async le=>{le.key==="Enter"?(le.preventDefault(),y.trim()&&await C(t.id,y.trim()),x(null),_("")):le.key==="Escape"&&(le.preventDefault(),x(null),_(""))},onBlur:async()=>{y.trim()&&await C(t.id,y.trim()),x(null),_("")}}):l.jsxs("h3",{className:`font-semibold ${ie} text-sm cursor-pointer flex items-center min-w-0`,onClick:()=>{x(t.id),_(t.title)},children:[l.jsxs("span",{className:"flex-shrink-0",children:[t.tasks.length," •"]}),l.jsx("span",{className:"truncate whitespace-nowrap min-w-0 ml-1",children:t.title})]})}),l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsxs("div",{className:"relative",ref:Ue,children:[l.jsxs("button",{onClick:()=>ne(!Q),className:`flex items-center gap-1 px-2 py-1 rounded-md text-xs font-medium transition-colors ${ge[Pe]}`,title:"Change project status",children:[l.jsx("span",{className:"capitalize",children:Pe.replace("-"," ")}),l.jsx(Va,{className:"w-3 h-3"})]}),Q&&l.jsx("div",{className:"absolute top-full left-0 mt-1 w-32 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-md shadow-lg z-10",children:Object.keys(ge).map(le=>l.jsx("button",{onClick:()=>{G(le),Z(Date.now()),ne(!1),D(t.id,le)},className:`w-full text-left px-3 py-2 text-xs font-medium hover:bg-gray-100 dark:hover:bg-gray-700 first:rounded-t-md last:rounded-b-md ${ge[le]}`,children:le.replace("-"," ").replace(/\b\w/g,Ne=>Ne.toUpperCase())},le))})]}),l.jsx(Qr,{requiredPermission:"projects.delete",facilityId:U,children:l.jsxs("div",{className:"relative",children:[l.jsx("button",{onClick:()=>p(h===t.id?null:t.id),className:"flex items-center justify-center p-1 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:l.jsx(rb,{className:"w-4 h-4"})}),h===t.id&&l.jsxs("div",{className:`absolute right-0 mt-1 w-32 rounded-md shadow-lg z-10 ${e?"bg-gray-700":"bg-white"} border ${e?"border-gray-600":"border-gray-200"}`,children:[l.jsx(Qr,{requiredPermission:"projects.archive",facilityId:U,children:l.jsxs("button",{onClick:()=>M(t.id,t.title),className:`block w-full text-left px-3 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-600 ${e?"text-white":"text-gray-900"}`,children:[l.jsx(sw,{className:"w-4 h-4 inline mr-2"}),"Archive"]})}),l.jsx(Qr,{requiredPermission:"projects.delete",facilityId:U,children:l.jsxs("button",{onClick:()=>P(t.id,t.title),className:"block w-full text-left px-3 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-600 text-red-600 dark:text-red-400",children:[l.jsx(Vi,{className:"w-4 h-4 inline mr-2"}),"Delete"]})})]})]})})]})]}),l.jsx(Qr,{requiredPermission:"tasks.create",facilityId:U,children:l.jsxs("button",{onClick:()=>w(t.id),className:`w-full mb-3 p-1.5 rounded-md text-sm flex items-center space-x-2 transition-colors ${e?"text-gray-400 hover:bg-gray-700 hover:text-gray-300":"text-gray-600 hover:bg-gray-200 hover:text-gray-800"}`,children:[l.jsx(Ps,{className:"w-4 h-4"}),l.jsx("span",{children:"Add task"})]})}),l.jsx("div",{className:"overflow-y-auto project-column-scroll",children:l.jsxs("div",{className:"space-y-2",children:[a===t.id?l.jsx("input",{type:"text",value:r,onChange:le=>s(le.target.value),placeholder:"Task title...",className:`w-full font-semibold text-sm mb-2 px-3 py-2 rounded-lg focus:outline-none ${e?"bg-gray-600 text-white border-gray-500 placeholder-gray-400":"bg-white text-gray-900 border-gray-300 placeholder-gray-500"}`,autoFocus:!0,onKeyDown:le=>{le.key==="Enter"?(le.preventDefault(),N(t.id)):le.key==="Escape"&&(le.preventDefault(),k())},onBlur:()=>N(t.id)}):null,t.tasks.length===0?l.jsx("div",{className:`min-h-[100px] rounded-lg border-2 border-dashed ${e?"border-gray-600":"border-gray-300"} flex items-center justify-center`,children:l.jsx("span",{className:`text-sm ${e?"text-gray-500":"text-gray-400"}`,children:"No tasks yet"})}):t.tasks.sort((le,Ne)=>{const Se=le.pinned||!1,ae=Ne.pinned||!1;return Se&&!ae?-1:!Se&&ae?1:0}).map(le=>l.jsx(oEe,{task:le,columnId:t.id,isDarkMode:e,handleDeleteTask:S,handleOpenTaskDetail:$,onTaskMove:F,facilityId:U,availableAssignees:z},`${le.id}-${le._clientUpdatedAt||le.updatedAt||le.createdAt}`))]})})]})},cEe=({isCreatingProject:t,newProjectName:e,setNewProjectName:n,isCreatingLoading:r,createError:s,handleStartCreateProject:i,handleCancelCreateProject:a,handleCreateProject:o,isDarkMode:c})=>{const d=p=>{p.key==="Enter"?(p.preventDefault(),p.stopPropagation(),!r&&e.trim()&&o()):p.key==="Escape"&&(p.preventDefault(),p.stopPropagation(),a())},h=p=>{!p.currentTarget.contains(p.relatedTarget)&&!r&&setTimeout(()=>{r||a()},100)};return l.jsxs("div",{className:"flex-shrink-0 flex items-start justify-start",style:{width:"16.25rem",minWidth:"16.25rem",maxWidth:"16.25rem"},children:[t?l.jsxs("div",{className:`flex items-center p-2 w-full rounded-md transition-all duration-300 ease-in-out shadow-md ${c?"bg-gray-700":"bg-white"}`,style:{maxWidth:"18rem"},tabIndex:-1,onBlur:h,children:[l.jsx("input",{type:"text",placeholder:"Enter project name…",value:e,onChange:p=>n(p.target.value),className:`flex-grow font-semibold text-sm border-none focus:outline-none ${c?"bg-gray-700 text-white placeholder-gray-400":"bg-white text-gray-900 placeholder-gray-500"}`,autoFocus:!0,onKeyDown:d,disabled:r}),r&&l.jsx("div",{className:"ml-2 animate-spin rounded-full h-4 w-4 border-b-2 border-brand"})]}):l.jsx("button",{onClick:i,className:"w-8 h-8 p-1 rounded-md text-sm flex items-center justify-center transition-colors bg-brand text-white hover:bg-brand-dark",children:l.jsx(Ps,{className:"w-4 h-4"})}),s&&l.jsx("p",{className:"text-red-600 dark:text-red-400 text-xs mt-1",children:s})]})},uEe=({columns:t,isDarkMode:e,onColumnClick:n,className:r=""})=>{const[s,i]=v.useState(!1),[a,o]=v.useState(1),[c,d]=v.useState(!1),h=v.useRef(null),p=v.useRef(null),m=v.useRef(null),y=2,x=.5,_=()=>{o(S=>Math.min(S+.2,y))},w=()=>{o(S=>Math.max(S-.2,x))};v.useEffect(()=>{const S=()=>{if(m.current&&h.current){const R=m.current.scrollWidth,M=h.current.clientWidth-16,P=R>M;d(P)}},O=setTimeout(S,100);return window.addEventListener("resize",S),()=>{clearTimeout(O),window.removeEventListener("resize",S)}},[t,s,a]);const N=S=>{n?.(S);const O=document.querySelector(`[data-column-id="${S}"]`);O&&O.scrollIntoView({behavior:"smooth",block:"nearest"})},k=S=>{switch(S.priority?.toLowerCase()){case"high":return e?"bg-red-600":"bg-red-500";case"medium":return e?"bg-yellow-600":"bg-yellow-500";case"low":return e?"bg-green-600":"bg-green-500";default:return e?"bg-gray-600":"bg-gray-400"}};return t.length===0?null:l.jsxs("div",{ref:p,className:`fixed bottom-4 right-4 z-30 transition-all duration-300 ${s?"w-80 h-60":"w-48 h-32"} ${r}`,children:[l.jsxs("div",{ref:h,className:`relative w-full h-full rounded-lg border shadow-lg overflow-hidden ${e?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,style:{transform:`scale(${a})`,transformOrigin:"top left"},children:[l.jsx("div",{className:`absolute top-0 left-0 right-0 z-10 p-2 border-b ${e?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"}`,children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h3",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Board Overview"}),l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx("button",{onClick:w,disabled:a<=x,className:"p-1 rounded hover:bg-gray-200 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Zoom out",children:l.jsx(aye,{className:"w-3 h-3"})}),l.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[Math.round(a*100),"%"]}),l.jsx("button",{onClick:_,disabled:a>=y,className:"p-1 rounded hover:bg-gray-200 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Zoom in",children:l.jsx(sye,{className:"w-3 h-3"})})]})]})}),l.jsx("div",{className:"absolute top-8 left-0 right-0 bottom-0 overflow-x-auto overflow-y-hidden kanban-minimap",children:l.jsx("div",{ref:m,className:"flex space-x-1 p-2 min-w-max",children:t.map(S=>l.jsxs("div",{className:"flex-shrink-0 w-16 cursor-pointer",onClick:()=>N(S.id),children:[l.jsx("div",{className:`p-1 rounded-t text-xs font-medium truncate ${e?"bg-gray-700 text-gray-300":"bg-gray-100 text-gray-700"}`,children:S.title}),l.jsxs("div",{className:`space-y-0.5 p-1 rounded-b min-h-20 ${e?"bg-gray-700":"bg-gray-50"}`,children:[S.tasks.slice(0,8).map(O=>l.jsx("div",{className:`h-2 rounded-sm ${k(O)} opacity-80 hover:opacity-100 transition-opacity`,title:O.title},O.id)),S.tasks.length>8&&l.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 text-center",children:["+",S.tasks.length-8]})]})]},S.id))})})]}),l.jsx("button",{onClick:()=>i(!s),className:`absolute -top-2 -left-2 p-1 rounded-full shadow-lg transition-colors ${e?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-white hover:bg-gray-50 text-gray-600"}`,title:s?"Minimize":"Expand",children:l.jsx(o0e,{className:`w-3 h-3 transition-transform ${s?"rotate-180":""}`})}),s&&l.jsxs("div",{className:`absolute bottom-full left-0 right-0 mb-2 p-2 rounded-lg border shadow-lg ${e?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[l.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Legend:"}),l.jsxs("div",{className:"flex items-center space-x-3 text-xs",children:[l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-sm"}),l.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"High Priority"})]}),l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-sm"}),l.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Medium"})]}),l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-sm"}),l.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Low Priority"})]}),l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-sm"}),l.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Default"})]})]})]})]})},dEe=({columns:t,isDarkMode:e,editingTaskId:n,editingTaskTitle:r,setEditingTaskTitle:s,setEditingTaskId:i,handleOpenTaskDetail:a,addingTaskColumnId:o,setAddingTaskColumnId:c,openTaskDropdownId:d,setOpenTaskDropdownId:h,openDropdownId:p,setOpenDropdownId:m,editingProjectId:y,editingProjectName:x,setEditingProjectId:_,setEditingProjectName:w,isCreatingProject:N,newProjectName:k,setNewProjectName:S,isCreatingLoading:O,createError:R,handleStartCreateProject:M,handleCancelCreateProject:P,handleCreateProject:C,handleCreateTask:D,handleSaveNewTask:$,handleCancelNewTask:F,handleDeleteTask:U,handleSaveTask:I,handleCancelEdit:z,handleArchiveProject:Q,handleDeleteProject:ne,handleUpdateProjectName:W,handleUpdateProjectStatus:K,onTaskMove:Y,facilityId:G,selectedProjectId:q,availableAssignees:Z})=>{const[ge,Le]=oe.useState(null),Pe=V=>{const{active:ee}=V;ee.data.current?.type==="task"&&Le(ee.data.current.task)},Ue=V=>{const{active:ee,over:X}=V;if(Le(null),!X||!ee.data.current||ee.data.current.type!=="task")return;const te=ee.data.current.task,he=ee.data.current.columnId;if(X.data.current?.type==="column"){const ie=X.data.current.columnId;if(he===ie)return;Y&&Y(te.id,he,ie,0)}};return l.jsxs(V_e,{collisionDetection:q1e,onDragStart:Pe,onDragEnd:Ue,children:[l.jsx("div",{className:"p-1 overflow-x-auto overflow-y-hidden flex-1 kanban-board h-full",children:l.jsxs("div",{className:"flex space-x-2 min-w-max h-full min-h-0 items-start",children:[t.map(V=>l.jsx(lEe,{column:V,isDarkMode:e,editingTaskId:n,editingTaskTitle:r,setEditingTaskTitle:s,setEditingTaskId:i,addingTaskColumnId:o,setAddingTaskColumnId:c,openTaskDropdownId:d,setOpenTaskDropdownId:h,openDropdownId:p,setOpenDropdownId:m,editingProjectId:y,editingProjectName:x,setEditingProjectId:_,setEditingProjectName:w,handleCreateTask:D,handleSaveNewTask:$,handleCancelNewTask:F,handleDeleteTask:U,handleSaveTask:I,handleCancelEdit:z,handleArchiveProject:Q,handleDeleteProject:ne,handleUpdateProjectName:W,handleUpdateProjectStatus:K,handleOpenTaskDetail:a,onTaskMove:Y,facilityId:G,selectedProjectId:q,availableAssignees:Z},V.id)),l.jsx(cEe,{isCreatingProject:N,newProjectName:k,setNewProjectName:S,isCreatingLoading:O,createError:R,handleStartCreateProject:M,handleCancelCreateProject:P,handleCreateProject:C,isDarkMode:e})]})}),l.jsx(uEe,{columns:t,isDarkMode:e,onColumnClick:V=>{const ee=document.querySelector(`[data-column-id="${V}"]`);ee&&ee.scrollIntoView({behavior:"smooth",block:"nearest"})}}),l.jsx(aEe,{className:"drag-overlay",children:ge?l.jsx("div",{className:"drag-preview rounded-lg overflow-hidden bg-white dark:bg-gray-800 border-2 border-green-500 shadow-2xl",style:{width:"16rem"},children:l.jsxs("div",{className:"p-3",children:[l.jsx("div",{className:"flex items-start justify-between mb-3",children:l.jsx("div",{className:"flex items-center gap-2",children:l.jsx("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 text-xs font-semibold rounded-full border ${ge.status==="done"?"bg-emerald-50 text-emerald-700 border-emerald-200 dark:bg-emerald-900/20 dark:text-emerald-300 dark:border-emerald-800":ge.status==="in-progress"?"bg-blue-50 text-blue-700 border-blue-200 dark:bg-blue-900/20 dark:text-blue-300 dark:border-blue-800":ge.status==="review"?"bg-amber-50 text-amber-700 border-amber-200 dark:bg-amber-900/20 dark:text-amber-300 dark:border-amber-800":"bg-gray-50 text-gray-700 border-gray-200 dark:bg-gray-800 dark:text-gray-300 dark:border-gray-700"}`,children:ge.status==="todo"?"To Do":ge.status==="in-progress"?"In Progress":ge.status==="review"?"Review":"Done"})})}),l.jsx("h4",{className:"font-semibold text-sm leading-tight mb-3 text-gray-900 dark:text-white line-clamp-2",children:ge.title}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"flex items-center",children:ge.assignees&&ge.assignees.length>0||ge.assignee?l.jsxs("div",{className:"flex items-center",children:[(ge.assignees||[ge.assignee]).slice(0,3).map((V,ee)=>{const te=(typeof V=="string"?V:V?.name||V?.id||"")?.charAt?.(0)?.toUpperCase()||"?";return l.jsx("div",{className:"w-6 h-6 rounded-full overflow-hidden bg-green-500 text-white flex items-center justify-center text-xs font-medium border-2 border-white dark:border-gray-800",style:{marginLeft:ee>0?"-8px":"0",zIndex:3-ee},children:te},ee)}),(ge.assignees?.length||(ge.assignee?1:0))>3&&l.jsxs("div",{className:"w-6 h-6 rounded-full flex items-center justify-center text-xs font-medium bg-gray-500 text-white border-2 border-white dark:border-gray-800",style:{marginLeft:"-8px",zIndex:0},children:["+",(ge.assignees?.length||(ge.assignee?1:0))-3]})]}):l.jsx("span",{className:"text-xs font-medium px-2 py-1 rounded-full text-gray-500 bg-gray-100 dark:bg-gray-700 dark:text-gray-400",children:"No assignee"})}),ge.dueDate&&l.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium rounded-full bg-gray-50 text-gray-600 dark:bg-gray-800 dark:text-gray-400",children:[l.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),new Date(ge.dueDate).toLocaleDateString("en-US",{month:"short",day:"numeric"})]})]})]})}):null})]})},Pr=({content:t,children:e,position:n="right",delay:r=500,disabled:s=!1,className:i=""})=>{const[a,o]=v.useState(!1),[c,d]=v.useState(null),[h,p]=v.useState({top:0,left:0}),m=v.useRef(null),y=v.useRef(null),x=()=>{if(s)return;const w=setTimeout(()=>{if(m.current){const N=m.current.getBoundingClientRect();let k=0,S=0;switch(n){case"top":k=N.top-8,S=N.left+N.width/2;break;case"bottom":k=N.bottom+8,S=N.left+N.width/2;break;case"left":k=N.top+N.height/2,S=N.left-8;break;case"right":default:k=N.top+N.height/2,S=N.right+8;break}p({top:k,left:S}),o(!0)}},r);d(w)},_=()=>{c&&(clearTimeout(c),d(null)),o(!1)};return v.useEffect(()=>()=>{c&&clearTimeout(c)},[c]),l.jsxs("div",{ref:m,className:`relative ${i?"block":"inline-block"} ${i}`,onMouseEnter:x,onMouseLeave:_,onFocus:x,onBlur:_,children:[e,a&&l.jsx("div",{ref:y,className:"fixed z-[9999] px-2 py-1 text-xs font-medium text-white bg-gray-900 dark:bg-gray-100 dark:text-gray-900 rounded shadow-lg whitespace-nowrap transition-opacity duration-200 pointer-events-none",style:{top:`${h.top}px`,left:`${h.left}px`,transform:n==="top"||n==="bottom"?"translateX(-50%)":n==="left"?"translateX(-100%) translateY(-50%)":"translateY(-50%)"},role:"tooltip",children:t})]})},hEe=({isOpen:t,onClose:e,onSubmit:n,isDarkMode:r,position:s={top:0,left:0},placeholder:i="Enter task name..."})=>{const[a,o]=v.useState(""),c=v.useRef(null);v.useEffect(()=>{t&&c.current&&c.current.focus()},[t]),v.useEffect(()=>{t||o("")},[t]);const d=y=>{y.preventDefault(),a.trim()&&(n(a.trim()),o(""),e())},h=y=>{y.key==="Escape"&&e()};if(!t)return null;const m=(()=>{let w=s.top,N=s.left;return N+280>window.innerWidth-16&&(N=window.innerWidth-280-16),N<16&&(N=16),w+80>window.innerHeight-16&&(w=s.top-80-10),w<16&&(w=16),{top:w,left:N}})();return l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"fixed inset-0 z-[1000]",onClick:e}),l.jsx("div",{className:`fixed z-[1001] p-3 rounded-lg shadow-lg border w-72 ${r?"bg-gray-800 border-green-500 text-white":"bg-white border-green-400 text-gray-900"}`,style:{top:`${m.top}px`,left:`${m.left}px`},children:l.jsxs("form",{onSubmit:d,className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{ref:c,type:"text",value:a,onChange:y=>o(y.target.value),onKeyDown:h,placeholder:i,className:`flex-1 px-3 py-2 rounded-md text-sm border focus:outline-none focus:ring-1 focus:ring-green-500 focus:border-green-500 transition-all ${r?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-900 placeholder-gray-500"}`}),l.jsx("button",{type:"button",onClick:e,className:`p-1.5 rounded-md transition-colors ${r?"hover:bg-gray-700 text-gray-400 hover:text-gray-300":"hover:bg-gray-100 text-gray-500 hover:text-gray-700"}`,children:l.jsx(yn,{className:"w-4 h-4"})})]}),l.jsxs("div",{className:"flex justify-end gap-2",children:[l.jsx("button",{type:"button",onClick:e,className:`px-3 py-1.5 text-xs rounded-md transition-colors ${r?"text-gray-400 hover:text-gray-300 hover:bg-gray-700":"text-gray-600 hover:text-gray-800 hover:bg-gray-100"}`,children:"Cancel"}),l.jsx("button",{type:"submit",disabled:!a.trim(),className:`px-3 py-1.5 text-xs rounded-md transition-colors ${a.trim()?"bg-green-600 text-white hover:bg-green-700":r?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:"Create"})]})]})})]})},fEe=({columns:t,isDarkMode:e,facilityId:n,onTaskClick:r,onTaskUpdate:s,onTaskDelete:i,onTaskMove:a,availableAssignees:o})=>{const{memberRefreshTriggers:c,userProfileRefreshTrigger:d}=ph(),{user:h}=gi();_u(n);const[p,m]=v.useState(null),[y,x]=v.useState(null),[_,w]=v.useState(""),[N,k]=v.useState("createdAt"),[S,O]=v.useState("desc"),[R,M]=v.useState("project"),[P,C]=v.useState("all"),[D,$]=v.useState(new Set),[F,U]=v.useState(t),[I,z]=v.useState({}),[Q,ne]=v.useState(!1),[W,K]=v.useState(null),[Y,G]=v.useState(null),[q,Z]=v.useState({top:0,left:0}),[ge,Le]=v.useState({}),[Pe,Ue]=v.useState(!1),[V,ee]=v.useState({loaded:0,total:0}),[X,te]=v.useState(new Set),[he,ie]=v.useState(null),[le,Ne]=v.useState(null),[Se,ae]=v.useState({isOpen:!1,title:"",message:"",confirmText:"",cancelText:"",onConfirm:()=>{},type:"info"});v.useEffect(()=>{const we=Te=>{if(W){const ve=Te.target;!ve.closest("[data-dropdown]")&&!ve.closest("[data-ellipsis]")&&K(null)}};return W&&document.addEventListener("mousedown",we),()=>{document.removeEventListener("mousedown",we)}},[W]),v.useEffect(()=>{U(t)},[t]),v.useEffect(()=>{if(o&&o.length>0){const we={};o.forEach(Te=>{we[Te.id]={name:Te.name,profilePicture:Te.profilePicture}}),z(we),ne(!1)}},[o]),v.useEffect(()=>{const we=async()=>{if(F.length===0)return;const ve=new Set;F.forEach(Qe=>{Qe.tasks.forEach(Ke=>{X.has(Ke.id)||ve.add(Ke.id)})});const Re=Array.from(ve);if(Re.length!==0){Ue(!0),ee({loaded:0,total:Re.length});try{const Qe=await gt.getSubtasksBatch(Re);Le(Ke=>({...Ke,...Qe})),te(Ke=>new Set([...Ke,...Re])),ee({loaded:Re.length,total:Re.length})}catch(Qe){console.error("💥 Critical error in batch subtask loading:",Qe),Le(Ke=>{const At={};return Re.forEach(bn=>{At[bn]=[]}),{...Ke,...At}}),te(Ke=>new Set([...Ke,...Re])),ee({loaded:Re.length,total:Re.length})}finally{Ue(!1)}}};F.some(ve=>ve.tasks.some(Re=>!X.has(Re.id)))&&we()},[F,X]),v.useEffect(()=>{const we=Te=>{const ve=Te.detail;U(Re=>Re.map(Qe=>({...Qe,tasks:Qe.tasks.map(Ke=>Ke.id===ve.id?{...Ke,...ve,assignees:ve.assignees||ve.assigneeIds||Ke.assignees,_clientUpdatedAt:Date.now()}:Ke)})))};return window.addEventListener("taskUpdated",we),()=>{window.removeEventListener("taskUpdated",we)}},[]);const ke=v.useMemo(()=>{const we=[];return F.forEach(Te=>{Te.tasks.forEach(ve=>{we.push({...ve,projectId:Te.id,projectName:Te.title,level:0})})}),we},[F]),ce=v.useMemo(()=>{let we=[...ke];P!=="all"&&(we=we.filter(Re=>Re.status===P));let Te=we.sort((Re,Qe)=>{const Ke=Re[N]??"",At=Qe[N]??"";return Ke<At?S==="asc"?-1:1:Ke>At?S==="asc"?1:-1:0});const ve={};return Te.forEach(Re=>{const Qe=Re.projectName;ve[Qe]||(ve[Qe]=[]),ve[Qe].push(Re)}),{groups:Object.entries(ve).map(([Re,Qe])=>({name:Re,tasks:Qe}))}},[ke,N,S,P]),Ee=we=>{$(Te=>{const ve=new Set(Te);return ve.has(we)?ve.delete(we):ve.add(we),ve})},Fe=(we,Te)=>{if(!F.find(Qe=>Qe.title===we))return;const Re=Te.currentTarget.getBoundingClientRect();Z({top:Re.bottom+window.scrollY,left:Re.left+window.scrollX}),G(we)},ut=async we=>{if(!Y)return;const Te=F.find(ve=>ve.title===Y);if(Te){ie(Y);try{const ve={title:we,description:"",status:"todo",projectId:Te.id,creatorId:h?.uid||"",assignees:[],priority:"medium",tags:[]},Re=await gt.create(ve);U(Qe=>Qe.map(Ke=>Ke.id===Te.id?{...Ke,tasks:[...Ke.tasks,Re]}:Ke)),window.dispatchEvent(new CustomEvent("taskCreated",{detail:Re}))}catch(ve){console.error("Failed to create task:",ve),alert(`Failed to create task in ${Y}. Please try again.`)}finally{ie(null),G(null)}}},Pt=we=>{console.log("handleGroupActions called:",we),K(W===we?null:we)},Dt=(we,Te,ve,Re,Qe,Ke="info")=>{ae({isOpen:!0,title:we,message:Te,confirmText:ve,cancelText:Re,onConfirm:Qe,type:Ke})},xn=async(we,Te)=>{console.log("handleGroupAction called:",we,Te);const ve=F.find(Qe=>Qe.title===Te);if(!ve){console.log("Column not found:",Te);return}const Re=ve.tasks.map(Qe=>Qe.id);if(console.log("Task IDs:",Re),Re.length===0){alert(`No tasks found in ${Te}.`),K(null);return}Ne(`${we}-${Te}`);try{switch(we){case"archive":Dt("Archive All Tasks",`Are you sure you want to archive all ${Re.length} tasks in ${Te}?

This will mark all tasks as completed.`,"Archive All","Cancel",async()=>{await gt.bulkUpdateStatus(Re,"done"),U(Qe=>Qe.map(Ke=>Ke.id===ve.id?{...Ke,tasks:Ke.tasks.map(At=>({...At,status:"done"}))}:Ke)),Dt("Success",`Archived ${Re.length} tasks in ${Te}.`,"OK","",()=>{},"info")},"warning");break;case"delete-all":Dt("Delete All Tasks",`Are you sure you want to delete all ${Re.length} tasks in ${Te}?

This action cannot be undone and will permanently remove all tasks.`,"Delete All","Cancel",async()=>{const Qe=Re.map(Ke=>gt.delete(Ke));await Promise.all(Qe),U(Ke=>Ke.map(At=>At.id===ve.id?{...At,tasks:[]}:At)),Dt("Success",`Deleted ${Re.length} tasks from ${Te}.`,"OK","",()=>{},"info")},"danger");break;default:break}}catch(Qe){console.error(`Failed to perform ${we} on tasks in ${Te}:`,Qe),alert(`Failed to perform ${we} on tasks in ${Te}. Please try again.`)}finally{Ne(null)}K(null)},gr=(we,Te,ve)=>{m(we),x(Te),w(ve)},Wt=()=>{p&&y&&s(p,{[y]:_}),m(null),x(null),w("")},at=()=>{m(null),x(null),w("")},ln=we=>we?new Date(we)<new Date&&new Date(we).toDateString()!==new Date().toDateString():!1,pe=we=>{if(!we)return!1;const Te=new Date(we),ve=new Date,Re=Te.getTime()-ve.getTime(),Qe=Math.ceil(Re/(1e3*60*60*24));return Qe<=3&&Qe>=0};return l.jsxs("div",{className:`h-full flex flex-col ${e?"bg-gray-900":"bg-white"}`,children:[l.jsxs("div",{className:"flex-1 overflow-auto",children:[l.jsxs("div",{className:`sticky top-0 z-10 ${e?"bg-gray-800":"bg-white"} border-b ${e?"border-gray-700":"border-gray-200"}`,children:[Pe&&V.total>0&&l.jsx("div",{className:`px-6 py-2 border-b ${e?"border-gray-700 bg-gray-800/50":"border-gray-200 bg-blue-50"}`,children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:"w-4 h-4 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"}),l.jsx("span",{className:`text-sm font-medium ${e?"text-blue-300":"text-blue-700"}`,children:"Loading subtasks..."})]}),l.jsxs("div",{className:`text-xs ${e?"text-gray-400":"text-blue-600"}`,children:[V.loaded," of ",V.total," tasks"]})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:`w-32 h-2 rounded-full ${e?"bg-gray-700":"bg-gray-200"}`,children:l.jsx("div",{className:"h-2 rounded-full bg-gradient-to-r from-blue-500 to-purple-500 transition-all duration-300",style:{width:`${V.loaded/V.total*100}%`}})}),l.jsxs("span",{className:`text-xs font-medium ${e?"text-gray-400":"text-blue-600"}`,children:[Math.round(V.loaded/V.total*100),"%"]})]})]})}),l.jsxs("div",{className:"flex items-center px-6 py-2",children:[l.jsx("div",{className:"w-6 flex-shrink-0",children:l.jsx("div",{className:"w-4 h-4 rounded-full bg-gradient-to-r from-blue-500 to-purple-500 flex items-center justify-center",children:l.jsx("span",{className:"text-white text-xs font-bold",children:"#"})})}),l.jsx("div",{className:"flex-1 px-2",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("span",{className:`text-xs font-medium ${e?"text-gray-300":"text-gray-700"}`,children:"Task:"}),l.jsxs("div",{className:"relative ml-1",children:[l.jsxs("select",{value:P,onChange:we=>{C(we.target.value)},className:`appearance-none px-2 py-1 pr-6 text-xs border-0 rounded-md focus:outline-none ${e?"bg-gray-700 text-gray-300":"bg-gray-100 text-gray-700"}`,children:[l.jsx("option",{value:"all",children:"All"}),l.jsx("option",{value:"todo",children:"To Do"}),l.jsx("option",{value:"in-progress",children:"In Progress"}),l.jsx("option",{value:"review",children:"Review"}),l.jsx("option",{value:"done",children:"Done"})]}),l.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-1 pointer-events-none",children:l.jsx("svg",{className:"w-3 h-3 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]})}),l.jsx("div",{className:"w-24 px-2",children:l.jsx("span",{className:`text-xs font-medium ${e?"text-gray-300":"text-gray-700"}`,children:"Deadline"})}),l.jsx("div",{className:"w-32 px-2",children:l.jsx("span",{className:`text-xs font-medium ${e?"text-gray-300":"text-gray-700"}`,children:"Member"})}),l.jsx("div",{className:"w-32 px-2",children:l.jsx("span",{className:`text-xs font-medium ${e?"text-gray-300":"text-gray-700"}`,children:"Labels"})})]})]}),l.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:ce.groups.map((we,Te)=>l.jsxs("div",{children:[R!=="none"&&l.jsx("div",{className:`${e?"bg-gray-800":"bg-blue-50"} border-b ${e?"border-gray-700":"border-blue-200"}`,children:l.jsxs("div",{className:"flex items-center px-6 py-2",children:[l.jsxs("button",{onClick:()=>Ee(we.name),className:"flex items-center space-x-2 flex-1",children:[D.has(we.name)?l.jsx(HP,{className:"w-3 h-3 text-gray-500"}):l.jsx(Va,{className:"w-3 h-3 text-gray-500"}),l.jsxs("div",{className:`px-2 py-0.5 rounded-full text-xs font-semibold ${e?"bg-blue-900/30 text-blue-300":"bg-blue-100 text-blue-800"}`,children:[we.name," (",we.tasks.length,")"]})]}),l.jsxs("div",{className:"flex items-center space-x-1 relative",children:[l.jsx(Qr,{requiredPermission:"tasks.create",facilityId:n,fallback:l.jsx("button",{disabled:!0,className:`p-1.5 rounded-md transition-colors opacity-50 cursor-not-allowed ${e?"text-gray-600":"text-gray-400"}`,title:"No permission to create tasks",children:l.jsx(Ps,{className:"w-3 h-3"})}),children:l.jsx("button",{onClick:ve=>Fe(we.name,ve),disabled:he===we.name,className:`p-1.5 rounded-md transition-colors ${e?"hover:bg-gray-700 text-gray-400 hover:text-gray-200":"hover:bg-gray-100 text-gray-500 hover:text-gray-700"} ${he===we.name?"opacity-50 cursor-not-allowed":""}`,title:he===we.name?"Creating task...":"Add Task",children:l.jsx(Ps,{className:"w-3 h-3"})})}),l.jsx(Qr,{requiredPermission:"tasks.delete",facilityId:n,fallback:l.jsx("button",{disabled:!0,className:`p-1.5 rounded-md transition-colors opacity-50 cursor-not-allowed ${e?"text-gray-600":"text-gray-400"}`,title:"No permission for group actions","data-ellipsis":!0,children:l.jsx(rb,{className:"w-3 h-3"})}),children:l.jsx("button",{onClick:()=>Pt(we.name),disabled:le?.startsWith("archive")||le?.startsWith("delete-all"),className:`p-1.5 rounded-md transition-colors ${e?"hover:bg-gray-700 text-gray-400 hover:text-gray-200":"hover:bg-gray-100 text-gray-500 hover:text-gray-700"} ${le?"opacity-50 cursor-not-allowed":""}`,title:le?"Processing...":"Group Actions","data-ellipsis":!0,children:le?l.jsx("div",{className:"w-3 h-3 border border-gray-400 border-t-transparent rounded-full animate-spin"}):l.jsx(rb,{className:"w-3 h-3"})})}),W===we.name&&l.jsxs("div",{className:`absolute right-0 top-8 z-50 w-48 rounded-md shadow-md border ${e?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,"data-dropdown":!0,children:[l.jsx("div",{className:`px-3 py-2 border-b ${e?"border-gray-700":"border-gray-200"}`,children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h3",{className:`text-xs font-semibold ${e?"text-gray-200":"text-gray-800"}`,children:"Group Actions"}),l.jsxs("p",{className:`text-xs ${e?"text-gray-400":"text-gray-500"}`,children:[we.tasks.length," tasks"]})]}),l.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center ${e?"bg-blue-900/20":"bg-blue-100"}`,children:l.jsx(rb,{className:"w-3 h-3 text-blue-500"})})]})}),l.jsxs("div",{className:"py-1",children:[l.jsxs("button",{onClick:ve=>{ve.stopPropagation(),xn("archive",we.name)},className:`w-full flex items-center gap-2 px-3 py-2 text-xs transition-colors ${e?"text-gray-300 hover:bg-gray-700":"text-gray-700 hover:bg-gray-100"}`,children:[l.jsx("div",{className:`p-1 rounded ${e?"bg-amber-900/20":"bg-amber-100"}`,children:l.jsx(sw,{className:"w-3 h-3 text-amber-500"})}),l.jsxs("div",{className:"flex flex-col items-start flex-1",children:[l.jsx("span",{className:"font-medium",children:"Archive All Tasks"}),l.jsx("span",{className:`text-xs truncate ${e?"text-gray-400":"text-gray-500"}`,children:"Mark all completed"})]})]}),l.jsx("div",{className:`mx-3 my-1 border-t-2 ${e?"border-gray-600":"border-gray-300"}`}),l.jsxs("button",{onClick:ve=>{ve.stopPropagation(),xn("delete-all",we.name)},className:`w-full flex items-center gap-2 px-3 py-2 text-xs transition-colors ${e?"text-red-400 hover:bg-gray-700":"text-red-600 hover:bg-gray-100"}`,children:[l.jsx("div",{className:`p-1 rounded ${e?"bg-red-900/20":"bg-red-100"}`,children:l.jsx(Vi,{className:"w-3 h-3 text-red-500"})}),l.jsxs("div",{className:"flex flex-col items-start flex-1",children:[l.jsx("span",{className:"font-medium",children:"Delete All Tasks"}),l.jsx("span",{className:`text-xs truncate ${e?"text-gray-400":"text-gray-500"}`,children:"Remove all permanently"})]})]})]}),l.jsx("div",{className:`px-3 py-2 border-t ${e?"border-gray-700":"border-gray-200"}`,children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("p",{className:`text-xs ${e?"text-gray-400":"text-gray-500"}`,children:["Affects ",we.tasks.length," tasks"]}),l.jsx("div",{className:`px-1.5 py-0.5 rounded text-xs font-medium ${e?"bg-gray-700 text-gray-300":"bg-gray-100 text-gray-600"}`,children:we.tasks.length})]})})]})]})]})}),!D.has(we.name)&&l.jsx("div",{children:we.tasks.map(ve=>l.jsxs("div",{className:`flex items-center px-6 py-2 hover:${e?"bg-gray-800":"bg-gray-50"} transition-colors border-b ${e?"border-gray-700":"border-gray-200"}`,children:[l.jsx("div",{className:"w-6 flex-shrink-0",children:l.jsx("div",{className:"w-4 h-4 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center",children:l.jsx("span",{className:"text-gray-600 dark:text-gray-300 text-xs font-medium",children:we.tasks.indexOf(ve)+1})})}),l.jsx("div",{className:"flex-1 px-2",children:l.jsxs("div",{className:"flex items-center space-x-2",children:[ve.priority&&l.jsx(Pr,{content:`Priority: ${ve.priority.charAt(0).toUpperCase()+ve.priority.slice(1)}`,children:l.jsx("div",{className:`w-2 h-2 rounded-full cursor-help ${ve.priority==="urgent"?"bg-red-500":ve.priority==="high"?"bg-orange-500":ve.priority==="medium"?"bg-yellow-500":"bg-green-500"}`})}),l.jsx("div",{className:"flex-1",children:p===ve.id&&y==="title"?l.jsx("input",{type:"text",value:_,onChange:Re=>w(Re.target.value),onBlur:Wt,onKeyDown:Re=>{Re.key==="Enter"&&Wt(),Re.key==="Escape"&&at()},className:`w-full px-2 py-1 rounded border text-sm ${e?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,autoFocus:!0}):l.jsx(Qr,{requiredPermission:"tasks.view_all",facilityId:n,fallback:l.jsx(Pr,{content:"No permission to view task details",children:l.jsx("span",{className:`text-xs ${e?"text-gray-500":"text-gray-400"} opacity-75`,children:ve.title})}),children:l.jsx(Pr,{content:"Click to open task details • Double-click to edit title",children:l.jsx("span",{className:`text-xs cursor-pointer hover:text-brand transition-colors ${e?"text-gray-900":"text-gray-700"}`,onDoubleClick:()=>gr(ve.id,"title",ve.title),onClick:()=>r(ve.id),children:ve.title})})})}),l.jsxs("div",{className:"flex items-center space-x-3 text-xs text-gray-500",children:[l.jsx(Pr,{content:(()=>{const Re=ge[ve.id]||[],Qe=Re.filter(At=>At.completed).length,Ke=Re.length;return Pe&&!X.has(ve.id)?"Loading subtask progress...":Ke===0&&!X.has(ve.id)?"No subtasks found":`Task Progress: ${Qe} completed out of ${Ke} total subtasks`})(),children:l.jsxs("div",{className:"flex items-center space-x-1 cursor-help hover:text-gray-700 dark:hover:text-gray-300 transition-colors",children:[l.jsx(GP,{className:`w-3 h-3 ${Pe&&!X.has(ve.id)?"animate-pulse":""}`}),l.jsx("span",{children:(()=>{const Re=ge[ve.id]||[],Qe=Re.filter(At=>At.completed).length,Ke=Re.length;return Pe&&!X.has(ve.id)?"...":Ke>0?`${Qe}/${Ke}`:ve.progress!==void 0?`${Math.round(ve.progress)}%`:"0/0"})()})]})}),l.jsx(Pr,{content:(()=>{const Re=ve.estimatedDuration||0,Qe=ve.actualCompletionDate;let Ke=`Estimated Time: ${Re} hours`;if(Qe){const At=Math.round((new Date(Qe).getTime()-new Date(ve.createdAt).getTime())/36e5);Ke+=` • Completed in ${At} hours`}return Ke})(),children:l.jsxs("div",{className:"flex items-center space-x-1 cursor-help hover:text-gray-700 dark:hover:text-gray-300 transition-colors",children:[l.jsx(sr,{className:"w-3 h-3"}),l.jsxs("span",{children:[ve.estimatedDuration||0,"h"]})]})})]})]})}),l.jsx("div",{className:"w-24 px-2",children:p===ve.id&&y==="dueDate"?l.jsx("input",{type:"date",value:_,onChange:Re=>w(Re.target.value),onBlur:Wt,className:`w-full px-2 py-1 rounded border text-xs ${e?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,autoFocus:!0}):l.jsx(Pr,{content:ve.dueDate?`Due Date: ${new Date(ve.dueDate).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}${ln(ve.dueDate)?" • OVERDUE":pe(ve.dueDate)?" • Due Soon":""}`:"No due date set • Double-click to add due date",children:l.jsx("span",{className:`text-xs cursor-pointer hover:text-brand transition-colors ${e?"text-gray-300":"text-gray-700"} ${ln(ve.dueDate)?"text-red-500 font-semibold":pe(ve.dueDate)?"text-yellow-500 font-semibold":""}`,onDoubleClick:()=>gr(ve.id,"dueDate",ve.dueDate||""),children:ve.dueDate?new Date(ve.dueDate).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"No due date"})})}),l.jsx("div",{className:"w-32 px-2",children:l.jsx(Pr,{content:(()=>{const Re=ve.assignees||ve.assigneeIds||[];return Re.length===0?"No assignees • Click to assign team members":`Assigned to: ${Re.map(Ke=>{const At=typeof Ke=="string"?Ke:Ke.id,bn=I[At];return bn?bn.name:"Unknown User"}).join(", ")}`})(),children:l.jsx("div",{className:"flex items-center space-x-1 cursor-help",children:(()=>{const Re=ve.assignees||ve.assigneeIds||[];return Re&&Re.length>0})()?l.jsxs(l.Fragment,{children:[(ve.assignees||ve.assigneeIds||[]).slice(0,3).map((Qe,Ke)=>{const At=typeof Qe=="string"?Qe:Qe.id,bn=I[At],ms=bn?bn.name:"Unknown User",gs=bn?bn.name.charAt(0).toUpperCase():"?";return l.jsxs("div",{className:"relative",children:[bn?.profilePicture?l.jsx("img",{src:bn.profilePicture,alt:ms,className:"w-5 h-5 rounded-full object-cover border border-gray-200 dark:border-gray-600",onError:Wn=>{const hn=Wn.target;hn.style.display="none";const St=hn.nextElementSibling;St&&(St.style.display="flex")},onLoad:Wn=>{const hn=Wn.target.nextElementSibling;hn&&(hn.style.display="none")}}):null,l.jsx("div",{className:"w-5 h-5 rounded-full flex items-center justify-center border bg-blue-100 text-blue-700 border-blue-200 dark:bg-blue-900/30 dark:text-blue-300 dark:border-blue-700",style:{display:bn?.profilePicture&&bn.profilePicture.trim()!==""?"none":"flex"},children:l.jsx("span",{className:"text-xs font-medium",children:gs})})]},`${At}-${Ke}`)}),(ve.assignees||ve.assigneeIds||[]).length>3&&l.jsx("div",{className:"w-5 h-5 rounded-full flex items-center justify-center border bg-gray-100 text-gray-600 border-gray-200 dark:bg-gray-700 dark:text-gray-400 dark:border-gray-600",children:l.jsxs("span",{className:"text-xs font-medium",children:["+",(ve.assignees||ve.assigneeIds||[]).length-3]})})]}):l.jsx("div",{className:"w-5 h-5 rounded-full flex items-center justify-center border bg-gray-100 text-gray-500 border-gray-200 dark:bg-gray-700 dark:text-gray-400 dark:border-gray-600",children:l.jsx("span",{className:"text-xs",children:"?"})})})})}),l.jsx("div",{className:"w-32 px-2",children:l.jsx(Pr,{content:ve.tags&&ve.tags.length>0?`Tags: ${ve.tags.join(", ")}${ve.tags.length>2?` (+${ve.tags.length-2} more)`:""}`:"No tags • Click to add tags",children:l.jsxs("div",{className:"flex flex-nowrap items-center gap-1 overflow-hidden cursor-help",children:[ve.tags&&ve.tags.slice(0,2).map((Re,Qe)=>l.jsx("span",{className:`px-1.5 py-0.5 text-xs rounded-full whitespace-nowrap flex-shrink-0 ${Re==="Work"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300":Re==="Design"?"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-300":Re==="Daily"?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300":"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-300"}`,children:Re},Qe)),ve.tags&&ve.tags.length>2&&l.jsxs("span",{className:"px-1.5 py-0.5 text-xs bg-gray-100 text-gray-600 rounded-full dark:bg-gray-700 dark:text-gray-400 whitespace-nowrap flex-shrink-0",children:["+",ve.tags.length-2]})]})})})]},`${ve.id}-${ve._clientUpdatedAt||ve.updatedAt||ve.createdAt}`))})]},Te))})]}),l.jsx(hEe,{isOpen:Y!==null,onClose:()=>G(null),onSubmit:ut,isDarkMode:e,position:q,placeholder:"Enter task name..."}),Se.isOpen&&l.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[l.jsx("div",{className:"absolute inset-0 bg-black/30",onClick:()=>ae(we=>({...we,isOpen:!1}))}),l.jsxs("div",{className:`relative w-full max-w-sm rounded-lg shadow-lg border ${e?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[l.jsx("div",{className:`px-4 py-3 border-b ${e?"border-gray-700":"border-gray-200"}`,children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center ${Se.type==="danger"?"bg-red-100 dark:bg-red-900/20":Se.type==="warning"?"bg-amber-100 dark:bg-amber-900/20":"bg-blue-100 dark:bg-blue-900/20"}`,children:Se.type==="danger"?l.jsx(Vi,{className:"w-3 h-3 text-red-500"}):Se.type==="warning"?l.jsx(sw,{className:"w-3 h-3 text-amber-500"}):l.jsx(m0e,{className:"w-3 h-3 text-blue-500"})}),l.jsx("h3",{className:`text-sm font-semibold ${e?"text-gray-200":"text-gray-800"}`,children:Se.title})]})}),l.jsx("div",{className:"px-4 py-3",children:l.jsx("p",{className:`text-xs leading-relaxed ${e?"text-gray-300":"text-gray-600"}`,children:Se.message})}),l.jsxs("div",{className:`px-4 py-3 border-t flex gap-2 justify-end ${e?"border-gray-700":"border-gray-200"}`,children:[Se.cancelText&&l.jsx("button",{onClick:()=>ae(we=>({...we,isOpen:!1})),className:`px-3 py-1.5 rounded text-xs font-medium transition-colors ${e?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:Se.cancelText}),l.jsx("button",{onClick:()=>{Se.onConfirm(),ae(we=>({...we,isOpen:!1}))},className:`px-3 py-1.5 rounded text-xs font-semibold transition-colors ${Se.type==="danger"?"bg-red-500 text-white hover:bg-red-600":Se.type==="warning"?"bg-amber-500 text-white hover:bg-amber-600":"bg-blue-500 text-white hover:bg-blue-600"}`,children:Se.confirmText})]})]})]})]})},pEe=({columns:t,isDarkMode:e,facilityId:n,onTaskClick:r,onTaskUpdate:s,onTaskDelete:i})=>{_u(n);const[a,o]=v.useState(new Date),[c,d]=v.useState("month"),[h,p]=v.useState(null),[m,y]=v.useState("status"),[x,_]=v.useState(t);v.useEffect(()=>{_(t)},[t]),v.useEffect(()=>{const I=Q=>{const ne=Q.detail;_(W=>W.map(K=>({...K,tasks:K.tasks.map(Y=>Y.id===ne.id?ne:Y)})))},z=Q=>{const{taskId:ne}=Q.detail;_(W=>W.map(K=>({...K,tasks:K.tasks.filter(Y=>Y.id!==ne)})))};return window.addEventListener("taskUpdated",I),window.addEventListener("taskDeleted",z),()=>{window.removeEventListener("taskUpdated",I),window.removeEventListener("taskDeleted",z)}},[]);const w=v.useMemo(()=>{const I=[];return x.forEach(z=>{z.tasks.forEach(Q=>{I.push({...Q,projectId:z.id,projectName:z.title})})}),I},[x]),N=I=>w.filter(z=>z.dueDate?new Date(z.dueDate).toDateString()===I.toDateString():!1),k=(I,z)=>w.filter(Q=>{if(!Q.dueDate)return!1;const ne=new Date(Q.dueDate);return ne>=I&&ne<=z}),S=I=>{switch(m){case"status":switch(I.status){case"done":return"bg-emerald-500";case"in-progress":return"bg-blue-500";case"review":return"bg-amber-500";default:return"bg-gray-500"}case"project":const z=["bg-red-500","bg-blue-500","bg-green-500","bg-yellow-500","bg-purple-500","bg-pink-500"],Q=I.projectName.charCodeAt(0)%z.length;return z[Q];case"priority":switch(I.priority){case"urgent":return"bg-red-500";case"high":return"bg-orange-500";case"medium":return"bg-yellow-500";case"low":return"bg-green-500";default:return"bg-gray-500"}default:return"bg-blue-500"}},O=()=>{const I=a.getFullYear(),z=a.getMonth(),Q=new Date(I,z,1),ne=new Date(Q);ne.setDate(ne.getDate()-Q.getDay());const W=[],K=new Date(ne);for(let Y=0;Y<42;Y++)W.push(new Date(K)),K.setDate(K.getDate()+1);return W},R=()=>{const I=new Date(a),z=I.getDay(),Q=I.getDate()-z;I.setDate(Q);const ne=[];for(let W=0;W<7;W++){const K=new Date(I);K.setDate(I.getDate()+W),ne.push(K)}return ne},M=()=>{const I=new Date(a);switch(c){case"month":I.setMonth(I.getMonth()-1);break;case"week":I.setDate(I.getDate()-7);break;case"day":I.setDate(I.getDate()-1);break}o(I)},P=()=>{const I=new Date(a);switch(c){case"month":I.setMonth(I.getMonth()+1);break;case"week":I.setDate(I.getDate()+7);break;case"day":I.setDate(I.getDate()+1);break}o(I)},C=()=>{o(new Date)},D=I=>{switch(c){case"month":return I.toLocaleDateString("en-US",{month:"long",year:"numeric"});case"week":const z=R()[0],Q=R()[6];return`${z.toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${Q.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}`;case"day":return I.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}},$=()=>{const I=O();return new Date(a.getFullYear(),a.getMonth(),1),new Date(a.getFullYear(),a.getMonth()+1,0),l.jsxs("div",{className:"bg-white dark:bg-gray-900 w-full",children:[l.jsx("div",{className:"grid grid-cols-7 border-b border-gray-200 dark:border-gray-700",children:["MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY","SUNDAY"].map(z=>l.jsx("div",{className:`p-3 text-center text-sm font-medium ${e?"text-gray-400":"text-gray-600"}`,children:z},z))}),l.jsx("div",{className:"grid grid-cols-7 w-full",children:I.map((z,Q)=>{const ne=z.getMonth()===a.getMonth(),W=z.toDateString()===new Date().toDateString(),K=N(z);return l.jsxs("div",{className:`h-24 p-2 border-r border-b border-gray-200 dark:border-gray-700 relative group hover:bg-gray-50 dark:hover:bg-gray-800 transition-all duration-200 ${e?"bg-gray-900":"bg-white"} ${ne?"":e?"text-gray-600":"text-gray-400"} ${W?"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/30 dark:to-green-800/20 ring-2 ring-green-200 dark:ring-green-700":""}`,children:[l.jsx("div",{className:`text-sm font-medium mb-1 ${W?"text-green-600 dark:text-green-400":ne?e?"text-white":"text-gray-900":e?"text-gray-600":"text-gray-400"}`,children:W?l.jsx("span",{className:"inline-flex items-center justify-center w-6 h-6 bg-gradient-to-br from-green-500 to-green-600 text-white rounded-full text-xs font-bold shadow-lg ring-2 ring-green-200 dark:ring-green-700",children:z.getDate()}):l.jsx("span",{className:"group-hover:scale-110 transition-transform duration-200",children:z.getDate()})}),l.jsx("div",{className:"absolute top-8 left-1 right-1 bottom-1 space-y-0.5 overflow-y-auto overflow-x-hidden scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-gray-600",children:K.length>0?K.map(Y=>l.jsx(Qr,{facilityId:n,requiredPermission:"tasks.view_all",fallback:l.jsx("div",{className:`text-xs p-1.5 rounded-lg text-white shadow-lg ${S(Y)} backdrop-blur-sm opacity-75`,title:"No permission to view task details",children:l.jsxs("div",{className:"flex items-center space-x-1 min-w-0",children:[l.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-white/40 shadow-sm flex-shrink-0"}),l.jsx("span",{className:"truncate min-w-0 font-medium",children:Y.title})]})}),children:l.jsx("div",{onClick:()=>r(Y.id),className:`text-xs p-1.5 rounded-lg cursor-pointer text-white shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105 hover:-translate-y-0.5 ${S(Y)} hover:opacity-90 backdrop-blur-sm`,title:Y.title,children:l.jsxs("div",{className:"flex items-center space-x-1 min-w-0",children:[l.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-white/40 shadow-sm flex-shrink-0"}),l.jsx("span",{className:"truncate min-w-0 font-medium",children:Y.title})]})})},`${Y.id}-${Y._clientUpdatedAt||Y.updatedAt||Y.createdAt}`)):l.jsx("div",{className:`text-xs text-center py-2 ${e?"text-gray-500":"text-gray-400"}`,children:"No tasks"})})]},Q)})})]})},F=()=>{const I=R();return k(I[0],I[6]),l.jsxs("div",{className:"bg-white dark:bg-gray-900 w-full",children:[l.jsx("div",{className:"grid grid-cols-7 border-b border-gray-200 dark:border-gray-700",children:I.map((z,Q)=>l.jsxs("div",{className:`p-3 text-center ${e?"bg-gray-800":"bg-gray-50"}`,children:[l.jsx("div",{className:`text-sm font-medium ${e?"text-gray-300":"text-gray-700"}`,children:z.toLocaleDateString("en-US",{weekday:"short"}).toUpperCase()}),l.jsx("div",{className:`text-lg font-bold ${e?"text-white":"text-gray-900"}`,children:z.getDate()})]},Q))}),l.jsx("div",{className:"grid grid-cols-7 w-full",children:I.map((z,Q)=>{const ne=z.toDateString()===new Date().toDateString(),W=N(z);return l.jsx("div",{className:`h-96 p-3 border-r border-b border-gray-200 dark:border-gray-700 group hover:bg-gray-50 dark:hover:bg-gray-800 transition-all duration-200 ${e?"bg-gray-900":"bg-white"} ${ne?"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/30 dark:to-green-800/20 ring-2 ring-green-200 dark:ring-green-700":""}`,children:l.jsx("div",{className:"space-y-2 overflow-y-auto overflow-x-hidden h-full scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-gray-600",children:W.length>0?W.map(K=>l.jsx(Qr,{requiredPermission:"tasks.view_all",facilityId:n,fallback:l.jsx("div",{className:`p-3 rounded-xl text-white text-sm shadow-lg ${S(K)} backdrop-blur-sm border border-white/20 opacity-75`,title:"No permission to view task details",children:l.jsxs("div",{className:"flex items-start space-x-2 min-w-0",children:[l.jsx("div",{className:"w-2 h-2 rounded-full bg-white/50 mt-1.5 flex-shrink-0 shadow-sm"}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"font-semibold truncate",children:K.title}),l.jsx("div",{className:"text-xs opacity-90 truncate mt-0.5",children:K.projectName})]})]})}),children:l.jsx("div",{onClick:()=>r(K.id),className:`p-3 rounded-xl cursor-pointer text-white text-sm shadow-lg hover:shadow-2xl transition-all duration-300 hover:scale-105 hover:-translate-y-1 ${S(K)} hover:opacity-90 backdrop-blur-sm border border-white/20`,children:l.jsxs("div",{className:"flex items-start space-x-2 min-w-0",children:[l.jsx("div",{className:"w-2 h-2 rounded-full bg-white/50 mt-1.5 flex-shrink-0 shadow-sm"}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"font-semibold truncate",children:K.title}),l.jsx("div",{className:"text-xs opacity-90 truncate mt-0.5",children:K.projectName})]})]})})},`${K.id}-${K._clientUpdatedAt||K.updatedAt||K.createdAt}`)):l.jsx("div",{className:`text-sm text-center py-4 ${e?"text-gray-500":"text-gray-400"}`,children:"No tasks"})})},Q)})})]})},U=()=>{const I=N(a),z=a.toDateString()===new Date().toDateString();return l.jsxs("div",{className:"p-4 w-full",children:[l.jsx("div",{className:`mb-4 p-4 rounded-lg ${e?"bg-gray-800":"bg-gray-50"}`,children:l.jsxs("h2",{className:`text-lg font-semibold ${e?"text-white":"text-gray-900"}`,children:[a.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),z&&l.jsx("span",{className:"ml-2 text-blue-600 dark:text-blue-400",children:"(Today)"})]})}),l.jsx("div",{className:"space-y-3",children:I.length===0?l.jsxs("div",{className:`text-center py-12 ${e?"text-gray-400":"text-gray-600"}`,children:[l.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center",children:l.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),l.jsx("p",{className:"text-lg font-medium",children:"No tasks due on this day"}),l.jsx("p",{className:"text-sm opacity-75",children:"Enjoy your free time!"})]}):I.map(Q=>l.jsx(Qr,{requiredPermission:"tasks.view_all",facilityId:n,fallback:l.jsx("div",{className:`p-5 rounded-2xl text-white shadow-xl ${S(Q)} backdrop-blur-sm border border-white/20 opacity-75`,title:"No permission to view task details",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-start space-x-4",children:[l.jsx("div",{className:"w-4 h-4 rounded-full bg-white/50 mt-1 flex-shrink-0 shadow-sm"}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-lg",children:Q.title}),l.jsx("p",{className:"text-sm opacity-90 mt-1",children:Q.projectName})]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-sm font-semibold opacity-90 bg-white/20 px-3 py-1 rounded-full",children:Q.status==="todo"?"To Do":Q.status==="in-progress"?"In Progress":Q.status==="review"?"Review":"Done"}),Q.priority&&l.jsx("div",{className:"text-xs opacity-75 capitalize bg-white/30 px-3 py-1 rounded-full mt-2 font-medium",children:Q.priority})]})]})}),children:l.jsx("div",{onClick:()=>r(Q.id),className:`p-5 rounded-2xl cursor-pointer text-white shadow-xl hover:shadow-2xl transition-all duration-300 hover:scale-105 hover:-translate-y-1 ${S(Q)} hover:opacity-90 backdrop-blur-sm border border-white/20`,children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-start space-x-4",children:[l.jsx("div",{className:"w-4 h-4 rounded-full bg-white/50 mt-1 flex-shrink-0 shadow-sm"}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-lg",children:Q.title}),l.jsx("p",{className:"text-sm opacity-90 mt-1",children:Q.projectName})]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-sm font-semibold opacity-90 bg-white/20 px-3 py-1 rounded-full",children:Q.status==="todo"?"To Do":Q.status==="in-progress"?"In Progress":Q.status==="review"?"Review":"Done"}),Q.priority&&l.jsx("div",{className:"text-xs opacity-75 capitalize bg-white/30 px-3 py-1 rounded-full mt-2 font-medium",children:Q.priority})]})]})})},`${Q.id}-${Q.updatedAt||Q.createdAt}`))})]})};return l.jsxs("div",{className:`h-full flex flex-col ${e?"bg-gray-900":"bg-white"}`,children:[l.jsx("div",{className:"h-1 bg-gradient-to-r from-red-500 via-yellow-500 via-green-500 via-blue-500 via-indigo-500 via-purple-500 to-pink-500"}),l.jsx("div",{className:`p-4 border-b ${e?"border-gray-700 bg-gray-800":"border-gray-200 bg-gray-50"}`,children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("button",{onClick:M,className:`p-1.5 rounded ${e?"hover:bg-gray-700 text-gray-300":"hover:bg-gray-100 text-gray-600"}`,children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),l.jsx("button",{onClick:P,className:`p-1.5 rounded ${e?"hover:bg-gray-700 text-gray-300":"hover:bg-gray-100 text-gray-600"}`,children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),l.jsx("button",{onClick:C,className:`px-3 py-1.5 rounded text-sm font-medium ${e?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-gray-100 hover:bg-gray-200 text-gray-700"}`,children:"Today"})]}),l.jsx("div",{className:"text-center",children:l.jsx("h2",{className:`text-xl font-bold ${e?"text-white":"text-gray-900"}`,children:D(a)})}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx("label",{className:`text-xs font-medium ${e?"text-gray-300":"text-gray-700"}`,children:"Color:"}),l.jsxs("select",{value:m,onChange:I=>y(I.target.value),className:`px-2 py-1 rounded text-xs border ${e?"bg-gray-700 border-gray-600 text-gray-300":"bg-white border-gray-300 text-gray-700"}`,children:[l.jsx("option",{value:"status",children:"Status"}),l.jsx("option",{value:"project",children:"Project"}),l.jsx("option",{value:"priority",children:"Priority"})]})]}),l.jsx("div",{className:"flex items-center bg-gray-100 dark:bg-gray-700 rounded p-0.5",children:["month","week","day"].map(I=>l.jsx("button",{onClick:()=>d(I),className:`px-3 py-1.5 rounded text-xs font-medium capitalize transition-all ${c===I?"bg-green-600 text-white shadow-sm":e?"text-gray-300 hover:text-white":"text-gray-600 hover:text-gray-900"}`,children:I},I))})]})]})}),l.jsxs("div",{className:"flex-1 overflow-y-auto overflow-x-hidden",children:[c==="month"&&$(),c==="week"&&F(),c==="day"&&U()]})]})},mEe=({columns:t,isDarkMode:e,facilityId:n,onTaskClick:r,onTaskUpdate:s,onTaskDelete:i})=>{_u(n);const[a,o]=v.useState("week"),[c,d]=v.useState(new Date),[h,p]=v.useState(new Set),[m,y]=v.useState(null),[x,_]=v.useState(!0),[w,N]=v.useState(!1),[k,S]=v.useState(!0),[O,R]=v.useState(new Set),[M,P]=v.useState("status");v.useRef(null);const C=v.useRef(null),D=v.useRef(null),[$,F]=v.useState(0),[U,I]=v.useState(t),z=[{id:"day",label:"Day",icon:"🕐",description:"Hourly view for detailed execution"},{id:"week",label:"Week",icon:"📅",description:"Daily view for sprint planning"},{id:"month",label:"Month",icon:"🗓️",description:"Weekly view for resource planning"},{id:"quarter",label:"Quarter",icon:"📊",description:"Monthly view for strategic overview"}];v.useEffect(()=>{I(t)},[t]),v.useEffect(()=>{const V=X=>{const te=X.detail;I(he=>he.map(ie=>({...ie,tasks:ie.tasks.map(le=>le.id===te.id?te:le)})))},ee=X=>{const{taskId:te}=X.detail;I(he=>he.map(ie=>({...ie,tasks:ie.tasks.filter(le=>le.id!==te)})))};return window.addEventListener("taskUpdated",V),window.addEventListener("taskDeleted",ee),()=>{window.removeEventListener("taskUpdated",V),window.removeEventListener("taskDeleted",ee)}},[]);const Q=v.useMemo(()=>{const V=[];return U.forEach(ee=>{ee.tasks.forEach((X,te)=>{let he=X.startDate,ie=X.dueDate;if(!he)if(X.createdAt){const Se=new Date(X.createdAt);isNaN(Se.getTime())?he=new Date().toISOString().split("T")[0]:he=Se.toISOString().split("T")[0]}else if(ie){const Se=new Date(ie);isNaN(Se.getTime())?he=new Date().toISOString().split("T")[0]:he=new Date(Se.getTime()-2592e5).toISOString().split("T")[0]}else{const Se=new Date;he=Se.toISOString().split("T")[0],ie=new Date(Se.getTime()+4320*60*1e3).toISOString().split("T")[0]}if(!ie){const Se=new Date(he);if(!isNaN(Se.getTime()))ie=new Date(Se.getTime()+2592e5).toISOString().split("T")[0];else{const ae=new Date;ie=new Date(ae.getTime()+4320*60*1e3).toISOString().split("T")[0]}}const le=[];if(X.title.toLowerCase().includes("scope")){const Se=ee.tasks.find(ae=>ae.title.toLowerCase().includes("environment"));Se&&le.push(Se.id)}else if(X.title.toLowerCase().includes("user")){const Se=ee.tasks.find(ae=>ae.title.toLowerCase().includes("scope"));Se&&le.push(Se.id)}else if(te>0&&te%3===0){const Se=ee.tasks[te-1];Se&&le.push(Se.id)}const Ne=X.title.toLowerCase().includes("milestone")||X.title.toLowerCase().includes("release")||X.title.toLowerCase().includes("launch")||X.priority==="urgent"||he&&ie&&new Date(ie).getTime()-new Date(he).getTime()<=1440*60*1e3;V.push({...X,projectId:ee.id,projectName:ee.title,startDate:he,endDate:ie,progress:X.status==="done"?100:X.status==="in-progress"?50:X.status==="review"?75:0,dependencies:le,isMilestone:Ne})})}),V},[U]),ne=v.useMemo(()=>{const V={};return Q.forEach(ee=>{V[ee.projectName]||(V[ee.projectName]=[]),V[ee.projectName].push(ee)}),V},[Q]);v.useMemo(()=>{if(Q.length===0){const te=new Date;return{start:new Date(te.getTime()-720*60*60*1e3),end:new Date(te.getTime()+720*60*60*1e3)}}const V=Q.flatMap(te=>[te.startDate?new Date(te.startDate):new Date,te.endDate?new Date(te.endDate):new Date]),ee=new Date(Math.min(...V.map(te=>te.getTime()))),X=new Date(Math.max(...V.map(te=>te.getTime())));return ee.setDate(ee.getDate()-7),X.setDate(X.getDate()+7),{start:ee,end:X}},[Q]);const W=v.useMemo(()=>{const V=[],ee=new Date(c);ee.setDate(ee.getDate()-30);const X=new Date(c);X.setDate(X.getDate()+60);const te=new Date(ee);for(;te<=X;)V.push(new Date(te)),te.setDate(te.getDate()+1);return V},[c]),K=V=>{const ee=new Date(V.startDate||V.createdAt||new Date),X=new Date(V.endDate||V.dueDate||new Date),te=W.findIndex(Se=>Se.toDateString()===ee.toDateString()),he=W.findIndex(Se=>Se.toDateString()===X.toDateString());if(te===-1||he===-1){const Se=W[0]?.getTime()||ee.getTime(),ke=(W[W.length-1]?.getTime()||X.getTime())-Se;if(ke===0)return{left:0,width:96};const ce=(ee.getTime()-Se)/ke*100,Ee=(X.getTime()-ee.getTime())/ke*100;return{left:Math.max(0,Math.min(ce,100)),width:Math.max(1,Math.min(Ee,100-Math.max(0,Math.min(ce,100))))}}const ie=96,le=te*ie,Ne=Math.max(ie,(he-te+1)*ie);return{left:le,width:Ne}},Y=V=>{const ee=V.dueDate&&new Date(V.dueDate)<new Date&&V.status!=="done",X=V.dueDate&&new Date(V.dueDate)<new Date(Date.now()+2880*60*1e3)&&V.status!=="done";if(ee)return"bg-red-500";if(X)return"bg-orange-500";switch(M){case"status":switch(V.status){case"done":return"bg-emerald-500";case"in-progress":return"bg-blue-500";case"review":return"bg-amber-500";case"todo":return"bg-gray-500";default:return"bg-gray-400"}case"project":const te=["bg-red-500","bg-blue-500","bg-green-500","bg-yellow-500","bg-purple-500","bg-pink-500"],he=V.projectName.charCodeAt(0)%te.length;return te[he];case"priority":switch(V.priority){case"urgent":return"bg-red-500";case"high":return"bg-orange-500";case"medium":return"bg-yellow-500";case"low":return"bg-green-500";default:return"bg-gray-500"}default:return"bg-blue-500"}},G=()=>{const V=new Date(c);switch(a){case"day":V.setDate(V.getDate()-1);break;case"week":V.setDate(V.getDate()-7);break;case"month":V.setMonth(V.getMonth()-1);break;case"quarter":V.setMonth(V.getMonth()-3);break}d(V)},q=()=>{const V=new Date(c);switch(a){case"day":V.setDate(V.getDate()+1);break;case"week":V.setDate(V.getDate()+7);break;case"month":V.setMonth(V.getMonth()+1);break;case"quarter":V.setMonth(V.getMonth()+3);break}d(V)},Z=()=>{d(new Date),setTimeout(()=>{const V=new Date,ee=W.findIndex(X=>X.toDateString()===V.toDateString());if(ee!==-1&&C.current){const te=ee*96,he=C.current;he.scrollLeft=te-he.clientWidth/2}},100)},ge=V=>{R(ee=>{const X=new Set(ee);return X.has(V)?X.delete(V):X.add(V),X})},Le=V=>{C.current&&V.currentTarget.scrollTop!==C.current.scrollTop&&(C.current.scrollTop=V.currentTarget.scrollTop)},Pe=V=>{D.current&&V.currentTarget.scrollTop!==D.current.scrollTop&&(D.current.scrollTop=V.currentTarget.scrollTop)},Ue=V=>{if(V.preventDefault(),V.shiftKey){const ee=V.deltaY,X=Math.abs(ee)>100?200:100;C.current&&(ee>0?C.current.scrollLeft+=X:C.current.scrollLeft-=X)}else{const ee=V.deltaY,X=Math.abs(ee)>100?50:20;ee>0?(C.current&&(C.current.scrollTop+=X),D.current&&(D.current.scrollTop+=X)):(C.current&&(C.current.scrollTop-=X),D.current&&(D.current.scrollTop-=X))}};return v.useEffect(()=>{const V=C.current;if(V)return V.addEventListener("wheel",Ue,{passive:!1}),()=>{V.removeEventListener("wheel",Ue)}},[]),v.useEffect(()=>{const V=ee=>{if(!(ee.target instanceof HTMLInputElement||ee.target instanceof HTMLTextAreaElement))switch(ee.key){case"ArrowLeft":ee.preventDefault(),G();break;case"ArrowRight":ee.preventDefault(),q();break;case" ":ee.preventDefault(),Z();break;case"+":case"=":ee.preventDefault();const X=z.findIndex(he=>he.id===a);X<z.length-1&&o(z[X+1].id);break;case"-":ee.preventDefault();const te=z.findIndex(he=>he.id===a);te>0&&o(z[te-1].id);break}};return window.addEventListener("keydown",V),()=>window.removeEventListener("keydown",V)},[a]),l.jsxs("div",{className:`h-full flex flex-col ${e?"bg-gray-900":"bg-white"}`,children:[l.jsx("div",{className:`p-4 border-b ${e?"border-gray-700 bg-gray-800":"border-gray-200 bg-gray-50"}`,children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("button",{onClick:G,className:`p-1.5 rounded ${e?"hover:bg-gray-700 text-gray-300":"hover:bg-gray-100 text-gray-600"}`,children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),l.jsx("button",{onClick:q,className:`p-1.5 rounded ${e?"hover:bg-gray-700 text-gray-300":"hover:bg-gray-100 text-gray-600"}`,children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),l.jsx("button",{onClick:Z,className:`px-3 py-1.5 rounded text-sm font-medium ${e?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-gray-100 hover:bg-gray-200 text-gray-700"}`,children:"Today"})]}),l.jsx("div",{className:"text-center",children:l.jsx("h2",{className:`text-lg font-semibold ${e?"text-white":"text-gray-900"}`,children:c.toLocaleDateString("en-US",{month:"long",year:"numeric"})})}),l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx("label",{className:`text-xs font-medium ${e?"text-gray-300":"text-gray-700"}`,children:"Color:"}),l.jsxs("select",{value:M,onChange:V=>P(V.target.value),className:`px-2 py-1 rounded text-xs border ${e?"bg-gray-700 border-gray-600 text-gray-300":"bg-white border-gray-300 text-gray-700"}`,children:[l.jsx("option",{value:"status",children:"Status"}),l.jsx("option",{value:"project",children:"Project"}),l.jsx("option",{value:"priority",children:"Priority"})]})]}),l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx("input",{type:"checkbox",id:"showDependencies",checked:x,onChange:V=>_(V.target.checked),className:"w-3 h-3 rounded text-blue-600"}),l.jsx("label",{htmlFor:"showDependencies",className:`text-xs ${e?"text-gray-300":"text-gray-700"}`,children:"Dependencies"})]})]})]})}),l.jsx("div",{className:"flex-1 overflow-hidden",children:l.jsxs("div",{className:"h-full flex",children:[l.jsx("div",{ref:D,className:`w-64 border-r ${e?"border-gray-700 bg-gray-800":"border-gray-200 bg-gray-50"} overflow-y-auto flex-shrink-0`,style:{maxHeight:"calc(100vh - 200px)",height:"calc(100vh - 200px)"},onScroll:Le,children:l.jsxs("div",{className:"p-3",children:[l.jsx("h3",{className:`text-sm font-semibold ${e?"text-white":"text-gray-900"} mb-3`,children:"Tasks"}),Object.entries(ne).map(([V,ee],X)=>l.jsxs("div",{className:"mb-2",children:[l.jsxs("div",{className:`flex items-center justify-between p-2 rounded cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 ${e?"text-white":"text-gray-900"}`,onClick:()=>ge(V),children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("svg",{className:`w-4 h-4 transition-transform ${O.has(V)?"rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),l.jsx("span",{className:"text-sm font-medium",children:V})]}),l.jsx("span",{className:`text-xs ${e?"text-gray-400":"text-gray-500"}`,children:ee.length})]}),!O.has(V)&&l.jsx("div",{className:"ml-4 space-y-1",children:ee.map(te=>l.jsx(Qr,{requiredPermission:"tasks.view_all",facilityId:n,fallback:l.jsxs("div",{className:`flex items-center space-x-2 p-2 rounded opacity-75 ${e?"text-gray-500":"text-gray-400"}`,title:"No permission to view task details",children:[l.jsx("div",{className:`w-3 h-3 rounded-full ${Y(te)}`}),l.jsx("span",{className:"text-sm truncate",children:te.title})]}),children:l.jsxs("div",{className:`flex items-center space-x-2 p-2 rounded cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 ${e?"text-gray-300":"text-gray-700"}`,onClick:()=>r(te.id),children:[l.jsx("div",{className:`w-3 h-3 rounded-full ${Y(te)}`}),l.jsx("span",{className:"text-sm truncate",children:te.title})]})},te.id))})]},V))]})}),l.jsx("div",{className:"flex-1 overflow-auto timeline-container",ref:C,style:{maxHeight:"calc(100vh - 200px)",height:"calc(100vh - 200px)"},onScroll:Pe,children:l.jsxs("div",{className:"min-w-max",children:[l.jsx("div",{className:`sticky top-0 z-20 ${e?"bg-gray-800":"bg-white"} border-b ${e?"border-gray-700":"border-gray-200"}`,children:l.jsx("div",{className:"flex",children:W.map((V,ee)=>{const X=V.toDateString()===new Date().toDateString();return l.jsxs("div",{className:`w-24 p-2 text-center text-xs border-r ${e?"border-gray-700":"border-gray-200"} relative ${X?"bg-green-500 text-white":e?"bg-gray-800":"bg-white"}`,style:{minWidth:"96px",maxWidth:"96px"},children:[X&&l.jsx("div",{className:"absolute -top-1 left-1/2 transform -translate-x-1/2 w-2 h-2 bg-green-500 rounded-full border-2 border-white dark:border-gray-800"}),l.jsx("div",{className:`font-medium ${X?"text-white":e?"text-gray-300":"text-gray-700"}`,children:V.getDate()}),l.jsx("div",{className:`text-xs ${X?"text-green-100":"text-gray-500"}`,children:V.toLocaleDateString("en-US",{weekday:"short"})}),X&&l.jsx("div",{className:"absolute -bottom-1 left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-l-transparent border-r-4 border-r-transparent border-b-4 border-b-green-500"})]},ee)})})}),l.jsx("div",{className:"relative min-h-full",children:Object.entries(ne).map(([V,ee],X)=>l.jsxs("div",{children:[l.jsxs("div",{className:`h-10 border-b ${e?"border-gray-700":"border-gray-200"} relative`,children:[l.jsx("div",{className:"flex h-full",children:W.map((te,he)=>{const ie=te.toDateString()===new Date().toDateString();return l.jsx("div",{className:`w-24 border-r ${e?"border-gray-700":"border-gray-200"} relative ${ie?"bg-green-50 dark:bg-green-900/20":""}`,style:{minWidth:"96px",maxWidth:"96px"},children:ie&&l.jsx("div",{className:"absolute top-0 left-0 right-0 h-0.5 bg-green-500"})},he)})}),l.jsx("div",{className:"absolute top-1 left-0 h-8 bg-blue-100 dark:bg-blue-900/30 rounded mx-1 flex items-center justify-center",style:{width:`${W.length*96}px`},children:l.jsxs("span",{className:"text-xs font-medium text-blue-700 dark:text-blue-300",children:[V," • ",ee.length," tasks • ",ee.filter(te=>te.status==="done").length," completed"]})})]}),!O.has(V)&&ee.map((te,he)=>{const ie=K(te),le=te.dueDate&&new Date(te.dueDate)<new Date&&te.status!=="done";return l.jsxs("div",{className:`h-10 border-b ${e?"border-gray-700":"border-gray-200"} relative`,children:[l.jsx("div",{className:"flex h-full",children:W.map((Ne,Se)=>{const ae=Ne.toDateString()===new Date().toDateString();return l.jsx("div",{className:`w-24 border-r ${e?"border-gray-700":"border-gray-200"} relative ${ae?"bg-green-50 dark:bg-green-900/20":""}`,style:{minWidth:"96px",maxWidth:"96px"},children:ae&&l.jsx("div",{className:"absolute top-0 left-0 right-0 h-0.5 bg-green-500"})},Se)})}),l.jsx(Qr,{requiredPermission:"tasks.view_all",facilityId:n,fallback:l.jsx("div",{className:`absolute top-1 h-8 rounded opacity-75 ${Y(te)} transition-all duration-200 shadow-sm ${le?"ring-2 ring-red-500":""}`,style:{left:`${ie.left}px`,width:`${ie.width}px`},title:"No permission to view task details",children:l.jsx("div",{className:"absolute inset-0 flex items-center justify-center px-2",children:l.jsx("span",{className:"text-xs font-medium text-white truncate",children:te.title})})}),children:l.jsx("div",{className:`absolute top-1 h-8 rounded cursor-pointer ${Y(te)} hover:opacity-90 transition-all duration-200 shadow-sm ${le?"ring-2 ring-red-500":""}`,style:{left:`${ie.left}px`,width:`${ie.width}px`},onClick:()=>r(te.id),title:`${te.title} - ${te.startDate?new Date(te.startDate).toLocaleDateString():"No start date"} to ${te.endDate?new Date(te.endDate).toLocaleDateString():"No end date"}`,children:l.jsx("div",{className:"absolute inset-0 flex items-center justify-center px-2",children:l.jsx("span",{className:"text-xs font-medium text-white truncate",children:te.title})})})})]},`${te.id}-${te._clientUpdatedAt||te.updatedAt||te.createdAt}`)})]},V))})]})})]})})]})},gEe=({isOpen:t,onClose:e,facilityId:n,isDarkMode:r})=>{const{user:s}=gi(),{hasPermission:i,isOwner:a,isManager:o}=_u(n),[c,d]=v.useState([]),[h,p]=v.useState(!1),[m,y]=v.useState(null),[x,_]=v.useState(null),[w,N]=v.useState(null),[k,S]=v.useState(!1),[O,R]=v.useState("member"),[M,P]=v.useState(!1),[C,D]=v.useState(null),$=[{value:"owner",label:"Owner",description:"Full control over facility, can manage everything",icon:"👑"},{value:"manager",label:"Manager",description:"Can manage users, projects, and tasks",icon:"👔"},{value:"member",label:"Member",description:"Can create and manage tasks, limited project access",icon:"👤"},{value:"guest",label:"Guest",description:"Read-only access with limited interaction",icon:"👥"}],F=[{value:"manager",label:"Manager",description:"Can manage users, projects, and tasks",icon:"👔"},{value:"member",label:"Member",description:"Can create and manage tasks, limited project access",icon:"👤"},{value:"guest",label:"Guest",description:"Read-only access with limited interaction",icon:"👥"}];v.useEffect(()=>{t&&U()},[t,n]),v.useEffect(()=>{if(x){const G=setTimeout(()=>{_(null)},5e3);return()=>clearTimeout(G)}},[x]),v.useEffect(()=>{if(m){const G=setTimeout(()=>{y(null)},7e3);return()=>clearTimeout(G)}},[m]);const U=async()=>{try{p(!0),y(null);const Z=(await On.getFacilityMembers(n)).members.reduce((ge,Le)=>(ge.find(Pe=>Pe.id===Le.id)||ge.push(Le),ge),[]).map(ge=>({...ge,isUpdating:!1,error:void 0}));console.log("Loaded members:",Z.map(ge=>({id:ge.id,name:ge.name,role:ge.role}))),d(Z)}catch(G){y(G.message||"Failed to load members")}finally{p(!1)}},I=G=>{N(G),R(G.role),S(!0)},z=async()=>{if(w)try{d(G=>G.map(q=>q.id===w.id?{...q,isUpdating:!0,error:void 0}:q)),console.log("Updating member role:",{facilityId:n,targetUserId:w.id,newRole:O,member:w}),await On.updateMemberRole(n,w.id,O),d(G=>G.map(q=>q.id===w.id?{...q,role:O,isUpdating:!1}:q)),_(`Successfully updated ${w.name}'s role to ${O}`),S(!1),N(null)}catch(G){d(q=>q.map(Z=>Z.id===w.id?{...Z,isUpdating:!1,error:G.message}:Z))}},Q=G=>{D(G),P(!0)},ne=async()=>{if(C)try{d(G=>G.map(q=>q.id===C.id?{...q,isUpdating:!0,error:void 0}:q)),await On.removeMember(n,C.id),d(G=>G.filter(q=>q.id!==C.id)),_(`Successfully removed ${C.name} from the facility`),P(!1),D(null)}catch(G){d(q=>q.map(Z=>Z.id===C.id?{...Z,isUpdating:!1,error:G.message}:Z))}},W=G=>!(!i("users.change_roles")||G.isOwner&&!a||G.id===s?.uid),K=G=>!(!i("users.remove")||G.isOwner&&!a||G.id===s?.uid),Y=()=>a||o?F:[];return t?l.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[5000] p-4",children:[l.jsxs("div",{className:`
        bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-5xl max-h-[90vh] overflow-hidden
        ${r?"border border-gray-700":"border border-gray-200"}
      `,children:[l.jsxs("div",{className:`
          flex items-center justify-between p-6 border-b
          ${r?"border-gray-700":"border-gray-200"}
        `,children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900 rounded-lg",children:l.jsx(_0,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Role Management"}),l.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Manage member roles and permissions"})]})]}),l.jsx("button",{onClick:e,className:`
              p-2 rounded-lg transition-colors
              ${r?"hover:bg-gray-700 text-gray-400 hover:text-white":"hover:bg-gray-100 text-gray-500 hover:text-gray-700"}
            `,children:l.jsx(yn,{className:"w-5 h-5"})})]}),l.jsx("div",{className:"flex flex-col h-full",children:l.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[m&&l.jsxs("div",{className:"mb-4 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg flex items-center gap-3",children:[l.jsx(gp,{className:"w-5 h-5 text-red-600 dark:text-red-400 flex-shrink-0"}),l.jsx("p",{className:"text-red-700 dark:text-red-300 text-sm flex-1",children:m}),l.jsx("button",{onClick:()=>y(null),className:"text-red-400 hover:text-red-600 dark:text-red-500 dark:hover:text-red-300 transition-colors",children:l.jsx(yn,{className:"w-4 h-4"})})]}),x&&l.jsxs("div",{className:"mb-4 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg flex items-center gap-3",children:[l.jsx(Mi,{className:"w-5 h-5 text-green-600 dark:text-green-400 flex-shrink-0"}),l.jsx("p",{className:"text-green-700 dark:text-green-300 text-sm flex-1",children:x}),l.jsx("button",{onClick:()=>_(null),className:"text-green-400 hover:text-green-600 dark:text-green-500 dark:hover:text-green-300 transition-colors",children:l.jsx(yn,{className:"w-4 h-4"})})]}),l.jsxs("div",{className:"mb-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[l.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white mb-3",children:"Role Permissions"}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:$.map(G=>l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:"text-lg",children:G.icon}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"font-medium text-sm text-gray-900 dark:text-white",children:G.label}),l.jsx(bS,{role:G.value,size:"sm",showIcon:!1})]}),l.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:G.description})]})]},G.value))})]}),h?l.jsxs("div",{className:"flex items-center justify-center py-12",children:[l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 dark:border-blue-400"}),l.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Loading members..."})]}):c.length===0?l.jsxs("div",{className:"text-center py-12",children:[l.jsx(_0,{className:"w-12 h-12 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Members Found"}),l.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"This facility doesn't have any members yet."})]}):l.jsxs("div",{className:"space-y-4",children:[l.jsx("div",{className:"flex items-center justify-between mb-4",children:l.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Facility Members (",c.length,")"]})}),l.jsx("div",{className:"grid gap-4",children:c.map(G=>l.jsx("div",{className:`
                      p-4 rounded-lg border transition-all duration-200
                      ${r?"bg-gray-800 border-gray-700 hover:border-gray-600 hover:bg-gray-750":"bg-white border-gray-200 hover:border-gray-300 hover:bg-gray-50"}
                      ${G.isUpdating?"opacity-50 pointer-events-none":""}
                    `,children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4 min-w-0 flex-1",children:[l.jsxs("div",{className:"w-12 h-12 rounded-full flex-shrink-0 relative overflow-hidden",children:[G.profilePicture?l.jsx("img",{src:G.profilePicture,alt:G.name,className:"w-full h-full object-cover",onError:q=>{const Z=q.target;Z.style.display="none";const ge=Z.nextElementSibling;ge&&(ge.style.display="flex")}}):null,l.jsx("div",{className:`
                              absolute inset-0 flex items-center justify-center text-white font-semibold text-lg
                              ${G.avatarColor||"bg-gradient-to-br from-blue-500 to-blue-600"}
                              ${G.profilePicture?"hidden":"flex"}
                            `,children:G.name.charAt(0).toUpperCase()})]}),l.jsxs("div",{className:"min-w-0 flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white truncate",children:G.name}),G.isOwner&&l.jsx(qP,{className:"w-4 h-4 text-yellow-500 dark:text-yellow-400 flex-shrink-0"})]}),l.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:G.email}),G.error&&l.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 mt-1",children:G.error})]})]}),l.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[l.jsx(bS,{role:G.role}),l.jsxs("div",{className:"flex items-center gap-2",children:[W(G)&&l.jsx("button",{onClick:()=>I(G),disabled:G.isUpdating,className:`
                                p-2 rounded-lg transition-all duration-200 text-sm font-medium
                                ${r?"bg-blue-600 hover:bg-blue-700 text-white shadow-lg hover:shadow-blue-500/25":"bg-blue-100 hover:bg-blue-200 text-blue-700 shadow-sm hover:shadow-md"}
                                disabled:opacity-50 disabled:cursor-not-allowed
                              `,title:"Change role",children:l.jsx(Y0e,{className:"w-4 h-4"})}),K(G)&&l.jsx("button",{onClick:()=>Q(G),disabled:G.isUpdating,className:`
                                p-2 rounded-lg transition-all duration-200 text-sm font-medium
                                ${r?"bg-red-600 hover:bg-red-700 text-white shadow-lg hover:shadow-red-500/25":"bg-red-100 hover:bg-red-200 text-red-700 shadow-sm hover:shadow-md"}
                                disabled:opacity-50 disabled:cursor-not-allowed
                              `,title:"Remove member",children:l.jsx(Z0e,{className:"w-4 h-4"})})]})]})]})},G.id))})]})]})})]}),k&&w&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[5001] p-4",children:l.jsx("div",{className:`
            bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-lg
            ${r?"border border-gray-700":"border border-gray-200"}
          `,children:l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsxs("div",{className:"w-10 h-10 rounded-full relative overflow-hidden",children:[w.profilePicture?l.jsx("img",{src:w.profilePicture,alt:w.name,className:"w-full h-full object-cover",onError:G=>{const q=G.target;q.style.display="none";const Z=q.nextElementSibling;Z&&(Z.style.display="flex")}}):null,l.jsx("div",{className:`
                      absolute inset-0 flex items-center justify-center text-white font-semibold
                      ${w.avatarColor||"bg-gradient-to-br from-blue-500 to-blue-600"}
                      ${w.profilePicture?"hidden":"flex"}
                    `,children:w.name.charAt(0).toUpperCase()})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Change Role"}),l.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["for ",w.name]})]})]}),l.jsx("div",{className:"space-y-3 mb-6",children:Y().map(G=>l.jsxs("label",{className:`
                      flex items-center gap-4 p-4 rounded-lg border cursor-pointer transition-all duration-200
                      ${O===G.value?r?"bg-blue-900/50 border-blue-600 shadow-lg shadow-blue-500/10":"bg-blue-50 border-blue-300 shadow-md shadow-blue-500/10":r?"border-gray-600 hover:border-gray-500 hover:bg-gray-750":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}
                    `,children:[l.jsx("input",{type:"radio",name:"role",value:G.value,checked:O===G.value,onChange:q=>R(q.target.value),className:"sr-only"}),l.jsx("div",{className:`
                      w-8 h-8 rounded-full flex items-center justify-center text-lg
                      ${O===G.value?"bg-blue-600 text-white":r?"bg-gray-700 text-gray-300":"bg-gray-200 text-gray-600"}
                    `,children:G.icon}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:G.label}),l.jsx(bS,{role:G.value,size:"sm",showIcon:!1})]}),l.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:G.description})]}),O===G.value&&l.jsx("div",{className:"w-5 h-5 rounded-full bg-blue-600 flex items-center justify-center",children:l.jsx("div",{className:"w-2 h-2 rounded-full bg-white"})})]},G.value))}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:()=>S(!1),className:`
                    flex-1 px-4 py-3 rounded-lg font-medium transition-all duration-200
                    ${r?"bg-gray-700 hover:bg-gray-600 text-white border border-gray-600":"bg-gray-100 hover:bg-gray-200 text-gray-700 border border-gray-300"}
                  `,children:"Cancel"}),l.jsx("button",{onClick:z,className:"flex-1 px-4 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-all duration-200 shadow-lg hover:shadow-green-500/25",children:"Update Role"})]})]})})}),M&&C&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[5002] p-4",children:l.jsx("div",{className:`
            bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md
            ${r?"border border-gray-700":"border border-gray-200"}
          `,children:l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsxs("div",{className:"w-12 h-12 rounded-full relative overflow-hidden",children:[C.profilePicture?l.jsx("img",{src:C.profilePicture,alt:C.name,className:"w-full h-full object-cover",onError:G=>{const q=G.target;q.style.display="none";const Z=q.nextElementSibling;Z&&(Z.style.display="flex")}}):null,l.jsx("div",{className:`
                      absolute inset-0 flex items-center justify-center text-white font-semibold text-lg
                      ${C.avatarColor||"bg-gradient-to-br from-blue-500 to-blue-600"}
                      ${C.profilePicture?"hidden":"flex"}
                    `,children:C.name.charAt(0).toUpperCase()})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Remove Member"}),l.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"This action cannot be undone"})]})]}),l.jsxs("div",{className:"mb-6",children:[l.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:["Are you sure you want to remove ",l.jsx("strong",{children:C.name})," from this facility?"]}),l.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:"They will lose access to all facility resources and will need to be re-invited to regain access."})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:()=>{P(!1),D(null)},className:`
                    flex-1 px-4 py-3 rounded-lg font-medium transition-all duration-200
                    ${r?"bg-gray-700 hover:bg-gray-600 text-white border border-gray-600":"bg-gray-100 hover:bg-gray-200 text-gray-700 border border-gray-300"}
                  `,children:"Cancel"}),l.jsx("button",{onClick:ne,disabled:C.isUpdating,className:"flex-1 px-4 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-all duration-200 shadow-lg hover:shadow-red-500/25 disabled:opacity-50 disabled:cursor-not-allowed",children:C.isUpdating?"Removing...":"Remove Member"})]})]})})})]}):null},yEe=(t,e,n,r)=>{const{user:s}=gi(),{getFacilityData:i,setFacilityData:a,updateFacilityProjects:o,updateFacilityColumns:c}=Zue(),d=i(t),[h,p]=v.useState(d?.projects||[]),[m,y]=v.useState(d?.columns||[]),[x,_]=v.useState(!1),[w,N]=v.useState(""),[k,S]=v.useState(!1),[O,R]=v.useState(""),[M,P]=v.useState(null),[C,D]=v.useState(""),[$,F]=v.useState(!1),U=v.useRef(!1),I=v.useRef(null),z=v.useRef([]),Q=v.useRef([]),ne=v.useCallback((V,ee)=>{const X=V||z.current,te=ee||Q.current;t&&(X.length>0||te.length>0)&&(a(t,X,te),I.current={projects:X,columns:te})},[t,a]),W=()=>{_(!0),N(""),R("")},K=()=>{_(!1),N(""),R("")},Y=async()=>{if(!(!w.trim()||k)){S(!0),R("");try{const V=await Uc.create({name:w.trim(),facilityId:t,description:"",status:"planning",creatorId:s?.uid||"",assignees:[],archived:!1});p(ee=>[...ee,V]),y(ee=>[...ee,{id:V.id,title:V.name,tasks:[]}]),N(""),_(!1),e?.(),setTimeout(ne,0)}catch(V){console.error("Error creating project:",V),R(V.response?.data?.message||"Failed to create project")}finally{S(!1)}}},G=async(V,ee)=>{if(ee.trim())try{const X=await Uc.update(V,{name:ee.trim()});p(te=>te.map(he=>he.id===V?X:he)),y(te=>te.map(he=>he.id===V?{...he,title:ee.trim()}:he)),P(null),D(""),setTimeout(ne,0)}catch(X){console.error("Error updating project name:",X)}},q=async V=>{try{await Uc.archive(V),p(ee=>ee.filter(X=>X.id!==V)),y(ee=>ee.filter(X=>X.id!==V)),r?.(),setTimeout(ne,0)}catch(ee){console.error("Error archiving project:",ee)}},Z=async V=>{try{await Uc.delete(V),p(ee=>ee.filter(X=>X.id!==V)),y(ee=>ee.filter(X=>X.id!==V)),n?.(),setTimeout(ne,0)}catch(ee){console.error("Error deleting project:",ee)}},ge=v.useCallback(async(V=!1)=>{if(t){F(!0);try{(V||h.length===0&&m.length===0)&&si.clearFacilityCache(t);const ee=await Gr.getWithData(t,!0);p(ee.projects);const X=ee.projects.map(te=>({id:te.id,title:te.name,_projectStatus:te.status,status:te.status,tasks:(te.tasks||[]).map(he=>({...he,creatorId:he.creatorId||he.assigneeId||"",status:he.status,priority:he.priority,assigneeName:he.assigneeName,assigneeProfilePicture:he.assigneeProfilePicture}))}));y(X),setTimeout(ne,0)}catch(ee){console.error("Error loading facility data:",ee)}finally{F(!1)}}},[t,a]),Le=async()=>{if(t)try{const V=await Uc.getByFacility(t);p(V)}catch(V){console.error("Error loading projects:",V)}},Pe=async V=>{const ee=await Promise.all(V.map(async X=>{try{const te=await gt.getByProject(X.id),he=Array.isArray(te)?te:te.tasks||[];return{id:X.id,title:X.name,_projectStatus:X.status,status:X.status,tasks:he.map(ie=>({...ie,assigneeName:ie.assigneeName,assigneeProfilePicture:ie.assigneeProfilePicture}))}}catch(te){return console.error("Error loading tasks for project:",X.id,te),{id:X.id,title:X.name,_projectStatus:X.status,status:X.status,tasks:[]}}}));y(ee)},Ue=async(V=!1)=>{await ge(V)};return v.useEffect(()=>{z.current=h},[h]),v.useEffect(()=>{Q.current=m},[m]),v.useEffect(()=>{t&&!U.current&&(h.length>0||m.length>0)&&(!I.current||I.current.projects!==h||I.current.columns!==m)&&(a(t,h,m),I.current={projects:h,columns:m})},[t,h,m,a]),v.useEffect(()=>{if(t){const V=i(t);V?(U.current=!0,p(V.projects),y(V.columns),I.current={projects:V.projects,columns:V.columns},U.current=!1):(U.current=!0,p([]),y([]),I.current=null,U.current=!1,ge())}},[t,ge]),{projects:h,setProjects:p,columns:m,setColumns:y,loadProjects:Le,loadColumnsForProject:Pe,loadFacilityData:ge,refreshTasks:Ue,isLoading:$,isCreatingProject:x,newProjectName:w,setNewProjectName:N,isCreatingLoading:k,createError:O,editingProjectId:M,setEditingProjectId:P,editingProjectName:C,setEditingProjectName:D,handleStartCreateProject:W,handleCancelCreateProject:K,handleCreateProject:Y,handleUpdateProjectName:G,handleArchiveProject:q,handleDeleteProject:Z}},vEe=({className:t=""})=>{const[e,n]=v.useState(jf.getStats()),[r,s]=v.useState(!1);return v.useEffect(()=>{const i=setInterval(()=>{n(jf.getStats())},1e3);return()=>clearInterval(i)},[]),jf.getSuccessRate(),jf.getRateLimitRate(),null},xEe=(t,e,n)=>{const[r,s]=v.useState(null),[i,a]=v.useState(""),[o,c]=v.useState(null);return{editingTaskId:r,setEditingTaskId:s,editingTaskTitle:i,setEditingTaskTitle:a,addingTaskColumnId:o,setAddingTaskColumnId:c,handleCreateTask:_=>{c(_)},handleSaveNewTask:async _=>{if(!i.trim()){c(null),a("");return}try{const w=await gt.create({title:i.trim(),projectId:_,status:"todo"});e(N=>N.map(k=>k.id===_?{...k,tasks:[...k.tasks,w]}:k)),n?.()}catch(w){console.error("Error creating task:",w)}c(null),a("")},handleCancelNewTask:()=>{c(null),a("")},handleSaveTask:async(_,w)=>{if(!i.trim()){e(N=>N.map(k=>k.id===w?{...k,tasks:k.tasks.filter(S=>S.id!==_)}:k)),s(null),a("");return}try{const N=await gt.create({title:i.trim(),projectId:w,status:"todo"});e(k=>k.map(S=>S.id===w?{...S,tasks:S.tasks.map(O=>O.id===_?{...N,status:N.status}:O)}:S))}catch(N){console.error("Error creating task:",N),e(k=>k.map(S=>S.id===w?{...S,tasks:S.tasks.filter(O=>O.id!==_)}:S))}s(null),a("")},handleCancelEdit:(_,w)=>{e(N=>N.map(k=>k.id===w?{...k,tasks:k.tasks.filter(S=>S.id!==_)}:k)),s(null),a("")},handleDeleteTask:async(_,w,N)=>{try{return await gt.delete(_),e(k=>k.map(O=>O.id===N?{...O,tasks:O.tasks.filter(R=>R.id!==_)}:O)),!0}catch(k){return console.error("Error deleting task:",k),console.error("Error details:",{message:k.message,status:k.response?.status,data:k.response?.data}),!1}}}},bEe=()=>{const{id:t}=uh(),e=eo(),{user:n}=gi(),{setCurrentFacilityName:r}=SU(),{memberRefreshTriggers:s}=ph(),[i,a]=v.useState(null),[o,c]=v.useState(null),[d,h]=v.useState(!0),[p,m]=v.useState(""),[y,x]=v.useState(!1),[_,w]=v.useState(!1),[N,k]=v.useState(!1),[S,O]=v.useState(!1),[R,M]=v.useState(!1),[P,C]=v.useState(null),[D,$]=v.useState(null),[F,U]=v.useState(!1),[I,z]=v.useState(!1),[Q,ne]=v.useState(!1),[W,K]=v.useState(!1),[Y,G]=v.useState(null),[q,Z]=v.useState(!1),[ge,Le]=v.useState(null),[Pe,Ue]=v.useState(!1),[V,ee]=v.useState(""),[X,te]=v.useState("all"),[he,ie]=v.useState("all"),[le,Ne]=v.useState("all"),[Se,ae]=v.useState("all"),[ke,ce]=v.useState(null),[Ee,Fe]=v.useState("kanban"),[ut,Pt]=v.useState(null),[Dt,xn]=v.useState(!1),[gr,Wt]=v.useState(!1),[at,ln]=v.useState([]),[pe,we]=v.useState([]);_u(t);const Te=We=>{Le(We),Z(!0)},ve=async(We,Ye)=>{try{const Ze=await Uc.update(We,{status:Ye});if(hn(Me=>Me.map(yt=>yt.id===We?Ze:yt)),Qt(Me=>Me.map(yt=>yt.id===We?{...yt,_projectStatus:Ze.status,status:Ze.status}:yt)),Ye==="completed"){const yt=(St.find(Tt=>Tt.id===We)?.tasks||[]).filter(Tt=>Tt.status!=="done").map(Tt=>Tt.id);if(yt.length>0)try{await gt.bulkUpdateStatus(yt,"done"),Qt(Tt=>Tt.map(ot=>ot.id===We?{...ot,tasks:ot.tasks.map(kt=>yt.includes(kt.id)?{...kt,status:"done"}:kt)}:ot)),yt.length>0&&w(!0)}catch(Tt){console.error("Error updating tasks to done status:",Tt)}}}catch(Ze){console.error("Error updating project status:",Ze),m("Failed to update project status"),Qt(Me=>Me.map(yt=>yt.id===We?{...yt,_status:void 0,_projectStatus:yt._projectStatus}:yt))}},Re=(We,Ye,Ze)=>{C({id:We,name:Ye,type:"task",columnId:Ze}),O(!0)},Qe=async(We,Ye,Ze,Me)=>{Qt(yt=>{const Tt=[...yt],ot=Tt.findIndex(Hi=>Hi.id===Ye),kt=Tt.findIndex(Hi=>Hi.id===Ze);if(ot===-1||kt===-1)return yt;const cn=Tt[ot],ac=cn.tasks.findIndex(Hi=>Hi.id===We);if(ac===-1)return yt;const[Eh]=cn.tasks.splice(ac,1),Nh={...Eh,projectId:Ze};return Tt[kt].tasks.splice(Me,0,Nh),Tt});try{await gt.update(We,{projectId:Ze}),k(!0)}catch(yt){console.error("Failed to move task:",yt),wn(!0)}},Ke=async()=>{P&&(P.type==="project"?(Qt(We=>We.filter(Ye=>Ye.id!==P.id)),await rc(P.id),U(!0)):(await pm(P.id,P.name,P.columnId||""),z(!0)),O(!1),C(null))},At=async()=>{D&&(Qt(We=>We.filter(Ye=>Ye.id!==D.id)),await Ho(D.id),ne(!0),M(!1),$(null))},bn=(We,Ye)=>{$({id:We,name:Ye}),M(!0)},ms=(We,Ye)=>{C({id:We,name:Ye,type:"project"}),O(!0)};v.useEffect(()=>{x(document.documentElement.classList.contains("dark"));const We=new MutationObserver(()=>{x(document.documentElement.classList.contains("dark"))});return We.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>We.disconnect()},[]),v.useEffect(()=>{const We=Ye=>{(Ye.ctrlKey||Ye.metaKey)&&Ye.key==="k"&&(Ye.preventDefault(),Ue(!0)),Ye.key==="Escape"&&Ue(!1)};return document.addEventListener("keydown",We),()=>document.removeEventListener("keydown",We)},[]),v.useEffect(()=>(t&&gs(),()=>{r(null)}),[t,r]);const gs=async()=>{if(t)try{h(!0);const We=!i||i.id!==t,[Ye,Ze]=await Promise.all([Gr.getById(t,We),Gr.getFacilityStats(t,We)]);a(Ye),c(Ze),r(Ye.name)}catch(We){m("Failed to load facility details"),console.error("Error loading facility:",We)}finally{h(!1)}},{projects:Wn,setProjects:hn,columns:St,setColumns:Qt,loadFacilityData:wn,isCreatingProject:ys,newProjectName:Xn,setNewProjectName:ar,isCreatingLoading:Jn,createError:Hs,editingProjectId:jt,setEditingProjectId:es,editingProjectName:In,setEditingProjectName:Sr,handleStartCreateProject:Ds,handleCancelCreateProject:qs,handleCreateProject:Zn,handleUpdateProjectName:vi,handleArchiveProject:Ho,handleDeleteProject:rc}=yEe(t||"",()=>K(!0),()=>U(!0),()=>ne(!0)),{editingTaskId:bh,editingTaskTitle:xi,setEditingTaskTitle:qo,addingTaskColumnId:bi,handleCreateTask:wh,handleSaveNewTask:Cu,handleCancelNewTask:sc,handleSaveTask:ic,handleCancelEdit:ju,handleDeleteTask:_h}=xEe(St,Qt,()=>w(!0));v.useEffect(()=>{const We=async()=>{for(const Ye of St){const Ze=Ye.tasks;if(Ze.length===0)continue;const Me=Ze.filter(Tt=>Tt.status==="done").length,yt=Ze.length;if(Me===yt&&yt>0){const Tt=Wn.find(ot=>ot.id===Ye.id);if(Tt&&Tt.status!=="completed")try{await Uc.update(Ye.id,{status:"completed"}),hn(ot=>ot.map(kt=>kt.id===Ye.id?{...kt,status:"completed"}:kt)),Qt(ot=>ot.map(kt=>kt.id===Ye.id?{...kt,_projectStatus:"completed",status:"completed"}:kt)),w(!0)}catch(ot){console.error(`Error auto-completing project ${Ye.id}:`,ot)}}}};St.length>0&&Wn.length>0&&We()},[St,Wn]);const pm=async(We,Ye,Ze)=>await _h(We,Ye,Ze);v.useEffect(()=>{(async()=>{if(i?.id)try{const Ze=(await Gr.getFacilityMembers(i.id)).map(Me=>({id:Me.id,name:Me.name,email:Me.email,profilePicture:Me.profilePicture}));ln(Ze)}catch(Ye){console.error("Failed to fetch facility members for assignee filter:",Ye),ln([])}})()},[i?.id,s[i?.id||""]]),v.useEffect(()=>{const We=new Set;St.forEach(Ye=>{Ye.tasks.forEach(Ze=>{Ze.tags&&Ze.tags.forEach(Me=>We.add(Me))})}),we(Array.from(We))},[St]);const tn=async(We,Ye)=>{try{const Ze={...Ye};Ze.assignees&&Array.isArray(Ze.assignees)&&(Ze.assignees=Ze.assignees.map(Me=>typeof Me=="string"?Me:Me.id)),await gt.update(We,Ze)}catch(Ze){console.error("Failed to update task:",Ze)}},ro=oe.useMemo(()=>V||X!=="all"||he!=="all"||le!=="all"||Se!=="all"?St.filter(Ye=>{const Ze=!V||Ye.title.toLowerCase().includes(V.toLowerCase());let Me=!0;if(X!=="all")switch(X){case"active":Me=Wn.find(kt=>kt.id===Ye.id)?.status!=="completed";break;case"completed":Me=Wn.find(kt=>kt.id===Ye.id)?.status==="completed";break;case"with-tasks":Me=Ye.tasks.length>0;break;case"empty":Me=Ye.tasks.length===0;break;default:Me=!0}const yt=!V||Ye.tasks.some(Tt=>Tt.title.toLowerCase().includes(V.toLowerCase())||Tt.description&&Tt.description.toLowerCase().includes(V.toLowerCase()));return(Ze||yt)&&Me}).map(Ye=>{let Ze=Ye.tasks;return V&&(Ze=Ze.filter(Me=>Me.title.toLowerCase().includes(V.toLowerCase())||Me.description&&Me.description.toLowerCase().includes(V.toLowerCase()))),he!=="all"&&(Ze=Ze.filter(Me=>{const yt=Me.assignee||Me.assigneeName||Me.assigneeIds||Me.assignedTo||Me.assignedToName||Me.userId||Me.user||Me.owner||Me.ownerId;if(!(yt&&yt!==""&&yt!==null&&yt!==void 0&&(Array.isArray(yt)?yt.length>0:!0)))return!1;if(Me.assigneeName===he||Me.assigneeName&&Me.assigneeName.toLowerCase()===he.toLowerCase()||Me.assignee===he||Me.assignee&&Me.assignee.toLowerCase()===he.toLowerCase()||Me.assigneeIds&&Array.isArray(Me.assigneeIds)&&Me.assigneeIds.includes(he)||Me.assignedTo===he||Me.assignedToName===he||Me.userId===he||Me.user===he||Me.owner===he||Me.ownerId===he)return!0;if(at.length>0){const ot=at.find(kt=>kt.name===he);if(ot&&((Me.assignee||Me.assignedTo||Me.userId||Me.user||Me.owner||Me.ownerId)===ot.id||Me.assigneeIds&&Array.isArray(Me.assigneeIds)&&Me.assigneeIds.includes(ot.id)))return!0}if(Me.assigneeName&&he){const ot=Me.assigneeName.toLowerCase(),kt=he.toLowerCase();if(ot.includes(kt)||kt.includes(ot))return!0;if(kt.includes("@")){const cn=kt.split("@")[0];if(ot.includes(cn)||cn.includes(ot))return!0}}if(at.length>0){const ot=at.find(kt=>kt.name===he);if(ot){if(Me.assigneeName&&Me.assigneeName.toLowerCase()===ot.name.toLowerCase())return!0;if(Me.assigneeName&&ot.name){const kt=Me.assigneeName.toLowerCase(),cn=ot.name.toLowerCase();if(kt.includes(cn)||cn.includes(kt))return!0}if(Me.assigneeName&&ot.email){const kt=Me.assigneeName.toLowerCase(),cn=ot.email.toLowerCase();if(kt===cn||kt.includes(cn.split("@")[0]))return!0}}}return!1})),le!=="all"&&(Ze=Ze.filter(Me=>Me.tags&&Me.tags.includes(le))),Se!=="all"&&(Ze=Ze.filter(Me=>Me.priority===Se)),{...Ye,tasks:Ze}}):St,[St,V,X,he,le,Se,at]);return v.useEffect(()=>{const We=async Me=>{const yt=Me.detail;Qt(Tt=>Tt.map(ot=>({...ot,tasks:ot.tasks.map(kt=>kt.id===yt.id?{...yt,_clientUpdatedAt:Date.now()}:kt)})))},Ye=Me=>{const{taskId:yt}=Me.detail;Qt(Tt=>Tt.map(ot=>({...ot,tasks:ot.tasks.filter(kt=>kt.id!==yt)})))},Ze=Me=>{const yt=Me.detail;Qt(Tt=>Tt.map(ot=>({...ot,tasks:ot.id===yt.projectId?[...ot.tasks,{...yt,_clientUpdatedAt:Date.now()}]:ot.tasks})))};return window.addEventListener("taskUpdated",We),window.addEventListener("taskDeleted",Ye),window.addEventListener("taskCreated",Ze),()=>{window.removeEventListener("taskUpdated",We),window.removeEventListener("taskDeleted",Ye),window.removeEventListener("taskCreated",Ze)}},[]),d?l.jsx("div",{className:"p-4 flex items-center justify-center min-h-full",children:l.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-brand"})}):p||!i?l.jsx("div",{className:"p-4",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-red-600 dark:text-red-400 mb-3 text-xs",children:p||"Facility not found"}),l.jsx("button",{onClick:()=>e("/Facilities"),className:"px-3 py-1.5 bg-brand text-white rounded-md hover:bg-brand-dark transition-colors text-xs",children:"Back to Facilities"})]})}):l.jsxs("div",{className:"bg-neutral-light dark:bg-gray-900 flex flex-col h-full",children:[l.jsx(S1e,{facility:i,projectsCount:Wn.length,memberCount:o?.memberCount||0,filteredProjectsCount:ro.length,searchTerm:V,onManageRoles:()=>Wt(!0),setSearchTerm:ee,filter:X,setFilter:te,isDarkMode:y,totalTasks:o?.taskCount||0,completedTasks:o?.completedTaskCount||0,overdueTasks:o?.overdueTaskCount||0,assigneeFilter:he,setAssigneeFilter:ie,tagFilter:le,setTagFilter:Ne,priorityFilter:Se,setPriorityFilter:ae,availableAssignees:at,availableTags:pe.map(We=>({id:We,name:We,color:"#3b82f6"})),projects:St.map(We=>({id:We.id,title:We.title,taskCount:We.tasks.length})),selectedProjectId:ut,onProjectSelect:We=>{Pt(We);const Ye=document.querySelector(`[data-column-id="${We}"]`);if(Ye){const Ze=document.querySelector(".kanban-board");if(Ze){const Me=Ze.getBoundingClientRect(),yt=Ye.getBoundingClientRect(),Tt=Ze.scrollLeft+(yt.left-Me.left)-Me.width/2+yt.width/2;Ze.scrollTo({left:Tt,behavior:"smooth"})}else Ye.scrollIntoView({behavior:"smooth",block:"nearest"})}},onApplyFilters:We=>{ee(We.searchTerm),te(We.filter),ie(We.assigneeFilter),Ne(We.tagFilter),ae(We.priorityFilter)},isCollapsed:Dt,onToggleCollapse:()=>xn(!Dt)}),l.jsxs("div",{className:"flex-1 flex flex-col min-h-0 relative",style:{zIndex:1},children:[l.jsx("div",{className:`
          absolute inset-0 transition-all duration-300 ease-in-out
          ${Ee==="kanban"?"opacity-100 z-10":"opacity-0 z-0 pointer-events-none"}
        `,children:l.jsx(dEe,{columns:ro,isDarkMode:y,editingTaskId:bh,editingTaskTitle:xi,setEditingTaskTitle:qo,setEditingTaskId:We=>{},addingTaskColumnId:bi,setAddingTaskColumnId:We=>{},openTaskDropdownId:Y,setOpenTaskDropdownId:G,openDropdownId:ke,setOpenDropdownId:ce,editingProjectId:jt,editingProjectName:In,setEditingProjectId:es,setEditingProjectName:Sr,isCreatingProject:ys,newProjectName:Xn,setNewProjectName:ar,isCreatingLoading:Jn,createError:Hs,handleStartCreateProject:Ds,handleCancelCreateProject:qs,handleCreateProject:Zn,handleCreateTask:wh,handleSaveNewTask:Cu,handleCancelNewTask:sc,handleDeleteTask:Re,handleSaveTask:ic,handleCancelEdit:ju,handleArchiveProject:bn,handleDeleteProject:ms,handleUpdateProjectName:vi,handleUpdateProjectStatus:ve,handleOpenTaskDetail:Te,onTaskMove:Qe,facilityId:t,selectedProjectId:ut,availableAssignees:at})}),l.jsx("div",{className:`
          absolute inset-0 transition-all duration-300 ease-in-out
          ${Ee==="list"?"opacity-100 z-10":"opacity-0 z-0 pointer-events-none"}
        `,children:l.jsx("div",{className:"flex-1 overflow-auto h-full",children:l.jsx(fEe,{columns:ro,isDarkMode:y,facilityId:i?.id,onTaskClick:Te,onTaskUpdate:tn,onTaskDelete:Re,onTaskMove:Qe,availableAssignees:at})})}),l.jsx("div",{className:`
          absolute inset-0 transition-all duration-300 ease-in-out
          ${Ee==="calendar"?"opacity-100 z-10":"opacity-0 z-0 pointer-events-none"}
        `,children:l.jsx("div",{className:"flex-1 overflow-auto h-full",children:l.jsx(pEe,{columns:ro,isDarkMode:y,facilityId:i?.id,onTaskClick:Te,onTaskUpdate:tn,onTaskDelete:Re})})}),l.jsx("div",{className:`
          absolute inset-0 transition-all duration-500 ease-in-out transform
          ${Ee==="timeline"?"opacity-100 translate-x-0 z-10":"opacity-0 translate-x-full z-0 pointer-events-none"}
        `,children:l.jsx("div",{className:"flex-1 overflow-auto h-full",children:l.jsx(mEe,{columns:ro,isDarkMode:y,facilityId:i?.id,onTaskClick:Te,onTaskUpdate:tn,onTaskDelete:Re})})})]}),l.jsx(T1e,{currentView:Ee,onViewChange:Fe,isDarkMode:y}),_&&l.jsx(id,{message:"Task created successfully!",onClose:()=>w(!1)}),N&&l.jsx(id,{message:"Task moved successfully!",onClose:()=>k(!1)}),W&&l.jsx(id,{message:"Project created successfully!",onClose:()=>K(!1)}),S&&l.jsx(gye,{isOpen:S,onClose:()=>O(!1),onConfirm:Ke,itemName:P?.name||"",itemType:P?.type||"project",isDarkMode:y}),F&&l.jsx(id,{message:"Project deleted successfully!",onClose:()=>U(!1)}),I&&l.jsx(id,{message:"Task deleted successfully!",onClose:()=>z(!1)}),Q&&l.jsx(id,{message:"Project archived successfully!",onClose:()=>ne(!1)}),R&&l.jsx(yye,{isOpen:R,onClose:()=>M(!1),onConfirm:At,projectName:D?.name||"",isDarkMode:y}),q&&ge&&l.jsx(x1e,{taskId:ge,isOpen:q,onClose:()=>{Z(!1),Le(null)}}),l.jsx(k1e,{isOpen:Pe,onClose:()=>Ue(!1),isDarkMode:y,tasks:St.flatMap(We=>We.tasks.map(Ye=>({id:Ye.id,title:Ye.title,status:Ye.status,priority:Ye.priority,assigneeName:Ye.assigneeName,projectTitle:We.title}))),projects:St.map(We=>({id:We.id,title:We.title,taskCount:We.tasks.length})),assignees:at,tags:pe,onTaskClick:Te,onViewChange:Fe,onAssigneeFilter:ie,onTagFilter:Ne,onPriorityFilter:ae}),l.jsx(gEe,{isOpen:gr,onClose:()=>Wt(!1),facilityId:i?.id||"",isDarkMode:y}),l.jsx(vEe,{})]})},yo={getAllTimeLogs:async()=>(await Ie.get("/timeLogs")).data,getTimeLogsByTask:async t=>(await Ie.get(`/tasks/${t}/timeLogs`)).data,getTimeLogsByProject:async t=>(await Ie.get(`/projects/${t}/timeLogs`)).data,getTimeLogsByDateRange:async(t,e)=>(await Ie.get(`/timeLogs/range?startDate=${t}&endDate=${e}`)).data,getTodayTimeLogs:async()=>{const t=new Date().toISOString().split("T")[0];return yo.getTimeLogsByDateRange(t,t)},getTimeLogSummary:async()=>(await Ie.get("/timeLogs/summary")).data,createTimeLog:async t=>(await Ie.post(`/tasks/${t.taskId}/timeLogs`,t)).data,updateTimeLog:async(t,e,n)=>(await Ie.put(`/tasks/${t}/timeLogs/${e}`,n)).data,deleteTimeLog:async(t,e)=>{await Ie.delete(`/tasks/${t}/timeLogs/${e}`)},startTimeTracking:async(t,e)=>(await Ie.post(`/tasks/${t}/timeLogs/start`,{description:e||"Work session"})).data,stopTimeTracking:async(t,e)=>(await Ie.post(`/tasks/${t}/timeLogs/${e}/stop`)).data,getRunningTimeLogs:async()=>(await Ie.get("/timeLogs/running")).data,formatDuration:t=>{if(!t)return"0m";const e=Math.floor(t/3600),n=Math.floor(t%3600/60),r=t%60;return e>0?`${e}h ${n}m`:n>0?`${n}m ${r>0?`${r}s`:""}`:`${r}s`},calculateTotalTime:t=>t.reduce((e,n)=>e+(n.duration||0),0)},wEe={Completed:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300",Running:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300",Paused:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300"},_Ee=()=>{const[t,e]=v.useState(()=>typeof window<"u"?document.documentElement.classList.contains("dark"):!1),[n,r]=v.useState(new Date),[s,i]=v.useState([]),[a,o]=v.useState(null),[c,d]=v.useState(!0),[h,p]=v.useState([]),[m,y]=v.useState(""),[x,_]=v.useState(""),[w,N]=v.useState(!1),[k,S]=v.useState({taskId:"",description:"",startTime:"",endTime:""}),[O,R]=v.useState({}),[M,P]=v.useState({isOpen:!1,timeLogId:"",taskId:""});v.useEffect(()=>{const Q=new MutationObserver(()=>{e(document.documentElement.classList.contains("dark"))});return Q.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>Q.disconnect()},[]),v.useEffect(()=>{const Q=setInterval(()=>{r(new Date)},1e3);return()=>clearInterval(Q)},[]);const C=async()=>{try{d(!0);const[Q,ne,W]=await Promise.all([yo.getTodayTimeLogs(),yo.getTimeLogSummary(),yo.getRunningTimeLogs()]);i(Q),o(ne),p(W)}catch(Q){console.error("Failed to load time logs:",Q)}finally{d(!1)}};v.useEffect(()=>{C()},[]),v.useEffect(()=>{(async()=>{if(s.length===0)return;const ne=[...new Set(s.map(W=>W.userId))];try{const W=await gt.fetchUserProfilesByIds(ne);R(W)}catch(W){console.error("Failed to fetch user profiles:",W)}})()},[s]);const D=async(Q,ne)=>{try{await yo.stopTimeTracking(ne,Q),C()}catch(W){console.error("Failed to stop time tracking:",W)}},$=async()=>{if(!(!k.taskId||!k.description||!k.startTime||!k.endTime))try{const Q=new Date(k.startTime),ne=new Date(k.endTime),W=Math.floor((ne.getTime()-Q.getTime())/1e3);await yo.createTimeLog({taskId:k.taskId,description:k.description,startTime:Q.toISOString(),endTime:ne.toISOString(),duration:W}),S({taskId:"",description:"",startTime:"",endTime:""}),N(!1),C()}catch(Q){console.error("Failed to add manual time log:",Q)}},F=(Q,ne)=>{P({isOpen:!0,timeLogId:Q,taskId:ne})},U=async()=>{const{timeLogId:Q,taskId:ne}=M;try{await yo.deleteTimeLog(ne,Q),C()}catch(W){console.error("Failed to delete time log:",W)}finally{P({isOpen:!1,timeLogId:"",taskId:""})}},I=Q=>new Date(Q).toLocaleTimeString(),z=Q=>Q.endTime?"Completed":"Running";return l.jsxs("div",{className:"p-4 space-y-4 bg-neutral-light dark:bg-gray-900 min-h-full",children:[l.jsx("div",{className:`p-4 rounded-lg shadow-md ${t?"bg-gray-800":"bg-white"}`,children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:n.toLocaleTimeString()}),l.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:n.toLocaleDateString()})]})}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[l.jsxs(ct,{onClick:()=>N(!w),className:"flex items-center justify-center space-x-2 bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300 hover:bg-green-200 dark:hover:bg-green-900/50",variant:"ghost",children:[l.jsx(Ps,{className:"w-4 h-4"}),l.jsx("span",{children:"Add Manual Log"})]}),l.jsxs(ct,{onClick:C,disabled:c,className:"flex items-center justify-center space-x-2 bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300 hover:bg-blue-200 dark:hover:bg-blue-900/50",variant:"ghost",children:[l.jsx(B3,{className:`w-4 h-4 ${c?"animate-spin":""}`}),l.jsx("span",{children:"Refresh"})]}),l.jsxs("div",{className:"flex items-center justify-center space-x-2 bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 p-3 rounded-lg text-xs",children:[l.jsx(sr,{className:"w-4 h-4"}),l.jsxs("span",{children:[h.length," Active"]})]})]}),w&&l.jsxs(Mn,{className:`p-4 ${t?"bg-gray-800":"bg-white"}`,children:[l.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-4",children:"Add Manual Time Log"}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("input",{type:"text",value:k.description,onChange:Q=>S({...k,description:Q.target.value}),placeholder:"Description...",className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand focus:border-brand ${t?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-900 placeholder-gray-500"}`}),l.jsx("input",{type:"text",value:k.taskId,onChange:Q=>S({...k,taskId:Q.target.value}),placeholder:"Task ID...",className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand focus:border-brand ${t?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-900 placeholder-gray-500"}`}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:`block text-sm font-medium mb-1 ${t?"text-gray-300":"text-gray-700"}`,children:"Start Time"}),l.jsx("input",{type:"datetime-local",value:k.startTime,onChange:Q=>S({...k,startTime:Q.target.value}),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand focus:border-brand ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`})]}),l.jsxs("div",{children:[l.jsx("label",{className:`block text-sm font-medium mb-1 ${t?"text-gray-300":"text-gray-700"}`,children:"End Time"}),l.jsx("input",{type:"datetime-local",value:k.endTime,onChange:Q=>S({...k,endTime:Q.target.value}),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-brand focus:border-brand ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`})]})]}),l.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[l.jsx(ct,{onClick:$,disabled:!k.description||!k.taskId||!k.startTime||!k.endTime,size:"sm",children:"Add Time Log"}),l.jsx(ct,{variant:"ghost",onClick:()=>{N(!1),S({taskId:"",description:"",startTime:"",endTime:""})},size:"sm",children:"Cancel"})]})]})]}),l.jsxs(Mn,{className:`p-4 ${t?"bg-gray-800":"bg-white"}`,children:[l.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-4",children:"Today's Time Entries"}),l.jsx("div",{className:"space-y-3",children:c?l.jsxs("div",{className:"text-center py-8",children:[l.jsx(B3,{className:"w-6 h-6 animate-spin mx-auto mb-2 text-gray-400"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Loading time logs..."})]}):s.length===0?l.jsxs("div",{className:"text-center py-8 text-gray-500",children:[l.jsx(sr,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),l.jsx("p",{className:"text-sm",children:"No time logs recorded today."})]}):s.map(Q=>{const ne=z(Q);return l.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 dark:border-gray-700 rounded-lg",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:Q.description||"Time tracking session"}),l.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Task: ",Q.taskTitle||Q.taskId]}),l.jsxs("div",{className:"flex items-center space-x-3 mt-2 text-xs text-gray-500 dark:text-gray-400",children:[l.jsxs("span",{children:["Start: ",I(Q.startTime)]}),Q.endTime&&l.jsxs("span",{children:["End: ",I(Q.endTime)]}),l.jsxs("span",{children:["Duration: ",yo.formatDuration(Q.duration)]})]})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${wEe[ne]}`,children:ne}),ne==="Running"&&l.jsx(ct,{variant:"ghost",size:"sm",onClick:()=>D(Q.id,Q.taskId),className:"text-red-600 hover:text-red-700",children:l.jsx(ow,{className:"w-4 h-4"})}),l.jsx(ct,{variant:"ghost",size:"sm",onClick:()=>F(Q.id,Q.taskId),className:"text-red-600 hover:text-red-700",children:l.jsx(Vi,{className:"w-4 h-4"})})]})]},Q.id)})})]}),l.jsxs(Mn,{className:`p-4 ${t?"bg-gray-800":"bg-white"}`,children:[l.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-3",children:"Today's Summary"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-lg font-bold text-gray-900 dark:text-white",children:a?yo.formatDuration(a.todayTime):"0m"}),l.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Today's Time"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-lg font-bold text-gray-900 dark:text-white",children:a?a.todayEntries:0}),l.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Entries Today"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-lg font-bold text-gray-900 dark:text-white",children:h.length}),l.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Active Tasks"})]})]}),a&&l.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-sm font-bold text-gray-900 dark:text-white",children:yo.formatDuration(a.totalTime)}),l.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Total Time"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-sm font-bold text-gray-900 dark:text-white",children:a.totalEntries}),l.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Total Entries"})]})]})})]}),l.jsx(lw,{isOpen:M.isOpen,title:"Delete Time Log",message:"Are you sure you want to delete this time log? This action cannot be undone.",onConfirm:U,onCancel:()=>P({isOpen:!1,timeLogId:"",taskId:""}),confirmText:"Delete",cancelText:"Cancel"})]})},EEe=[{id:1,name:"John Doe",email:"john.doe@company.com",role:"Developer",status:"Active",location:"Main Office",phone:"+1 (555) 123-4567",joinDate:"Jan 15, 2023"},{id:2,name:"Sarah Wilson",email:"sarah.wilson@company.com",role:"Designer",status:"Active",location:"Remote",phone:"+1 (555) 234-5678",joinDate:"Mar 22, 2023"},{id:3,name:"Mike Johnson",email:"mike.johnson@company.com",role:"Project Manager",status:"Active",location:"Branch A",phone:"+1 (555) 345-6789",joinDate:"Feb 10, 2023"},{id:4,name:"Emily Davis",email:"emily.davis@company.com",role:"QA Engineer",status:"Inactive",location:"Main Office",phone:"+1 (555) 456-7890",joinDate:"Dec 5, 2022"}],NEe={Active:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300",Inactive:"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-300",Pending:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300"},SEe=()=>{const[t,e]=v.useState(()=>typeof window<"u"?document.documentElement.classList.contains("dark"):!1),[n,r]=v.useState("All"),[s,i]=v.useState("All");v.useEffect(()=>{const o=new MutationObserver(()=>{e(document.documentElement.classList.contains("dark"))});return o.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>o.disconnect()},[]);const a=EEe.filter(o=>{const c=n==="All"||o.role===n,d=s==="All"||o.status===s;return c&&d});return l.jsxs("div",{className:"p-4 space-y-4 bg-neutral-light dark:bg-gray-900 min-h-full",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[l.jsxs("div",{className:`p-4 rounded-lg shadow-sm flex items-center space-x-3 ${t?"bg-gray-800":"bg-white"}`,children:[l.jsx("div",{className:"p-2 rounded-full bg-brand/10",children:l.jsx(As,{className:"w-4 h-4 text-brand"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300",children:"Total Users"}),l.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"4"})]})]}),l.jsxs("div",{className:`p-4 rounded-lg shadow-sm flex items-center space-x-3 ${t?"bg-gray-800":"bg-white"}`,children:[l.jsx("div",{className:"p-2 rounded-full bg-green-100",children:l.jsx(As,{className:"w-4 h-4 text-green-600"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300",children:"Active Users"}),l.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"3"})]})]}),l.jsxs("div",{className:`p-4 rounded-lg shadow-sm flex items-center space-x-3 ${t?"bg-gray-800":"bg-white"}`,children:[l.jsx("div",{className:"p-2 rounded-full bg-blue-100",children:l.jsx(r0e,{className:"w-4 h-4 text-blue-600"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300",children:"Developers"}),l.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"1"})]})]}),l.jsxs("div",{className:`p-4 rounded-lg shadow-sm flex items-center space-x-3 ${t?"bg-gray-800":"bg-white"}`,children:[l.jsx("div",{className:"p-2 rounded-full bg-purple-100",children:l.jsx(i0e,{className:"w-4 h-4 text-purple-600"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300",children:"Remote Users"}),l.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"1"})]})]})]}),l.jsxs("div",{className:`p-4 rounded-lg shadow-md ${t?"bg-gray-800":"bg-white"}`,children:[l.jsxs("div",{className:"flex flex-wrap gap-4 mb-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Role"}),l.jsxs("select",{value:n,onChange:o=>r(o.target.value),className:"border border-gray-300 dark:border-gray-600 rounded-md px-2 py-1.5 text-xs bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[l.jsx("option",{children:"All"}),l.jsx("option",{children:"Developer"}),l.jsx("option",{children:"Designer"}),l.jsx("option",{children:"Project Manager"}),l.jsx("option",{children:"QA Engineer"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Status"}),l.jsxs("select",{value:s,onChange:o=>i(o.target.value),className:"border border-gray-300 dark:border-gray-600 rounded-md px-2 py-1.5 text-xs bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[l.jsx("option",{children:"All"}),l.jsx("option",{children:"Active"}),l.jsx("option",{children:"Inactive"}),l.jsx("option",{children:"Pending"})]})]})]}),l.jsx("div",{className:"space-y-3",children:a.map(({id:o,name:c,email:d,role:h,status:p,location:m,phone:y,joinDate:x})=>l.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 dark:border-gray-700 rounded-lg",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-8 h-8 bg-brand/10 rounded-full flex items-center justify-center",children:l.jsx(As,{className:"w-4 h-4 text-brand"})}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-sm text-gray-900 dark:text-white",children:c}),l.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:d}),l.jsxs("div",{className:"flex items-center space-x-3 mt-1 text-xs text-gray-500 dark:text-gray-400",children:[l.jsx("span",{children:h}),l.jsx("span",{children:"•"}),l.jsx("span",{children:m}),l.jsx("span",{children:"•"}),l.jsxs("span",{children:["Joined ",x]})]})]})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${NEe[p]}`,children:p}),l.jsx("button",{className:"text-brand hover:text-brand-dark text-xs",children:"View Profile"})]})]},o))})]})]})},kEe=[{id:"profile",title:"Profile Settings",icon:l.jsx(As,{className:"w-4 h-4"}),description:"Manage your personal information and preferences"},{id:"notifications",title:"Notifications",icon:l.jsx(cW,{className:"w-4 h-4"}),description:"Configure notification preferences and alerts"},{id:"security",title:"Security & Privacy",icon:l.jsx(XP,{className:"w-4 h-4"}),description:"Manage security settings and privacy options"},{id:"appearance",title:"Appearance",icon:l.jsx(h0e,{className:"w-4 h-4"}),description:"Customize the look and feel of the application"},{id:"system",title:"System Settings",icon:l.jsx(QP,{className:"w-4 h-4"}),description:"Configure system-wide settings and integrations"},{id:"language",title:"Language & Region",icon:l.jsx(Uge,{className:"w-4 h-4"}),description:"Set language and regional preferences"}],TEe=()=>{const[t,e]=v.useState(()=>typeof window<"u"?document.documentElement.classList.contains("dark"):!1),[n,r]=v.useState("profile");return v.useEffect(()=>{const s=new MutationObserver(()=>{e(document.documentElement.classList.contains("dark"))});return s.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>s.disconnect()},[]),l.jsx("div",{className:"p-4 bg-neutral-light dark:bg-gray-900 min-h-full",children:l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-4",children:[l.jsxs("div",{className:`lg:col-span-1 p-3 rounded-md ${t?"bg-gray-800":"bg-white"}`,children:[l.jsx("h3",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-3",children:"Settings Menu"}),l.jsx("nav",{className:"space-y-1",children:kEe.map(({id:s,title:i,icon:a})=>l.jsxs("button",{onClick:()=>r(s),className:`w-full flex items-center space-x-2 px-2 py-1.5 rounded-md text-left transition-colors text-xs ${n===s?"bg-brand text-white":t?"text-gray-300 hover:bg-gray-700":"text-gray-600 hover:bg-gray-100"}`,children:[a,l.jsx("span",{children:i})]},s))})]}),l.jsxs("div",{className:`lg:col-span-3 p-4 rounded-md ${t?"bg-gray-800":"bg-white"}`,children:[n==="profile"&&l.jsxs("div",{children:[l.jsx("h3",{className:"text-base font-medium text-gray-900 dark:text-white mb-4",children:"Profile Settings"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"First Name"}),l.jsx("input",{type:"text",className:"w-full border border-gray-300 dark:border-gray-600 rounded-md px-3 py-2 text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Enter first name"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"Last Name"}),l.jsx("input",{type:"text",className:"w-full border border-gray-300 dark:border-gray-600 rounded-md px-3 py-2 text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Enter last name"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"Email Address"}),l.jsx("input",{type:"email",className:"w-full border border-gray-300 dark:border-gray-600 rounded-md px-3 py-2 text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Enter email address"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"Bio"}),l.jsx("textarea",{rows:3,className:"w-full border border-gray-300 dark:border-gray-600 rounded-md px-3 py-2 text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Tell us about yourself"})]}),l.jsx("div",{className:"pt-2",children:l.jsx("button",{className:"bg-brand text-white px-3 py-2 text-xs rounded-md hover:bg-brand-dark transition-colors",children:"Save Changes"})})]})]}),n==="notifications"&&l.jsxs("div",{children:[l.jsx("h3",{className:"text-base font-medium text-gray-900 dark:text-white mb-4",children:"Notification Settings"}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"text-xs font-medium text-gray-900 dark:text-white",children:"Email Notifications"}),l.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Receive notifications via email"})]}),l.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[l.jsx("input",{type:"checkbox",className:"sr-only peer"}),l.jsx("div",{className:"w-9 h-5 bg-gray-200 peer-focus:outline-none rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-4 after:w-4 after:transition-all dark:border-gray-600 peer-checked:bg-brand"})]})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"text-xs font-medium text-gray-900 dark:text-white",children:"Push Notifications"}),l.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Receive push notifications in browser"})]}),l.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[l.jsx("input",{type:"checkbox",className:"sr-only peer",defaultChecked:!0}),l.jsx("div",{className:"w-9 h-5 bg-gray-200 peer-focus:outline-none rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-4 after:w-4 after:transition-all dark:border-gray-600 peer-checked:bg-brand"})]})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"text-xs font-medium text-gray-900 dark:text-white",children:"Task Reminders"}),l.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Get reminded about upcoming tasks"})]}),l.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[l.jsx("input",{type:"checkbox",className:"sr-only peer",defaultChecked:!0}),l.jsx("div",{className:"w-9 h-5 bg-gray-200 peer-focus:outline-none rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-4 after:w-4 after:transition-all dark:border-gray-600 peer-checked:bg-brand"})]})]})]})]}),n==="security"&&l.jsxs("div",{children:[l.jsx("h3",{className:"text-base font-medium text-gray-900 dark:text-white mb-4",children:"Security & Privacy"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"text-xs font-medium text-gray-900 dark:text-white mb-3",children:"Change Password"}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"Current Password"}),l.jsx("input",{type:"password",className:"w-full border border-gray-300 dark:border-gray-600 rounded-md px-3 py-2 text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Enter current password"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"New Password"}),l.jsx("input",{type:"password",className:"w-full border border-gray-300 dark:border-gray-600 rounded-md px-3 py-2 text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Enter new password"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"Confirm New Password"}),l.jsx("input",{type:"password",className:"w-full border border-gray-300 dark:border-gray-600 rounded-md px-3 py-2 text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Confirm new password"})]})]})]}),l.jsx("div",{className:"pt-3 border-t border-gray-200 dark:border-gray-700",children:l.jsx("button",{className:"bg-red-600 text-white px-3 py-2 text-xs rounded-md hover:bg-red-700 transition-colors",children:"Enable Two-Factor Authentication"})})]})]}),n==="appearance"&&l.jsxs("div",{children:[l.jsx("h3",{className:"text-base font-medium text-gray-900 dark:text-white mb-4",children:"Appearance Settings"}),l.jsx("div",{className:"space-y-4",children:l.jsxs("div",{children:[l.jsx("h4",{className:"text-xs font-medium text-gray-900 dark:text-white mb-3",children:"Theme"}),l.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[l.jsx("button",{className:"p-3 border border-gray-300 dark:border-gray-600 rounded-md hover:border-brand transition-colors",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-8 h-8 bg-white border border-gray-300 rounded mx-auto mb-2"}),l.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300",children:"Light"})]})}),l.jsx("button",{className:"p-3 border-2 border-brand rounded-md",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-8 h-8 bg-gray-900 rounded mx-auto mb-2"}),l.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300",children:"Dark"})]})}),l.jsx("button",{className:"p-3 border border-gray-300 dark:border-gray-600 rounded-md hover:border-brand transition-colors",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-white to-gray-900 rounded mx-auto mb-2"}),l.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300",children:"Auto"})]})})]})]})})]}),n==="system"&&l.jsxs("div",{children:[l.jsx("h3",{className:"text-base font-medium text-gray-900 dark:text-white mb-4",children:"System Settings"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"text-xs font-medium text-gray-900 dark:text-white mb-3",children:"Data & Storage"}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Storage Used"}),l.jsx("span",{className:"text-xs font-medium text-gray-900 dark:text-white",children:"2.4 GB / 10 GB"})]}),l.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5",children:l.jsx("div",{className:"bg-brand h-1.5 rounded-full",style:{width:"24%"}})})]})]}),l.jsx("div",{className:"pt-3 border-t border-gray-200 dark:border-gray-700",children:l.jsx("button",{className:"bg-red-600 text-white px-3 py-2 text-xs rounded-md hover:bg-red-700 transition-colors",children:"Clear Cache"})})]})]}),n==="language"&&l.jsxs("div",{children:[l.jsx("h3",{className:"text-base font-medium text-gray-900 dark:text-white mb-4",children:"Language & Region"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"Language"}),l.jsxs("select",{className:"w-full border border-gray-300 dark:border-gray-600 rounded-md px-3 py-2 text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[l.jsx("option",{children:"English (US)"}),l.jsx("option",{children:"English (UK)"}),l.jsx("option",{children:"Spanish"}),l.jsx("option",{children:"French"}),l.jsx("option",{children:"German"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"Time Zone"}),l.jsxs("select",{className:"w-full border border-gray-300 dark:border-gray-600 rounded-md px-3 py-2 text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[l.jsx("option",{children:"UTC-8 (Pacific)"}),l.jsx("option",{children:"UTC-5 (Eastern)"}),l.jsx("option",{children:"UTC+0 (GMT)"}),l.jsx("option",{children:"UTC+1 (CET)"})]})]}),l.jsx("div",{className:"pt-2",children:l.jsx("button",{className:"bg-brand text-white px-3 py-2 text-xs rounded-md hover:bg-brand-dark transition-colors",children:"Save Preferences"})})]})]})]})]})})},z5=[{id:1,title:"Meeting Notes - Project Kickoff",content:"Discussed project timeline and deliverables...",createdAt:"2023-10-01",updatedAt:"2023-10-01"},{id:2,title:"Design Review",content:"Reviewed wireframes and user flows...",createdAt:"2023-09-28",updatedAt:"2023-09-29"}],CEe=()=>{const[t,e]=v.useState(()=>typeof window<"u"?document.documentElement.classList.contains("dark"):!1);return v.useEffect(()=>{const n=new MutationObserver(()=>{e(document.documentElement.classList.contains("dark"))});return n.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>n.disconnect()},[]),l.jsxs("div",{className:"p-4 space-y-4 bg-neutral-light dark:bg-gray-900 min-h-full",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Notes"}),l.jsxs("button",{className:"flex items-center space-x-2 px-3 py-1.5 bg-brand text-white rounded-lg hover:bg-brand-dark transition-colors text-xs",children:[l.jsx(Ps,{className:"w-4 h-4"}),l.jsx("span",{children:"Add Note"})]})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:l.jsxs("div",{className:`p-4 rounded-lg shadow-sm flex items-center space-x-3 ${t?"bg-gray-800":"bg-white"}`,children:[l.jsx("div",{className:"p-2 rounded-full bg-brand/10",children:l.jsx(s_,{className:"w-4 h-4 text-brand"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300",children:"Total Notes"}),l.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:z5.length})]})]})}),l.jsx("div",{className:`p-4 rounded-lg shadow-md ${t?"bg-gray-800":"bg-white"}`,children:l.jsx("div",{className:"space-y-3",children:z5.map(n=>l.jsxs("div",{className:"p-3 border border-gray-200 dark:border-gray-700 rounded-lg",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:n.title}),l.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:n.updatedAt})]}),l.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:n.content})]},n.id))})})]})},W5=[{id:1,title:"Sprint Planning",date:"2023-10-05",time:"10:00 AM",location:"Conference Room A",notes:"Discuss sprint goals and tasks."},{id:2,title:"Design Review",date:"2023-10-10",time:"2:00 PM",location:"Zoom",notes:"Review UI/UX designs and feedback."}],jEe=()=>{const[t,e]=v.useState(()=>typeof window<"u"?document.documentElement.classList.contains("dark"):!1);return v.useEffect(()=>{const n=new MutationObserver(()=>{e(document.documentElement.classList.contains("dark"))});return n.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>n.disconnect()},[]),l.jsxs("div",{className:"p-4 space-y-4 bg-neutral-light dark:bg-gray-900 min-h-full",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Meetings"}),l.jsxs("button",{className:"flex items-center space-x-2 px-3 py-1.5 bg-brand text-white rounded-lg hover:bg-brand-dark transition-colors text-xs",children:[l.jsx(Ps,{className:"w-4 h-4"}),l.jsx("span",{children:"Add Meeting"})]})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:l.jsxs("div",{className:`p-4 rounded-lg shadow-sm flex items-center space-x-3 ${t?"bg-gray-800":"bg-white"}`,children:[l.jsx("div",{className:"p-2 rounded-full bg-brand/10",children:l.jsx(Qc,{className:"w-4 h-4 text-brand"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300",children:"Total Meetings"}),l.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:W5.length})]})]})}),l.jsx("div",{className:`p-4 rounded-lg shadow-md ${t?"bg-gray-800":"bg-white"}`,children:l.jsx("div",{className:"space-y-3",children:W5.map(n=>l.jsxs("div",{className:"p-3 border border-gray-200 dark:border-gray-700 rounded-lg",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:n.title}),l.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[n.date," at ",n.time]})]}),l.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:n.location}),l.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:n.notes})]},n.id))})})]})},je={background:"#F8FAFC",cardBg:"#FFFFFF",primary:"#1E40AF",success:"#15803D",warning:"#D97706",danger:"#DC2626",neutralText:"#334155",mutedText:"#6B7280",border:"#E5E7EB",chart:{primary:"#1E40AF",secondary:"#3B82F6",success:"#10B981",warning:"#F59E0B",danger:"#EF4444",gradient:{primary:"linear-gradient(135deg, #1E40AF 0%, #3B82F6 100%)",success:"linear-gradient(135deg, #10B981 0%, #34D399 100%)",warning:"linear-gradient(135deg, #F59E0B 0%, #FBBF24 100%)",danger:"linear-gradient(135deg, #EF4444 0%, #F87171 100%)"}},status:{balanced:"#10B981",caution:"#F59E0B",overloaded:"#EF4444"}},ht={xs:8,sm:12,md:20,lg:32},jr={base:12,sm:8},mx={fast:"150ms ease-in-out"},vt={small:{fontSize:"0.875rem",fontWeight:400,lineHeight:1.4},caption:{fontSize:"0.75rem",fontWeight:500,lineHeight:1.3,textTransform:"uppercase",letterSpacing:"0.05em"}},ds=({children:t,className:e="",padding:n="md",elevation:r="base",onClick:s,hoverable:i=!1,isDarkMode:a=!1})=>{const o={sm:`p-${ht.sm/4}`,md:`p-${ht.md/4}`,lg:`p-${ht.lg/4}`},c={sm:"shadow-sm",base:"shadow-md",lg:"shadow-lg"},d=`
    rounded-lg border
    ${a?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}
    ${o[n]}
    ${c[r]}
    ${i?"hover:shadow-lg transition-shadow duration-200 cursor-pointer":""}
    ${s?"cursor-pointer":""}
    ${e}
  `.trim();return l.jsx("div",{className:d,onClick:s,style:{borderRadius:`${jr.base}px`},children:t})},Ha=t=>t>=1e6?(t/1e6).toFixed(1)+"M":t>=1e3?(t/1e3).toFixed(1)+"K":t.toString(),bA=(t,e=1)=>`${t.toFixed(e)}%`,H5=t=>`${t>0?"+":""}${t.toFixed(1)}%`,jw=t=>({balanced:"#10B981",caution:"#F59E0B",overloaded:"#EF4444",completed:"#10B981",ongoing:"#3B82F6",pending:"#6B7280",active:"#10B981",inactive:"#6B7280"})[t.toLowerCase()]||"#6B7280",PEe=({kpis:t,facilities:e=[],className:n="",isDarkMode:r=!1})=>{const[s,i]=v.useState(!1),a=e.filter(c=>c.avgUtilization>=90),o=[{label:"Active Members",value:Ha(t.activeMembers),delta:t.delta.activeMembers,color:je.primary,icon:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})}),gradient:r?"from-blue-600 to-blue-500":"from-blue-500 to-blue-400",bgGradient:r?"from-blue-900/20 to-blue-800/20":"from-blue-50 to-blue-100/50"},{label:"Total Facilities",value:Ha(t.totalFacilities),delta:t.delta.totalFacilities,color:je.primary,icon:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),gradient:r?"from-purple-600 to-purple-500":"from-purple-500 to-purple-400",bgGradient:r?"from-purple-900/20 to-purple-800/20":"from-purple-50 to-purple-100/50"},{label:"Avg Utilization",value:bA(t.avgUtilization),delta:t.delta.avgUtilization,color:t.avgUtilization>=90?je.danger:t.avgUtilization>=70?je.warning:je.success,icon:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),gradient:t.avgUtilization>=90?r?"from-red-600 to-red-500":"from-red-500 to-red-400":t.avgUtilization>=70?r?"from-yellow-600 to-yellow-500":"from-yellow-500 to-yellow-400":r?"from-green-600 to-green-500":"from-green-500 to-green-400",bgGradient:t.avgUtilization>=90?r?"from-red-900/20 to-red-800/20":"from-red-50 to-red-100/50":t.avgUtilization>=70?r?"from-yellow-900/20 to-yellow-800/20":"from-yellow-50 to-yellow-100/50":r?"from-green-900/20 to-green-800/20":"from-green-50 to-green-100/50"},{label:"Critical Facilities",value:Ha(t.criticalFacilities),delta:t.delta.criticalFacilities,color:t.criticalFacilities>0?je.danger:je.success,icon:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 19.5c-.77.833.192 2.5 1.732 2.5z"})}),gradient:t.criticalFacilities>0?r?"from-red-600 to-red-500":"from-red-500 to-red-400":r?"from-green-600 to-green-500":"from-green-500 to-green-400",bgGradient:t.criticalFacilities>0?r?"from-red-900/20 to-red-800/20":"from-red-50 to-red-100/50":r?"from-green-900/20 to-green-800/20":"from-green-50 to-green-100/50"}];return l.jsxs(l.Fragment,{children:[l.jsx("div",{className:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 ${n}`,children:o.map((c,d)=>{const h=c.label==="Critical Facilities";return l.jsxs(ds,{className:`p-6 relative overflow-hidden group transition-all duration-300 hover:scale-105 hover:shadow-xl min-h-[180px] ${r?"hover:shadow-blue-500/10":"hover:shadow-blue-500/20"} ${h?"cursor-pointer":""}`,isDarkMode:r,onClick:h?()=>i(!0):void 0,children:[l.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${c.bgGradient} opacity-30`}),l.jsxs("div",{className:"relative z-10 h-full flex flex-col",children:[l.jsxs("div",{className:"flex items-start justify-between mb-4",children:[l.jsx("div",{className:`p-3 rounded-xl bg-gradient-to-br ${c.gradient} text-white shadow-lg`,children:c.icon}),c.delta!==void 0&&c.delta!==0&&l.jsxs("div",{className:"text-right",children:[l.jsxs("div",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${c.delta>0?r?"bg-red-900/30 text-red-300":"bg-red-100 text-red-700":r?"bg-green-900/30 text-green-300":"bg-green-100 text-green-700"}`,children:[l.jsx("svg",{className:`w-3 h-3 mr-1 ${c.delta>0?"rotate-0":"rotate-180"}`,fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M5.293 7.707a1 1 0 010-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L6.707 7.707a1 1 0 01-1.414 0z",clipRule:"evenodd"})}),Math.abs(c.delta).toFixed(1),"%"]}),l.jsx("p",{className:`text-xs mt-1 ${r?"text-gray-400":"text-gray-500"}`,children:"vs last period"})]})]}),l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:`text-sm font-medium mb-2 ${r?"text-gray-300":"text-gray-600"}`,children:c.label}),l.jsx("p",{className:`text-3xl font-bold ${r?"text-white":"text-gray-900"} mb-3`,children:c.value})]}),l.jsxs("div",{className:"flex items-center space-x-2 mt-auto",children:[l.jsx("div",{className:`w-2 h-2 rounded-full ${c.label==="Avg Utilization"?t.avgUtilization>=90?"bg-red-500":t.avgUtilization>=70?"bg-yellow-500":"bg-green-500":c.label==="Critical Facilities"?t.criticalFacilities>0?"bg-red-500":"bg-green-500":"bg-blue-500"}`}),l.jsx("span",{className:`text-xs ${r?"text-gray-400":"text-gray-500"}`,children:c.label==="Avg Utilization"?t.avgUtilization>=90?"High Load":t.avgUtilization>=70?"Moderate":"Optimal":c.label==="Critical Facilities"?t.criticalFacilities>0?"Attention Needed":"All Good":"Active"})]}),l.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 opacity-5",children:l.jsx("div",{className:`w-full h-full bg-gradient-to-br ${c.gradient} rounded-full blur-xl`})})]})]},d)})}),s&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:`bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto ${r?"bg-gray-800":"bg-white"}`,children:[l.jsxs("div",{className:`flex items-center justify-between p-6 border-b ${r?"border-gray-700":"border-gray-200"}`,children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:`p-2 rounded-lg ${t.criticalFacilities>0?"bg-red-100 text-red-600":"bg-green-100 text-green-600"}`,children:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 19.5c-.77.833.192 2.5 1.732 2.5z"})})}),l.jsxs("div",{children:[l.jsx("h3",{className:`text-lg font-semibold ${r?"text-white":"text-gray-900"}`,children:"Critical Facilities"}),l.jsxs("p",{className:`text-sm ${r?"text-gray-400":"text-gray-600"}`,children:["Current Status: ",a.length," facilities need attention"]})]})]}),l.jsx("button",{onClick:()=>i(!1),className:`p-2 rounded-lg hover:bg-gray-100 transition-colors ${r?"hover:bg-gray-700 text-gray-400":"text-gray-500"}`,children:l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:`mb-6 p-4 rounded-lg ${a.length>0?"bg-red-50 border border-red-200":"bg-green-50 border border-green-200"} ${r?"bg-opacity-20":""}`,children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:`w-3 h-3 rounded-full ${a.length>0?"bg-red-500":"bg-green-500"}`}),l.jsx("span",{className:`font-medium ${a.length>0?"text-red-800":"text-green-800"} ${r?"text-white":""}`,children:a.length>0?"Attention Needed":"All Good"})]}),l.jsx("p",{className:`mt-2 text-sm ${a.length>0?"text-red-700":"text-green-700"} ${r?"text-gray-300":""}`,children:a.length>0?`${a.length} facilities require immediate attention`:"All facilities are operating within normal parameters"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h4",{className:`font-medium ${r?"text-white":"text-gray-900"}`,children:"What makes a facility critical?"}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-start space-x-3",children:[l.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full mt-2 flex-shrink-0"}),l.jsxs("div",{children:[l.jsx("p",{className:`font-medium text-sm ${r?"text-white":"text-gray-900"}`,children:"Overdue Tasks"}),l.jsx("p",{className:`text-sm ${r?"text-gray-400":"text-gray-600"}`,children:"Tasks that have passed their due date and remain incomplete"})]})]}),l.jsxs("div",{className:"flex items-start space-x-3",children:[l.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full mt-2 flex-shrink-0"}),l.jsxs("div",{children:[l.jsx("p",{className:`font-medium text-sm ${r?"text-white":"text-gray-900"}`,children:"Blocked Tasks"}),l.jsx("p",{className:`text-sm ${r?"text-gray-400":"text-gray-600"}`,children:"Tasks that cannot progress due to dependencies or blockers"})]})]}),l.jsxs("div",{className:"flex items-start space-x-3",children:[l.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full mt-2 flex-shrink-0"}),l.jsxs("div",{children:[l.jsx("p",{className:`font-medium text-sm ${r?"text-white":"text-gray-900"}`,children:"High Priority Tasks"}),l.jsx("p",{className:`text-sm ${r?"text-gray-400":"text-gray-600"}`,children:"Critical tasks that require immediate attention"})]})]}),l.jsxs("div",{className:"flex items-start space-x-3",children:[l.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),l.jsxs("div",{children:[l.jsx("p",{className:`font-medium text-sm ${r?"text-white":"text-gray-900"}`,children:"Low Utilization"}),l.jsx("p",{className:`text-sm ${r?"text-gray-400":"text-gray-600"}`,children:"Facilities with significantly low task completion rates"})]})]})]})]}),a.length>0&&l.jsxs("div",{className:"mt-6",children:[l.jsxs("h4",{className:`font-medium mb-3 ${r?"text-white":"text-gray-900"}`,children:["Critical Facilities (",a.length,")"]}),l.jsx("div",{className:"space-y-2",children:a.map(c=>l.jsx("div",{className:`p-3 rounded-lg border ${r?"bg-gray-700 border-gray-600":"bg-red-50 border-red-200"}`,children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:`font-medium ${r?"text-white":"text-gray-900"}`,children:c.name}),l.jsxs("p",{className:`text-sm ${r?"text-gray-400":"text-gray-600"}`,children:[c.membersCount," members"]})]}),l.jsxs("div",{className:"text-right",children:[l.jsxs("div",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${r?"bg-red-900/30 text-red-300":"bg-red-100 text-red-700"}`,children:[c.avgUtilization.toFixed(1),"% utilization"]}),l.jsxs("p",{className:`text-xs mt-1 ${r?"text-gray-400":"text-gray-500"}`,children:[c.statusDistribution.overloaded||0," overloaded tasks"]})]})]})},c.id))})]})]}),l.jsx("div",{className:`flex justify-end p-6 border-t ${r?"border-gray-700":"border-gray-200"}`,children:l.jsx("button",{onClick:()=>i(!1),className:`px-4 py-2 rounded-lg font-medium transition-colors ${r?"bg-gray-700 text-white hover:bg-gray-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Close"})})]})})]})},pi=({label:t,title:e,action:n,className:r="",isDarkMode:s=!1})=>l.jsxs("div",{className:`flex items-center justify-between ${r}`,children:[l.jsxs("div",{children:[l.jsx("div",{className:`text-xs font-medium tracking-wide mb-1 ${s?"text-gray-400":"text-gray-600"}`,children:t}),l.jsx("h2",{className:`font-semibold ${s?"text-white":"text-gray-900"}`,children:e})]}),n&&l.jsx("button",{onClick:n.onClick,className:`text-sm font-medium hover:underline transition-colors duration-150 ${s?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-700"}`,children:n.label})]});var OS={},MS={},q5;function AEe(){return q5||(q5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==="__proto__"}t.isUnsafeProperty=e})(MS)),MS}var LS={},K5;function SH(){return K5||(K5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}t.isDeepKey=e})(LS)),LS}var FS={},Y5;function kH(){return Y5||(Y5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}t.toKey=e})(FS)),FS}var $S={},G5;function wA(){return G5||(G5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){const r=[],s=n.length;if(s===0)return r;let i=0,a="",o="",c=!1;for(n.charCodeAt(0)===46&&(r.push(""),i++);i<s;){const d=n[i];o?d==="\\"&&i+1<s?(i++,a+=n[i]):d===o?o="":a+=d:c?d==='"'||d==="'"?o=d:d==="]"?(c=!1,r.push(a),a=""):a+=d:d==="["?(c=!0,a&&(r.push(a),a="")):d==="."?a&&(r.push(a),a=""):a+=d,i++}return a&&r.push(a),r}t.toPath=e})($S)),$S}var Q5;function _A(){return Q5||(Q5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=AEe(),n=SH(),r=kH(),s=wA();function i(o,c,d){if(o==null)return d;switch(typeof c){case"string":{if(e.isUnsafeProperty(c))return d;const h=o[c];return h===void 0?n.isDeepKey(c)?i(o,s.toPath(c),d):d:h}case"number":case"symbol":{typeof c=="number"&&(c=r.toKey(c));const h=o[c];return h===void 0?d:h}default:{if(Array.isArray(c))return a(o,c,d);if(Object.is(c?.valueOf(),-0)?c="-0":c=String(c),e.isUnsafeProperty(c))return d;const h=o[c];return h===void 0?d:h}}}function a(o,c,d){if(c.length===0)return d;let h=o;for(let p=0;p<c.length;p++){if(h==null||e.isUnsafeProperty(c[p]))return d;h=h[c[p]]}return h===void 0?d:h}t.get=i})(OS)),OS}var VS,X5;function IEe(){return X5||(X5=1,VS=_A().get),VS}var DEe=IEe();const sh=Xa(DEe);var BS={exports:{}},un={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J5;function REe(){if(J5)return un;J5=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.for("react.view_transition"),y=Symbol.for("react.client.reference");function x(_){if(typeof _=="object"&&_!==null){var w=_.$$typeof;switch(w){case t:switch(_=_.type,_){case n:case s:case r:case c:case d:case m:return _;default:switch(_=_&&_.$$typeof,_){case a:case o:case p:case h:return _;case i:return _;default:return w}}case e:return w}}}return un.ContextConsumer=i,un.ContextProvider=a,un.Element=t,un.ForwardRef=o,un.Fragment=n,un.Lazy=p,un.Memo=h,un.Portal=e,un.Profiler=s,un.StrictMode=r,un.Suspense=c,un.SuspenseList=d,un.isContextConsumer=function(_){return x(_)===i},un.isContextProvider=function(_){return x(_)===a},un.isElement=function(_){return typeof _=="object"&&_!==null&&_.$$typeof===t},un.isForwardRef=function(_){return x(_)===o},un.isFragment=function(_){return x(_)===n},un.isLazy=function(_){return x(_)===p},un.isMemo=function(_){return x(_)===h},un.isPortal=function(_){return x(_)===e},un.isProfiler=function(_){return x(_)===s},un.isStrictMode=function(_){return x(_)===r},un.isSuspense=function(_){return x(_)===c},un.isSuspenseList=function(_){return x(_)===d},un.isValidElementType=function(_){return typeof _=="string"||typeof _=="function"||_===n||_===s||_===r||_===c||_===d||typeof _=="object"&&_!==null&&(_.$$typeof===p||_.$$typeof===h||_.$$typeof===a||_.$$typeof===i||_.$$typeof===o||_.$$typeof===y||_.getModuleId!==void 0)},un.typeOf=x,un}var Z5;function OEe(){return Z5||(Z5=1,BS.exports=REe()),BS.exports}var MEe=OEe(),Xr=t=>t===0?0:t>0?1:-1,Bi=t=>typeof t=="number"&&t!=+t,Nd=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,dt=t=>(typeof t=="number"||t instanceof Number)&&!Bi(t),$o=t=>dt(t)||typeof t=="string",LEe=0,T0=t=>{var e=++LEe;return"".concat(t||"").concat(e)},Is=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!dt(e)&&typeof e!="string")return r;var i;if(Nd(e)){if(n==null)return r;var a=e.indexOf("%");i=n*parseFloat(e.slice(0,a))/100}else i=+e;return Bi(i)&&(i=r),s&&n!=null&&i>n&&(i=n),i},TH=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,n={},r=0;r<e;r++)if(!n[t[r]])n[t[r]]=!0;else return!0;return!1};function nr(t,e,n){return dt(t)&&dt(e)?t+n*(e-t):e}function CH(t,e,n){if(!(!t||!t.length))return t.find(r=>r&&(typeof e=="function"?e(r):sh(r,e))===n)}var Un=t=>t===null||typeof t>"u",vy=t=>Un(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1)),FEe=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function EA(t){if(typeof t!="string")return!1;var e=FEe;return e.includes(t)}var $Ee=["viewBox","children"],eF=["points","pathLength"],US={svg:$Ee,polygon:eF,polyline:eF},NA=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(v.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(s=>{EA(s)&&(r[s]=(i=>n[s](n,i)))}),r},VEe=(t,e,n)=>r=>(t(e,n,r),null),b_=(t,e,n)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var r=null;return Object.keys(t).forEach(s=>{var i=t[s];EA(s)&&typeof i=="function"&&(r||(r={}),r[s]=VEe(i,e,n))}),r},BEe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function jH(t){if(typeof t!="string")return!1;var e=BEe;return e.includes(t)}function Wo(t){var e=Object.entries(t).filter(n=>{var[r]=n;return jH(r)});return Object.fromEntries(e)}var tF=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",nF=null,zS=null,PH=t=>{if(t===nF&&Array.isArray(zS))return zS;var e=[];return v.Children.forEach(t,n=>{Un(n)||(MEe.isFragment(n)?e=e.concat(PH(n.props.children)):e.push(n))}),zS=e,nF=t,e};function SA(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(s=>tF(s)):r=[tF(e)],PH(t).forEach(s=>{var i=sh(s,"type.displayName")||sh(s,"type.name");r.indexOf(i)!==-1&&n.push(s)}),n}var AH=t=>t&&typeof t=="object"&&"clipDot"in t?!!t.clipDot:!0,UEe=(t,e,n,r)=>{var s;if(typeof e=="symbol"||typeof e=="number")return!0;var i=(s=r&&US?.[r])!==null&&s!==void 0?s:[],a=e.startsWith("data-"),o=typeof t!="function"&&(!!r&&i.includes(e)||jH(e)),c=!!n&&EA(e);return a||o||c},Qn=(t,e,n)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var r=t;if(v.isValidElement(t)&&(r=t.props),typeof r!="object"&&typeof r!="function")return null;var s={};return Object.keys(r).forEach(i=>{var a;UEe((a=r)===null||a===void 0?void 0:a[i],i,e,n)&&(s[i]=r[i])}),s},zEe=["children","width","height","viewBox","className","style","title","desc"];function WC(){return WC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},WC.apply(null,arguments)}function WEe(t,e){if(t==null)return{};var n,r,s=HEe(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function HEe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var IH=v.forwardRef((t,e)=>{var{children:n,width:r,height:s,viewBox:i,className:a,style:o,title:c,desc:d}=t,h=WEe(t,zEe),p=i||{width:r,height:s,x:0,y:0},m=Et("recharts-surface",a);return v.createElement("svg",WC({},Qn(h,!0,"svg"),{className:m,width:r,height:s,style:o,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height),ref:e}),v.createElement("title",null,c),v.createElement("desc",null,d),n)}),qEe=["children","className"];function HC(){return HC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},HC.apply(null,arguments)}function KEe(t,e){if(t==null)return{};var n,r,s=YEe(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function YEe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var hs=v.forwardRef((t,e)=>{var{children:n,className:r}=t,s=KEe(t,qEe),i=Et("recharts-layer",r);return v.createElement("g",HC({className:i},Qn(s,!0),{ref:e}),n)}),GEe=v.createContext(null);function En(t){return function(){return t}}const DH=Math.cos,Pw=Math.sin,no=Math.sqrt,Aw=Math.PI,w_=2*Aw,qC=Math.PI,KC=2*qC,ld=1e-6,QEe=KC-ld;function RH(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function XEe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return RH;const n=10**e;return function(r){this._+=r[0];for(let s=1,i=r.length;s<i;++s)this._+=Math.round(arguments[s]*n)/n+r[s]}}class JEe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?RH:XEe(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,s){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+s}`}bezierCurveTo(e,n,r,s,i,a){this._append`C${+e},${+n},${+r},${+s},${this._x1=+i},${this._y1=+a}`}arcTo(e,n,r,s,i){if(e=+e,n=+n,r=+r,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let a=this._x1,o=this._y1,c=r-e,d=s-n,h=a-e,p=o-n,m=h*h+p*p;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(m>ld)if(!(Math.abs(p*c-d*h)>ld)||!i)this._append`L${this._x1=e},${this._y1=n}`;else{let y=r-a,x=s-o,_=c*c+d*d,w=y*y+x*x,N=Math.sqrt(_),k=Math.sqrt(m),S=i*Math.tan((qC-Math.acos((_+m-w)/(2*N*k)))/2),O=S/k,R=S/N;Math.abs(O-1)>ld&&this._append`L${e+O*h},${n+O*p}`,this._append`A${i},${i},0,0,${+(p*y>h*x)},${this._x1=e+R*c},${this._y1=n+R*d}`}}arc(e,n,r,s,i,a){if(e=+e,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(s),c=r*Math.sin(s),d=e+o,h=n+c,p=1^a,m=a?s-i:i-s;this._x1===null?this._append`M${d},${h}`:(Math.abs(this._x1-d)>ld||Math.abs(this._y1-h)>ld)&&this._append`L${d},${h}`,r&&(m<0&&(m=m%KC+KC),m>QEe?this._append`A${r},${r},0,1,${p},${e-o},${n-c}A${r},${r},0,1,${p},${this._x1=d},${this._y1=h}`:m>ld&&this._append`A${r},${r},0,${+(m>=qC)},${p},${this._x1=e+r*Math.cos(i)},${this._y1=n+r*Math.sin(i)}`)}rect(e,n,r,s){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+s}h${-r}Z`}toString(){return this._}}function kA(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new JEe(e)}function TA(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function OH(t){this._context=t}OH.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function __(t){return new OH(t)}function MH(t){return t[0]}function LH(t){return t[1]}function FH(t,e){var n=En(!0),r=null,s=__,i=null,a=kA(o);t=typeof t=="function"?t:t===void 0?MH:En(t),e=typeof e=="function"?e:e===void 0?LH:En(e);function o(c){var d,h=(c=TA(c)).length,p,m=!1,y;for(r==null&&(i=s(y=a())),d=0;d<=h;++d)!(d<h&&n(p=c[d],d,c))===m&&((m=!m)?i.lineStart():i.lineEnd()),m&&i.point(+t(p,d,c),+e(p,d,c));if(y)return i=null,y+""||null}return o.x=function(c){return arguments.length?(t=typeof c=="function"?c:En(+c),o):t},o.y=function(c){return arguments.length?(e=typeof c=="function"?c:En(+c),o):e},o.defined=function(c){return arguments.length?(n=typeof c=="function"?c:En(!!c),o):n},o.curve=function(c){return arguments.length?(s=c,r!=null&&(i=s(r)),o):s},o.context=function(c){return arguments.length?(c==null?r=i=null:i=s(r=c),o):r},o}function gx(t,e,n){var r=null,s=En(!0),i=null,a=__,o=null,c=kA(d);t=typeof t=="function"?t:t===void 0?MH:En(+t),e=typeof e=="function"?e:En(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?LH:En(+n);function d(p){var m,y,x,_=(p=TA(p)).length,w,N=!1,k,S=new Array(_),O=new Array(_);for(i==null&&(o=a(k=c())),m=0;m<=_;++m){if(!(m<_&&s(w=p[m],m,p))===N)if(N=!N)y=m,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),x=m-1;x>=y;--x)o.point(S[x],O[x]);o.lineEnd(),o.areaEnd()}N&&(S[m]=+t(w,m,p),O[m]=+e(w,m,p),o.point(r?+r(w,m,p):S[m],n?+n(w,m,p):O[m]))}if(k)return o=null,k+""||null}function h(){return FH().defined(s).curve(a).context(i)}return d.x=function(p){return arguments.length?(t=typeof p=="function"?p:En(+p),r=null,d):t},d.x0=function(p){return arguments.length?(t=typeof p=="function"?p:En(+p),d):t},d.x1=function(p){return arguments.length?(r=p==null?null:typeof p=="function"?p:En(+p),d):r},d.y=function(p){return arguments.length?(e=typeof p=="function"?p:En(+p),n=null,d):e},d.y0=function(p){return arguments.length?(e=typeof p=="function"?p:En(+p),d):e},d.y1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:En(+p),d):n},d.lineX0=d.lineY0=function(){return h().x(t).y(e)},d.lineY1=function(){return h().x(t).y(n)},d.lineX1=function(){return h().x(r).y(e)},d.defined=function(p){return arguments.length?(s=typeof p=="function"?p:En(!!p),d):s},d.curve=function(p){return arguments.length?(a=p,i!=null&&(o=a(i)),d):a},d.context=function(p){return arguments.length?(p==null?i=o=null:o=a(i=p),d):i},d}class $H{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function ZEe(t){return new $H(t,!0)}function eNe(t){return new $H(t,!1)}const CA={draw(t,e){const n=no(e/Aw);t.moveTo(n,0),t.arc(0,0,n,0,w_)}},tNe={draw(t,e){const n=no(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},VH=no(1/3),nNe=VH*2,rNe={draw(t,e){const n=no(e/nNe),r=n*VH;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},sNe={draw(t,e){const n=no(e),r=-n/2;t.rect(r,r,n,n)}},iNe=.8908130915292852,BH=Pw(Aw/10)/Pw(7*Aw/10),aNe=Pw(w_/10)*BH,oNe=-DH(w_/10)*BH,lNe={draw(t,e){const n=no(e*iNe),r=aNe*n,s=oNe*n;t.moveTo(0,-n),t.lineTo(r,s);for(let i=1;i<5;++i){const a=w_*i/5,o=DH(a),c=Pw(a);t.lineTo(c*n,-o*n),t.lineTo(o*r-c*s,c*r+o*s)}t.closePath()}},WS=no(3),cNe={draw(t,e){const n=-no(e/(WS*3));t.moveTo(0,n*2),t.lineTo(-WS*n,-n),t.lineTo(WS*n,-n),t.closePath()}},ta=-.5,na=no(3)/2,YC=1/no(12),uNe=(YC/2+1)*3,dNe={draw(t,e){const n=no(e/uNe),r=n/2,s=n*YC,i=r,a=n*YC+n,o=-i,c=a;t.moveTo(r,s),t.lineTo(i,a),t.lineTo(o,c),t.lineTo(ta*r-na*s,na*r+ta*s),t.lineTo(ta*i-na*a,na*i+ta*a),t.lineTo(ta*o-na*c,na*o+ta*c),t.lineTo(ta*r+na*s,ta*s-na*r),t.lineTo(ta*i+na*a,ta*a-na*i),t.lineTo(ta*o+na*c,ta*c-na*o),t.closePath()}};function hNe(t,e){let n=null,r=kA(s);t=typeof t=="function"?t:En(t||CA),e=typeof e=="function"?e:En(e===void 0?64:+e);function s(){let i;if(n||(n=i=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),i)return n=null,i+""||null}return s.type=function(i){return arguments.length?(t=typeof i=="function"?i:En(i),s):t},s.size=function(i){return arguments.length?(e=typeof i=="function"?i:En(+i),s):e},s.context=function(i){return arguments.length?(n=i??null,s):n},s}function Iw(){}function Dw(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function UH(t){this._context=t}UH.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Dw(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Dw(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function fNe(t){return new UH(t)}function zH(t){this._context=t}zH.prototype={areaStart:Iw,areaEnd:Iw,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Dw(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function pNe(t){return new zH(t)}function WH(t){this._context=t}WH.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Dw(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function mNe(t){return new WH(t)}function HH(t){this._context=t}HH.prototype={areaStart:Iw,areaEnd:Iw,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function gNe(t){return new HH(t)}function rF(t){return t<0?-1:1}function sF(t,e,n){var r=t._x1-t._x0,s=e-t._x1,i=(t._y1-t._y0)/(r||s<0&&-0),a=(n-t._y1)/(s||r<0&&-0),o=(i*s+a*r)/(r+s);return(rF(i)+rF(a))*Math.min(Math.abs(i),Math.abs(a),.5*Math.abs(o))||0}function iF(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function HS(t,e,n){var r=t._x0,s=t._y0,i=t._x1,a=t._y1,o=(i-r)/3;t._context.bezierCurveTo(r+o,s+o*e,i-o,a-o*n,i,a)}function Rw(t){this._context=t}Rw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:HS(this,this._t0,iF(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,HS(this,iF(this,n=sF(this,t,e)),n);break;default:HS(this,this._t0,n=sF(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function qH(t){this._context=new KH(t)}(qH.prototype=Object.create(Rw.prototype)).point=function(t,e){Rw.prototype.point.call(this,e,t)};function KH(t){this._context=t}KH.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,s,i){this._context.bezierCurveTo(e,t,r,n,i,s)}};function yNe(t){return new Rw(t)}function vNe(t){return new qH(t)}function YH(t){this._context=t}YH.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=aF(t),s=aF(e),i=0,a=1;a<n;++i,++a)this._context.bezierCurveTo(r[0][i],s[0][i],r[1][i],s[1][i],t[a],e[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function aF(t){var e,n=t.length-1,r,s=new Array(n),i=new Array(n),a=new Array(n);for(s[0]=0,i[0]=2,a[0]=t[0]+2*t[1],e=1;e<n-1;++e)s[e]=1,i[e]=4,a[e]=4*t[e]+2*t[e+1];for(s[n-1]=2,i[n-1]=7,a[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=s[e]/i[e-1],i[e]-=r,a[e]-=r*a[e-1];for(s[n-1]=a[n-1]/i[n-1],e=n-2;e>=0;--e)s[e]=(a[e]-s[e+1])/i[e];for(i[n-1]=(t[n]+s[n-1])/2,e=0;e<n-1;++e)i[e]=2*t[e+1]-s[e+1];return[s,i]}function xNe(t){return new YH(t)}function E_(t,e){this._context=t,this._t=e}E_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function bNe(t){return new E_(t,.5)}function wNe(t){return new E_(t,0)}function _Ne(t){return new E_(t,1)}function Sp(t,e){if((a=t.length)>1)for(var n=1,r,s,i=t[e[0]],a,o=i.length;n<a;++n)for(s=i,i=t[e[n]],r=0;r<o;++r)i[r][1]+=i[r][0]=isNaN(s[r][1])?s[r][0]:s[r][1]}function GC(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function ENe(t,e){return t[e]}function NNe(t){const e=[];return e.key=t,e}function SNe(){var t=En([]),e=GC,n=Sp,r=ENe;function s(i){var a=Array.from(t.apply(this,arguments),NNe),o,c=a.length,d=-1,h;for(const p of i)for(o=0,++d;o<c;++o)(a[o][d]=[0,+r(p,a[o].key,d,i)]).data=p;for(o=0,h=TA(e(a));o<c;++o)a[h[o]].index=o;return n(a,h),a}return s.keys=function(i){return arguments.length?(t=typeof i=="function"?i:En(Array.from(i)),s):t},s.value=function(i){return arguments.length?(r=typeof i=="function"?i:En(+i),s):r},s.order=function(i){return arguments.length?(e=i==null?GC:typeof i=="function"?i:En(Array.from(i)),s):e},s.offset=function(i){return arguments.length?(n=i??Sp,s):n},s}function kNe(t,e){if((r=t.length)>0){for(var n,r,s=0,i=t[0].length,a;s<i;++s){for(a=n=0;n<r;++n)a+=t[n][s][1]||0;if(a)for(n=0;n<r;++n)t[n][s][1]/=a}Sp(t,e)}}function TNe(t,e){if((s=t.length)>0){for(var n=0,r=t[e[0]],s,i=r.length;n<i;++n){for(var a=0,o=0;a<s;++a)o+=t[a][n][1]||0;r[n][1]+=r[n][0]=-o/2}Sp(t,e)}}function CNe(t,e){if(!(!((a=t.length)>0)||!((i=(s=t[e[0]]).length)>0))){for(var n=0,r=1,s,i,a;r<i;++r){for(var o=0,c=0,d=0;o<a;++o){for(var h=t[e[o]],p=h[r][1]||0,m=h[r-1][1]||0,y=(p-m)/2,x=0;x<o;++x){var _=t[e[x]],w=_[r][1]||0,N=_[r-1][1]||0;y+=w-N}c+=p,d+=y*p}s[r-1][1]+=s[r-1][0]=n,c&&(n-=d/c)}s[r-1][1]+=s[r-1][0]=n,Sp(t,e)}}var jNe=["type","size","sizeType"];function QC(){return QC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},QC.apply(null,arguments)}function oF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function lF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oF(Object(n),!0).forEach(function(r){PNe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function PNe(t,e,n){return(e=ANe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ANe(t){var e=INe(t,"string");return typeof e=="symbol"?e:e+""}function INe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function DNe(t,e){if(t==null)return{};var n,r,s=RNe(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function RNe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var GH={symbolCircle:CA,symbolCross:tNe,symbolDiamond:rNe,symbolSquare:sNe,symbolStar:lNe,symbolTriangle:cNe,symbolWye:dNe},ONe=Math.PI/180,MNe=t=>{var e="symbol".concat(vy(t));return GH[e]||CA},LNe=(t,e,n)=>{if(e==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var r=18*ONe;return 1.25*t*t*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},FNe=(t,e)=>{GH["symbol".concat(vy(t))]=e},QH=t=>{var{type:e="circle",size:n=64,sizeType:r="area"}=t,s=DNe(t,jNe),i=lF(lF({},s),{},{type:e,size:n,sizeType:r}),a="circle";typeof e=="string"&&(a=e);var o=()=>{var m=MNe(a),y=hNe().type(m).size(LNe(n,r,a));return y()},{className:c,cx:d,cy:h}=i,p=Qn(i,!0);return d===+d&&h===+h&&n===+n?v.createElement("path",QC({},p,{className:Et("recharts-symbols",c),transform:"translate(".concat(d,", ").concat(h,")"),d:o()})):null};QH.registerSymbol=FNe;var qS={},KS={},cF;function $Ne(){return cF||(cF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){const s=new Map;for(let i=0;i<n.length;i++){const a=n[i],o=r(a);s.has(o)||s.set(o,a)}return Array.from(s.values())}t.uniqBy=e})(KS)),KS}var YS={},uF;function XH(){return uF||(uF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n}t.identity=e})(YS)),YS}var GS={},QS={},XS={},dF;function VNe(){return dF||(dF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Number.isSafeInteger(n)&&n>=0}t.isLength=e})(XS)),XS}var hF;function jA(){return hF||(hF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=VNe();function n(r){return r!=null&&typeof r!="function"&&e.isLength(r.length)}t.isArrayLike=n})(QS)),QS}var JS={},fF;function BNe(){return fF||(fF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="object"&&n!==null}t.isObjectLike=e})(JS)),JS}var pF;function UNe(){return pF||(pF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=jA(),n=BNe();function r(s){return n.isObjectLike(s)&&e.isArrayLike(s)}t.isArrayLikeObject=r})(GS)),GS}var ZS={},ek={},mF;function zNe(){return mF||(mF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=_A();function n(r){return function(s){return e.get(s,r)}}t.property=n})(ek)),ek}var tk={},nk={},rk={},sk={},gF;function JH(){return gF||(gF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n!==null&&(typeof n=="object"||typeof n=="function")}t.isObject=e})(sk)),sk}var ik={},yF;function ZH(){return yF||(yF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null||typeof n!="object"&&typeof n!="function"}t.isPrimitive=e})(ik)),ik}var ak={},vF;function eq(){return vF||(vF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}t.eq=e})(ak)),ak}var xF;function WNe(){return xF||(xF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=PA(),n=JH(),r=ZH(),s=eq();function i(p,m,y){return typeof y!="function"?e.isMatch(p,m):a(p,m,function x(_,w,N,k,S,O){const R=y(_,w,N,k,S,O);return R!==void 0?!!R:a(_,w,x,O)},new Map)}function a(p,m,y,x){if(m===p)return!0;switch(typeof m){case"object":return o(p,m,y,x);case"function":return Object.keys(m).length>0?a(p,{...m},y,x):s.eq(p,m);default:return n.isObject(p)?typeof m=="string"?m==="":!0:s.eq(p,m)}}function o(p,m,y,x){if(m==null)return!0;if(Array.isArray(m))return d(p,m,y,x);if(m instanceof Map)return c(p,m,y,x);if(m instanceof Set)return h(p,m,y,x);const _=Object.keys(m);if(p==null)return _.length===0;if(_.length===0)return!0;if(x&&x.has(m))return x.get(m)===p;x&&x.set(m,p);try{for(let w=0;w<_.length;w++){const N=_[w];if(!r.isPrimitive(p)&&!(N in p)||m[N]===void 0&&p[N]!==void 0||m[N]===null&&p[N]!==null||!y(p[N],m[N],N,p,m,x))return!1}return!0}finally{x&&x.delete(m)}}function c(p,m,y,x){if(m.size===0)return!0;if(!(p instanceof Map))return!1;for(const[_,w]of m.entries()){const N=p.get(_);if(y(N,w,_,p,m,x)===!1)return!1}return!0}function d(p,m,y,x){if(m.length===0)return!0;if(!Array.isArray(p))return!1;const _=new Set;for(let w=0;w<m.length;w++){const N=m[w];let k=!1;for(let S=0;S<p.length;S++){if(_.has(S))continue;const O=p[S];let R=!1;if(y(O,N,w,p,m,x)&&(R=!0),R){_.add(S),k=!0;break}}if(!k)return!1}return!0}function h(p,m,y,x){return m.size===0?!0:p instanceof Set?d([...p],[...m],y,x):!1}t.isMatchWith=i,t.isSetMatch=h})(rk)),rk}var bF;function PA(){return bF||(bF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=WNe();function n(r,s){return e.isMatchWith(r,s,()=>{})}t.isMatch=n})(nk)),nk}var ok={},lk={},ck={},wF;function HNe(){return wF||(wF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}t.getSymbols=e})(ck)),ck}var uk={},_F;function tq(){return _F||(_F=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}t.getTag=e})(uk)),uk}var dk={},EF;function nq(){return EF||(EF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",n="[object String]",r="[object Number]",s="[object Boolean]",i="[object Arguments]",a="[object Symbol]",o="[object Date]",c="[object Map]",d="[object Set]",h="[object Array]",p="[object Function]",m="[object ArrayBuffer]",y="[object Object]",x="[object Error]",_="[object DataView]",w="[object Uint8Array]",N="[object Uint8ClampedArray]",k="[object Uint16Array]",S="[object Uint32Array]",O="[object BigUint64Array]",R="[object Int8Array]",M="[object Int16Array]",P="[object Int32Array]",C="[object BigInt64Array]",D="[object Float32Array]",$="[object Float64Array]";t.argumentsTag=i,t.arrayBufferTag=m,t.arrayTag=h,t.bigInt64ArrayTag=C,t.bigUint64ArrayTag=O,t.booleanTag=s,t.dataViewTag=_,t.dateTag=o,t.errorTag=x,t.float32ArrayTag=D,t.float64ArrayTag=$,t.functionTag=p,t.int16ArrayTag=M,t.int32ArrayTag=P,t.int8ArrayTag=R,t.mapTag=c,t.numberTag=r,t.objectTag=y,t.regexpTag=e,t.setTag=d,t.stringTag=n,t.symbolTag=a,t.uint16ArrayTag=k,t.uint32ArrayTag=S,t.uint8ArrayTag=w,t.uint8ClampedArrayTag=N})(dk)),dk}var hk={},NF;function qNe(){return NF||(NF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}t.isTypedArray=e})(hk)),hk}var SF;function rq(){return SF||(SF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=HNe(),n=tq(),r=nq(),s=ZH(),i=qNe();function a(h,p){return o(h,void 0,h,new Map,p)}function o(h,p,m,y=new Map,x=void 0){const _=x?.(h,p,m,y);if(_!==void 0)return _;if(s.isPrimitive(h))return h;if(y.has(h))return y.get(h);if(Array.isArray(h)){const w=new Array(h.length);y.set(h,w);for(let N=0;N<h.length;N++)w[N]=o(h[N],N,m,y,x);return Object.hasOwn(h,"index")&&(w.index=h.index),Object.hasOwn(h,"input")&&(w.input=h.input),w}if(h instanceof Date)return new Date(h.getTime());if(h instanceof RegExp){const w=new RegExp(h.source,h.flags);return w.lastIndex=h.lastIndex,w}if(h instanceof Map){const w=new Map;y.set(h,w);for(const[N,k]of h)w.set(N,o(k,N,m,y,x));return w}if(h instanceof Set){const w=new Set;y.set(h,w);for(const N of h)w.add(o(N,void 0,m,y,x));return w}if(typeof Buffer<"u"&&Buffer.isBuffer(h))return h.subarray();if(i.isTypedArray(h)){const w=new(Object.getPrototypeOf(h)).constructor(h.length);y.set(h,w);for(let N=0;N<h.length;N++)w[N]=o(h[N],N,m,y,x);return w}if(h instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&h instanceof SharedArrayBuffer)return h.slice(0);if(h instanceof DataView){const w=new DataView(h.buffer.slice(0),h.byteOffset,h.byteLength);return y.set(h,w),c(w,h,m,y,x),w}if(typeof File<"u"&&h instanceof File){const w=new File([h],h.name,{type:h.type});return y.set(h,w),c(w,h,m,y,x),w}if(h instanceof Blob){const w=new Blob([h],{type:h.type});return y.set(h,w),c(w,h,m,y,x),w}if(h instanceof Error){const w=new h.constructor;return y.set(h,w),w.message=h.message,w.name=h.name,w.stack=h.stack,w.cause=h.cause,c(w,h,m,y,x),w}if(typeof h=="object"&&d(h)){const w=Object.create(Object.getPrototypeOf(h));return y.set(h,w),c(w,h,m,y,x),w}return h}function c(h,p,m=h,y,x){const _=[...Object.keys(p),...e.getSymbols(p)];for(let w=0;w<_.length;w++){const N=_[w],k=Object.getOwnPropertyDescriptor(h,N);(k==null||k.writable)&&(h[N]=o(p[N],N,m,y,x))}}function d(h){switch(n.getTag(h)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=a,t.cloneDeepWithImpl=o,t.copyProperties=c})(lk)),lk}var kF;function KNe(){return kF||(kF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=rq();function n(r){return e.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}t.cloneDeep=n})(ok)),ok}var TF;function YNe(){return TF||(TF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=PA(),n=KNe();function r(s){return s=n.cloneDeep(s),i=>e.isMatch(i,s)}t.matches=r})(tk)),tk}var fk={},pk={},mk={},CF;function GNe(){return CF||(CF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=rq(),n=nq();function r(s,i){return e.cloneDeepWith(s,(a,o,c,d)=>{const h=i?.(a,o,c,d);if(h!==void 0)return h;if(typeof s=="object")switch(Object.prototype.toString.call(s)){case n.numberTag:case n.stringTag:case n.booleanTag:{const p=new s.constructor(s?.valueOf());return e.copyProperties(p,s),p}case n.argumentsTag:{const p={};return e.copyProperties(p,s),p.length=s.length,p[Symbol.iterator]=s[Symbol.iterator],p}default:return}})}t.cloneDeepWith=r})(mk)),mk}var jF;function QNe(){return jF||(jF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=GNe();function n(r){return e.cloneDeepWith(r)}t.cloneDeep=n})(pk)),pk}var gk={},yk={},PF;function sq(){return PF||(PF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function n(r,s=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<s;case"symbol":return!1;case"string":return e.test(r)}}t.isIndex=n})(yk)),yk}var vk={},AF;function XNe(){return AF||(AF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=tq();function n(r){return r!==null&&typeof r=="object"&&e.getTag(r)==="[object Arguments]"}t.isArguments=n})(vk)),vk}var IF;function JNe(){return IF||(IF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=SH(),n=sq(),r=XNe(),s=wA();function i(a,o){let c;if(Array.isArray(o)?c=o:typeof o=="string"&&e.isDeepKey(o)&&a?.[o]==null?c=s.toPath(o):c=[o],c.length===0)return!1;let d=a;for(let h=0;h<c.length;h++){const p=c[h];if((d==null||!Object.hasOwn(d,p))&&!((Array.isArray(d)||r.isArguments(d))&&n.isIndex(p)&&p<d.length))return!1;d=d[p]}return!0}t.has=i})(gk)),gk}var DF;function ZNe(){return DF||(DF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=PA(),n=kH(),r=QNe(),s=_A(),i=JNe();function a(o,c){switch(typeof o){case"object":{Object.is(o?.valueOf(),-0)&&(o="-0");break}case"number":{o=n.toKey(o);break}}return c=r.cloneDeep(c),function(d){const h=s.get(d,o);return h===void 0?i.has(d,o):c===void 0?h===void 0:e.isMatch(h,c)}}t.matchesProperty=a})(fk)),fk}var RF;function eSe(){return RF||(RF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=XH(),n=zNe(),r=YNe(),s=ZNe();function i(a){if(a==null)return e.identity;switch(typeof a){case"function":return a;case"object":return Array.isArray(a)&&a.length===2?s.matchesProperty(a[0],a[1]):r.matches(a);case"string":case"symbol":case"number":return n.property(a)}}t.iteratee=i})(ZS)),ZS}var OF;function tSe(){return OF||(OF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=$Ne(),n=XH(),r=UNe(),s=eSe();function i(a,o=n.identity){return r.isArrayLikeObject(a)?e.uniqBy(Array.from(a),s.iteratee(o)):[]}t.uniqBy=i})(qS)),qS}var xk,MF;function nSe(){return MF||(MF=1,xk=tSe().uniqBy),xk}var rSe=nSe();const LF=Xa(rSe);function sSe(t,e,n){return e===!0?LF(t,n):typeof e=="function"?LF(t,e):t}var bk={exports:{}},wk={},_k={exports:{}},Ek={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FF;function iSe(){if(FF)return Ek;FF=1;var t=Lp();function e(p,m){return p===m&&(p!==0||1/p===1/m)||p!==p&&m!==m}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,s=t.useEffect,i=t.useLayoutEffect,a=t.useDebugValue;function o(p,m){var y=m(),x=r({inst:{value:y,getSnapshot:m}}),_=x[0].inst,w=x[1];return i(function(){_.value=y,_.getSnapshot=m,c(_)&&w({inst:_})},[p,y,m]),s(function(){return c(_)&&w({inst:_}),p(function(){c(_)&&w({inst:_})})},[p]),a(y),y}function c(p){var m=p.getSnapshot;p=p.value;try{var y=m();return!n(p,y)}catch{return!0}}function d(p,m){return m()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:o;return Ek.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:h,Ek}var $F;function aSe(){return $F||($F=1,_k.exports=iSe()),_k.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VF;function oSe(){if(VF)return wk;VF=1;var t=Lp(),e=aSe();function n(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var r=typeof Object.is=="function"?Object.is:n,s=e.useSyncExternalStore,i=t.useRef,a=t.useEffect,o=t.useMemo,c=t.useDebugValue;return wk.useSyncExternalStoreWithSelector=function(d,h,p,m,y){var x=i(null);if(x.current===null){var _={hasValue:!1,value:null};x.current=_}else _=x.current;x=o(function(){function N(M){if(!k){if(k=!0,S=M,M=m(M),y!==void 0&&_.hasValue){var P=_.value;if(y(P,M))return O=P}return O=M}if(P=O,r(S,M))return P;var C=m(M);return y!==void 0&&y(P,C)?(S=M,P):(S=M,O=C)}var k=!1,S,O,R=p===void 0?null:p;return[function(){return N(h())},R===null?void 0:function(){return N(R())}]},[h,p,m,y]);var w=s(d,x[0],x[1]);return a(function(){_.hasValue=!0,_.value=w},[w]),c(w),w},wk}var BF;function lSe(){return BF||(BF=1,bk.exports=oSe()),bk.exports}var cSe=lSe(),AA=v.createContext(null),uSe=t=>t,pr=()=>{var t=v.useContext(AA);return t?t.store.dispatch:uSe},db=()=>{},dSe=()=>db,hSe=(t,e)=>t===e;function st(t){var e=v.useContext(AA);return cSe.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:dSe,e?e.store.getState:db,e?e.store.getState:db,e?t:db,hSe)}function fSe(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function pSe(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function mSe(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var UF=t=>Array.isArray(t)?t:[t];function gSe(t){const e=Array.isArray(t[0])?t[0]:t;return mSe(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function ySe(t,e){const n=[],{length:r}=t;for(let s=0;s<r;s++)n.push(t[s].apply(null,e));return n}var vSe=class{constructor(t){this.value=t}deref(){return this.value}},xSe=typeof WeakRef<"u"?WeakRef:vSe,bSe=0,zF=1;function yx(){return{s:bSe,v:void 0,o:null,p:null}}function iq(t,e={}){let n=yx();const{resultEqualityCheck:r}=e;let s,i=0;function a(){let o=n;const{length:c}=arguments;for(let p=0,m=c;p<m;p++){const y=arguments[p];if(typeof y=="function"||typeof y=="object"&&y!==null){let x=o.o;x===null&&(o.o=x=new WeakMap);const _=x.get(y);_===void 0?(o=yx(),x.set(y,o)):o=_}else{let x=o.p;x===null&&(o.p=x=new Map);const _=x.get(y);_===void 0?(o=yx(),x.set(y,o)):o=_}}const d=o;let h;if(o.s===zF)h=o.v;else if(h=t.apply(null,arguments),i++,r){const p=s?.deref?.()??s;p!=null&&r(p,h)&&(h=p,i!==0&&i--),s=typeof h=="object"&&h!==null||typeof h=="function"?new xSe(h):h}return d.s=zF,d.v=h,h}return a.clearCache=()=>{n=yx(),a.resetResultsCount()},a.resultsCount=()=>i,a.resetResultsCount=()=>{i=0},a}function wSe(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...s)=>{let i=0,a=0,o,c={},d=s.pop();typeof d=="object"&&(c=d,d=s.pop()),fSe(d,`createSelector expects an output function after the inputs, but received: [${typeof d}]`);const h={...n,...c},{memoize:p,memoizeOptions:m=[],argsMemoize:y=iq,argsMemoizeOptions:x=[]}=h,_=UF(m),w=UF(x),N=gSe(s),k=p(function(){return i++,d.apply(null,arguments)},..._),S=y(function(){a++;const R=ySe(N,arguments);return o=k.apply(null,R),o},...w);return Object.assign(S,{resultFunc:d,memoizedResultFunc:k,dependencies:N,dependencyRecomputations:()=>a,resetDependencyRecomputations:()=>{a=0},lastResult:()=>o,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:p,argsMemoize:y})};return Object.assign(r,{withTypes:()=>r}),r}var ye=wSe(iq),_Se=Object.assign((t,e=ye)=>{pSe(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(i=>t[i]);return e(r,(...i)=>i.reduce((a,o,c)=>(a[n[c]]=o,a),{}))},{withTypes:()=>_Se}),Nk={},Sk={},kk={},WF;function ESe(){return WF||(WF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,s,i)=>{if(r!==s){const a=e(r),o=e(s);if(a===o&&a===0){if(r<s)return i==="desc"?1:-1;if(r>s)return i==="desc"?-1:1}return i==="desc"?o-a:a-o}return 0};t.compareValues=n})(kk)),kk}var Tk={},Ck={},HF;function aq(){return HF||(HF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"||n instanceof Symbol}t.isSymbol=e})(Ck)),Ck}var qF;function NSe(){return qF||(qF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=aq(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function s(i,a){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||e.isSymbol(i)?!0:typeof i=="string"&&(r.test(i)||!n.test(i))||a!=null&&Object.hasOwn(a,i)}t.isKey=s})(Tk)),Tk}var KF;function SSe(){return KF||(KF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=ESe(),n=NSe(),r=wA();function s(i,a,o,c){if(i==null)return[];o=c?void 0:o,Array.isArray(i)||(i=Object.values(i)),Array.isArray(a)||(a=a==null?[null]:[a]),a.length===0&&(a=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(y=>String(y));const d=(y,x)=>{let _=y;for(let w=0;w<x.length&&_!=null;++w)_=_[x[w]];return _},h=(y,x)=>x==null||y==null?x:typeof y=="object"&&"key"in y?Object.hasOwn(x,y.key)?x[y.key]:d(x,y.path):typeof y=="function"?y(x):Array.isArray(y)?d(x,y):typeof x=="object"?x[y]:x,p=a.map(y=>(Array.isArray(y)&&y.length===1&&(y=y[0]),y==null||typeof y=="function"||Array.isArray(y)||n.isKey(y)?y:{key:y,path:r.toPath(y)}));return i.map(y=>({original:y,criteria:p.map(x=>h(x,y))})).slice().sort((y,x)=>{for(let _=0;_<p.length;_++){const w=e.compareValues(y.criteria[_],x.criteria[_],o[_]);if(w!==0)return w}return 0}).map(y=>y.original)}t.orderBy=s})(Sk)),Sk}var jk={},YF;function kSe(){return YF||(YF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r=1){const s=[],i=Math.floor(r),a=(o,c)=>{for(let d=0;d<o.length;d++){const h=o[d];Array.isArray(h)&&c<i?a(h,c+1):s.push(h)}};return a(n,0),s}t.flatten=e})(jk)),jk}var Pk={},GF;function oq(){return GF||(GF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=sq(),n=jA(),r=JH(),s=eq();function i(a,o,c){return r.isObject(c)&&(typeof o=="number"&&n.isArrayLike(c)&&e.isIndex(o)&&o<c.length||typeof o=="string"&&o in c)?s.eq(c[o],a):!1}t.isIterateeCall=i})(Pk)),Pk}var QF;function TSe(){return QF||(QF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=SSe(),n=kSe(),r=oq();function s(i,...a){const o=a.length;return o>1&&r.isIterateeCall(i,a[0],a[1])?a=[]:o>2&&r.isIterateeCall(a[0],a[1],a[2])&&(a=[a[0]]),e.orderBy(i,n.flatten(a),["asc"])}t.sortBy=s})(Nk)),Nk}var Ak,XF;function CSe(){return XF||(XF=1,Ak=TSe().sortBy),Ak}var jSe=CSe();const N_=Xa(jSe);var lq=t=>t.legend.settings,PSe=t=>t.legend.size,ASe=t=>t.legend.payload;ye([ASe,lq],(t,e)=>{var{itemSorter:n}=e,r=t.flat(1);return n?N_(r,n):r});var vx=1;function ISe(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,n]=v.useState({height:0,left:0,top:0,width:0}),r=v.useCallback(s=>{if(s!=null){var i=s.getBoundingClientRect(),a={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(a.height-e.height)>vx||Math.abs(a.left-e.left)>vx||Math.abs(a.top-e.top)>vx||Math.abs(a.width-e.width)>vx)&&n({height:a.height,left:a.left,top:a.top,width:a.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,r]}function is(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var DSe=typeof Symbol=="function"&&Symbol.observable||"@@observable",JF=DSe,Ik=()=>Math.random().toString(36).substring(7).split("").join("."),RSe={INIT:`@@redux/INIT${Ik()}`,REPLACE:`@@redux/REPLACE${Ik()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Ik()}`},Ow=RSe;function IA(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function cq(t,e,n){if(typeof t!="function")throw new Error(is(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(is(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(is(1));return n(cq)(t,e)}let r=t,s=e,i=new Map,a=i,o=0,c=!1;function d(){a===i&&(a=new Map,i.forEach((w,N)=>{a.set(N,w)}))}function h(){if(c)throw new Error(is(3));return s}function p(w){if(typeof w!="function")throw new Error(is(4));if(c)throw new Error(is(5));let N=!0;d();const k=o++;return a.set(k,w),function(){if(N){if(c)throw new Error(is(6));N=!1,d(),a.delete(k),i=null}}}function m(w){if(!IA(w))throw new Error(is(7));if(typeof w.type>"u")throw new Error(is(8));if(typeof w.type!="string")throw new Error(is(17));if(c)throw new Error(is(9));try{c=!0,s=r(s,w)}finally{c=!1}return(i=a).forEach(k=>{k()}),w}function y(w){if(typeof w!="function")throw new Error(is(10));r=w,m({type:Ow.REPLACE})}function x(){const w=p;return{subscribe(N){if(typeof N!="object"||N===null)throw new Error(is(11));function k(){const O=N;O.next&&O.next(h())}return k(),{unsubscribe:w(k)}},[JF](){return this}}}return m({type:Ow.INIT}),{dispatch:m,subscribe:p,getState:h,replaceReducer:y,[JF]:x}}function OSe(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:Ow.INIT})>"u")throw new Error(is(12));if(typeof n(void 0,{type:Ow.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(is(13))})}function uq(t){const e=Object.keys(t),n={};for(let i=0;i<e.length;i++){const a=e[i];typeof t[a]=="function"&&(n[a]=t[a])}const r=Object.keys(n);let s;try{OSe(n)}catch(i){s=i}return function(a={},o){if(s)throw s;let c=!1;const d={};for(let h=0;h<r.length;h++){const p=r[h],m=n[p],y=a[p],x=m(y,o);if(typeof x>"u")throw o&&o.type,new Error(is(14));d[p]=x,c=c||x!==y}return c=c||r.length!==Object.keys(a).length,c?d:a}}function Mw(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function MSe(...t){return e=>(n,r)=>{const s=e(n,r);let i=()=>{throw new Error(is(15))};const a={getState:s.getState,dispatch:(c,...d)=>i(c,...d)},o=t.map(c=>c(a));return i=Mw(...o)(s.dispatch),{...s,dispatch:i}}}function dq(t){return IA(t)&&"type"in t&&typeof t.type=="string"}var hq=Symbol.for("immer-nothing"),ZF=Symbol.for("immer-draftable"),Ui=Symbol.for("immer-state");function Da(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var kp=Object.getPrototypeOf;function ih(t){return!!t&&!!t[Ui]}function zl(t){return t?fq(t)||Array.isArray(t)||!!t[ZF]||!!t.constructor?.[ZF]||xy(t)||k_(t):!1}var LSe=Object.prototype.constructor.toString();function fq(t){if(!t||typeof t!="object")return!1;const e=kp(t);if(e===null)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===LSe}function Lw(t,e){S_(t)===0?Reflect.ownKeys(t).forEach(n=>{e(n,t[n],t)}):t.forEach((n,r)=>e(r,n,t))}function S_(t){const e=t[Ui];return e?e.type_:Array.isArray(t)?1:xy(t)?2:k_(t)?3:0}function XC(t,e){return S_(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function pq(t,e,n){const r=S_(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function FSe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function xy(t){return t instanceof Map}function k_(t){return t instanceof Set}function cd(t){return t.copy_||t.base_}function JC(t,e){if(xy(t))return new Map(t);if(k_(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=fq(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[Ui];let s=Reflect.ownKeys(r);for(let i=0;i<s.length;i++){const a=s[i],o=r[a];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(r[a]={configurable:!0,writable:!0,enumerable:o.enumerable,value:t[a]})}return Object.create(kp(t),r)}else{const r=kp(t);if(r!==null&&n)return{...t};const s=Object.create(r);return Object.assign(s,t)}}function DA(t,e=!1){return T_(t)||ih(t)||!zl(t)||(S_(t)>1&&Object.defineProperties(t,{set:{value:xx},add:{value:xx},clear:{value:xx},delete:{value:xx}}),Object.freeze(t),e&&Object.values(t).forEach(n=>DA(n,!0))),t}function xx(){Da(2)}function T_(t){return Object.isFrozen(t)}var $Se={};function ah(t){const e=$Se[t];return e||Da(0,t),e}var C0;function mq(){return C0}function VSe(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function e$(t,e){e&&(ah("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function ZC(t){ej(t),t.drafts_.forEach(BSe),t.drafts_=null}function ej(t){t===C0&&(C0=t.parent_)}function t$(t){return C0=VSe(C0,t)}function BSe(t){const e=t[Ui];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function n$(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[Ui].modified_&&(ZC(e),Da(4)),zl(t)&&(t=Fw(e,t),e.parent_||$w(e,t)),e.patches_&&ah("Patches").generateReplacementPatches_(n[Ui].base_,t,e.patches_,e.inversePatches_)):t=Fw(e,n,[]),ZC(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==hq?t:void 0}function Fw(t,e,n){if(T_(e))return e;const r=e[Ui];if(!r)return Lw(e,(s,i)=>r$(t,r,e,s,i,n)),e;if(r.scope_!==t)return e;if(!r.modified_)return $w(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const s=r.copy_;let i=s,a=!1;r.type_===3&&(i=new Set(s),s.clear(),a=!0),Lw(i,(o,c)=>r$(t,r,s,o,c,n,a)),$w(t,s,!1),n&&t.patches_&&ah("Patches").generatePatches_(r,n,t.patches_,t.inversePatches_)}return r.copy_}function r$(t,e,n,r,s,i,a){if(ih(s)){const o=i&&e&&e.type_!==3&&!XC(e.assigned_,r)?i.concat(r):void 0,c=Fw(t,s,o);if(pq(n,r,c),ih(c))t.canAutoFreeze_=!1;else return}else a&&n.add(s);if(zl(s)&&!T_(s)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;Fw(t,s),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(xy(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&$w(t,s)}}function $w(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&DA(e,n)}function USe(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:mq(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=r,i=RA;n&&(s=[r],i=j0);const{revoke:a,proxy:o}=Proxy.revocable(s,i);return r.draft_=o,r.revoke_=a,o}var RA={get(t,e){if(e===Ui)return t;const n=cd(t);if(!XC(n,e))return zSe(t,n,e);const r=n[e];return t.finalized_||!zl(r)?r:r===Dk(t.base_,e)?(Rk(t),t.copy_[e]=nj(r,t)):r},has(t,e){return e in cd(t)},ownKeys(t){return Reflect.ownKeys(cd(t))},set(t,e,n){const r=gq(cd(t),e);if(r?.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const s=Dk(cd(t),e),i=s?.[Ui];if(i&&i.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(FSe(n,s)&&(n!==void 0||XC(t.base_,e)))return!0;Rk(t),tj(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return Dk(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,Rk(t),tj(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=cd(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){Da(11)},getPrototypeOf(t){return kp(t.base_)},setPrototypeOf(){Da(12)}},j0={};Lw(RA,(t,e)=>{j0[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});j0.deleteProperty=function(t,e){return j0.set.call(this,t,e,void 0)};j0.set=function(t,e,n){return RA.set.call(this,t[0],e,n,t[0])};function Dk(t,e){const n=t[Ui];return(n?cd(n):t)[e]}function zSe(t,e,n){const r=gq(e,n);return r?"value"in r?r.value:r.get?.call(t.draft_):void 0}function gq(t,e){if(!(e in t))return;let n=kp(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=kp(n)}}function tj(t){t.modified_||(t.modified_=!0,t.parent_&&tj(t.parent_))}function Rk(t){t.copy_||(t.copy_=JC(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var WSe=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const i=n;n=e;const a=this;return function(c=i,...d){return a.produce(c,h=>n.call(this,h,...d))}}typeof n!="function"&&Da(6),r!==void 0&&typeof r!="function"&&Da(7);let s;if(zl(e)){const i=t$(this),a=nj(e,void 0);let o=!0;try{s=n(a),o=!1}finally{o?ZC(i):ej(i)}return e$(i,r),n$(s,i)}else if(!e||typeof e!="object"){if(s=n(e),s===void 0&&(s=e),s===hq&&(s=void 0),this.autoFreeze_&&DA(s,!0),r){const i=[],a=[];ah("Patches").generateReplacementPatches_(e,s,i,a),r(i,a)}return s}else Da(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(a,...o)=>this.produceWithPatches(a,c=>e(c,...o));let r,s;return[this.produce(e,n,(a,o)=>{r=a,s=o}),r,s]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){zl(t)||Da(8),ih(t)&&(t=Dl(t));const e=t$(this),n=nj(t,void 0);return n[Ui].isManual_=!0,ej(e),n}finishDraft(t,e){const n=t&&t[Ui];(!n||!n.isManual_)&&Da(9);const{scope_:r}=n;return e$(r,e),n$(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const s=e[n];if(s.path.length===0&&s.op==="replace"){t=s.value;break}}n>-1&&(e=e.slice(n+1));const r=ah("Patches").applyPatches_;return ih(t)?r(t,e):this.produce(t,s=>r(s,e))}};function nj(t,e){const n=xy(t)?ah("MapSet").proxyMap_(t,e):k_(t)?ah("MapSet").proxySet_(t,e):USe(t,e);return(e?e.scope_:mq()).drafts_.push(n),n}function Dl(t){return ih(t)||Da(10,t),yq(t)}function yq(t){if(!zl(t)||T_(t))return t;const e=t[Ui];let n;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=JC(t,e.scope_.immer_.useStrictShallowCopy_)}else n=JC(t,!0);return Lw(n,(r,s)=>{pq(n,r,yq(s))}),e&&(e.finalized_=!1),n}var HSe=new WSe,vq=HSe.produce;function xq(t){return({dispatch:n,getState:r})=>s=>i=>typeof i=="function"?i(n,r,t):s(i)}var qSe=xq(),KSe=xq,YSe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Mw:Mw.apply(null,arguments)};function ma(t,e){function n(...r){if(e){let s=e(...r);if(!s)throw new Error(Fi(0));return{type:t,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>dq(r)&&r.type===t,n}var bq=class Eg extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Eg.prototype)}static get[Symbol.species](){return Eg}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Eg(...e[0].concat(this)):new Eg(...e.concat(this))}};function s$(t){return zl(t)?vq(t,()=>{}):t}function bx(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function GSe(t){return typeof t=="boolean"}var QSe=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:s=!0,actionCreatorCheck:i=!0}=e??{};let a=new bq;return n&&(GSe(n)?a.push(qSe):a.push(KSe(n.extraArgument))),a},XSe="RTK_autoBatch",i$=t=>e=>{setTimeout(e,t)},JSe=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let s=!0,i=!1,a=!1;const o=new Set,c=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:i$(10):t.type==="callback"?t.queueNotification:i$(t.timeout),d=()=>{a=!1,i&&(i=!1,o.forEach(h=>h()))};return Object.assign({},r,{subscribe(h){const p=()=>s&&h(),m=r.subscribe(p);return o.add(h),()=>{m(),o.delete(h)}},dispatch(h){try{return s=!h?.meta?.[XSe],i=!s,i&&(a||(a=!0,c(d))),r.dispatch(h)}finally{s=!0}}})},ZSe=t=>function(n){const{autoBatch:r=!0}=n??{};let s=new bq(t);return r&&s.push(JSe(typeof r=="object"?r:void 0)),s};function eke(t){const e=QSe(),{reducer:n=void 0,middleware:r,devTools:s=!0,preloadedState:i=void 0,enhancers:a=void 0}=t||{};let o;if(typeof n=="function")o=n;else if(IA(n))o=uq(n);else throw new Error(Fi(1));let c;typeof r=="function"?c=r(e):c=e();let d=Mw;s&&(d=YSe({trace:!1,...typeof s=="object"&&s}));const h=MSe(...c),p=ZSe(h);let m=typeof a=="function"?a(p):p();const y=d(...m);return cq(o,i,y)}function wq(t){const e={},n=[];let r;const s={addCase(i,a){const o=typeof i=="string"?i:i.type;if(!o)throw new Error(Fi(28));if(o in e)throw new Error(Fi(29));return e[o]=a,s},addAsyncThunk(i,a){return a.pending&&(e[i.pending.type]=a.pending),a.rejected&&(e[i.rejected.type]=a.rejected),a.fulfilled&&(e[i.fulfilled.type]=a.fulfilled),a.settled&&n.push({matcher:i.settled,reducer:a.settled}),s},addMatcher(i,a){return n.push({matcher:i,reducer:a}),s},addDefaultCase(i){return r=i,s}};return t(s),[e,n,r]}function tke(t){return typeof t=="function"}function nke(t,e){let[n,r,s]=wq(e),i;if(tke(t))i=()=>s$(t());else{const o=s$(t);i=()=>o}function a(o=i(),c){let d=[n[c.type],...r.filter(({matcher:h})=>h(c)).map(({reducer:h})=>h)];return d.filter(h=>!!h).length===0&&(d=[s]),d.reduce((h,p)=>{if(p)if(ih(h)){const y=p(h,c);return y===void 0?h:y}else{if(zl(h))return vq(h,m=>p(m,c));{const m=p(h,c);if(m===void 0){if(h===null)return h;throw Error("A case reducer on a non-draftable value must not return undefined")}return m}}return h},o)}return a.getInitialState=i,a}var rke="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",ske=(t=21)=>{let e="",n=t;for(;n--;)e+=rke[Math.random()*64|0];return e},ike=Symbol.for("rtk-slice-createasyncthunk");function ake(t,e){return`${t}/${e}`}function oke({creators:t}={}){const e=t?.asyncThunk?.[ike];return function(r){const{name:s,reducerPath:i=s}=r;if(!s)throw new Error(Fi(11));const a=(typeof r.reducers=="function"?r.reducers(cke()):r.reducers)||{},o=Object.keys(a),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(S,O){const R=typeof S=="string"?S:S.type;if(!R)throw new Error(Fi(12));if(R in c.sliceCaseReducersByType)throw new Error(Fi(13));return c.sliceCaseReducersByType[R]=O,d},addMatcher(S,O){return c.sliceMatchers.push({matcher:S,reducer:O}),d},exposeAction(S,O){return c.actionCreators[S]=O,d},exposeCaseReducer(S,O){return c.sliceCaseReducersByName[S]=O,d}};o.forEach(S=>{const O=a[S],R={reducerName:S,type:ake(s,S),createNotation:typeof r.reducers=="function"};dke(O)?fke(R,O,d,e):uke(R,O,d)});function h(){const[S={},O=[],R=void 0]=typeof r.extraReducers=="function"?wq(r.extraReducers):[r.extraReducers],M={...S,...c.sliceCaseReducersByType};return nke(r.initialState,P=>{for(let C in M)P.addCase(C,M[C]);for(let C of c.sliceMatchers)P.addMatcher(C.matcher,C.reducer);for(let C of O)P.addMatcher(C.matcher,C.reducer);R&&P.addDefaultCase(R)})}const p=S=>S,m=new Map,y=new WeakMap;let x;function _(S,O){return x||(x=h()),x(S,O)}function w(){return x||(x=h()),x.getInitialState()}function N(S,O=!1){function R(P){let C=P[S];return typeof C>"u"&&O&&(C=bx(y,R,w)),C}function M(P=p){const C=bx(m,O,()=>new WeakMap);return bx(C,P,()=>{const D={};for(const[$,F]of Object.entries(r.selectors??{}))D[$]=lke(F,P,()=>bx(y,P,w),O);return D})}return{reducerPath:S,getSelectors:M,get selectors(){return M(R)},selectSlice:R}}const k={name:s,reducer:_,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:w,...N(i),injectInto(S,{reducerPath:O,...R}={}){const M=O??i;return S.inject({reducerPath:M,reducer:_},R),{...k,...N(M,!0)}}};return k}}function lke(t,e,n,r){function s(i,...a){let o=e(i);return typeof o>"u"&&r&&(o=n()),t(o,...a)}return s.unwrapped=t,s}var Wi=oke();function cke(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function uke({type:t,reducerName:e,createNotation:n},r,s){let i,a;if("reducer"in r){if(n&&!hke(r))throw new Error(Fi(17));i=r.reducer,a=r.prepare}else i=r;s.addCase(t,i).exposeCaseReducer(e,i).exposeAction(e,a?ma(t,a):ma(t))}function dke(t){return t._reducerDefinitionType==="asyncThunk"}function hke(t){return t._reducerDefinitionType==="reducerWithPrepare"}function fke({type:t,reducerName:e},n,r,s){if(!s)throw new Error(Fi(18));const{payloadCreator:i,fulfilled:a,pending:o,rejected:c,settled:d,options:h}=n,p=s(t,i,h);r.exposeAction(e,p),a&&r.addCase(p.fulfilled,a),o&&r.addCase(p.pending,o),c&&r.addCase(p.rejected,c),d&&r.addMatcher(p.settled,d),r.exposeCaseReducer(e,{fulfilled:a||wx,pending:o||wx,rejected:c||wx,settled:d||wx})}function wx(){}var pke="task",_q="listener",Eq="completed",OA="cancelled",mke=`task-${OA}`,gke=`task-${Eq}`,rj=`${_q}-${OA}`,yke=`${_q}-${Eq}`,C_=class{constructor(t){this.code=t,this.message=`${pke} ${OA} (reason: ${t})`}name="TaskAbortError";message},MA=(t,e)=>{if(typeof t!="function")throw new TypeError(Fi(32))},Vw=()=>{},Nq=(t,e=Vw)=>(t.catch(e),t),Sq=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),$d=(t,e)=>{const n=t.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:e,configurable:!0,writable:!0}),t.abort(e))},Vd=t=>{if(t.aborted){const{reason:e}=t;throw new C_(e)}};function kq(t,e){let n=Vw;return new Promise((r,s)=>{const i=()=>s(new C_(t.reason));if(t.aborted){i();return}n=Sq(t,i),e.finally(()=>n()).then(r,s)}).finally(()=>{n=Vw})}var vke=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof C_?"cancelled":"rejected",error:n}}finally{e?.()}},Bw=t=>e=>Nq(kq(t,e).then(n=>(Vd(t),n))),Tq=t=>{const e=Bw(t);return n=>e(new Promise(r=>setTimeout(r,n)))},{assign:Wf}=Object,a$={},j_="listenerMiddleware",xke=(t,e)=>{const n=r=>Sq(t,()=>$d(r,t.reason));return(r,s)=>{MA(r);const i=new AbortController;n(i);const a=vke(async()=>{Vd(t),Vd(i.signal);const o=await r({pause:Bw(i.signal),delay:Tq(i.signal),signal:i.signal});return Vd(i.signal),o},()=>$d(i,gke));return s?.autoJoin&&e.push(a.catch(Vw)),{result:Bw(t)(a),cancel(){$d(i,mke)}}}},bke=(t,e)=>{const n=async(r,s)=>{Vd(e);let i=()=>{};const o=[new Promise((c,d)=>{let h=t({predicate:r,effect:(p,m)=>{m.unsubscribe(),c([p,m.getState(),m.getOriginalState()])}});i=()=>{h(),d()}})];s!=null&&o.push(new Promise(c=>setTimeout(c,s,null)));try{const c=await kq(e,Promise.race(o));return Vd(e),c}finally{i()}};return(r,s)=>Nq(n(r,s))},Cq=t=>{let{type:e,actionCreator:n,matcher:r,predicate:s,effect:i}=t;if(e)s=ma(e).match;else if(n)e=n.type,s=n.match;else if(r)s=r;else if(!s)throw new Error(Fi(21));return MA(i),{predicate:s,type:e,effect:i}},jq=Wf(t=>{const{type:e,predicate:n,effect:r}=Cq(t);return{id:ske(),effect:r,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Fi(22))}}},{withTypes:()=>jq}),o$=(t,e)=>{const{type:n,effect:r,predicate:s}=Cq(e);return Array.from(t.values()).find(i=>(typeof n=="string"?i.type===n:i.predicate===s)&&i.effect===r)},sj=t=>{t.pending.forEach(e=>{$d(e,rj)})},wke=t=>()=>{t.forEach(sj),t.clear()},l$=(t,e,n)=>{try{t(e,n)}catch(r){setTimeout(()=>{throw r},0)}},Pq=Wf(ma(`${j_}/add`),{withTypes:()=>Pq}),_ke=ma(`${j_}/removeAll`),Aq=Wf(ma(`${j_}/remove`),{withTypes:()=>Aq}),Eke=(...t)=>{console.error(`${j_}/error`,...t)},by=(t={})=>{const e=new Map,{extra:n,onError:r=Eke}=t;MA(r);const s=h=>(h.unsubscribe=()=>e.delete(h.id),e.set(h.id,h),p=>{h.unsubscribe(),p?.cancelActive&&sj(h)}),i=h=>{const p=o$(e,h)??jq(h);return s(p)};Wf(i,{withTypes:()=>i});const a=h=>{const p=o$(e,h);return p&&(p.unsubscribe(),h.cancelActive&&sj(p)),!!p};Wf(a,{withTypes:()=>a});const o=async(h,p,m,y)=>{const x=new AbortController,_=bke(i,x.signal),w=[];try{h.pending.add(x),await Promise.resolve(h.effect(p,Wf({},m,{getOriginalState:y,condition:(N,k)=>_(N,k).then(Boolean),take:_,delay:Tq(x.signal),pause:Bw(x.signal),extra:n,signal:x.signal,fork:xke(x.signal,w),unsubscribe:h.unsubscribe,subscribe:()=>{e.set(h.id,h)},cancelActiveListeners:()=>{h.pending.forEach((N,k,S)=>{N!==x&&($d(N,rj),S.delete(N))})},cancel:()=>{$d(x,rj),h.pending.delete(x)},throwIfCancelled:()=>{Vd(x.signal)}})))}catch(N){N instanceof C_||l$(r,N,{raisedBy:"effect"})}finally{await Promise.all(w),$d(x,yke),h.pending.delete(x)}},c=wke(e);return{middleware:h=>p=>m=>{if(!dq(m))return p(m);if(Pq.match(m))return i(m.payload);if(_ke.match(m)){c();return}if(Aq.match(m))return a(m.payload);let y=h.getState();const x=()=>{if(y===a$)throw new Error(Fi(23));return y};let _;try{if(_=p(m),e.size>0){const w=h.getState(),N=Array.from(e.values());for(const k of N){let S=!1;try{S=k.predicate(m,w,y)}catch(O){S=!1,l$(r,O,{raisedBy:"predicate"})}S&&o(k,m,h,x)}}}finally{y=a$}return _},startListening:i,stopListening:a,clearListeners:c}};function Fi(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var Nke={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},Iq=Wi({name:"chartLayout",initialState:Nke,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var n,r,s,i;t.margin.top=(n=e.payload.top)!==null&&n!==void 0?n:0,t.margin.right=(r=e.payload.right)!==null&&r!==void 0?r:0,t.margin.bottom=(s=e.payload.bottom)!==null&&s!==void 0?s:0,t.margin.left=(i=e.payload.left)!==null&&i!==void 0?i:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:Ske,setLayout:kke,setChartSize:Tke,setScale:Cke}=Iq.actions,jke=Iq.reducer;function c$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function u$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?c$(Object(n),!0).forEach(function(r){Pke(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Pke(t,e,n){return(e=Ake(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ake(t){var e=Ike(t,"string");return typeof e=="symbol"?e:e+""}function Ike(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Uw=Math.PI/180,Dke=t=>t*180/Math.PI,Er=(t,e,n,r)=>({x:t+Math.cos(-Uw*r)*n,y:e+Math.sin(-Uw*r)*n}),Dq=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},Rke=(t,e)=>{var{x:n,y:r}=t,{x:s,y:i}=e;return Math.sqrt((n-s)**2+(r-i)**2)},Oke=(t,e)=>{var{x:n,y:r}=t,{cx:s,cy:i}=e,a=Rke({x:n,y:r},{x:s,y:i});if(a<=0)return{radius:a,angle:0};var o=(n-s)/a,c=Math.acos(o);return r>i&&(c=2*Math.PI-c),{radius:a,angle:Dke(c),angleInRadian:c}},Mke=t=>{var{startAngle:e,endAngle:n}=t,r=Math.floor(e/360),s=Math.floor(n/360),i=Math.min(r,s);return{startAngle:e-i*360,endAngle:n-i*360}},Lke=(t,e)=>{var{startAngle:n,endAngle:r}=e,s=Math.floor(n/360),i=Math.floor(r/360),a=Math.min(s,i);return t+a*360},Fke=(t,e)=>{var{x:n,y:r}=t,{radius:s,angle:i}=Oke({x:n,y:r},e),{innerRadius:a,outerRadius:o}=e;if(s<a||s>o||s===0)return null;var{startAngle:c,endAngle:d}=Mke(e),h=i,p;if(c<=d){for(;h>d;)h-=360;for(;h<c;)h+=360;p=h>=c&&h<=d}else{for(;h>c;)h-=360;for(;h<d;)h+=360;p=h>=d&&h<=c}return p?u$(u$({},e),{},{radius:s,angle:Lke(h,e)}):null};function Rq(t,e,n){return Array.isArray(t)&&t&&e+n!==0?t.slice(e,n+1):t}function d$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function ca(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?d$(Object(n),!0).forEach(function(r){$ke(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $ke(t,e,n){return(e=Vke(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vke(t){var e=Bke(t,"string");return typeof e=="symbol"?e:e+""}function Bke(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Sn(t,e,n){return Un(t)||Un(e)?n:$o(e)?sh(t,e,n):typeof e=="function"?e(t):n}var Uke=(t,e,n,r,s)=>{var i,a=-1,o=(i=e?.length)!==null&&i!==void 0?i:0;if(o<=1||t==null)return 0;if(r==="angleAxis"&&s!=null&&Math.abs(Math.abs(s[1]-s[0])-360)<=1e-6)for(var c=0;c<o;c++){var d=c>0?n[c-1].coordinate:n[o-1].coordinate,h=n[c].coordinate,p=c>=o-1?n[0].coordinate:n[c+1].coordinate,m=void 0;if(Xr(h-d)!==Xr(p-h)){var y=[];if(Xr(p-h)===Xr(s[1]-s[0])){m=p;var x=h+s[1]-s[0];y[0]=Math.min(x,(x+d)/2),y[1]=Math.max(x,(x+d)/2)}else{m=d;var _=p+s[1]-s[0];y[0]=Math.min(h,(_+h)/2),y[1]=Math.max(h,(_+h)/2)}var w=[Math.min(h,(m+h)/2),Math.max(h,(m+h)/2)];if(t>w[0]&&t<=w[1]||t>=y[0]&&t<=y[1]){({index:a}=n[c]);break}}else{var N=Math.min(d,p),k=Math.max(d,p);if(t>(N+h)/2&&t<=(k+h)/2){({index:a}=n[c]);break}}}else if(e){for(var S=0;S<o;S++)if(S===0&&t<=(e[S].coordinate+e[S+1].coordinate)/2||S>0&&S<o-1&&t>(e[S].coordinate+e[S-1].coordinate)/2&&t<=(e[S].coordinate+e[S+1].coordinate)/2||S===o-1&&t>(e[S].coordinate+e[S-1].coordinate)/2){({index:a}=e[S]);break}}return a},zke=(t,e,n)=>{if(e&&n){var{width:r,height:s}=n,{align:i,verticalAlign:a,layout:o}=e;if((o==="vertical"||o==="horizontal"&&a==="middle")&&i!=="center"&&dt(t[i]))return ca(ca({},t),{},{[i]:t[i]+(r||0)});if((o==="horizontal"||o==="vertical"&&i==="center")&&a!=="middle"&&dt(t[a]))return ca(ca({},t),{},{[a]:t[a]+(s||0)})}return t},Eu=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",Oq=(t,e,n,r)=>{if(r)return t.map(o=>o.coordinate);var s,i,a=t.map(o=>(o.coordinate===e&&(s=!0),o.coordinate===n&&(i=!0),o.coordinate));return s||a.push(e),i||a.push(n),a},Mq=(t,e,n)=>{if(!t)return null;var{duplicateDomain:r,type:s,range:i,scale:a,realScaleType:o,isCategorical:c,categoricalDomain:d,tickCount:h,ticks:p,niceTicks:m,axisType:y}=t;if(!a)return null;var x=o==="scaleBand"&&a.bandwidth?a.bandwidth()/2:2,_=s==="category"&&a.bandwidth?a.bandwidth()/x:0;if(_=y==="angleAxis"&&i&&i.length>=2?Xr(i[0]-i[1])*2*_:_,p||m){var w=(p||m||[]).map((N,k)=>{var S=r?r.indexOf(N):N;return{coordinate:a(S)+_,value:N,offset:_,index:k}});return w.filter(N=>!Bi(N.coordinate))}return c&&d?d.map((N,k)=>({coordinate:a(N)+_,value:N,index:k,offset:_})):a.ticks&&h!=null?a.ticks(h).map((N,k)=>({coordinate:a(N)+_,value:N,offset:_,index:k})):a.domain().map((N,k)=>({coordinate:a(N)+_,value:r?r[N]:N,index:k,offset:_}))},h$=1e-4,Wke=t=>{var e=t.domain();if(!(!e||e.length<=2)){var n=e.length,r=t.range(),s=Math.min(r[0],r[1])-h$,i=Math.max(r[0],r[1])+h$,a=t(e[0]),o=t(e[n-1]);(a<s||a>i||o<s||o>i)&&t.domain([e[0],e[n-1]])}},Hke=(t,e)=>{if(!e||e.length!==2||!dt(e[0])||!dt(e[1]))return t;var n=Math.min(e[0],e[1]),r=Math.max(e[0],e[1]),s=[t[0],t[1]];return(!dt(t[0])||t[0]<n)&&(s[0]=n),(!dt(t[1])||t[1]>r)&&(s[1]=r),s[0]>r&&(s[0]=r),s[1]<n&&(s[1]=n),s},qke=t=>{var e=t.length;if(!(e<=0))for(var n=0,r=t[0].length;n<r;++n)for(var s=0,i=0,a=0;a<e;++a){var o=Bi(t[a][n][1])?t[a][n][0]:t[a][n][1];o>=0?(t[a][n][0]=s,t[a][n][1]=s+o,s=t[a][n][1]):(t[a][n][0]=i,t[a][n][1]=i+o,i=t[a][n][1])}},Kke=t=>{var e=t.length;if(!(e<=0))for(var n=0,r=t[0].length;n<r;++n)for(var s=0,i=0;i<e;++i){var a=Bi(t[i][n][1])?t[i][n][0]:t[i][n][1];a>=0?(t[i][n][0]=s,t[i][n][1]=s+a,s=t[i][n][1]):(t[i][n][0]=0,t[i][n][1]=0)}},Yke={sign:qke,expand:kNe,none:Sp,silhouette:TNe,wiggle:CNe,positive:Kke},Gke=(t,e,n)=>{var r=Yke[n],s=SNe().keys(e).value((i,a)=>+Sn(i,a,0)).order(GC).offset(r);return s(t)};function Qke(t){return t==null?void 0:String(t)}function f$(t){var{axis:e,ticks:n,bandSize:r,entry:s,index:i,dataKey:a}=t;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Un(s[e.dataKey])){var o=CH(n,"value",s[e.dataKey]);if(o)return o.coordinate+r/2}return n[i]?n[i].coordinate+r/2:null}var c=Sn(s,Un(a)?e.dataKey:a);return Un(c)?null:e.scale(c)}var p$=t=>{var{axis:e,ticks:n,offset:r,bandSize:s,entry:i,index:a}=t;if(e.type==="category")return n[a]?n[a].coordinate+r:null;var o=Sn(i,e.dataKey,e.scale.domain()[a]);return Un(o)?null:e.scale(o)-s/2+r},Xke=t=>{var{numericAxis:e}=t,n=e.scale.domain();if(e.type==="number"){var r=Math.min(n[0],n[1]),s=Math.max(n[0],n[1]);return r<=0&&s>=0?0:s<0?s:r}return n[0]},Jke=t=>{var e=t.flat(2).filter(dt);return[Math.min(...e),Math.max(...e)]},Zke=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],eTe=(t,e,n)=>{if(t!=null)return Zke(Object.keys(t).reduce((r,s)=>{var i=t[s],{stackedData:a}=i,o=a.reduce((c,d)=>{var h=Rq(d,e,n),p=Jke(h);return[Math.min(c[0],p[0]),Math.max(c[1],p[1])]},[1/0,-1/0]);return[Math.min(o[0],r[0]),Math.max(o[1],r[1])]},[1/0,-1/0]))},m$=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,g$=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,P0=(t,e,n)=>{if(t&&t.scale&&t.scale.bandwidth){var r=t.scale.bandwidth();if(!n||r>0)return r}if(t&&e&&e.length>=2){for(var s=N_(e,h=>h.coordinate),i=1/0,a=1,o=s.length;a<o;a++){var c=s[a],d=s[a-1];i=Math.min((c.coordinate||0)-(d.coordinate||0),i)}return i===1/0?0:i}return n?void 0:0};function y$(t){var{tooltipEntrySettings:e,dataKey:n,payload:r,value:s,name:i}=t;return ca(ca({},e),{},{dataKey:n,payload:r,value:s,name:i})}function sm(t,e){if(t)return String(t);if(typeof e=="string")return e}function tTe(t,e,n,r,s){if(n==="horizontal"||n==="vertical"){var i=t>=s.left&&t<=s.left+s.width&&e>=s.top&&e<=s.top+s.height;return i?{x:t,y:e}:null}return r?Fke({x:t,y:e},r):null}var nTe=(t,e,n,r)=>{var s=e.find(d=>d&&d.index===n);if(s){if(t==="horizontal")return{x:s.coordinate,y:r.y};if(t==="vertical")return{x:r.x,y:s.coordinate};if(t==="centric"){var i=s.coordinate,{radius:a}=r;return ca(ca(ca({},r),Er(r.cx,r.cy,a,i)),{},{angle:i,radius:a})}var o=s.coordinate,{angle:c}=r;return ca(ca(ca({},r),Er(r.cx,r.cy,o,c)),{},{angle:c,radius:o})}return{x:0,y:0}},rTe=(t,e)=>e==="horizontal"?t.x:e==="vertical"?t.y:e==="centric"?t.angle:t.radius,Xl=t=>t.layout.width,Jl=t=>t.layout.height,sTe=t=>t.layout.scale,Lq=t=>t.layout.margin,P_=ye(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),A_=ye(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),Fq="data-recharts-item-index",$q="data-recharts-item-data-key",wy=60;function v$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function _x(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?v$(Object(n),!0).forEach(function(r){iTe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function iTe(t,e,n){return(e=aTe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function aTe(t){var e=oTe(t,"string");return typeof e=="symbol"?e:e+""}function oTe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var lTe=t=>t.brush.height;function cTe(t){var e=A_(t);return e.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var s=typeof r.width=="number"?r.width:wy;return n+s}return n},0)}function uTe(t){var e=A_(t);return e.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var s=typeof r.width=="number"?r.width:wy;return n+s}return n},0)}function dTe(t){var e=P_(t);return e.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function hTe(t){var e=P_(t);return e.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var Mr=ye([Xl,Jl,Lq,lTe,cTe,uTe,dTe,hTe,lq,PSe],(t,e,n,r,s,i,a,o,c,d)=>{var h={left:(n.left||0)+s,right:(n.right||0)+i},p={top:(n.top||0)+a,bottom:(n.bottom||0)+o},m=_x(_x({},p),h),y=m.bottom;m.bottom+=r,m=zke(m,c,d);var x=t-m.left-m.right,_=e-m.top-m.bottom;return _x(_x({brushBottom:y},m),{},{width:Math.max(x,0),height:Math.max(_,0)})}),fTe=ye(Mr,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),LA=ye(Xl,Jl,(t,e)=>({x:0,y:0,width:t,height:e})),pTe=v.createContext(null),yi=()=>v.useContext(pTe)!=null,I_=t=>t.brush,D_=ye([I_,Mr,Lq],(t,e,n)=>({height:t.height,x:dt(t.x)?t.x:e.left,y:dt(t.y)?t.y:e.top+e.height+e.brushBottom-(n?.bottom||0),width:dt(t.width)?t.width:e.width})),FA=()=>{var t,e=yi(),n=st(fTe),r=st(D_),s=(t=st(I_))===null||t===void 0?void 0:t.padding;return!e||!r||!s?n:{width:r.width-s.left-s.right,height:r.height-s.top-s.bottom,x:s.left,y:s.top}},mTe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},Vq=()=>{var t;return(t=st(Mr))!==null&&t!==void 0?t:mTe},Bq=()=>st(Xl),Uq=()=>st(Jl),Yt=t=>t.layout.layoutType,R_=()=>st(Yt),gTe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},zq=Wi({name:"legend",initialState:gTe,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload(t,e){t.payload.push(e.payload)},removeLegendPayload(t,e){var n=Dl(t).payload.indexOf(e.payload);n>-1&&t.payload.splice(n,1)}}}),{setLegendSize:q5e,setLegendSettings:K5e,addLegendPayload:Wq,removeLegendPayload:Hq}=zq.actions,yTe=zq.reducer;function ij(){return ij=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ij.apply(null,arguments)}function x$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Ok(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?x$(Object(n),!0).forEach(function(r){vTe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vTe(t,e,n){return(e=xTe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xTe(t){var e=bTe(t,"string");return typeof e=="symbol"?e:e+""}function bTe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function wTe(t){return Array.isArray(t)&&$o(t[0])&&$o(t[1])?t.join(" ~ "):t}var _Te=t=>{var{separator:e=" : ",contentStyle:n={},itemStyle:r={},labelStyle:s={},payload:i,formatter:a,itemSorter:o,wrapperClassName:c,labelClassName:d,label:h,labelFormatter:p,accessibilityLayer:m=!1}=t,y=()=>{if(i&&i.length){var R={padding:0,margin:0},M=(o?N_(i,o):i).map((P,C)=>{if(P.type==="none")return null;var D=P.formatter||a||wTe,{value:$,name:F}=P,U=$,I=F;if(D){var z=D($,F,P,C,i);if(Array.isArray(z))[U,I]=z;else if(z!=null)U=z;else return null}var Q=Ok({display:"block",paddingTop:4,paddingBottom:4,color:P.color||"#000"},r);return v.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(C),style:Q},$o(I)?v.createElement("span",{className:"recharts-tooltip-item-name"},I):null,$o(I)?v.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,v.createElement("span",{className:"recharts-tooltip-item-value"},U),v.createElement("span",{className:"recharts-tooltip-item-unit"},P.unit||""))});return v.createElement("ul",{className:"recharts-tooltip-item-list",style:R},M)}return null},x=Ok({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),_=Ok({margin:0},s),w=!Un(h),N=w?h:"",k=Et("recharts-default-tooltip",c),S=Et("recharts-tooltip-label",d);w&&p&&i!==void 0&&i!==null&&(N=p(h,i));var O=m?{role:"status","aria-live":"assertive"}:{};return v.createElement("div",ij({className:k,style:x},O),v.createElement("p",{className:S,style:_},v.isValidElement(N)?N:"".concat(N)),y())},cg="recharts-tooltip-wrapper",ETe={visibility:"hidden"};function NTe(t){var{coordinate:e,translateX:n,translateY:r}=t;return Et(cg,{["".concat(cg,"-right")]:dt(n)&&e&&dt(e.x)&&n>=e.x,["".concat(cg,"-left")]:dt(n)&&e&&dt(e.x)&&n<e.x,["".concat(cg,"-bottom")]:dt(r)&&e&&dt(e.y)&&r>=e.y,["".concat(cg,"-top")]:dt(r)&&e&&dt(e.y)&&r<e.y})}function b$(t){var{allowEscapeViewBox:e,coordinate:n,key:r,offsetTopLeft:s,position:i,reverseDirection:a,tooltipDimension:o,viewBox:c,viewBoxDimension:d}=t;if(i&&dt(i[r]))return i[r];var h=n[r]-o-(s>0?s:0),p=n[r]+s;if(e[r])return a[r]?h:p;var m=c[r];if(m==null)return 0;if(a[r]){var y=h,x=m;return y<x?Math.max(p,m):Math.max(h,m)}if(d==null)return 0;var _=p+o,w=m+d;return _>w?Math.max(h,m):Math.max(p,m)}function STe(t){var{translateX:e,translateY:n,useTranslate3d:r}=t;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function kTe(t){var{allowEscapeViewBox:e,coordinate:n,offsetTopLeft:r,position:s,reverseDirection:i,tooltipBox:a,useTranslate3d:o,viewBox:c}=t,d,h,p;return a.height>0&&a.width>0&&n?(h=b$({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:s,reverseDirection:i,tooltipDimension:a.width,viewBox:c,viewBoxDimension:c.width}),p=b$({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:s,reverseDirection:i,tooltipDimension:a.height,viewBox:c,viewBoxDimension:c.height}),d=STe({translateX:h,translateY:p,useTranslate3d:o})):d=ETe,{cssProperties:d,cssClasses:NTe({translateX:h,translateY:p,coordinate:n})}}function w$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Ex(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?w$(Object(n),!0).forEach(function(r){aj(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function aj(t,e,n){return(e=TTe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function TTe(t){var e=CTe(t,"string");return typeof e=="symbol"?e:e+""}function CTe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class jTe extends v.PureComponent{constructor(){super(...arguments),aj(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),aj(this,"handleKeyDown",e=>{if(e.key==="Escape"){var n,r,s,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(s=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&s!==void 0?s:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,n;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:n,animationDuration:r,animationEasing:s,children:i,coordinate:a,hasPayload:o,isAnimationActive:c,offset:d,position:h,reverseDirection:p,useTranslate3d:m,viewBox:y,wrapperStyle:x,lastBoundingBox:_,innerRef:w,hasPortalFromProps:N}=this.props,{cssClasses:k,cssProperties:S}=kTe({allowEscapeViewBox:n,coordinate:a,offsetTopLeft:d,position:h,reverseDirection:p,tooltipBox:{height:_.height,width:_.width},useTranslate3d:m,viewBox:y}),O=N?{}:Ex(Ex({transition:c&&e?"transform ".concat(r,"ms ").concat(s):void 0},S),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&o?"visible":"hidden",position:"absolute",top:0,left:0}),R=Ex(Ex({},O),{},{visibility:!this.state.dismissed&&e&&o?"visible":"hidden"},x);return v.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:k,style:R,ref:w},i)}}var PTe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Nu={devToolsEnabled:!1,isSsr:PTe()},qq=()=>st(t=>t.rootProps.accessibilityLayer);function zi(t){return Number.isFinite(t)}function Tp(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function oj(){return oj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},oj.apply(null,arguments)}function _$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function E$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_$(Object(n),!0).forEach(function(r){ATe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ATe(t,e,n){return(e=ITe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ITe(t){var e=DTe(t,"string");return typeof e=="symbol"?e:e+""}function DTe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var N$={curveBasisClosed:pNe,curveBasisOpen:mNe,curveBasis:fNe,curveBumpX:ZEe,curveBumpY:eNe,curveLinearClosed:gNe,curveLinear:__,curveMonotoneX:yNe,curveMonotoneY:vNe,curveNatural:xNe,curveStep:bNe,curveStepAfter:_Ne,curveStepBefore:wNe},Nx=t=>zi(t.x)&&zi(t.y),ug=t=>t.x,dg=t=>t.y,RTe=(t,e)=>{if(typeof t=="function")return t;var n="curve".concat(vy(t));return(n==="curveMonotone"||n==="curveBump")&&e?N$["".concat(n).concat(e==="vertical"?"Y":"X")]:N$[n]||__},OTe=t=>{var{type:e="linear",points:n=[],baseLine:r,layout:s,connectNulls:i=!1}=t,a=RTe(e,s),o=i?n.filter(Nx):n,c;if(Array.isArray(r)){var d=i?r.filter(p=>Nx(p)):r,h=o.map((p,m)=>E$(E$({},p),{},{base:d[m]}));return s==="vertical"?c=gx().y(dg).x1(ug).x0(p=>p.base.x):c=gx().x(ug).y1(dg).y0(p=>p.base.y),c.defined(Nx).curve(a),c(h)}return s==="vertical"&&dt(r)?c=gx().y(dg).x1(ug).x0(r):dt(r)?c=gx().x(ug).y1(dg).y0(r):c=FH().x(ug).y(dg),c.defined(Nx).curve(a),c(o)},$A=t=>{var{className:e,points:n,path:r,pathRef:s}=t;if((!n||!n.length)&&!r)return null;var i=n&&n.length?OTe(t):r;return v.createElement("path",oj({},Wo(t),NA(t),{className:Et("recharts-curve",e),d:i===null?void 0:i,ref:s}))},MTe=["x","y","top","left","width","height","className"];function lj(){return lj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lj.apply(null,arguments)}function S$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function LTe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?S$(Object(n),!0).forEach(function(r){FTe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function FTe(t,e,n){return(e=$Te(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $Te(t){var e=VTe(t,"string");return typeof e=="symbol"?e:e+""}function VTe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function BTe(t,e){if(t==null)return{};var n,r,s=UTe(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function UTe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var zTe=(t,e,n,r,s,i)=>"M".concat(t,",").concat(s,"v").concat(r,"M").concat(i,",").concat(e,"h").concat(n),WTe=t=>{var{x:e=0,y:n=0,top:r=0,left:s=0,width:i=0,height:a=0,className:o}=t,c=BTe(t,MTe),d=LTe({x:e,y:n,top:r,left:s,width:i,height:a},c);return!dt(e)||!dt(n)||!dt(i)||!dt(a)||!dt(r)||!dt(s)?null:v.createElement("path",lj({},Qn(d,!0),{className:Et("recharts-cross",o),d:zTe(e,n,i,a,r,s)}))};function HTe(t,e,n,r){var s=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-s:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-s,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function k$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function qTe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?k$(Object(n),!0).forEach(function(r){KTe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function KTe(t,e,n){return(e=YTe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function YTe(t){var e=GTe(t,"string");return typeof e=="symbol"?e:e+""}function GTe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ps(t,e){var n=qTe({},t),r=e,s=Object.keys(e),i=s.reduce((a,o)=>(a[o]===void 0&&r[o]!==void 0&&(a[o]=r[o]),a),n);return i}function QTe(){}function T$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function C$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?T$(Object(n),!0).forEach(function(r){XTe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function XTe(t,e,n){return(e=JTe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function JTe(t){var e=ZTe(t,"string");return typeof e=="symbol"?e:e+""}function ZTe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var eCe=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),Kq=(t,e,n)=>t.map(r=>"".concat(eCe(r)," ").concat(e,"ms ").concat(n)).join(","),tCe=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((n,r)=>n.filter(s=>r.includes(s))),A0=(t,e)=>Object.keys(e).reduce((n,r)=>C$(C$({},n),{},{[r]:t(r,e[r])}),{});function j$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function os(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?j$(Object(n),!0).forEach(function(r){nCe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nCe(t,e,n){return(e=rCe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rCe(t){var e=sCe(t,"string");return typeof e=="symbol"?e:e+""}function sCe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var zw=(t,e,n)=>t+(e-t)*n,cj=t=>{var{from:e,to:n}=t;return e!==n},Yq=(t,e,n)=>{var r=A0((s,i)=>{if(cj(i)){var[a,o]=t(i.from,i.to,i.velocity);return os(os({},i),{},{from:a,velocity:o})}return i},e);return n<1?A0((s,i)=>cj(i)?os(os({},i),{},{velocity:zw(i.velocity,r[s].velocity,n),from:zw(i.from,r[s].from,n)}):i,e):Yq(t,r,n-1)};function iCe(t,e,n,r,s,i){var a,o=r.reduce((m,y)=>os(os({},m),{},{[y]:{from:t[y],velocity:0,to:e[y]}}),{}),c=()=>A0((m,y)=>y.from,o),d=()=>!Object.values(o).filter(cj).length,h=null,p=m=>{a||(a=m);var y=m-a,x=y/n.dt;o=Yq(n,o,x),s(os(os(os({},t),e),c())),a=m,d()||(h=i.setTimeout(p))};return()=>(h=i.setTimeout(p),()=>{h()})}function aCe(t,e,n,r,s,i,a){var o=null,c=s.reduce((p,m)=>os(os({},p),{},{[m]:[t[m],e[m]]}),{}),d,h=p=>{d||(d=p);var m=(p-d)/r,y=A0((_,w)=>zw(...w,n(m)),c);if(i(os(os(os({},t),e),y)),m<1)o=a.setTimeout(h);else{var x=A0((_,w)=>zw(...w,n(1)),c);i(os(os(os({},t),e),x))}};return()=>(o=a.setTimeout(h),()=>{o()})}const oCe=(t,e,n,r,s,i)=>{var a=tCe(t,e);return n.isStepper===!0?iCe(t,e,n,a,s,i):aCe(t,e,n,r,a,s,i)};var Ww=1e-4,Gq=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],Qq=(t,e)=>t.map((n,r)=>n*e**r).reduce((n,r)=>n+r),P$=(t,e)=>n=>{var r=Gq(t,e);return Qq(r,n)},lCe=(t,e)=>n=>{var r=Gq(t,e),s=[...r.map((i,a)=>i*a).slice(1),0];return Qq(s,n)},A$=function(){for(var e,n,r,s,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];if(a.length===1)switch(a[0]){case"linear":[e,r,n,s]=[0,0,1,1];break;case"ease":[e,r,n,s]=[.25,.1,.25,1];break;case"ease-in":[e,r,n,s]=[.42,0,1,1];break;case"ease-out":[e,r,n,s]=[.42,0,.58,1];break;case"ease-in-out":[e,r,n,s]=[0,0,.58,1];break;default:{var c=a[0].split("(");c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4&&([e,r,n,s]=c[1].split(")")[0].split(",").map(x=>parseFloat(x)))}}else a.length===4&&([e,r,n,s]=a);var d=P$(e,n),h=P$(r,s),p=lCe(e,n),m=x=>x>1?1:x<0?0:x,y=x=>{for(var _=x>1?1:x,w=_,N=0;N<8;++N){var k=d(w)-_,S=p(w);if(Math.abs(k-_)<Ww||S<Ww)return h(w);w=m(w-k/S)}return h(w)};return y.isStepper=!1,y},cCe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:s=17}=e,i=(a,o,c)=>{var d=-(a-o)*n,h=c*r,p=c+(d-h)*s/1e3,m=c*s/1e3+a;return Math.abs(m-o)<Ww&&Math.abs(p)<Ww?[o,0]:[m,p]};return i.isStepper=!0,i.dt=s,i},uCe=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return A$(t);case"spring":return cCe();default:if(t.split("(")[0]==="cubic-bezier")return A$(t)}return typeof t=="function"?t:null};function dCe(t){var e,n=()=>null,r=!1,s=null,i=a=>{if(!r){if(Array.isArray(a)){if(!a.length)return;var o=a,[c,...d]=o;if(typeof c=="number"){s=t.setTimeout(i.bind(null,d),c);return}i(c),s=t.setTimeout(i.bind(null,d));return}typeof a=="string"&&(e=a,n(e)),typeof a=="object"&&(e=a,n(e)),typeof a=="function"&&a()}};return{stop:()=>{r=!0},start:a=>{r=!1,s&&(s(),s=null),i(a)},subscribe:a=>(n=a,()=>{n=()=>null}),getTimeoutController:()=>t}}class hCe{setTimeout(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),s=null,i=a=>{a-r>=n?e(a):typeof requestAnimationFrame=="function"&&(s=requestAnimationFrame(i))};return s=requestAnimationFrame(i),()=>{cancelAnimationFrame(s)}}}function fCe(){return dCe(new hCe)}var pCe=v.createContext(fCe);function mCe(t,e){var n=v.useContext(pCe);return v.useMemo(()=>e??n(t),[t,e,n])}var gCe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},I$={t:0},Mk={t:1};function _y(t){var e=ps(t,gCe),{isActive:n,canBegin:r,duration:s,easing:i,begin:a,onAnimationEnd:o,onAnimationStart:c,children:d}=e,h=mCe(e.animationId,e.animationManager),[p,m]=v.useState(n?I$:Mk),y=v.useRef(null);return v.useEffect(()=>{n||m(Mk)},[n]),v.useEffect(()=>{if(!n||!r)return QTe;var x=oCe(I$,Mk,uCe(i),s,m,h.getTimeoutController()),_=()=>{y.current=x()};return h.start([c,a,_,s,o]),()=>{h.stop(),y.current&&y.current(),o()}},[n,r,s,i,a,c,o,h]),d(p.t)}function Ey(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=v.useRef(T0(e)),r=v.useRef(t);return r.current!==t&&(n.current=T0(e),r.current=t),n.current}function D$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function R$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?D$(Object(n),!0).forEach(function(r){yCe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yCe(t,e,n){return(e=vCe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vCe(t){var e=xCe(t,"string");return typeof e=="symbol"?e:e+""}function xCe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Hw(){return Hw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Hw.apply(null,arguments)}var O$=(t,e,n,r,s)=>{var i=Math.min(Math.abs(n)/2,Math.abs(r)/2),a=r>=0?1:-1,o=n>=0?1:-1,c=r>=0&&n>=0||r<0&&n<0?1:0,d;if(i>0&&s instanceof Array){for(var h=[0,0,0,0],p=0,m=4;p<m;p++)h[p]=s[p]>i?i:s[p];d="M".concat(t,",").concat(e+a*h[0]),h[0]>0&&(d+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(c,",").concat(t+o*h[0],",").concat(e)),d+="L ".concat(t+n-o*h[1],",").concat(e),h[1]>0&&(d+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(c,`,
        `).concat(t+n,",").concat(e+a*h[1])),d+="L ".concat(t+n,",").concat(e+r-a*h[2]),h[2]>0&&(d+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(c,`,
        `).concat(t+n-o*h[2],",").concat(e+r)),d+="L ".concat(t+o*h[3],",").concat(e+r),h[3]>0&&(d+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(c,`,
        `).concat(t,",").concat(e+r-a*h[3])),d+="Z"}else if(i>0&&s===+s&&s>0){var y=Math.min(i,s);d="M ".concat(t,",").concat(e+a*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(c,",").concat(t+o*y,",").concat(e,`
            L `).concat(t+n-o*y,",").concat(e,`
            A `).concat(y,",").concat(y,",0,0,").concat(c,",").concat(t+n,",").concat(e+a*y,`
            L `).concat(t+n,",").concat(e+r-a*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(c,",").concat(t+n-o*y,",").concat(e+r,`
            L `).concat(t+o*y,",").concat(e+r,`
            A `).concat(y,",").concat(y,",0,0,").concat(c,",").concat(t,",").concat(e+r-a*y," Z")}else d="M ".concat(t,",").concat(e," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return d},bCe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Xq=t=>{var e=ps(t,bCe),n=v.useRef(null),[r,s]=v.useState(-1);v.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var z=n.current.getTotalLength();z&&s(z)}catch{}},[]);var{x:i,y:a,width:o,height:c,radius:d,className:h}=e,{animationEasing:p,animationDuration:m,animationBegin:y,isAnimationActive:x,isUpdateAnimationActive:_}=e,w=v.useRef(o),N=v.useRef(c),k=v.useRef(i),S=v.useRef(a),O=v.useMemo(()=>({x:i,y:a,width:o,height:c,radius:d}),[i,a,o,c,d]),R=Ey(O,"rectangle-");if(i!==+i||a!==+a||o!==+o||c!==+c||o===0||c===0)return null;var M=Et("recharts-rectangle",h);if(!_)return v.createElement("path",Hw({},Qn(e,!0),{className:M,d:O$(i,a,o,c,d)}));var P=w.current,C=N.current,D=k.current,$=S.current,F="0px ".concat(r===-1?1:r,"px"),U="".concat(r,"px 0px"),I=Kq(["strokeDasharray"],m,typeof p=="string"?p:void 0);return v.createElement(_y,{animationId:R,key:R,canBegin:r>0,duration:m,easing:p,isActive:_,begin:y},z=>{var Q=nr(P,o,z),ne=nr(C,c,z),W=nr(D,i,z),K=nr($,a,z);n.current&&(w.current=Q,N.current=ne,k.current=W,S.current=K);var Y;return x?z>0?Y={transition:I,strokeDasharray:U}:Y={strokeDasharray:F}:Y={strokeDasharray:U},v.createElement("path",Hw({},Qn(e,!0),{className:M,d:O$(W,K,Q,ne,d),ref:n,style:R$(R$({},Y),e.style)}))})};function Jq(t){var{cx:e,cy:n,radius:r,startAngle:s,endAngle:i}=t,a=Er(e,n,r,s),o=Er(e,n,r,i);return{points:[a,o],cx:e,cy:n,radius:r,startAngle:s,endAngle:i}}function uj(){return uj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uj.apply(null,arguments)}var wCe=(t,e)=>{var n=Xr(e-t),r=Math.min(Math.abs(e-t),359.999);return n*r},Sx=t=>{var{cx:e,cy:n,radius:r,angle:s,sign:i,isExternal:a,cornerRadius:o,cornerIsExternal:c}=t,d=o*(a?1:-1)+r,h=Math.asin(o/d)/Uw,p=c?s:s+i*h,m=Er(e,n,d,p),y=Er(e,n,r,p),x=c?s-i*h:s,_=Er(e,n,d*Math.cos(h*Uw),x);return{center:m,circleTangency:y,lineTangency:_,theta:h}},Zq=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:s,startAngle:i,endAngle:a}=t,o=wCe(i,a),c=i+o,d=Er(e,n,s,i),h=Er(e,n,s,c),p="M ".concat(d.x,",").concat(d.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(o)>180),",").concat(+(i>c),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(r>0){var m=Er(e,n,r,i),y=Er(e,n,r,c);p+="L ".concat(y.x,",").concat(y.y,`
            A `).concat(r,",").concat(r,`,0,
            `).concat(+(Math.abs(o)>180),",").concat(+(i<=c),`,
            `).concat(m.x,",").concat(m.y," Z")}else p+="L ".concat(e,",").concat(n," Z");return p},_Ce=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:s,cornerRadius:i,forceCornerRadius:a,cornerIsExternal:o,startAngle:c,endAngle:d}=t,h=Xr(d-c),{circleTangency:p,lineTangency:m,theta:y}=Sx({cx:e,cy:n,radius:s,angle:c,sign:h,cornerRadius:i,cornerIsExternal:o}),{circleTangency:x,lineTangency:_,theta:w}=Sx({cx:e,cy:n,radius:s,angle:d,sign:-h,cornerRadius:i,cornerIsExternal:o}),N=o?Math.abs(c-d):Math.abs(c-d)-y-w;if(N<0)return a?"M ".concat(m.x,",").concat(m.y,`
        a`).concat(i,",").concat(i,",0,0,1,").concat(i*2,`,0
        a`).concat(i,",").concat(i,",0,0,1,").concat(-i*2,`,0
      `):Zq({cx:e,cy:n,innerRadius:r,outerRadius:s,startAngle:c,endAngle:d});var k="M ".concat(m.x,",").concat(m.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(h<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(N>180),",").concat(+(h<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(h<0),",").concat(_.x,",").concat(_.y,`
  `);if(r>0){var{circleTangency:S,lineTangency:O,theta:R}=Sx({cx:e,cy:n,radius:r,angle:c,sign:h,isExternal:!0,cornerRadius:i,cornerIsExternal:o}),{circleTangency:M,lineTangency:P,theta:C}=Sx({cx:e,cy:n,radius:r,angle:d,sign:-h,isExternal:!0,cornerRadius:i,cornerIsExternal:o}),D=o?Math.abs(c-d):Math.abs(c-d)-R-C;if(D<0&&i===0)return"".concat(k,"L").concat(e,",").concat(n,"Z");k+="L".concat(P.x,",").concat(P.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(h<0),",").concat(M.x,",").concat(M.y,`
      A`).concat(r,",").concat(r,",0,").concat(+(D>180),",").concat(+(h>0),",").concat(S.x,",").concat(S.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(h<0),",").concat(O.x,",").concat(O.y,"Z")}else k+="L".concat(e,",").concat(n,"Z");return k},ECe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},eK=t=>{var e=ps(t,ECe),{cx:n,cy:r,innerRadius:s,outerRadius:i,cornerRadius:a,forceCornerRadius:o,cornerIsExternal:c,startAngle:d,endAngle:h,className:p}=e;if(i<s||d===h)return null;var m=Et("recharts-sector",p),y=i-s,x=Is(a,y,0,!0),_;return x>0&&Math.abs(d-h)<360?_=_Ce({cx:n,cy:r,innerRadius:s,outerRadius:i,cornerRadius:Math.min(x,y/2),forceCornerRadius:o,cornerIsExternal:c,startAngle:d,endAngle:h}):_=Zq({cx:n,cy:r,innerRadius:s,outerRadius:i,startAngle:d,endAngle:h}),v.createElement("path",uj({},Qn(e,!0),{className:m,d:_}))};function NCe(t,e,n){var r,s,i,a;if(t==="horizontal")r=e.x,i=r,s=n.top,a=n.top+n.height;else if(t==="vertical")s=e.y,a=s,r=n.left,i=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var{cx:o,cy:c,innerRadius:d,outerRadius:h,angle:p}=e,m=Er(o,c,d,p),y=Er(o,c,h,p);r=m.x,s=m.y,i=y.x,a=y.y}else return Jq(e);return[{x:r,y:s},{x:i,y:a}]}var Lk={},Fk={},$k={},M$;function SCe(){return M$||(M$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=aq();function n(r){return e.isSymbol(r)?NaN:Number(r)}t.toNumber=n})($k)),$k}var L$;function kCe(){return L$||(L$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=SCe();function n(r){return r?(r=e.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}t.toFinite=n})(Fk)),Fk}var F$;function TCe(){return F$||(F$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=oq(),n=kCe();function r(s,i,a){a&&typeof a!="number"&&e.isIterateeCall(s,i,a)&&(i=a=void 0),s=n.toFinite(s),i===void 0?(i=s,s=0):i=n.toFinite(i),a=a===void 0?s<i?1:-1:n.toFinite(a);const o=Math.max(Math.ceil((i-s)/(a||1)),0),c=new Array(o);for(let d=0;d<o;d++)c[d]=s,s+=a;return c}t.range=r})(Lk)),Lk}var Vk,$$;function CCe(){return $$||($$=1,Vk=TCe().range),Vk}var jCe=CCe();const tK=Xa(jCe);function Zc(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function PCe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function VA(t){let e,n,r;t.length!==2?(e=Zc,n=(o,c)=>Zc(t(o),c),r=(o,c)=>t(o)-c):(e=t===Zc||t===PCe?t:ACe,n=t,r=t);function s(o,c,d=0,h=o.length){if(d<h){if(e(c,c)!==0)return h;do{const p=d+h>>>1;n(o[p],c)<0?d=p+1:h=p}while(d<h)}return d}function i(o,c,d=0,h=o.length){if(d<h){if(e(c,c)!==0)return h;do{const p=d+h>>>1;n(o[p],c)<=0?d=p+1:h=p}while(d<h)}return d}function a(o,c,d=0,h=o.length){const p=s(o,c,d,h-1);return p>d&&r(o[p-1],c)>-r(o[p],c)?p-1:p}return{left:s,center:a,right:i}}function ACe(){return 0}function nK(t){return t===null?NaN:+t}function*ICe(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const DCe=VA(Zc),Ny=DCe.right;VA(nK).center;class V$ extends Map{constructor(e,n=MCe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,s]of e)this.set(r,s)}get(e){return super.get(B$(this,e))}has(e){return super.has(B$(this,e))}set(e,n){return super.set(RCe(this,e),n)}delete(e){return super.delete(OCe(this,e))}}function B$({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function RCe({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function OCe({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function MCe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function LCe(t=Zc){if(t===Zc)return rK;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function rK(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const FCe=Math.sqrt(50),$Ce=Math.sqrt(10),VCe=Math.sqrt(2);function qw(t,e,n){const r=(e-t)/Math.max(0,n),s=Math.floor(Math.log10(r)),i=r/Math.pow(10,s),a=i>=FCe?10:i>=$Ce?5:i>=VCe?2:1;let o,c,d;return s<0?(d=Math.pow(10,-s)/a,o=Math.round(t*d),c=Math.round(e*d),o/d<t&&++o,c/d>e&&--c,d=-d):(d=Math.pow(10,s)*a,o=Math.round(t/d),c=Math.round(e/d),o*d<t&&++o,c*d>e&&--c),c<o&&.5<=n&&n<2?qw(t,e,n*2):[o,c,d]}function dj(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[s,i,a]=r?qw(e,t,n):qw(t,e,n);if(!(i>=s))return[];const o=i-s+1,c=new Array(o);if(r)if(a<0)for(let d=0;d<o;++d)c[d]=(i-d)/-a;else for(let d=0;d<o;++d)c[d]=(i-d)*a;else if(a<0)for(let d=0;d<o;++d)c[d]=(s+d)/-a;else for(let d=0;d<o;++d)c[d]=(s+d)*a;return c}function hj(t,e,n){return e=+e,t=+t,n=+n,qw(t,e,n)[2]}function fj(t,e,n){e=+e,t=+t,n=+n;const r=e<t,s=r?hj(e,t,n):hj(t,e,n);return(r?-1:1)*(s<0?1/-s:s)}function U$(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function z$(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function sK(t,e,n=0,r=1/0,s){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(s=s===void 0?rK:LCe(s);r>n;){if(r-n>600){const c=r-n+1,d=e-n+1,h=Math.log(c),p=.5*Math.exp(2*h/3),m=.5*Math.sqrt(h*p*(c-p)/c)*(d-c/2<0?-1:1),y=Math.max(n,Math.floor(e-d*p/c+m)),x=Math.min(r,Math.floor(e+(c-d)*p/c+m));sK(t,e,y,x,s)}const i=t[e];let a=n,o=r;for(hg(t,n,e),s(t[r],i)>0&&hg(t,n,r);a<o;){for(hg(t,a,o),++a,--o;s(t[a],i)<0;)++a;for(;s(t[o],i)>0;)--o}s(t[n],i)===0?hg(t,n,o):(++o,hg(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}return t}function hg(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function BCe(t,e,n){if(t=Float64Array.from(ICe(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return z$(t);if(e>=1)return U$(t);var r,s=(r-1)*e,i=Math.floor(s),a=U$(sK(t,i).subarray(0,i+1)),o=z$(t.subarray(i+1));return a+(o-a)*(s-i)}}function UCe(t,e,n=nK){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,s=(r-1)*e,i=Math.floor(s),a=+n(t[i],i,t),o=+n(t[i+1],i+1,t);return a+(o-a)*(s-i)}}function zCe(t,e,n){t=+t,e=+e,n=(s=arguments.length)<2?(e=t,t=0,1):s<3?1:+n;for(var r=-1,s=Math.max(0,Math.ceil((e-t)/n))|0,i=new Array(s);++r<s;)i[r]=t+r*n;return i}function ya(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Zl(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const pj=Symbol("implicit");function BA(){var t=new V$,e=[],n=[],r=pj;function s(i){let a=t.get(i);if(a===void 0){if(r!==pj)return r;t.set(i,a=e.push(i)-1)}return n[a%n.length]}return s.domain=function(i){if(!arguments.length)return e.slice();e=[],t=new V$;for(const a of i)t.has(a)||t.set(a,e.push(a)-1);return s},s.range=function(i){return arguments.length?(n=Array.from(i),s):n.slice()},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return BA(e,n).unknown(r)},ya.apply(s,arguments),s}function UA(){var t=BA().unknown(void 0),e=t.domain,n=t.range,r=0,s=1,i,a,o=!1,c=0,d=0,h=.5;delete t.unknown;function p(){var m=e().length,y=s<r,x=y?s:r,_=y?r:s;i=(_-x)/Math.max(1,m-c+d*2),o&&(i=Math.floor(i)),x+=(_-x-i*(m-c))*h,a=i*(1-c),o&&(x=Math.round(x),a=Math.round(a));var w=zCe(m).map(function(N){return x+i*N});return n(y?w.reverse():w)}return t.domain=function(m){return arguments.length?(e(m),p()):e()},t.range=function(m){return arguments.length?([r,s]=m,r=+r,s=+s,p()):[r,s]},t.rangeRound=function(m){return[r,s]=m,r=+r,s=+s,o=!0,p()},t.bandwidth=function(){return a},t.step=function(){return i},t.round=function(m){return arguments.length?(o=!!m,p()):o},t.padding=function(m){return arguments.length?(c=Math.min(1,d=+m),p()):c},t.paddingInner=function(m){return arguments.length?(c=Math.min(1,m),p()):c},t.paddingOuter=function(m){return arguments.length?(d=+m,p()):d},t.align=function(m){return arguments.length?(h=Math.max(0,Math.min(1,m)),p()):h},t.copy=function(){return UA(e(),[r,s]).round(o).paddingInner(c).paddingOuter(d).align(h)},ya.apply(p(),arguments)}function iK(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return iK(e())},t}function WCe(){return iK(UA.apply(null,arguments).paddingInner(1))}function zA(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function aK(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Sy(){}var I0=.7,Kw=1/I0,Hf="\\s*([+-]?\\d+)\\s*",D0="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Mo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",HCe=/^#([0-9a-f]{3,8})$/,qCe=new RegExp(`^rgb\\(${Hf},${Hf},${Hf}\\)$`),KCe=new RegExp(`^rgb\\(${Mo},${Mo},${Mo}\\)$`),YCe=new RegExp(`^rgba\\(${Hf},${Hf},${Hf},${D0}\\)$`),GCe=new RegExp(`^rgba\\(${Mo},${Mo},${Mo},${D0}\\)$`),QCe=new RegExp(`^hsl\\(${D0},${Mo},${Mo}\\)$`),XCe=new RegExp(`^hsla\\(${D0},${Mo},${Mo},${D0}\\)$`),W$={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};zA(Sy,R0,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:H$,formatHex:H$,formatHex8:JCe,formatHsl:ZCe,formatRgb:q$,toString:q$});function H$(){return this.rgb().formatHex()}function JCe(){return this.rgb().formatHex8()}function ZCe(){return oK(this).formatHsl()}function q$(){return this.rgb().formatRgb()}function R0(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=HCe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?K$(e):n===3?new ci(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?kx(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?kx(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=qCe.exec(t))?new ci(e[1],e[2],e[3],1):(e=KCe.exec(t))?new ci(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=YCe.exec(t))?kx(e[1],e[2],e[3],e[4]):(e=GCe.exec(t))?kx(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=QCe.exec(t))?Q$(e[1],e[2]/100,e[3]/100,1):(e=XCe.exec(t))?Q$(e[1],e[2]/100,e[3]/100,e[4]):W$.hasOwnProperty(t)?K$(W$[t]):t==="transparent"?new ci(NaN,NaN,NaN,0):null}function K$(t){return new ci(t>>16&255,t>>8&255,t&255,1)}function kx(t,e,n,r){return r<=0&&(t=e=n=NaN),new ci(t,e,n,r)}function eje(t){return t instanceof Sy||(t=R0(t)),t?(t=t.rgb(),new ci(t.r,t.g,t.b,t.opacity)):new ci}function mj(t,e,n,r){return arguments.length===1?eje(t):new ci(t,e,n,r??1)}function ci(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}zA(ci,mj,aK(Sy,{brighter(t){return t=t==null?Kw:Math.pow(Kw,t),new ci(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?I0:Math.pow(I0,t),new ci(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ci(Bd(this.r),Bd(this.g),Bd(this.b),Yw(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Y$,formatHex:Y$,formatHex8:tje,formatRgb:G$,toString:G$}));function Y$(){return`#${Sd(this.r)}${Sd(this.g)}${Sd(this.b)}`}function tje(){return`#${Sd(this.r)}${Sd(this.g)}${Sd(this.b)}${Sd((isNaN(this.opacity)?1:this.opacity)*255)}`}function G$(){const t=Yw(this.opacity);return`${t===1?"rgb(":"rgba("}${Bd(this.r)}, ${Bd(this.g)}, ${Bd(this.b)}${t===1?")":`, ${t})`}`}function Yw(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Bd(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Sd(t){return t=Bd(t),(t<16?"0":"")+t.toString(16)}function Q$(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ra(t,e,n,r)}function oK(t){if(t instanceof Ra)return new Ra(t.h,t.s,t.l,t.opacity);if(t instanceof Sy||(t=R0(t)),!t)return new Ra;if(t instanceof Ra)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,s=Math.min(e,n,r),i=Math.max(e,n,r),a=NaN,o=i-s,c=(i+s)/2;return o?(e===i?a=(n-r)/o+(n<r)*6:n===i?a=(r-e)/o+2:a=(e-n)/o+4,o/=c<.5?i+s:2-i-s,a*=60):o=c>0&&c<1?0:a,new Ra(a,o,c,t.opacity)}function nje(t,e,n,r){return arguments.length===1?oK(t):new Ra(t,e,n,r??1)}function Ra(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}zA(Ra,nje,aK(Sy,{brighter(t){return t=t==null?Kw:Math.pow(Kw,t),new Ra(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?I0:Math.pow(I0,t),new Ra(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,s=2*n-r;return new ci(Bk(t>=240?t-240:t+120,s,r),Bk(t,s,r),Bk(t<120?t+240:t-120,s,r),this.opacity)},clamp(){return new Ra(X$(this.h),Tx(this.s),Tx(this.l),Yw(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Yw(this.opacity);return`${t===1?"hsl(":"hsla("}${X$(this.h)}, ${Tx(this.s)*100}%, ${Tx(this.l)*100}%${t===1?")":`, ${t})`}`}}));function X$(t){return t=(t||0)%360,t<0?t+360:t}function Tx(t){return Math.max(0,Math.min(1,t||0))}function Bk(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const WA=t=>()=>t;function rje(t,e){return function(n){return t+n*e}}function sje(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function ije(t){return(t=+t)==1?lK:function(e,n){return n-e?sje(e,n,t):WA(isNaN(e)?n:e)}}function lK(t,e){var n=e-t;return n?rje(t,n):WA(isNaN(t)?e:t)}const J$=(function t(e){var n=ije(e);function r(s,i){var a=n((s=mj(s)).r,(i=mj(i)).r),o=n(s.g,i.g),c=n(s.b,i.b),d=lK(s.opacity,i.opacity);return function(h){return s.r=a(h),s.g=o(h),s.b=c(h),s.opacity=d(h),s+""}}return r.gamma=t,r})(1);function aje(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),s;return function(i){for(s=0;s<n;++s)r[s]=t[s]*(1-i)+e[s]*i;return r}}function oje(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function lje(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,s=new Array(r),i=new Array(n),a;for(a=0;a<r;++a)s[a]=im(t[a],e[a]);for(;a<n;++a)i[a]=e[a];return function(o){for(a=0;a<r;++a)i[a]=s[a](o);return i}}function cje(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Gw(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function uje(t,e){var n={},r={},s;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(s in e)s in t?n[s]=im(t[s],e[s]):r[s]=e[s];return function(i){for(s in n)r[s]=n[s](i);return r}}var gj=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Uk=new RegExp(gj.source,"g");function dje(t){return function(){return t}}function hje(t){return function(e){return t(e)+""}}function fje(t,e){var n=gj.lastIndex=Uk.lastIndex=0,r,s,i,a=-1,o=[],c=[];for(t=t+"",e=e+"";(r=gj.exec(t))&&(s=Uk.exec(e));)(i=s.index)>n&&(i=e.slice(n,i),o[a]?o[a]+=i:o[++a]=i),(r=r[0])===(s=s[0])?o[a]?o[a]+=s:o[++a]=s:(o[++a]=null,c.push({i:a,x:Gw(r,s)})),n=Uk.lastIndex;return n<e.length&&(i=e.slice(n),o[a]?o[a]+=i:o[++a]=i),o.length<2?c[0]?hje(c[0].x):dje(e):(e=c.length,function(d){for(var h=0,p;h<e;++h)o[(p=c[h]).i]=p.x(d);return o.join("")})}function im(t,e){var n=typeof e,r;return e==null||n==="boolean"?WA(e):(n==="number"?Gw:n==="string"?(r=R0(e))?(e=r,J$):fje:e instanceof R0?J$:e instanceof Date?cje:oje(e)?aje:Array.isArray(e)?lje:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?uje:Gw)(t,e)}function HA(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function pje(t,e){e===void 0&&(e=t,t=im);for(var n=0,r=e.length-1,s=e[0],i=new Array(r<0?0:r);n<r;)i[n]=t(s,s=e[++n]);return function(a){var o=Math.max(0,Math.min(r-1,Math.floor(a*=r)));return i[o](a-o)}}function mje(t){return function(){return t}}function Qw(t){return+t}var Z$=[0,1];function Us(t){return t}function yj(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:mje(isNaN(e)?NaN:.5)}function gje(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function yje(t,e,n){var r=t[0],s=t[1],i=e[0],a=e[1];return s<r?(r=yj(s,r),i=n(a,i)):(r=yj(r,s),i=n(i,a)),function(o){return i(r(o))}}function vje(t,e,n){var r=Math.min(t.length,e.length)-1,s=new Array(r),i=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)s[a]=yj(t[a],t[a+1]),i[a]=n(e[a],e[a+1]);return function(o){var c=Ny(t,o,1,r)-1;return i[c](s[c](o))}}function ky(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function O_(){var t=Z$,e=Z$,n=im,r,s,i,a=Us,o,c,d;function h(){var m=Math.min(t.length,e.length);return a!==Us&&(a=gje(t[0],t[m-1])),o=m>2?vje:yje,c=d=null,p}function p(m){return m==null||isNaN(m=+m)?i:(c||(c=o(t.map(r),e,n)))(r(a(m)))}return p.invert=function(m){return a(s((d||(d=o(e,t.map(r),Gw)))(m)))},p.domain=function(m){return arguments.length?(t=Array.from(m,Qw),h()):t.slice()},p.range=function(m){return arguments.length?(e=Array.from(m),h()):e.slice()},p.rangeRound=function(m){return e=Array.from(m),n=HA,h()},p.clamp=function(m){return arguments.length?(a=m?!0:Us,h()):a!==Us},p.interpolate=function(m){return arguments.length?(n=m,h()):n},p.unknown=function(m){return arguments.length?(i=m,p):i},function(m,y){return r=m,s=y,h()}}function qA(){return O_()(Us,Us)}function xje(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Xw(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Cp(t){return t=Xw(Math.abs(t)),t?t[1]:NaN}function bje(t,e){return function(n,r){for(var s=n.length,i=[],a=0,o=t[0],c=0;s>0&&o>0&&(c+o+1>r&&(o=Math.max(1,r-c)),i.push(n.substring(s-=o,s+o)),!((c+=o+1)>r));)o=t[a=(a+1)%t.length];return i.reverse().join(e)}}function wje(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var _je=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function O0(t){if(!(e=_je.exec(t)))throw new Error("invalid format: "+t);var e;return new KA({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}O0.prototype=KA.prototype;function KA(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}KA.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Eje(t){e:for(var e=t.length,n=1,r=-1,s;n<e;++n)switch(t[n]){case".":r=s=n;break;case"0":r===0&&(r=n),s=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(s+1):t}var cK;function Nje(t,e){var n=Xw(t,e);if(!n)return t+"";var r=n[0],s=n[1],i=s-(cK=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,a=r.length;return i===a?r:i>a?r+new Array(i-a+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+Xw(t,Math.max(0,e+i-1))[0]}function e6(t,e){var n=Xw(t,e);if(!n)return t+"";var r=n[0],s=n[1];return s<0?"0."+new Array(-s).join("0")+r:r.length>s+1?r.slice(0,s+1)+"."+r.slice(s+1):r+new Array(s-r.length+2).join("0")}const t6={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:xje,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>e6(t*100,e),r:e6,s:Nje,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function n6(t){return t}var r6=Array.prototype.map,s6=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Sje(t){var e=t.grouping===void 0||t.thousands===void 0?n6:bje(r6.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",s=t.decimal===void 0?".":t.decimal+"",i=t.numerals===void 0?n6:wje(r6.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"−":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function d(p){p=O0(p);var m=p.fill,y=p.align,x=p.sign,_=p.symbol,w=p.zero,N=p.width,k=p.comma,S=p.precision,O=p.trim,R=p.type;R==="n"?(k=!0,R="g"):t6[R]||(S===void 0&&(S=12),O=!0,R="g"),(w||m==="0"&&y==="=")&&(w=!0,m="0",y="=");var M=_==="$"?n:_==="#"&&/[boxX]/.test(R)?"0"+R.toLowerCase():"",P=_==="$"?r:/[%p]/.test(R)?a:"",C=t6[R],D=/[defgprs%]/.test(R);S=S===void 0?6:/[gprs]/.test(R)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S));function $(F){var U=M,I=P,z,Q,ne;if(R==="c")I=C(F)+I,F="";else{F=+F;var W=F<0||1/F<0;if(F=isNaN(F)?c:C(Math.abs(F),S),O&&(F=Eje(F)),W&&+F==0&&x!=="+"&&(W=!1),U=(W?x==="("?x:o:x==="-"||x==="("?"":x)+U,I=(R==="s"?s6[8+cK/3]:"")+I+(W&&x==="("?")":""),D){for(z=-1,Q=F.length;++z<Q;)if(ne=F.charCodeAt(z),48>ne||ne>57){I=(ne===46?s+F.slice(z+1):F.slice(z))+I,F=F.slice(0,z);break}}}k&&!w&&(F=e(F,1/0));var K=U.length+F.length+I.length,Y=K<N?new Array(N-K+1).join(m):"";switch(k&&w&&(F=e(Y+F,Y.length?N-I.length:1/0),Y=""),y){case"<":F=U+F+I+Y;break;case"=":F=U+Y+F+I;break;case"^":F=Y.slice(0,K=Y.length>>1)+U+F+I+Y.slice(K);break;default:F=Y+U+F+I;break}return i(F)}return $.toString=function(){return p+""},$}function h(p,m){var y=d((p=O0(p),p.type="f",p)),x=Math.max(-8,Math.min(8,Math.floor(Cp(m)/3)))*3,_=Math.pow(10,-x),w=s6[8+x/3];return function(N){return y(_*N)+w}}return{format:d,formatPrefix:h}}var Cx,YA,uK;kje({thousands:",",grouping:[3],currency:["$",""]});function kje(t){return Cx=Sje(t),YA=Cx.format,uK=Cx.formatPrefix,Cx}function Tje(t){return Math.max(0,-Cp(Math.abs(t)))}function Cje(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Cp(e)/3)))*3-Cp(Math.abs(t)))}function jje(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Cp(e)-Cp(t))+1}function dK(t,e,n,r){var s=fj(t,e,n),i;switch(r=O0(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(i=Cje(s,a))&&(r.precision=i),uK(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(i=jje(s,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=i-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(i=Tje(s))&&(r.precision=i-(r.type==="%")*2);break}}return YA(r)}function Su(t){var e=t.domain;return t.ticks=function(n){var r=e();return dj(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var s=e();return dK(s[0],s[s.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),s=0,i=r.length-1,a=r[s],o=r[i],c,d,h=10;for(o<a&&(d=a,a=o,o=d,d=s,s=i,i=d);h-- >0;){if(d=hj(a,o,n),d===c)return r[s]=a,r[i]=o,e(r);if(d>0)a=Math.floor(a/d)*d,o=Math.ceil(o/d)*d;else if(d<0)a=Math.ceil(a*d)/d,o=Math.floor(o*d)/d;else break;c=d}return t},t}function hK(){var t=qA();return t.copy=function(){return ky(t,hK())},ya.apply(t,arguments),Su(t)}function fK(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,Qw),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return fK(t).unknown(e)},t=arguments.length?Array.from(t,Qw):[0,1],Su(n)}function pK(t,e){t=t.slice();var n=0,r=t.length-1,s=t[n],i=t[r],a;return i<s&&(a=n,n=r,r=a,a=s,s=i,i=a),t[n]=e.floor(s),t[r]=e.ceil(i),t}function i6(t){return Math.log(t)}function a6(t){return Math.exp(t)}function Pje(t){return-Math.log(-t)}function Aje(t){return-Math.exp(-t)}function Ije(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Dje(t){return t===10?Ije:t===Math.E?Math.exp:e=>Math.pow(t,e)}function Rje(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function o6(t){return(e,n)=>-t(-e,n)}function GA(t){const e=t(i6,a6),n=e.domain;let r=10,s,i;function a(){return s=Rje(r),i=Dje(r),n()[0]<0?(s=o6(s),i=o6(i),t(Pje,Aje)):t(i6,a6),e}return e.base=function(o){return arguments.length?(r=+o,a()):r},e.domain=function(o){return arguments.length?(n(o),a()):n()},e.ticks=o=>{const c=n();let d=c[0],h=c[c.length-1];const p=h<d;p&&([d,h]=[h,d]);let m=s(d),y=s(h),x,_;const w=o==null?10:+o;let N=[];if(!(r%1)&&y-m<w){if(m=Math.floor(m),y=Math.ceil(y),d>0){for(;m<=y;++m)for(x=1;x<r;++x)if(_=m<0?x/i(-m):x*i(m),!(_<d)){if(_>h)break;N.push(_)}}else for(;m<=y;++m)for(x=r-1;x>=1;--x)if(_=m>0?x/i(-m):x*i(m),!(_<d)){if(_>h)break;N.push(_)}N.length*2<w&&(N=dj(d,h,w))}else N=dj(m,y,Math.min(y-m,w)).map(i);return p?N.reverse():N},e.tickFormat=(o,c)=>{if(o==null&&(o=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=O0(c)).precision==null&&(c.trim=!0),c=YA(c)),o===1/0)return c;const d=Math.max(1,r*o/e.ticks().length);return h=>{let p=h/i(Math.round(s(h)));return p*r<r-.5&&(p*=r),p<=d?c(h):""}},e.nice=()=>n(pK(n(),{floor:o=>i(Math.floor(s(o))),ceil:o=>i(Math.ceil(s(o)))})),e}function mK(){const t=GA(O_()).domain([1,10]);return t.copy=()=>ky(t,mK()).base(t.base()),ya.apply(t,arguments),t}function l6(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function c6(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function QA(t){var e=1,n=t(l6(e),c6(e));return n.constant=function(r){return arguments.length?t(l6(e=+r),c6(e)):e},Su(n)}function gK(){var t=QA(O_());return t.copy=function(){return ky(t,gK()).constant(t.constant())},ya.apply(t,arguments)}function u6(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Oje(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Mje(t){return t<0?-t*t:t*t}function XA(t){var e=t(Us,Us),n=1;function r(){return n===1?t(Us,Us):n===.5?t(Oje,Mje):t(u6(n),u6(1/n))}return e.exponent=function(s){return arguments.length?(n=+s,r()):n},Su(e)}function JA(){var t=XA(O_());return t.copy=function(){return ky(t,JA()).exponent(t.exponent())},ya.apply(t,arguments),t}function Lje(){return JA.apply(null,arguments).exponent(.5)}function d6(t){return Math.sign(t)*t*t}function Fje(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function yK(){var t=qA(),e=[0,1],n=!1,r;function s(i){var a=Fje(t(i));return isNaN(a)?r:n?Math.round(a):a}return s.invert=function(i){return t.invert(d6(i))},s.domain=function(i){return arguments.length?(t.domain(i),s):t.domain()},s.range=function(i){return arguments.length?(t.range((e=Array.from(i,Qw)).map(d6)),s):e.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(n=!!i,s):n},s.clamp=function(i){return arguments.length?(t.clamp(i),s):t.clamp()},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return yK(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},ya.apply(s,arguments),Su(s)}function vK(){var t=[],e=[],n=[],r;function s(){var a=0,o=Math.max(1,e.length);for(n=new Array(o-1);++a<o;)n[a-1]=UCe(t,a/o);return i}function i(a){return a==null||isNaN(a=+a)?r:e[Ny(n,a)]}return i.invertExtent=function(a){var o=e.indexOf(a);return o<0?[NaN,NaN]:[o>0?n[o-1]:t[0],o<n.length?n[o]:t[t.length-1]]},i.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let o of a)o!=null&&!isNaN(o=+o)&&t.push(o);return t.sort(Zc),s()},i.range=function(a){return arguments.length?(e=Array.from(a),s()):e.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.quantiles=function(){return n.slice()},i.copy=function(){return vK().domain(t).range(e).unknown(r)},ya.apply(i,arguments)}function xK(){var t=0,e=1,n=1,r=[.5],s=[0,1],i;function a(c){return c!=null&&c<=c?s[Ny(r,c,0,n)]:i}function o(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*e-(c-n)*t)/(n+1);return a}return a.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,o()):[t,e]},a.range=function(c){return arguments.length?(n=(s=Array.from(c)).length-1,o()):s.slice()},a.invertExtent=function(c){var d=s.indexOf(c);return d<0?[NaN,NaN]:d<1?[t,r[0]]:d>=n?[r[n-1],e]:[r[d-1],r[d]]},a.unknown=function(c){return arguments.length&&(i=c),a},a.thresholds=function(){return r.slice()},a.copy=function(){return xK().domain([t,e]).range(s).unknown(i)},ya.apply(Su(a),arguments)}function bK(){var t=[.5],e=[0,1],n,r=1;function s(i){return i!=null&&i<=i?e[Ny(t,i,0,r)]:n}return s.domain=function(i){return arguments.length?(t=Array.from(i),r=Math.min(t.length,e.length-1),s):t.slice()},s.range=function(i){return arguments.length?(e=Array.from(i),r=Math.min(t.length,e.length-1),s):e.slice()},s.invertExtent=function(i){var a=e.indexOf(i);return[t[a-1],t[a]]},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return bK().domain(t).range(e).unknown(n)},ya.apply(s,arguments)}const zk=new Date,Wk=new Date;function Lr(t,e,n,r){function s(i){return t(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(t(i=new Date(+i)),i),s.ceil=i=>(t(i=new Date(i-1)),e(i,1),t(i),i),s.round=i=>{const a=s(i),o=s.ceil(i);return i-a<o-i?a:o},s.offset=(i,a)=>(e(i=new Date(+i),a==null?1:Math.floor(a)),i),s.range=(i,a,o)=>{const c=[];if(i=s.ceil(i),o=o==null?1:Math.floor(o),!(i<a)||!(o>0))return c;let d;do c.push(d=new Date(+i)),e(i,o),t(i);while(d<i&&i<a);return c},s.filter=i=>Lr(a=>{if(a>=a)for(;t(a),!i(a);)a.setTime(a-1)},(a,o)=>{if(a>=a)if(o<0)for(;++o<=0;)for(;e(a,-1),!i(a););else for(;--o>=0;)for(;e(a,1),!i(a););}),n&&(s.count=(i,a)=>(zk.setTime(+i),Wk.setTime(+a),t(zk),t(Wk),Math.floor(n(zk,Wk))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(r?a=>r(a)%i===0:a=>s.count(0,a)%i===0):s)),s}const Jw=Lr(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Jw.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Lr(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Jw);Jw.range;const _l=1e3,da=_l*60,El=da*60,Wl=El*24,ZA=Wl*7,h6=Wl*30,Hk=Wl*365,kd=Lr(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*_l)},(t,e)=>(e-t)/_l,t=>t.getUTCSeconds());kd.range;const eI=Lr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*_l)},(t,e)=>{t.setTime(+t+e*da)},(t,e)=>(e-t)/da,t=>t.getMinutes());eI.range;const tI=Lr(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*da)},(t,e)=>(e-t)/da,t=>t.getUTCMinutes());tI.range;const nI=Lr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*_l-t.getMinutes()*da)},(t,e)=>{t.setTime(+t+e*El)},(t,e)=>(e-t)/El,t=>t.getHours());nI.range;const rI=Lr(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*El)},(t,e)=>(e-t)/El,t=>t.getUTCHours());rI.range;const Ty=Lr(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*da)/Wl,t=>t.getDate()-1);Ty.range;const M_=Lr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Wl,t=>t.getUTCDate()-1);M_.range;const wK=Lr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Wl,t=>Math.floor(t/Wl));wK.range;function yh(t){return Lr(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*da)/ZA)}const L_=yh(0),Zw=yh(1),$je=yh(2),Vje=yh(3),jp=yh(4),Bje=yh(5),Uje=yh(6);L_.range;Zw.range;$je.range;Vje.range;jp.range;Bje.range;Uje.range;function vh(t){return Lr(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/ZA)}const F_=vh(0),e1=vh(1),zje=vh(2),Wje=vh(3),Pp=vh(4),Hje=vh(5),qje=vh(6);F_.range;e1.range;zje.range;Wje.range;Pp.range;Hje.range;qje.range;const sI=Lr(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());sI.range;const iI=Lr(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());iI.range;const Hl=Lr(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Hl.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Lr(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Hl.range;const ql=Lr(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());ql.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Lr(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});ql.range;function _K(t,e,n,r,s,i){const a=[[kd,1,_l],[kd,5,5*_l],[kd,15,15*_l],[kd,30,30*_l],[i,1,da],[i,5,5*da],[i,15,15*da],[i,30,30*da],[s,1,El],[s,3,3*El],[s,6,6*El],[s,12,12*El],[r,1,Wl],[r,2,2*Wl],[n,1,ZA],[e,1,h6],[e,3,3*h6],[t,1,Hk]];function o(d,h,p){const m=h<d;m&&([d,h]=[h,d]);const y=p&&typeof p.range=="function"?p:c(d,h,p),x=y?y.range(d,+h+1):[];return m?x.reverse():x}function c(d,h,p){const m=Math.abs(h-d)/p,y=VA(([,,w])=>w).right(a,m);if(y===a.length)return t.every(fj(d/Hk,h/Hk,p));if(y===0)return Jw.every(Math.max(fj(d,h,p),1));const[x,_]=a[m/a[y-1][2]<a[y][2]/m?y-1:y];return x.every(_)}return[o,c]}const[Kje,Yje]=_K(ql,iI,F_,wK,rI,tI),[Gje,Qje]=_K(Hl,sI,L_,Ty,nI,eI);function qk(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Kk(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function fg(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function Xje(t){var e=t.dateTime,n=t.date,r=t.time,s=t.periods,i=t.days,a=t.shortDays,o=t.months,c=t.shortMonths,d=pg(s),h=mg(s),p=pg(i),m=mg(i),y=pg(a),x=mg(a),_=pg(o),w=mg(o),N=pg(c),k=mg(c),S={a:W,A:K,b:Y,B:G,c:null,d:v6,e:v6,f:b2e,g:P2e,G:I2e,H:y2e,I:v2e,j:x2e,L:EK,m:w2e,M:_2e,p:q,q:Z,Q:w6,s:_6,S:E2e,u:N2e,U:S2e,V:k2e,w:T2e,W:C2e,x:null,X:null,y:j2e,Y:A2e,Z:D2e,"%":b6},O={a:ge,A:Le,b:Pe,B:Ue,c:null,d:x6,e:x6,f:L2e,g:K2e,G:G2e,H:R2e,I:O2e,j:M2e,L:SK,m:F2e,M:$2e,p:V,q:ee,Q:w6,s:_6,S:V2e,u:B2e,U:U2e,V:z2e,w:W2e,W:H2e,x:null,X:null,y:q2e,Y:Y2e,Z:Q2e,"%":b6},R={a:$,A:F,b:U,B:I,c:z,d:g6,e:g6,f:f2e,g:m6,G:p6,H:y6,I:y6,j:c2e,L:h2e,m:l2e,M:u2e,p:D,q:o2e,Q:m2e,s:g2e,S:d2e,u:n2e,U:r2e,V:s2e,w:t2e,W:i2e,x:Q,X:ne,y:m6,Y:p6,Z:a2e,"%":p2e};S.x=M(n,S),S.X=M(r,S),S.c=M(e,S),O.x=M(n,O),O.X=M(r,O),O.c=M(e,O);function M(X,te){return function(he){var ie=[],le=-1,Ne=0,Se=X.length,ae,ke,ce;for(he instanceof Date||(he=new Date(+he));++le<Se;)X.charCodeAt(le)===37&&(ie.push(X.slice(Ne,le)),(ke=f6[ae=X.charAt(++le)])!=null?ae=X.charAt(++le):ke=ae==="e"?" ":"0",(ce=te[ae])&&(ae=ce(he,ke)),ie.push(ae),Ne=le+1);return ie.push(X.slice(Ne,le)),ie.join("")}}function P(X,te){return function(he){var ie=fg(1900,void 0,1),le=C(ie,X,he+="",0),Ne,Se;if(le!=he.length)return null;if("Q"in ie)return new Date(ie.Q);if("s"in ie)return new Date(ie.s*1e3+("L"in ie?ie.L:0));if(te&&!("Z"in ie)&&(ie.Z=0),"p"in ie&&(ie.H=ie.H%12+ie.p*12),ie.m===void 0&&(ie.m="q"in ie?ie.q:0),"V"in ie){if(ie.V<1||ie.V>53)return null;"w"in ie||(ie.w=1),"Z"in ie?(Ne=Kk(fg(ie.y,0,1)),Se=Ne.getUTCDay(),Ne=Se>4||Se===0?e1.ceil(Ne):e1(Ne),Ne=M_.offset(Ne,(ie.V-1)*7),ie.y=Ne.getUTCFullYear(),ie.m=Ne.getUTCMonth(),ie.d=Ne.getUTCDate()+(ie.w+6)%7):(Ne=qk(fg(ie.y,0,1)),Se=Ne.getDay(),Ne=Se>4||Se===0?Zw.ceil(Ne):Zw(Ne),Ne=Ty.offset(Ne,(ie.V-1)*7),ie.y=Ne.getFullYear(),ie.m=Ne.getMonth(),ie.d=Ne.getDate()+(ie.w+6)%7)}else("W"in ie||"U"in ie)&&("w"in ie||(ie.w="u"in ie?ie.u%7:"W"in ie?1:0),Se="Z"in ie?Kk(fg(ie.y,0,1)).getUTCDay():qk(fg(ie.y,0,1)).getDay(),ie.m=0,ie.d="W"in ie?(ie.w+6)%7+ie.W*7-(Se+5)%7:ie.w+ie.U*7-(Se+6)%7);return"Z"in ie?(ie.H+=ie.Z/100|0,ie.M+=ie.Z%100,Kk(ie)):qk(ie)}}function C(X,te,he,ie){for(var le=0,Ne=te.length,Se=he.length,ae,ke;le<Ne;){if(ie>=Se)return-1;if(ae=te.charCodeAt(le++),ae===37){if(ae=te.charAt(le++),ke=R[ae in f6?te.charAt(le++):ae],!ke||(ie=ke(X,he,ie))<0)return-1}else if(ae!=he.charCodeAt(ie++))return-1}return ie}function D(X,te,he){var ie=d.exec(te.slice(he));return ie?(X.p=h.get(ie[0].toLowerCase()),he+ie[0].length):-1}function $(X,te,he){var ie=y.exec(te.slice(he));return ie?(X.w=x.get(ie[0].toLowerCase()),he+ie[0].length):-1}function F(X,te,he){var ie=p.exec(te.slice(he));return ie?(X.w=m.get(ie[0].toLowerCase()),he+ie[0].length):-1}function U(X,te,he){var ie=N.exec(te.slice(he));return ie?(X.m=k.get(ie[0].toLowerCase()),he+ie[0].length):-1}function I(X,te,he){var ie=_.exec(te.slice(he));return ie?(X.m=w.get(ie[0].toLowerCase()),he+ie[0].length):-1}function z(X,te,he){return C(X,e,te,he)}function Q(X,te,he){return C(X,n,te,he)}function ne(X,te,he){return C(X,r,te,he)}function W(X){return a[X.getDay()]}function K(X){return i[X.getDay()]}function Y(X){return c[X.getMonth()]}function G(X){return o[X.getMonth()]}function q(X){return s[+(X.getHours()>=12)]}function Z(X){return 1+~~(X.getMonth()/3)}function ge(X){return a[X.getUTCDay()]}function Le(X){return i[X.getUTCDay()]}function Pe(X){return c[X.getUTCMonth()]}function Ue(X){return o[X.getUTCMonth()]}function V(X){return s[+(X.getUTCHours()>=12)]}function ee(X){return 1+~~(X.getUTCMonth()/3)}return{format:function(X){var te=M(X+="",S);return te.toString=function(){return X},te},parse:function(X){var te=P(X+="",!1);return te.toString=function(){return X},te},utcFormat:function(X){var te=M(X+="",O);return te.toString=function(){return X},te},utcParse:function(X){var te=P(X+="",!0);return te.toString=function(){return X},te}}}var f6={"-":"",_:" ",0:"0"},Jr=/^\s*\d+/,Jje=/^%/,Zje=/[\\^$*+?|[\]().{}]/g;function Jt(t,e,n){var r=t<0?"-":"",s=(r?-t:t)+"",i=s.length;return r+(i<n?new Array(n-i+1).join(e)+s:s)}function e2e(t){return t.replace(Zje,"\\$&")}function pg(t){return new RegExp("^(?:"+t.map(e2e).join("|")+")","i")}function mg(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function t2e(t,e,n){var r=Jr.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function n2e(t,e,n){var r=Jr.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function r2e(t,e,n){var r=Jr.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function s2e(t,e,n){var r=Jr.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function i2e(t,e,n){var r=Jr.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function p6(t,e,n){var r=Jr.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function m6(t,e,n){var r=Jr.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function a2e(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function o2e(t,e,n){var r=Jr.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function l2e(t,e,n){var r=Jr.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function g6(t,e,n){var r=Jr.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function c2e(t,e,n){var r=Jr.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function y6(t,e,n){var r=Jr.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function u2e(t,e,n){var r=Jr.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function d2e(t,e,n){var r=Jr.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function h2e(t,e,n){var r=Jr.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function f2e(t,e,n){var r=Jr.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function p2e(t,e,n){var r=Jje.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function m2e(t,e,n){var r=Jr.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function g2e(t,e,n){var r=Jr.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function v6(t,e){return Jt(t.getDate(),e,2)}function y2e(t,e){return Jt(t.getHours(),e,2)}function v2e(t,e){return Jt(t.getHours()%12||12,e,2)}function x2e(t,e){return Jt(1+Ty.count(Hl(t),t),e,3)}function EK(t,e){return Jt(t.getMilliseconds(),e,3)}function b2e(t,e){return EK(t,e)+"000"}function w2e(t,e){return Jt(t.getMonth()+1,e,2)}function _2e(t,e){return Jt(t.getMinutes(),e,2)}function E2e(t,e){return Jt(t.getSeconds(),e,2)}function N2e(t){var e=t.getDay();return e===0?7:e}function S2e(t,e){return Jt(L_.count(Hl(t)-1,t),e,2)}function NK(t){var e=t.getDay();return e>=4||e===0?jp(t):jp.ceil(t)}function k2e(t,e){return t=NK(t),Jt(jp.count(Hl(t),t)+(Hl(t).getDay()===4),e,2)}function T2e(t){return t.getDay()}function C2e(t,e){return Jt(Zw.count(Hl(t)-1,t),e,2)}function j2e(t,e){return Jt(t.getFullYear()%100,e,2)}function P2e(t,e){return t=NK(t),Jt(t.getFullYear()%100,e,2)}function A2e(t,e){return Jt(t.getFullYear()%1e4,e,4)}function I2e(t,e){var n=t.getDay();return t=n>=4||n===0?jp(t):jp.ceil(t),Jt(t.getFullYear()%1e4,e,4)}function D2e(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Jt(e/60|0,"0",2)+Jt(e%60,"0",2)}function x6(t,e){return Jt(t.getUTCDate(),e,2)}function R2e(t,e){return Jt(t.getUTCHours(),e,2)}function O2e(t,e){return Jt(t.getUTCHours()%12||12,e,2)}function M2e(t,e){return Jt(1+M_.count(ql(t),t),e,3)}function SK(t,e){return Jt(t.getUTCMilliseconds(),e,3)}function L2e(t,e){return SK(t,e)+"000"}function F2e(t,e){return Jt(t.getUTCMonth()+1,e,2)}function $2e(t,e){return Jt(t.getUTCMinutes(),e,2)}function V2e(t,e){return Jt(t.getUTCSeconds(),e,2)}function B2e(t){var e=t.getUTCDay();return e===0?7:e}function U2e(t,e){return Jt(F_.count(ql(t)-1,t),e,2)}function kK(t){var e=t.getUTCDay();return e>=4||e===0?Pp(t):Pp.ceil(t)}function z2e(t,e){return t=kK(t),Jt(Pp.count(ql(t),t)+(ql(t).getUTCDay()===4),e,2)}function W2e(t){return t.getUTCDay()}function H2e(t,e){return Jt(e1.count(ql(t)-1,t),e,2)}function q2e(t,e){return Jt(t.getUTCFullYear()%100,e,2)}function K2e(t,e){return t=kK(t),Jt(t.getUTCFullYear()%100,e,2)}function Y2e(t,e){return Jt(t.getUTCFullYear()%1e4,e,4)}function G2e(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Pp(t):Pp.ceil(t),Jt(t.getUTCFullYear()%1e4,e,4)}function Q2e(){return"+0000"}function b6(){return"%"}function w6(t){return+t}function _6(t){return Math.floor(+t/1e3)}var pf,TK,CK;X2e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function X2e(t){return pf=Xje(t),TK=pf.format,pf.parse,CK=pf.utcFormat,pf.utcParse,pf}function J2e(t){return new Date(t)}function Z2e(t){return t instanceof Date?+t:+new Date(+t)}function aI(t,e,n,r,s,i,a,o,c,d){var h=qA(),p=h.invert,m=h.domain,y=d(".%L"),x=d(":%S"),_=d("%I:%M"),w=d("%I %p"),N=d("%a %d"),k=d("%b %d"),S=d("%B"),O=d("%Y");function R(M){return(c(M)<M?y:o(M)<M?x:a(M)<M?_:i(M)<M?w:r(M)<M?s(M)<M?N:k:n(M)<M?S:O)(M)}return h.invert=function(M){return new Date(p(M))},h.domain=function(M){return arguments.length?m(Array.from(M,Z2e)):m().map(J2e)},h.ticks=function(M){var P=m();return t(P[0],P[P.length-1],M??10)},h.tickFormat=function(M,P){return P==null?R:d(P)},h.nice=function(M){var P=m();return(!M||typeof M.range!="function")&&(M=e(P[0],P[P.length-1],M??10)),M?m(pK(P,M)):h},h.copy=function(){return ky(h,aI(t,e,n,r,s,i,a,o,c,d))},h}function ePe(){return ya.apply(aI(Gje,Qje,Hl,sI,L_,Ty,nI,eI,kd,TK).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function tPe(){return ya.apply(aI(Kje,Yje,ql,iI,F_,M_,rI,tI,kd,CK).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function $_(){var t=0,e=1,n,r,s,i,a=Us,o=!1,c;function d(p){return p==null||isNaN(p=+p)?c:a(s===0?.5:(p=(i(p)-n)*s,o?Math.max(0,Math.min(1,p)):p))}d.domain=function(p){return arguments.length?([t,e]=p,n=i(t=+t),r=i(e=+e),s=n===r?0:1/(r-n),d):[t,e]},d.clamp=function(p){return arguments.length?(o=!!p,d):o},d.interpolator=function(p){return arguments.length?(a=p,d):a};function h(p){return function(m){var y,x;return arguments.length?([y,x]=m,a=p(y,x),d):[a(0),a(1)]}}return d.range=h(im),d.rangeRound=h(HA),d.unknown=function(p){return arguments.length?(c=p,d):c},function(p){return i=p,n=p(t),r=p(e),s=n===r?0:1/(r-n),d}}function ku(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function jK(){var t=Su($_()(Us));return t.copy=function(){return ku(t,jK())},Zl.apply(t,arguments)}function PK(){var t=GA($_()).domain([1,10]);return t.copy=function(){return ku(t,PK()).base(t.base())},Zl.apply(t,arguments)}function AK(){var t=QA($_());return t.copy=function(){return ku(t,AK()).constant(t.constant())},Zl.apply(t,arguments)}function oI(){var t=XA($_());return t.copy=function(){return ku(t,oI()).exponent(t.exponent())},Zl.apply(t,arguments)}function nPe(){return oI.apply(null,arguments).exponent(.5)}function IK(){var t=[],e=Us;function n(r){if(r!=null&&!isNaN(r=+r))return e((Ny(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let s of r)s!=null&&!isNaN(s=+s)&&t.push(s);return t.sort(Zc),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,s)=>e(s/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(s,i)=>BCe(t,i/r))},n.copy=function(){return IK(e).domain(t)},Zl.apply(n,arguments)}function V_(){var t=0,e=.5,n=1,r=1,s,i,a,o,c,d=Us,h,p=!1,m;function y(_){return isNaN(_=+_)?m:(_=.5+((_=+h(_))-i)*(r*_<r*i?o:c),d(p?Math.max(0,Math.min(1,_)):_))}y.domain=function(_){return arguments.length?([t,e,n]=_,s=h(t=+t),i=h(e=+e),a=h(n=+n),o=s===i?0:.5/(i-s),c=i===a?0:.5/(a-i),r=i<s?-1:1,y):[t,e,n]},y.clamp=function(_){return arguments.length?(p=!!_,y):p},y.interpolator=function(_){return arguments.length?(d=_,y):d};function x(_){return function(w){var N,k,S;return arguments.length?([N,k,S]=w,d=pje(_,[N,k,S]),y):[d(0),d(.5),d(1)]}}return y.range=x(im),y.rangeRound=x(HA),y.unknown=function(_){return arguments.length?(m=_,y):m},function(_){return h=_,s=_(t),i=_(e),a=_(n),o=s===i?0:.5/(i-s),c=i===a?0:.5/(a-i),r=i<s?-1:1,y}}function DK(){var t=Su(V_()(Us));return t.copy=function(){return ku(t,DK())},Zl.apply(t,arguments)}function RK(){var t=GA(V_()).domain([.1,1,10]);return t.copy=function(){return ku(t,RK()).base(t.base())},Zl.apply(t,arguments)}function OK(){var t=QA(V_());return t.copy=function(){return ku(t,OK()).constant(t.constant())},Zl.apply(t,arguments)}function lI(){var t=XA(V_());return t.copy=function(){return ku(t,lI()).exponent(t.exponent())},Zl.apply(t,arguments)}function rPe(){return lI.apply(null,arguments).exponent(.5)}const Ng=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:UA,scaleDiverging:DK,scaleDivergingLog:RK,scaleDivergingPow:lI,scaleDivergingSqrt:rPe,scaleDivergingSymlog:OK,scaleIdentity:fK,scaleImplicit:pj,scaleLinear:hK,scaleLog:mK,scaleOrdinal:BA,scalePoint:WCe,scalePow:JA,scaleQuantile:vK,scaleQuantize:xK,scaleRadial:yK,scaleSequential:jK,scaleSequentialLog:PK,scaleSequentialPow:oI,scaleSequentialQuantile:IK,scaleSequentialSqrt:nPe,scaleSequentialSymlog:AK,scaleSqrt:Lje,scaleSymlog:gK,scaleThreshold:bK,scaleTime:ePe,scaleUtc:tPe,tickFormat:dK},Symbol.toStringTag,{value:"Module"}));var Tu=t=>t.chartData,cI=ye([Tu],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),B_=(t,e,n,r)=>r?cI(t):Tu(t);function Ap(t){if(Array.isArray(t)&&t.length===2){var[e,n]=t;if(zi(e)&&zi(n))return!0}return!1}function E6(t,e,n){return n?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function sPe(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[n,r]=t,s,i;if(zi(n))s=n;else if(typeof n=="function")return;if(zi(r))i=r;else if(typeof r=="function")return;var a=[s,i];if(Ap(a))return a}}function iPe(t,e,n){if(!(!n&&e==null)){if(typeof t=="function"&&e!=null)try{var r=t(e,n);if(Ap(r))return E6(r,e,n)}catch{}if(Array.isArray(t)&&t.length===2){var[s,i]=t,a,o;if(s==="auto")e!=null&&(a=Math.min(...e));else if(dt(s))a=s;else if(typeof s=="function")try{e!=null&&(a=s(e?.[0]))}catch{}else if(typeof s=="string"&&m$.test(s)){var c=m$.exec(s);if(c==null||e==null)a=void 0;else{var d=+c[1];a=e[0]-d}}else a=e?.[0];if(i==="auto")e!=null&&(o=Math.max(...e));else if(dt(i))o=i;else if(typeof i=="function")try{e!=null&&(o=i(e?.[1]))}catch{}else if(typeof i=="string"&&g$.test(i)){var h=g$.exec(i);if(h==null||e==null)o=void 0;else{var p=+h[1];o=e[1]+p}}else o=e?.[1];var m=[a,o];if(Ap(m))return e==null?m:E6(m,e,n)}}}var am=1e9,aPe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},dI,Vn=!0,ga="[DecimalError] ",Ud=ga+"Invalid argument: ",uI=ga+"Exponent out of range: ",om=Math.floor,ud=Math.pow,oPe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Di,Hr=1e7,jn=7,MK=9007199254740991,t1=om(MK/jn),Je={};Je.absoluteValue=Je.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Je.comparedTo=Je.cmp=function(t){var e,n,r,s,i=this;if(t=new i.constructor(t),i.s!==t.s)return i.s||-t.s;if(i.e!==t.e)return i.e>t.e^i.s<0?1:-1;for(r=i.d.length,s=t.d.length,e=0,n=r<s?r:s;e<n;++e)if(i.d[e]!==t.d[e])return i.d[e]>t.d[e]^i.s<0?1:-1;return r===s?0:r>s^i.s<0?1:-1};Je.decimalPlaces=Je.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*jn;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Je.dividedBy=Je.div=function(t){return Rl(this,new this.constructor(t))};Je.dividedToIntegerBy=Je.idiv=function(t){var e=this,n=e.constructor;return mn(Rl(e,new n(t),0,1),n.precision)};Je.equals=Je.eq=function(t){return!this.cmp(t)};Je.exponent=function(){return Nr(this)};Je.greaterThan=Je.gt=function(t){return this.cmp(t)>0};Je.greaterThanOrEqualTo=Je.gte=function(t){return this.cmp(t)>=0};Je.isInteger=Je.isint=function(){return this.e>this.d.length-2};Je.isNegative=Je.isneg=function(){return this.s<0};Je.isPositive=Je.ispos=function(){return this.s>0};Je.isZero=function(){return this.s===0};Je.lessThan=Je.lt=function(t){return this.cmp(t)<0};Je.lessThanOrEqualTo=Je.lte=function(t){return this.cmp(t)<1};Je.logarithm=Je.log=function(t){var e,n=this,r=n.constructor,s=r.precision,i=s+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(Di))throw Error(ga+"NaN");if(n.s<1)throw Error(ga+(n.s?"NaN":"-Infinity"));return n.eq(Di)?new r(0):(Vn=!1,e=Rl(M0(n,i),M0(t,i),i),Vn=!0,mn(e,s))};Je.minus=Je.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?$K(e,t):LK(e,(t.s=-t.s,t))};Je.modulo=Je.mod=function(t){var e,n=this,r=n.constructor,s=r.precision;if(t=new r(t),!t.s)throw Error(ga+"NaN");return n.s?(Vn=!1,e=Rl(n,t,0,1).times(t),Vn=!0,n.minus(e)):mn(new r(n),s)};Je.naturalExponential=Je.exp=function(){return FK(this)};Je.naturalLogarithm=Je.ln=function(){return M0(this)};Je.negated=Je.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Je.plus=Je.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?LK(e,t):$K(e,(t.s=-t.s,t))};Je.precision=Je.sd=function(t){var e,n,r,s=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Ud+t);if(e=Nr(s)+1,r=s.d.length-1,n=r*jn+1,r=s.d[r],r){for(;r%10==0;r/=10)n--;for(r=s.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};Je.squareRoot=Je.sqrt=function(){var t,e,n,r,s,i,a,o=this,c=o.constructor;if(o.s<1){if(!o.s)return new c(0);throw Error(ga+"NaN")}for(t=Nr(o),Vn=!1,s=Math.sqrt(+o),s==0||s==1/0?(e=jo(o.d),(e.length+t)%2==0&&(e+="0"),s=Math.sqrt(e),t=om((t+1)/2)-(t<0||t%2),s==1/0?e="5e"+t:(e=s.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new c(e)):r=new c(s.toString()),n=c.precision,s=a=n+3;;)if(i=r,r=i.plus(Rl(o,i,a+2)).times(.5),jo(i.d).slice(0,a)===(e=jo(r.d)).slice(0,a)){if(e=e.slice(a-3,a+1),s==a&&e=="4999"){if(mn(i,n+1,0),i.times(i).eq(o)){r=i;break}}else if(e!="9999")break;a+=4}return Vn=!0,mn(r,n)};Je.times=Je.mul=function(t){var e,n,r,s,i,a,o,c,d,h=this,p=h.constructor,m=h.d,y=(t=new p(t)).d;if(!h.s||!t.s)return new p(0);for(t.s*=h.s,n=h.e+t.e,c=m.length,d=y.length,c<d&&(i=m,m=y,y=i,a=c,c=d,d=a),i=[],a=c+d,r=a;r--;)i.push(0);for(r=d;--r>=0;){for(e=0,s=c+r;s>r;)o=i[s]+y[r]*m[s-r-1]+e,i[s--]=o%Hr|0,e=o/Hr|0;i[s]=(i[s]+e)%Hr|0}for(;!i[--a];)i.pop();return e?++n:i.shift(),t.d=i,t.e=n,Vn?mn(t,p.precision):t};Je.toDecimalPlaces=Je.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Vo(t,0,am),e===void 0?e=r.rounding:Vo(e,0,8),mn(n,t+Nr(n)+1,e))};Je.toExponential=function(t,e){var n,r=this,s=r.constructor;return t===void 0?n=oh(r,!0):(Vo(t,0,am),e===void 0?e=s.rounding:Vo(e,0,8),r=mn(new s(r),t+1,e),n=oh(r,!0,t+1)),n};Je.toFixed=function(t,e){var n,r,s=this,i=s.constructor;return t===void 0?oh(s):(Vo(t,0,am),e===void 0?e=i.rounding:Vo(e,0,8),r=mn(new i(s),t+Nr(s)+1,e),n=oh(r.abs(),!1,t+Nr(r)+1),s.isneg()&&!s.isZero()?"-"+n:n)};Je.toInteger=Je.toint=function(){var t=this,e=t.constructor;return mn(new e(t),Nr(t)+1,e.rounding)};Je.toNumber=function(){return+this};Je.toPower=Je.pow=function(t){var e,n,r,s,i,a,o=this,c=o.constructor,d=12,h=+(t=new c(t));if(!t.s)return new c(Di);if(o=new c(o),!o.s){if(t.s<1)throw Error(ga+"Infinity");return o}if(o.eq(Di))return o;if(r=c.precision,t.eq(Di))return mn(o,r);if(e=t.e,n=t.d.length-1,a=e>=n,i=o.s,a){if((n=h<0?-h:h)<=MK){for(s=new c(Di),e=Math.ceil(r/jn+4),Vn=!1;n%2&&(s=s.times(o),S6(s.d,e)),n=om(n/2),n!==0;)o=o.times(o),S6(o.d,e);return Vn=!0,t.s<0?new c(Di).div(s):mn(s,r)}}else if(i<0)throw Error(ga+"NaN");return i=i<0&&t.d[Math.max(e,n)]&1?-1:1,o.s=1,Vn=!1,s=t.times(M0(o,r+d)),Vn=!0,s=FK(s),s.s=i,s};Je.toPrecision=function(t,e){var n,r,s=this,i=s.constructor;return t===void 0?(n=Nr(s),r=oh(s,n<=i.toExpNeg||n>=i.toExpPos)):(Vo(t,1,am),e===void 0?e=i.rounding:Vo(e,0,8),s=mn(new i(s),t,e),n=Nr(s),r=oh(s,t<=n||n<=i.toExpNeg,t)),r};Je.toSignificantDigits=Je.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Vo(t,1,am),e===void 0?e=r.rounding:Vo(e,0,8)),mn(new r(n),t,e)};Je.toString=Je.valueOf=Je.val=Je.toJSON=Je[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Nr(t),n=t.constructor;return oh(t,e<=n.toExpNeg||e>=n.toExpPos)};function LK(t,e){var n,r,s,i,a,o,c,d,h=t.constructor,p=h.precision;if(!t.s||!e.s)return e.s||(e=new h(t)),Vn?mn(e,p):e;if(c=t.d,d=e.d,a=t.e,s=e.e,c=c.slice(),i=a-s,i){for(i<0?(r=c,i=-i,o=d.length):(r=d,s=a,o=c.length),a=Math.ceil(p/jn),o=a>o?a+1:o+1,i>o&&(i=o,r.length=1),r.reverse();i--;)r.push(0);r.reverse()}for(o=c.length,i=d.length,o-i<0&&(i=o,r=d,d=c,c=r),n=0;i;)n=(c[--i]=c[i]+d[i]+n)/Hr|0,c[i]%=Hr;for(n&&(c.unshift(n),++s),o=c.length;c[--o]==0;)c.pop();return e.d=c,e.e=s,Vn?mn(e,p):e}function Vo(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Ud+t)}function jo(t){var e,n,r,s=t.length-1,i="",a=t[0];if(s>0){for(i+=a,e=1;e<s;e++)r=t[e]+"",n=jn-r.length,n&&(i+=Mc(n)),i+=r;a=t[e],r=a+"",n=jn-r.length,n&&(i+=Mc(n))}else if(a===0)return"0";for(;a%10===0;)a/=10;return i+a}var Rl=(function(){function t(r,s){var i,a=0,o=r.length;for(r=r.slice();o--;)i=r[o]*s+a,r[o]=i%Hr|0,a=i/Hr|0;return a&&r.unshift(a),r}function e(r,s,i,a){var o,c;if(i!=a)c=i>a?1:-1;else for(o=c=0;o<i;o++)if(r[o]!=s[o]){c=r[o]>s[o]?1:-1;break}return c}function n(r,s,i){for(var a=0;i--;)r[i]-=a,a=r[i]<s[i]?1:0,r[i]=a*Hr+r[i]-s[i];for(;!r[0]&&r.length>1;)r.shift()}return function(r,s,i,a){var o,c,d,h,p,m,y,x,_,w,N,k,S,O,R,M,P,C,D=r.constructor,$=r.s==s.s?1:-1,F=r.d,U=s.d;if(!r.s)return new D(r);if(!s.s)throw Error(ga+"Division by zero");for(c=r.e-s.e,P=U.length,R=F.length,y=new D($),x=y.d=[],d=0;U[d]==(F[d]||0);)++d;if(U[d]>(F[d]||0)&&--c,i==null?k=i=D.precision:a?k=i+(Nr(r)-Nr(s))+1:k=i,k<0)return new D(0);if(k=k/jn+2|0,d=0,P==1)for(h=0,U=U[0],k++;(d<R||h)&&k--;d++)S=h*Hr+(F[d]||0),x[d]=S/U|0,h=S%U|0;else{for(h=Hr/(U[0]+1)|0,h>1&&(U=t(U,h),F=t(F,h),P=U.length,R=F.length),O=P,_=F.slice(0,P),w=_.length;w<P;)_[w++]=0;C=U.slice(),C.unshift(0),M=U[0],U[1]>=Hr/2&&++M;do h=0,o=e(U,_,P,w),o<0?(N=_[0],P!=w&&(N=N*Hr+(_[1]||0)),h=N/M|0,h>1?(h>=Hr&&(h=Hr-1),p=t(U,h),m=p.length,w=_.length,o=e(p,_,m,w),o==1&&(h--,n(p,P<m?C:U,m))):(h==0&&(o=h=1),p=U.slice()),m=p.length,m<w&&p.unshift(0),n(_,p,w),o==-1&&(w=_.length,o=e(U,_,P,w),o<1&&(h++,n(_,P<w?C:U,w))),w=_.length):o===0&&(h++,_=[0]),x[d++]=h,o&&_[0]?_[w++]=F[O]||0:(_=[F[O]],w=1);while((O++<R||_[0]!==void 0)&&k--)}return x[0]||x.shift(),y.e=c,mn(y,a?i+Nr(y)+1:i)}})();function FK(t,e){var n,r,s,i,a,o,c=0,d=0,h=t.constructor,p=h.precision;if(Nr(t)>16)throw Error(uI+Nr(t));if(!t.s)return new h(Di);for(Vn=!1,o=p,a=new h(.03125);t.abs().gte(.1);)t=t.times(a),d+=5;for(r=Math.log(ud(2,d))/Math.LN10*2+5|0,o+=r,n=s=i=new h(Di),h.precision=o;;){if(s=mn(s.times(t),o),n=n.times(++c),a=i.plus(Rl(s,n,o)),jo(a.d).slice(0,o)===jo(i.d).slice(0,o)){for(;d--;)i=mn(i.times(i),o);return h.precision=p,e==null?(Vn=!0,mn(i,p)):i}i=a}}function Nr(t){for(var e=t.e*jn,n=t.d[0];n>=10;n/=10)e++;return e}function Yk(t,e,n){if(e>t.LN10.sd())throw Vn=!0,n&&(t.precision=n),Error(ga+"LN10 precision limit exceeded");return mn(new t(t.LN10),e)}function Mc(t){for(var e="";t--;)e+="0";return e}function M0(t,e){var n,r,s,i,a,o,c,d,h,p=1,m=10,y=t,x=y.d,_=y.constructor,w=_.precision;if(y.s<1)throw Error(ga+(y.s?"NaN":"-Infinity"));if(y.eq(Di))return new _(0);if(e==null?(Vn=!1,d=w):d=e,y.eq(10))return e==null&&(Vn=!0),Yk(_,d);if(d+=m,_.precision=d,n=jo(x),r=n.charAt(0),i=Nr(y),Math.abs(i)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)y=y.times(t),n=jo(y.d),r=n.charAt(0),p++;i=Nr(y),r>1?(y=new _("0."+n),i++):y=new _(r+"."+n.slice(1))}else return c=Yk(_,d+2,w).times(i+""),y=M0(new _(r+"."+n.slice(1)),d-m).plus(c),_.precision=w,e==null?(Vn=!0,mn(y,w)):y;for(o=a=y=Rl(y.minus(Di),y.plus(Di),d),h=mn(y.times(y),d),s=3;;){if(a=mn(a.times(h),d),c=o.plus(Rl(a,new _(s),d)),jo(c.d).slice(0,d)===jo(o.d).slice(0,d))return o=o.times(2),i!==0&&(o=o.plus(Yk(_,d+2,w).times(i+""))),o=Rl(o,new _(p),d),_.precision=w,e==null?(Vn=!0,mn(o,w)):o;o=c,s+=2}}function N6(t,e){var n,r,s;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(s=e.length;e.charCodeAt(s-1)===48;)--s;if(e=e.slice(r,s),e){if(s-=r,n=n-r-1,t.e=om(n/jn),t.d=[],r=(n+1)%jn,n<0&&(r+=jn),r<s){for(r&&t.d.push(+e.slice(0,r)),s-=jn;r<s;)t.d.push(+e.slice(r,r+=jn));e=e.slice(r),r=jn-e.length}else r-=s;for(;r--;)e+="0";if(t.d.push(+e),Vn&&(t.e>t1||t.e<-t1))throw Error(uI+n)}else t.s=0,t.e=0,t.d=[0];return t}function mn(t,e,n){var r,s,i,a,o,c,d,h,p=t.d;for(a=1,i=p[0];i>=10;i/=10)a++;if(r=e-a,r<0)r+=jn,s=e,d=p[h=0];else{if(h=Math.ceil((r+1)/jn),i=p.length,h>=i)return t;for(d=i=p[h],a=1;i>=10;i/=10)a++;r%=jn,s=r-jn+a}if(n!==void 0&&(i=ud(10,a-s-1),o=d/i%10|0,c=e<0||p[h+1]!==void 0||d%i,c=n<4?(o||c)&&(n==0||n==(t.s<0?3:2)):o>5||o==5&&(n==4||c||n==6&&(r>0?s>0?d/ud(10,a-s):0:p[h-1])%10&1||n==(t.s<0?8:7))),e<1||!p[0])return c?(i=Nr(t),p.length=1,e=e-i-1,p[0]=ud(10,(jn-e%jn)%jn),t.e=om(-e/jn)||0):(p.length=1,p[0]=t.e=t.s=0),t;if(r==0?(p.length=h,i=1,h--):(p.length=h+1,i=ud(10,jn-r),p[h]=s>0?(d/ud(10,a-s)%ud(10,s)|0)*i:0),c)for(;;)if(h==0){(p[0]+=i)==Hr&&(p[0]=1,++t.e);break}else{if(p[h]+=i,p[h]!=Hr)break;p[h--]=0,i=1}for(r=p.length;p[--r]===0;)p.pop();if(Vn&&(t.e>t1||t.e<-t1))throw Error(uI+Nr(t));return t}function $K(t,e){var n,r,s,i,a,o,c,d,h,p,m=t.constructor,y=m.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new m(t),Vn?mn(e,y):e;if(c=t.d,p=e.d,r=e.e,d=t.e,c=c.slice(),a=d-r,a){for(h=a<0,h?(n=c,a=-a,o=p.length):(n=p,r=d,o=c.length),s=Math.max(Math.ceil(y/jn),o)+2,a>s&&(a=s,n.length=1),n.reverse(),s=a;s--;)n.push(0);n.reverse()}else{for(s=c.length,o=p.length,h=s<o,h&&(o=s),s=0;s<o;s++)if(c[s]!=p[s]){h=c[s]<p[s];break}a=0}for(h&&(n=c,c=p,p=n,e.s=-e.s),o=c.length,s=p.length-o;s>0;--s)c[o++]=0;for(s=p.length;s>a;){if(c[--s]<p[s]){for(i=s;i&&c[--i]===0;)c[i]=Hr-1;--c[i],c[s]+=Hr}c[s]-=p[s]}for(;c[--o]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(e.d=c,e.e=r,Vn?mn(e,y):e):new m(0)}function oh(t,e,n){var r,s=Nr(t),i=jo(t.d),a=i.length;return e?(n&&(r=n-a)>0?i=i.charAt(0)+"."+i.slice(1)+Mc(r):a>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+Mc(-s-1)+i,n&&(r=n-a)>0&&(i+=Mc(r))):s>=a?(i+=Mc(s+1-a),n&&(r=n-s-1)>0&&(i=i+"."+Mc(r))):((r=s+1)<a&&(i=i.slice(0,r)+"."+i.slice(r)),n&&(r=n-a)>0&&(s+1===a&&(i+="."),i+=Mc(r))),t.s<0?"-"+i:i}function S6(t,e){if(t.length>e)return t.length=e,!0}function VK(t){var e,n,r;function s(i){var a=this;if(!(a instanceof s))return new s(i);if(a.constructor=s,i instanceof s){a.s=i.s,a.e=i.e,a.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Ud+i);if(i>0)a.s=1;else if(i<0)i=-i,a.s=-1;else{a.s=0,a.e=0,a.d=[0];return}if(i===~~i&&i<1e7){a.e=0,a.d=[i];return}return N6(a,i.toString())}else if(typeof i!="string")throw Error(Ud+i);if(i.charCodeAt(0)===45?(i=i.slice(1),a.s=-1):a.s=1,oPe.test(i))N6(a,i);else throw Error(Ud+i)}if(s.prototype=Je,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=VK,s.config=s.set=lPe,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return s.config(t),s}function lPe(t){if(!t||typeof t!="object")throw Error(ga+"Object expected");var e,n,r,s=["precision",1,am,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<s.length;e+=3)if((r=t[n=s[e]])!==void 0)if(om(r)===r&&r>=s[e+1]&&r<=s[e+2])this[n]=r;else throw Error(Ud+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Ud+n+": "+r);return this}var dI=VK(aPe);Di=new dI(1);const an=dI;var cPe=t=>t,BK={},UK=t=>t===BK,k6=t=>function e(){return arguments.length===0||arguments.length===1&&UK(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},zK=(t,e)=>t===1?e:k6(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];var i=r.filter(a=>a!==BK).length;return i>=t?e(...r):zK(t-i,k6(function(){for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];var d=r.map(h=>UK(h)?o.shift():h);return e(...d,...o)}))}),U_=t=>zK(t.length,t),vj=(t,e)=>{for(var n=[],r=t;r<e;++r)n[r-t]=r;return n},uPe=U_((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(n=>e[n]).map(t)),dPe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return cPe;var s=n.reverse(),i=s[0],a=s.slice(1);return function(){return a.reduce((o,c)=>c(o),i(...arguments))}},xj=t=>Array.isArray(t)?t.reverse():t.split("").reverse().join(""),WK=t=>{var e=null,n=null;return function(){for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return e&&s.every((a,o)=>{var c;return a===((c=e)===null||c===void 0?void 0:c[o])})||(e=s,n=t(...s)),n}};function HK(t){var e;return t===0?e=1:e=Math.floor(new an(t).abs().log(10).toNumber())+1,e}function qK(t,e,n){for(var r=new an(t),s=0,i=[];r.lt(e)&&s<1e5;)i.push(r.toNumber()),r=r.add(n),s++;return i}U_((t,e,n)=>{var r=+t,s=+e;return r+n*(s-r)});U_((t,e,n)=>{var r=e-+t;return r=r||1/0,(n-t)/r});U_((t,e,n)=>{var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});var KK=t=>{var[e,n]=t,[r,s]=[e,n];return e>n&&([r,s]=[n,e]),[r,s]},YK=(t,e,n)=>{if(t.lte(0))return new an(0);var r=HK(t.toNumber()),s=new an(10).pow(r),i=t.div(s),a=r!==1?.05:.1,o=new an(Math.ceil(i.div(a).toNumber())).add(n).mul(a),c=o.mul(s);return e?new an(c.toNumber()):new an(Math.ceil(c.toNumber()))},hPe=(t,e,n)=>{var r=new an(1),s=new an(t);if(!s.isint()&&n){var i=Math.abs(t);i<1?(r=new an(10).pow(HK(t)-1),s=new an(Math.floor(s.div(r).toNumber())).mul(r)):i>1&&(s=new an(Math.floor(t)))}else t===0?s=new an(Math.floor((e-1)/2)):n||(s=new an(Math.floor(t)));var a=Math.floor((e-1)/2),o=dPe(uPe(c=>s.add(new an(c-a).mul(r)).toNumber()),vj);return o(0,e)},GK=function(e,n,r,s){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-e)/(r-1)))return{step:new an(0),tickMin:new an(0),tickMax:new an(0)};var a=YK(new an(n).sub(e).div(r-1),s,i),o;e<=0&&n>=0?o=new an(0):(o=new an(e).add(n).div(2),o=o.sub(new an(o).mod(a)));var c=Math.ceil(o.sub(e).div(a).toNumber()),d=Math.ceil(new an(n).sub(o).div(a).toNumber()),h=c+d+1;return h>r?GK(e,n,r,s,i+1):(h<r&&(d=n>0?d+(r-h):d,c=n>0?c:c+(r-h)),{step:a,tickMin:o.sub(new an(c).mul(a)),tickMax:o.add(new an(d).mul(a))})};function fPe(t){var[e,n]=t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(r,2),[a,o]=KK([e,n]);if(a===-1/0||o===1/0){var c=o===1/0?[a,...vj(0,r-1).map(()=>1/0)]:[...vj(0,r-1).map(()=>-1/0),o];return e>n?xj(c):c}if(a===o)return hPe(a,r,s);var{step:d,tickMin:h,tickMax:p}=GK(a,o,i,s,0),m=qK(h,p.add(new an(.1).mul(d)),d);return e>n?xj(m):m}function pPe(t,e){var[n,r]=t,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[i,a]=KK([n,r]);if(i===-1/0||a===1/0)return[n,r];if(i===a)return[i];var o=Math.max(e,2),c=YK(new an(a).sub(i).div(o-1),s,0),d=[...qK(new an(i),new an(a),c),a];return s===!1&&(d=d.map(h=>Math.round(h))),n>r?xj(d):d}var mPe=WK(fPe),gPe=WK(pPe),QK=t=>t.rootProps.maxBarSize,yPe=t=>t.rootProps.barGap,XK=t=>t.rootProps.barCategoryGap,vPe=t=>t.rootProps.barSize,Cy=t=>t.rootProps.stackOffset,hI=t=>t.options.chartName,fI=t=>t.rootProps.syncId,JK=t=>t.rootProps.syncMethod,pI=t=>t.options.eventEmitter,hl={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Pi={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},z_=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},xPe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:hl.angleAxisId,includeHidden:!1,name:void 0,reversed:hl.reversed,scale:hl.scale,tick:hl.tick,tickCount:void 0,ticks:void 0,type:hl.type,unit:void 0},bPe={allowDataOverflow:Pi.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Pi.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Pi.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Pi.scale,tick:Pi.tick,tickCount:Pi.tickCount,ticks:void 0,type:Pi.type,unit:void 0},wPe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:hl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:hl.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:hl.scale,tick:hl.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},_Pe={allowDataOverflow:Pi.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Pi.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Pi.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Pi.scale,tick:Pi.tick,tickCount:Pi.tickCount,ticks:void 0,type:"category",unit:void 0},mI=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?wPe:xPe,gI=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?_Pe:bPe,W_=t=>t.polarOptions,yI=ye([Xl,Jl,Mr],Dq),ZK=ye([W_,yI],(t,e)=>{if(t!=null)return Is(t.innerRadius,e,0)}),eY=ye([W_,yI],(t,e)=>{if(t!=null)return Is(t.outerRadius,e,e*.8)}),EPe=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:n}=t;return[e,n]},tY=ye([W_],EPe);ye([mI,tY],z_);var nY=ye([yI,ZK,eY],(t,e,n)=>{if(!(t==null||e==null||n==null))return[e,n]});ye([gI,nY],z_);var rY=ye([Yt,W_,ZK,eY,Xl,Jl],(t,e,n,r,s,i)=>{if(!(t!=="centric"&&t!=="radial"||e==null||n==null||r==null)){var{cx:a,cy:o,startAngle:c,endAngle:d}=e;return{cx:Is(a,s,s/2),cy:Is(o,i,i/2),innerRadius:n,outerRadius:r,startAngle:c,endAngle:d,clockWise:!1}}}),zn=(t,e)=>e,jy=(t,e,n)=>n;function vI(t){return t?.id}var Fr=t=>{var e=Yt(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},lm=t=>t.tooltip.settings.axisId,Zr=t=>{var e=Fr(t),n=lm(t);return Py(t,e,n)},sY=ye([Zr],t=>t?.dataKey);function iY(t,e,n){var{chartData:r=[]}=e,{allowDuplicatedCategory:s,dataKey:i}=n,a=new Map;return t.forEach(o=>{var c,d=(c=o.data)!==null&&c!==void 0?c:r;if(!(d==null||d.length===0)){var h=vI(o);d.forEach((p,m)=>{var y=i==null||s?m:String(Sn(p,i,null)),x=Sn(p,o.dataKey,0),_;a.has(y)?_=a.get(y):_={},Object.assign(_,{[h]:x}),a.set(y,_)})}}),Array.from(a.values())}function H_(t){return t.stackId!=null&&t.dataKey!=null}function T6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function n1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?T6(Object(n),!0).forEach(function(r){NPe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function NPe(t,e,n){return(e=SPe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function SPe(t){var e=kPe(t,"string");return typeof e=="symbol"?e:e+""}function kPe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var bj=[0,"auto"],Ti={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},aY=(t,e)=>t.cartesianAxis.xAxis[e],ec=(t,e)=>{var n=aY(t,e);return n??Ti},Ci={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:bj,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:wy},oY=(t,e)=>t.cartesianAxis.yAxis[e],tc=(t,e)=>{var n=oY(t,e);return n??Ci},TPe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},xI=(t,e)=>{var n=t.cartesianAxis.zAxis[e];return n??TPe},mr=(t,e,n)=>{switch(e){case"xAxis":return ec(t,n);case"yAxis":return tc(t,n);case"zAxis":return xI(t,n);case"angleAxis":return mI(t,n);case"radiusAxis":return gI(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},CPe=(t,e,n)=>{switch(e){case"xAxis":return ec(t,n);case"yAxis":return tc(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},Py=(t,e,n)=>{switch(e){case"xAxis":return ec(t,n);case"yAxis":return tc(t,n);case"angleAxis":return mI(t,n);case"radiusAxis":return gI(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},lY=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function bI(t,e){return n=>{switch(t){case"xAxis":return"xAxisId"in n&&n.xAxisId===e;case"yAxis":return"yAxisId"in n&&n.yAxisId===e;case"zAxis":return"zAxisId"in n&&n.zAxisId===e;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===e;default:return!1}}}var q_=t=>t.graphicalItems.cartesianItems,jPe=ye([zn,jy],bI),wI=(t,e,n)=>t.filter(n).filter(r=>e?.includeHidden===!0?!0:!r.hide),Ay=ye([q_,mr,jPe],wI),cY=ye([Ay],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(H_)),uY=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),dY=ye([Ay],uY),_I=t=>t.map(e=>e.data).filter(Boolean).flat(1),PPe=ye([Ay],_I),EI=(t,e)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:s}=e;return t.length>0?t:n.slice(r,s+1)},NI=ye([PPe,B_],EI),SI=(t,e,n)=>e?.dataKey!=null?t.map(r=>({value:Sn(r,e.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>t.map(s=>({value:Sn(s,r)}))):t.map(r=>({value:r})),K_=ye([NI,mr,Ay],SI);function hY(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function xh(t){return t.filter(e=>$o(e)||e instanceof Date).map(Number).filter(e=>Bi(e)===!1)}function APe(t,e,n){return!n||typeof e!="number"||Bi(e)?[]:n.length?xh(n.flatMap(r=>{var s=Sn(t,r.dataKey),i,a;if(Array.isArray(s)?[i,a]=s:i=a=s,!(!zi(i)||!zi(a)))return[e-i,e+a]})):[]}var IPe=ye([cY,B_,Zr],iY),fY=(t,e,n)=>{var r={},s=e.reduce((i,a)=>(a.stackId==null||(i[a.stackId]==null&&(i[a.stackId]=[]),i[a.stackId].push(a)),i),r);return Object.fromEntries(Object.entries(s).map(i=>{var[a,o]=i,c=o.map(vI);return[a,{stackedData:Gke(t,c,n),graphicalItems:o}]}))},wj=ye([IPe,cY,Cy],fY),pY=(t,e,n)=>{var{dataStartIndex:r,dataEndIndex:s}=e;if(n!=="zAxis"){var i=eTe(t,r,s);if(!(i!=null&&i[0]===0&&i[1]===0))return i}},DPe=ye([wj,Tu,zn],pY),mY=(t,e,n,r,s)=>n.length>0?t.flatMap(i=>n.flatMap(a=>{var o,c,d=(o=r[a.id])===null||o===void 0?void 0:o.filter(p=>hY(s,p)),h=Sn(i,(c=e.dataKey)!==null&&c!==void 0?c:a.dataKey);return{value:h,errorDomain:APe(i,h,d)}})).filter(Boolean):e?.dataKey!=null?t.map(i=>({value:Sn(i,e.dataKey),errorDomain:[]})):t.map(i=>({value:i,errorDomain:[]})),Y_=t=>t.errorBars,gY=(t,e,n)=>t.flatMap(r=>e[r.id]).filter(Boolean).filter(r=>hY(n,r));ye([dY,Y_,zn],gY);var RPe=ye([NI,mr,dY,Y_,zn],mY);function OPe(t){var{value:e}=t;if($o(e)||e instanceof Date)return e}var C6=t=>{var e=t.flatMap(r=>[r.value,r.errorDomain]).flat(1),n=xh(e);if(n.length!==0)return[Math.min(...n),Math.max(...n)]},MPe=(t,e,n)=>{var r=t.map(OPe).filter(s=>s!=null);return n&&(e.dataKey==null||e.allowDuplicatedCategory&&TH(r))?tK(0,t.length):e.allowDuplicatedCategory?r:Array.from(new Set(r))},kI=t=>{var e;if(t==null||!("domain"in t))return bj;if(t.domain!=null)return t.domain;if(t.ticks!=null){if(t.type==="number"){var n=xh(t.ticks);return[Math.min(...n),Math.max(...n)]}if(t.type==="category")return t.ticks.map(String)}return(e=t?.domain)!==null&&e!==void 0?e:bj},r1=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var s=n.filter(Boolean);if(s.length!==0){var i=s.flat(),a=Math.min(...i),o=Math.max(...i);return[a,o]}},yY=t=>t.referenceElements.dots,cm=(t,e,n)=>t.filter(r=>r.ifOverflow==="extendDomain").filter(r=>e==="xAxis"?r.xAxisId===n:r.yAxisId===n),LPe=ye([yY,zn,jy],cm),vY=t=>t.referenceElements.areas,FPe=ye([vY,zn,jy],cm),xY=t=>t.referenceElements.lines,$Pe=ye([xY,zn,jy],cm),bY=(t,e)=>{var n=xh(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},VPe=ye(LPe,zn,bY),wY=(t,e)=>{var n=xh(t.flatMap(r=>[e==="xAxis"?r.x1:r.y1,e==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},BPe=ye([FPe,zn],wY),_Y=(t,e)=>{var n=xh(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},UPe=ye($Pe,zn,_Y),zPe=ye(VPe,UPe,BPe,(t,e,n)=>r1(t,n,e)),EY=ye([mr],kI),TI=(t,e,n,r,s,i,a)=>{var o=sPe(e,t.allowDataOverflow);if(o!=null)return o;var c=i==="vertical"&&a==="xAxis"||i==="horizontal"&&a==="yAxis",d=c?r1(n,s,C6(r)):r1(s,C6(r));return iPe(e,d,t.allowDataOverflow)},WPe=ye([mr,EY,DPe,RPe,zPe,Yt,zn],TI),HPe=[0,1],CI=(t,e,n,r,s,i,a)=>{if(!((t==null||n==null||n.length===0)&&a===void 0)){var{dataKey:o,type:c}=t,d=Eu(e,i);return d&&o==null?tK(0,n.length):c==="category"?MPe(r,t,d):s==="expand"?HPe:a}},jI=ye([mr,Yt,NI,K_,Cy,zn,WPe],CI),NY=(t,e,n,r,s)=>{if(t!=null){var{scale:i,type:a}=t;if(i==="auto")return e==="radial"&&s==="radiusAxis"?"band":e==="radial"&&s==="angleAxis"?"linear":a==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":a==="category"?"band":"linear";if(typeof i=="string"){var o="scale".concat(vy(i));return o in Ng?o:"point"}}},um=ye([mr,Yt,lY,hI,zn],NY);function qPe(t){if(t!=null){if(t in Ng)return Ng[t]();var e="scale".concat(vy(t));if(e in Ng)return Ng[e]()}}function PI(t,e,n,r){if(!(n==null||r==null)){if(typeof t.scale=="function")return t.scale.copy().domain(n).range(r);var s=qPe(e);if(s!=null){var i=s.domain(n).range(r);return Wke(i),i}}}var AI=(t,e,n)=>{var r=kI(e);if(!(n!=="auto"&&n!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&Ap(t))return mPe(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&Ap(t))return gPe(t,e.tickCount,e.allowDecimals)}},II=ye([jI,Py,um],AI),DI=(t,e,n,r)=>{if(r!=="angleAxis"&&t?.type==="number"&&Ap(e)&&Array.isArray(n)&&n.length>0){var s=e[0],i=n[0],a=e[1],o=n[n.length-1];return[Math.min(s,i),Math.max(a,o)]}return e},KPe=ye([mr,jI,II,zn],DI),YPe=ye(K_,mr,(t,e)=>{if(!(!e||e.type!=="number")){var n=1/0,r=Array.from(xh(t.map(o=>o.value))).sort((o,c)=>o-c);if(r.length<2)return 1/0;var s=r[r.length-1]-r[0];if(s===0)return 1/0;for(var i=0;i<r.length-1;i++){var a=r[i+1]-r[i];n=Math.min(n,a)}return n/s}}),SY=ye(YPe,Yt,XK,Mr,(t,e,n,r)=>r,(t,e,n,r,s)=>{if(!zi(t))return 0;var i=e==="vertical"?r.height:r.width;if(s==="gap")return t*i/2;if(s==="no-gap"){var a=Is(n,t*i),o=t*i/2;return o-a-(o-a)/i*a}return 0}),GPe=(t,e)=>{var n=ec(t,e);return n==null||typeof n.padding!="string"?0:SY(t,"xAxis",e,n.padding)},QPe=(t,e)=>{var n=tc(t,e);return n==null||typeof n.padding!="string"?0:SY(t,"yAxis",e,n.padding)},XPe=ye(ec,GPe,(t,e)=>{var n,r;if(t==null)return{left:0,right:0};var{padding:s}=t;return typeof s=="string"?{left:e,right:e}:{left:((n=s.left)!==null&&n!==void 0?n:0)+e,right:((r=s.right)!==null&&r!==void 0?r:0)+e}}),JPe=ye(tc,QPe,(t,e)=>{var n,r;if(t==null)return{top:0,bottom:0};var{padding:s}=t;return typeof s=="string"?{top:e,bottom:e}:{top:((n=s.top)!==null&&n!==void 0?n:0)+e,bottom:((r=s.bottom)!==null&&r!==void 0?r:0)+e}}),ZPe=ye([Mr,XPe,D_,I_,(t,e,n)=>n],(t,e,n,r,s)=>{var{padding:i}=r;return s?[i.left,n.width-i.right]:[t.left+e.left,t.left+t.width-e.right]}),eAe=ye([Mr,Yt,JPe,D_,I_,(t,e,n)=>n],(t,e,n,r,s,i)=>{var{padding:a}=s;return i?[r.height-a.bottom,a.top]:e==="horizontal"?[t.top+t.height-n.bottom,t.top+n.top]:[t.top+n.top,t.top+t.height-n.bottom]}),Iy=(t,e,n,r)=>{var s;switch(e){case"xAxis":return ZPe(t,n,r);case"yAxis":return eAe(t,n,r);case"zAxis":return(s=xI(t,n))===null||s===void 0?void 0:s.range;case"angleAxis":return tY(t);case"radiusAxis":return nY(t,n);default:return}},kY=ye([mr,Iy],z_),dm=ye([mr,um,KPe,kY],PI);ye([Ay,Y_,zn],gY);function TY(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var G_=(t,e)=>e,Q_=(t,e,n)=>n,tAe=ye(P_,G_,Q_,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(TY)),nAe=ye(A_,G_,Q_,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(TY)),CY=(t,e)=>({width:t.width,height:e.height}),rAe=(t,e)=>{var n=typeof e.width=="number"?e.width:wy;return{width:n,height:t.height}},jY=ye(Mr,ec,CY),sAe=(t,e,n)=>{switch(e){case"top":return t.top;case"bottom":return n-t.bottom;default:return 0}},iAe=(t,e,n)=>{switch(e){case"left":return t.left;case"right":return n-t.right;default:return 0}},aAe=ye(Jl,Mr,tAe,G_,Q_,(t,e,n,r,s)=>{var i={},a;return n.forEach(o=>{var c=CY(e,o);a==null&&(a=sAe(e,r,t));var d=r==="top"&&!s||r==="bottom"&&s;i[o.id]=a-Number(d)*c.height,a+=(d?-1:1)*c.height}),i}),oAe=ye(Xl,Mr,nAe,G_,Q_,(t,e,n,r,s)=>{var i={},a;return n.forEach(o=>{var c=rAe(e,o);a==null&&(a=iAe(e,r,t));var d=r==="left"&&!s||r==="right"&&s;i[o.id]=a-Number(d)*c.width,a+=(d?-1:1)*c.width}),i}),lAe=(t,e)=>{var n=ec(t,e);if(n!=null)return aAe(t,n.orientation,n.mirror)},cAe=ye([Mr,ec,lAe,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var s=n?.[r];return s==null?{x:t.left,y:0}:{x:t.left,y:s}}}),uAe=(t,e)=>{var n=tc(t,e);if(n!=null)return oAe(t,n.orientation,n.mirror)},dAe=ye([Mr,tc,uAe,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var s=n?.[r];return s==null?{x:0,y:t.top}:{x:s,y:t.top}}}),PY=ye(Mr,tc,(t,e)=>{var n=typeof e.width=="number"?e.width:wy;return{width:n,height:t.height}}),j6=(t,e,n)=>{switch(e){case"xAxis":return jY(t,n).width;case"yAxis":return PY(t,n).height;default:return}},AY=(t,e,n,r)=>{if(n!=null){var{allowDuplicatedCategory:s,type:i,dataKey:a}=n,o=Eu(t,r),c=e.map(d=>d.value);if(a&&o&&i==="category"&&s&&TH(c))return c}},RI=ye([Yt,K_,mr,zn],AY),IY=(t,e,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:s,scale:i}=n,a=Eu(t,r);if(a&&(s==="number"||i!=="auto"))return e.map(o=>o.value)}},OI=ye([Yt,K_,Py,zn],IY),P6=ye([Yt,CPe,um,dm,RI,OI,Iy,II,zn],(t,e,n,r,s,i,a,o,c)=>{if(e==null)return null;var d=Eu(t,c);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:c,categoricalDomain:i,duplicateDomain:s,isCategorical:d,niceTicks:o,range:a,realScaleType:n,scale:r}}),hAe=(t,e,n,r,s,i,a,o,c)=>{if(!(e==null||r==null)){var d=Eu(t,c),{type:h,ticks:p,tickCount:m}=e,y=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,x=h==="category"&&r.bandwidth?r.bandwidth()/y:0;x=c==="angleAxis"&&i!=null&&i.length>=2?Xr(i[0]-i[1])*2*x:x;var _=p||s;if(_){var w=_.map((N,k)=>{var S=a?a.indexOf(N):N;return{index:k,coordinate:r(S)+x,value:N,offset:x}});return w.filter(N=>!Bi(N.coordinate))}return d&&o?o.map((N,k)=>({coordinate:r(N)+x,value:N,index:k,offset:x})):r.ticks?r.ticks(m).map(N=>({coordinate:r(N)+x,value:N,offset:x})):r.domain().map((N,k)=>({coordinate:r(N)+x,value:a?a[N]:N,index:k,offset:x}))}},DY=ye([Yt,Py,um,dm,II,Iy,RI,OI,zn],hAe),fAe=(t,e,n,r,s,i,a)=>{if(!(e==null||n==null||r==null||r[0]===r[1])){var o=Eu(t,a),{tickCount:c}=e,d=0;return d=a==="angleAxis"&&r?.length>=2?Xr(r[0]-r[1])*2*d:d,o&&i?i.map((h,p)=>({coordinate:n(h)+d,value:h,index:p,offset:d})):n.ticks?n.ticks(c).map(h=>({coordinate:n(h)+d,value:h,offset:d})):n.domain().map((h,p)=>({coordinate:n(h)+d,value:s?s[h]:h,index:p,offset:d}))}},du=ye([Yt,Py,dm,Iy,RI,OI,zn],fAe),hu=ye(mr,dm,(t,e)=>{if(!(t==null||e==null))return n1(n1({},t),{},{scale:e})}),pAe=ye([mr,um,jI,kY],PI);ye((t,e,n)=>xI(t,n),pAe,(t,e)=>{if(!(t==null||e==null))return n1(n1({},t),{},{scale:e})});var mAe=ye([Yt,P_,A_],(t,e,n)=>{switch(t){case"horizontal":return e.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),RY=t=>t.options.defaultTooltipEventType,OY=t=>t.options.validateTooltipEventTypes;function MY(t,e,n){if(t==null)return e;var r=t?"axis":"item";return n==null?e:n.includes(r)?r:e}function MI(t,e){var n=RY(t),r=OY(t);return MY(e,n,r)}function gAe(t){return st(e=>MI(e,t))}var LY=(t,e)=>{var n,r=Number(e);if(!(Bi(r)||e==null))return r>=0?t==null||(n=t[r])===null||n===void 0?void 0:n.value:void 0},yAe=t=>t.tooltip.settings,zc={active:!1,index:null,dataKey:void 0,coordinate:void 0},vAe={itemInteraction:{click:zc,hover:zc},axisInteraction:{click:zc,hover:zc},keyboardInteraction:zc,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},FY=Wi({name:"tooltip",initialState:vAe,reducers:{addTooltipEntrySettings(t,e){t.tooltipItemPayloads.push(e.payload)},removeTooltipEntrySettings(t,e){var n=Dl(t).tooltipItemPayloads.indexOf(e.payload);n>-1&&t.tooltipItemPayloads.splice(n,1)},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate,t.keyboardInteraction.dataKey=e.payload.activeDataKey}}}),{addTooltipEntrySettings:xAe,removeTooltipEntrySettings:bAe,setTooltipSettingsState:wAe,setActiveMouseOverItemIndex:$Y,mouseLeaveItem:_Ae,mouseLeaveChart:VY,setActiveClickItemIndex:EAe,setMouseOverAxisIndex:BY,setMouseClickAxisIndex:NAe,setSyncInteraction:_j,setKeyboardInteraction:Ej}=FY.actions,SAe=FY.reducer;function A6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function jx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?A6(Object(n),!0).forEach(function(r){kAe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kAe(t,e,n){return(e=TAe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function TAe(t){var e=CAe(t,"string");return typeof e=="symbol"?e:e+""}function CAe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jAe(t,e,n){return e==="axis"?n==="click"?t.axisInteraction.click:t.axisInteraction.hover:n==="click"?t.itemInteraction.click:t.itemInteraction.hover}function PAe(t){return t.index!=null}var UY=(t,e,n,r)=>{if(e==null)return zc;var s=jAe(t,e,n);if(s==null)return zc;if(s.active)return s;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var i=t.settings.active===!0;if(PAe(s)){if(i)return jx(jx({},s),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r};return jx(jx({},zc),{},{coordinate:s.coordinate})},LI=(t,e)=>{var n=t?.index;if(n==null)return null;var r=Number(n);if(!zi(r))return n;var s=0,i=1/0;return e.length>0&&(i=e.length-1),String(Math.max(s,Math.min(r,i)))},zY=(t,e,n,r,s,i,a,o)=>{if(!(i==null||o==null)){var c=a[0],d=c==null?void 0:o(c.positions,i);if(d!=null)return d;var h=s?.[Number(i)];if(h)switch(n){case"horizontal":return{x:h.coordinate,y:(r.top+e)/2};default:return{x:(r.left+t)/2,y:h.coordinate}}}},WY=(t,e,n,r)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var s;return n==="hover"?s=t.itemInteraction.hover.dataKey:s=t.itemInteraction.click.dataKey,s==null&&r!=null?[t.tooltipItemPayloads[0]]:t.tooltipItemPayloads.filter(i=>{var a;return((a=i.settings)===null||a===void 0?void 0:a.dataKey)===s})},Dy=t=>t.options.tooltipPayloadSearcher,hm=t=>t.tooltip;function I6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function D6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?I6(Object(n),!0).forEach(function(r){AAe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function AAe(t,e,n){return(e=IAe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function IAe(t){var e=DAe(t,"string");return typeof e=="symbol"?e:e+""}function DAe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function RAe(t,e){return t??e}var HY=(t,e,n,r,s,i,a)=>{if(!(e==null||i==null)){var{chartData:o,computedData:c,dataStartIndex:d,dataEndIndex:h}=n,p=[];return t.reduce((m,y)=>{var x,{dataDefinedOnItem:_,settings:w}=y,N=RAe(_,o),k=Array.isArray(N)?Rq(N,d,h):N,S=(x=w?.dataKey)!==null&&x!==void 0?x:r,O=w?.nameKey,R;if(r&&Array.isArray(k)&&!Array.isArray(k[0])&&a==="axis"?R=CH(k,r,s):R=i(k,e,c,O),Array.isArray(R))R.forEach(P=>{var C=D6(D6({},w),{},{name:P.name,unit:P.unit,color:void 0,fill:void 0});m.push(y$({tooltipEntrySettings:C,dataKey:P.dataKey,payload:P.payload,value:Sn(P.payload,P.dataKey),name:P.name}))});else{var M;m.push(y$({tooltipEntrySettings:w,dataKey:S,payload:R,value:Sn(R,S),name:(M=Sn(R,O))!==null&&M!==void 0?M:w?.name}))}return m},p)}},FI=ye([Zr,Yt,lY,hI,Fr],NY),OAe=ye([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),MAe=ye([Fr,lm],bI),Ry=ye([OAe,Zr,MAe],wI),LAe=ye([Ry],t=>t.filter(H_)),FAe=ye([Ry],_I),fm=ye([FAe,Tu],EI),$Ae=ye([LAe,Tu,Zr],iY),$I=ye([fm,Zr,Ry],SI),VAe=ye([Zr],kI),BAe=ye([Ry],t=>t.filter(H_)),UAe=ye([$Ae,BAe,Cy],fY),zAe=ye([UAe,Tu,Fr],pY),WAe=ye([Ry],uY),HAe=ye([fm,Zr,WAe,Y_,Fr],mY),qAe=ye([yY,Fr,lm],cm),KAe=ye([qAe,Fr],bY),YAe=ye([vY,Fr,lm],cm),GAe=ye([YAe,Fr],wY),QAe=ye([xY,Fr,lm],cm),XAe=ye([QAe,Fr],_Y),JAe=ye([KAe,XAe,GAe],r1),ZAe=ye([Zr,VAe,zAe,HAe,JAe,Yt,Fr],TI),qY=ye([Zr,Yt,fm,$I,Cy,Fr,ZAe],CI),eIe=ye([qY,Zr,FI],AI),tIe=ye([Zr,qY,eIe,Fr],DI),KY=t=>{var e=Fr(t),n=lm(t),r=!1;return Iy(t,e,n,r)},YY=ye([Zr,KY],z_),GY=ye([Zr,FI,tIe,YY],PI),nIe=ye([Yt,$I,Zr,Fr],AY),rIe=ye([Yt,$I,Zr,Fr],IY),sIe=(t,e,n,r,s,i,a,o)=>{if(e){var{type:c}=e,d=Eu(t,o);if(r){var h=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,p=c==="category"&&r.bandwidth?r.bandwidth()/h:0;return p=o==="angleAxis"&&s!=null&&s?.length>=2?Xr(s[0]-s[1])*2*p:p,d&&a?a.map((m,y)=>({coordinate:r(m)+p,value:m,index:y,offset:p})):r.domain().map((m,y)=>({coordinate:r(m)+p,value:i?i[m]:m,index:y,offset:p}))}}},nc=ye([Yt,Zr,FI,GY,KY,nIe,rIe,Fr],sIe),VI=ye([RY,OY,yAe],(t,e,n)=>MY(n.shared,t,e)),QY=t=>t.tooltip.settings.trigger,BI=t=>t.tooltip.settings.defaultIndex,X_=ye([hm,VI,QY,BI],UY),fu=ye([X_,fm],LI),XY=ye([nc,fu],LY),JY=ye([X_],t=>{if(t)return t.dataKey}),ZY=ye([hm,VI,QY,BI],WY),iIe=ye([Xl,Jl,Yt,Mr,nc,BI,ZY,Dy],zY),aIe=ye([X_,iIe],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),oIe=ye([X_],t=>t.active),lIe=ye([ZY,fu,Tu,sY,XY,Dy,VI],HY),cIe=ye([lIe],t=>{if(t!=null){var e=t.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(e))}});function R6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function O6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?R6(Object(n),!0).forEach(function(r){uIe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function uIe(t,e,n){return(e=dIe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dIe(t){var e=hIe(t,"string");return typeof e=="symbol"?e:e+""}function hIe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var fIe=()=>st(Zr),pIe=()=>{var t=fIe(),e=st(nc),n=st(GY);return P0(O6(O6({},t),{},{scale:n}),e)},mIe=()=>st(hI),UI=(t,e)=>e,eG=(t,e,n)=>n,zI=(t,e,n,r)=>r,gIe=ye(nc,t=>N_(t,e=>e.coordinate)),WI=ye([hm,UI,eG,zI],UY),tG=ye([WI,fm],LI),yIe=(t,e,n)=>{if(e!=null){var r=hm(t);return e==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},nG=ye([hm,UI,eG,zI],WY),s1=ye([Xl,Jl,Yt,Mr,nc,zI,nG,Dy],zY),vIe=ye([WI,s1],(t,e)=>{var n;return(n=t.coordinate)!==null&&n!==void 0?n:e}),rG=ye(nc,tG,LY),xIe=ye([nG,tG,Tu,sY,rG,Dy,UI],HY),bIe=ye([WI],t=>({isActive:t.active,activeIndex:t.index})),wIe=(t,e,n,r,s,i,a,o)=>{if(!(!t||!e||!r||!s||!i)){var c=tTe(t.chartX,t.chartY,e,n,o);if(c){var d=rTe(c,e),h=Uke(d,a,i,r,s),p=nTe(e,i,h,c);return{activeIndex:String(h),activeCoordinate:p}}}};function Nj(){return Nj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Nj.apply(null,arguments)}function M6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Px(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?M6(Object(n),!0).forEach(function(r){_Ie(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _Ie(t,e,n){return(e=EIe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function EIe(t){var e=NIe(t,"string");return typeof e=="symbol"?e:e+""}function NIe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function SIe(t){var{coordinate:e,payload:n,index:r,offset:s,tooltipAxisBandSize:i,layout:a,cursor:o,tooltipEventType:c,chartName:d}=t,h=e,p=n,m=r;if(!o||!h||d!=="ScatterChart"&&c!=="axis")return null;var y,x;if(d==="ScatterChart")y=h,x=WTe;else if(d==="BarChart")y=HTe(a,h,s,i),x=Xq;else if(a==="radial"){var{cx:_,cy:w,radius:N,startAngle:k,endAngle:S}=Jq(h);y={cx:_,cy:w,startAngle:k,endAngle:S,innerRadius:N,outerRadius:N},x=eK}else y={points:NCe(a,h,s)},x=$A;var O=typeof o=="object"&&"className"in o?o.className:void 0,R=Px(Px(Px(Px({stroke:"#ccc",pointerEvents:"none"},s),y),Qn(o,!1)),{},{payload:p,payloadIndex:m,className:Et("recharts-tooltip-cursor",O)});return v.isValidElement(o)?v.cloneElement(o,R):v.createElement(x,R)}function kIe(t){var e=pIe(),n=Vq(),r=R_(),s=mIe();return v.createElement(SIe,Nj({},t,{coordinate:t.coordinate,index:t.index,payload:t.payload,offset:n,layout:r,tooltipAxisBandSize:e,chartName:s}))}var sG=v.createContext(null),TIe=()=>v.useContext(sG),Gk={exports:{}},L6;function CIe(){return L6||(L6=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(c,d,h){this.fn=c,this.context=d,this.once=h||!1}function i(c,d,h,p,m){if(typeof h!="function")throw new TypeError("The listener must be a function");var y=new s(h,p||c,m),x=n?n+d:d;return c._events[x]?c._events[x].fn?c._events[x]=[c._events[x],y]:c._events[x].push(y):(c._events[x]=y,c._eventsCount++),c}function a(c,d){--c._eventsCount===0?c._events=new r:delete c._events[d]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var d=[],h,p;if(this._eventsCount===0)return d;for(p in h=this._events)e.call(h,p)&&d.push(n?p.slice(1):p);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(h)):d},o.prototype.listeners=function(d){var h=n?n+d:d,p=this._events[h];if(!p)return[];if(p.fn)return[p.fn];for(var m=0,y=p.length,x=new Array(y);m<y;m++)x[m]=p[m].fn;return x},o.prototype.listenerCount=function(d){var h=n?n+d:d,p=this._events[h];return p?p.fn?1:p.length:0},o.prototype.emit=function(d,h,p,m,y,x){var _=n?n+d:d;if(!this._events[_])return!1;var w=this._events[_],N=arguments.length,k,S;if(w.fn){switch(w.once&&this.removeListener(d,w.fn,void 0,!0),N){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,h),!0;case 3:return w.fn.call(w.context,h,p),!0;case 4:return w.fn.call(w.context,h,p,m),!0;case 5:return w.fn.call(w.context,h,p,m,y),!0;case 6:return w.fn.call(w.context,h,p,m,y,x),!0}for(S=1,k=new Array(N-1);S<N;S++)k[S-1]=arguments[S];w.fn.apply(w.context,k)}else{var O=w.length,R;for(S=0;S<O;S++)switch(w[S].once&&this.removeListener(d,w[S].fn,void 0,!0),N){case 1:w[S].fn.call(w[S].context);break;case 2:w[S].fn.call(w[S].context,h);break;case 3:w[S].fn.call(w[S].context,h,p);break;case 4:w[S].fn.call(w[S].context,h,p,m);break;default:if(!k)for(R=1,k=new Array(N-1);R<N;R++)k[R-1]=arguments[R];w[S].fn.apply(w[S].context,k)}}return!0},o.prototype.on=function(d,h,p){return i(this,d,h,p,!1)},o.prototype.once=function(d,h,p){return i(this,d,h,p,!0)},o.prototype.removeListener=function(d,h,p,m){var y=n?n+d:d;if(!this._events[y])return this;if(!h)return a(this,y),this;var x=this._events[y];if(x.fn)x.fn===h&&(!m||x.once)&&(!p||x.context===p)&&a(this,y);else{for(var _=0,w=[],N=x.length;_<N;_++)(x[_].fn!==h||m&&!x[_].once||p&&x[_].context!==p)&&w.push(x[_]);w.length?this._events[y]=w.length===1?w[0]:w:a(this,y)}return this},o.prototype.removeAllListeners=function(d){var h;return d?(h=n?n+d:d,this._events[h]&&a(this,h)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,t.exports=o})(Gk)),Gk.exports}var jIe=CIe();const PIe=Xa(jIe);var L0=new PIe,Sj="recharts.syncEvent.tooltip",F6="recharts.syncEvent.brush";function HI(t,e){if(e){var n=Number.parseInt(e,10);if(!Bi(n))return t?.[n]}}var AIe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},iG=Wi({name:"options",initialState:AIe,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),IIe=iG.reducer,{createEventEmitter:DIe}=iG.actions;function RIe(t){return t.tooltip.syncInteraction}var OIe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},aG=Wi({name:"chartData",initialState:OIe,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:n,endIndex:r}=e.payload;n!=null&&(t.dataStartIndex=n),r!=null&&(t.dataEndIndex=r)}}}),{setChartData:$6,setDataStartEndIndexes:MIe,setComputedData:Y5e}=aG.actions,LIe=aG.reducer,FIe=["x","y"];function V6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Zu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?V6(Object(n),!0).forEach(function(r){$Ie(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $Ie(t,e,n){return(e=VIe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function VIe(t){var e=BIe(t,"string");return typeof e=="symbol"?e:e+""}function BIe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function UIe(t,e){if(t==null)return{};var n,r,s=zIe(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function zIe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var oG=()=>{};function WIe(){var t=st(fI),e=st(pI),n=pr(),r=st(JK),s=st(nc),i=R_(),a=FA(),o=st(c=>c.rootProps.className);v.useEffect(()=>{if(t==null)return oG;var c=(d,h,p)=>{if(e!==p&&t===d){if(r==="index"){var m;if(a&&h!==null&&h!==void 0&&(m=h.payload)!==null&&m!==void 0&&m.coordinate){var y=h.payload.coordinate,{x,y:_}=y,w=UIe(y,FIe),N=Zu(Zu(Zu({},w),typeof x=="number"&&{x:Math.max(a.x,Math.min(x,a.x+a.width))}),typeof _=="number"&&{y:Math.max(a.y,Math.min(_,a.y+a.height))}),k=Zu(Zu({},h),{},{payload:Zu(Zu({},h.payload),{},{coordinate:N})});n(k)}else n(h);return}if(s!=null){var S;if(typeof r=="function"){var O={activeTooltipIndex:h.payload.index==null?void 0:Number(h.payload.index),isTooltipActive:h.payload.active,activeIndex:h.payload.index==null?void 0:Number(h.payload.index),activeLabel:h.payload.label,activeDataKey:h.payload.dataKey,activeCoordinate:h.payload.coordinate},R=r(s,O);S=s[R]}else r==="value"&&(S=s.find(I=>String(I.value)===h.payload.label));var{coordinate:M}=h.payload;if(S==null||h.payload.active===!1||M==null||a==null){n(_j({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:P,y:C}=M,D=Math.min(P,a.x+a.width),$=Math.min(C,a.y+a.height),F={x:i==="horizontal"?S.coordinate:D,y:i==="horizontal"?$:S.coordinate},U=_j({active:h.payload.active,coordinate:F,dataKey:h.payload.dataKey,index:String(S.index),label:h.payload.label});n(U)}}};return L0.on(Sj,c),()=>{L0.off(Sj,c)}},[o,n,e,t,r,s,i,a])}function HIe(){var t=st(fI),e=st(pI),n=pr();v.useEffect(()=>{if(t==null)return oG;var r=(s,i,a)=>{e!==a&&t===s&&n(MIe(i))};return L0.on(F6,r),()=>{L0.off(F6,r)}},[n,e,t])}function qIe(){var t=pr();v.useEffect(()=>{t(DIe())},[t]),WIe(),HIe()}function KIe(t,e,n,r,s,i){var a=st(m=>yIe(m,t,e)),o=st(pI),c=st(fI),d=st(JK),h=st(RIe),p=h?.active;v.useEffect(()=>{if(!p&&c!=null&&o!=null){var m=_j({active:i,coordinate:n,dataKey:a,index:s,label:typeof r=="number"?String(r):r});L0.emit(Sj,c,m,o)}},[p,n,a,s,r,o,c,d,i])}function B6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function U6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?B6(Object(n),!0).forEach(function(r){YIe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function YIe(t,e,n){return(e=GIe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function GIe(t){var e=QIe(t,"string");return typeof e=="symbol"?e:e+""}function QIe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function XIe(t){return t.dataKey}function JIe(t,e){return v.isValidElement(t)?v.cloneElement(t,e):typeof t=="function"?v.createElement(t,e):v.createElement(_Te,e)}var z6=[],ZIe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Nu.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Ip(t){var e=ps(t,ZIe),{active:n,allowEscapeViewBox:r,animationDuration:s,animationEasing:i,content:a,filterNull:o,isAnimationActive:c,offset:d,payloadUniqBy:h,position:p,reverseDirection:m,useTranslate3d:y,wrapperStyle:x,cursor:_,shared:w,trigger:N,defaultIndex:k,portal:S,axisId:O}=e,R=pr(),M=typeof k=="number"?String(k):k;v.useEffect(()=>{R(wAe({shared:w,trigger:N,axisId:O,active:n,defaultIndex:M}))},[R,w,N,O,n,M]);var P=FA(),C=qq(),D=gAe(w),{activeIndex:$,isActive:F}=st(Pe=>bIe(Pe,D,N,M)),U=st(Pe=>xIe(Pe,D,N,M)),I=st(Pe=>rG(Pe,D,N,M)),z=st(Pe=>vIe(Pe,D,N,M)),Q=U,ne=TIe(),W=n??F,[K,Y]=ISe([Q,W]),G=D==="axis"?I:void 0;KIe(D,N,z,G,$,W);var q=S??ne;if(q==null)return null;var Z=Q??z6;W||(Z=z6),o&&Z.length&&(Z=sSe(Q.filter(Pe=>Pe.value!=null&&(Pe.hide!==!0||e.includeHidden)),h,XIe));var ge=Z.length>0,Le=v.createElement(jTe,{allowEscapeViewBox:r,animationDuration:s,animationEasing:i,isAnimationActive:c,active:W,coordinate:z,hasPayload:ge,offset:d,position:p,reverseDirection:m,useTranslate3d:y,viewBox:P,wrapperStyle:x,lastBoundingBox:K,innerRef:Y,hasPortalFromProps:!!S},JIe(a,U6(U6({},e),{},{payload:Z,label:G,active:W,coordinate:z,accessibilityLayer:C})));return v.createElement(v.Fragment,null,ml.createPortal(Le,q),W&&v.createElement(kIe,{cursor:_,tooltipEventType:D,coordinate:z,payload:Q,index:$}))}var Qk={},Xk={},Jk={},W6;function eDe(){return W6||(W6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r,{signal:s,edges:i}={}){let a,o=null;const c=i!=null&&i.includes("leading"),d=i==null||i.includes("trailing"),h=()=>{o!==null&&(n.apply(a,o),a=void 0,o=null)},p=()=>{d&&h(),_()};let m=null;const y=()=>{m!=null&&clearTimeout(m),m=setTimeout(()=>{m=null,p()},r)},x=()=>{m!==null&&(clearTimeout(m),m=null)},_=()=>{x(),a=void 0,o=null},w=()=>{h()},N=function(...k){if(s?.aborted)return;a=this,o=k;const S=m==null;y(),c&&S&&h()};return N.schedule=y,N.cancel=_,N.flush=w,s?.addEventListener("abort",_,{once:!0}),N}t.debounce=e})(Jk)),Jk}var H6;function tDe(){return H6||(H6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=eDe();function n(r,s=0,i={}){typeof i!="object"&&(i={});const{leading:a=!1,trailing:o=!0,maxWait:c}=i,d=Array(2);a&&(d[0]="leading"),o&&(d[1]="trailing");let h,p=null;const m=e.debounce(function(..._){h=r.apply(this,_),p=null},s,{edges:d}),y=function(..._){return c!=null&&(p===null&&(p=Date.now()),Date.now()-p>=c)?(h=r.apply(this,_),p=Date.now(),m.cancel(),m.schedule(),h):(m.apply(this,_),h)},x=()=>(m.flush(),h);return y.cancel=m.cancel,y.flush=x,y}t.debounce=n})(Xk)),Xk}var q6;function nDe(){return q6||(q6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=tDe();function n(r,s=0,i={}){const{leading:a=!0,trailing:o=!0}=i;return e.debounce(r,s,{leading:a,maxWait:s,trailing:o})}t.throttle=n})(Qk)),Qk}var Zk,K6;function rDe(){return K6||(K6=1,Zk=nDe().throttle),Zk}var sDe=rDe();const iDe=Xa(sDe);var Gg=function(e,n){for(var r=arguments.length,s=new Array(r>2?r-2:0),i=2;i<r;i++)s[i-2]=arguments[i]};function Y6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function eT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Y6(Object(n),!0).forEach(function(r){aDe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function aDe(t,e,n){return(e=oDe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oDe(t){var e=lDe(t,"string");return typeof e=="symbol"?e:e+""}function lDe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Dp=v.forwardRef((t,e)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:s="100%",height:i="100%",minWidth:a=0,minHeight:o,maxHeight:c,children:d,debounce:h=0,id:p,className:m,onResize:y,style:x={}}=t,_=v.useRef(null),w=v.useRef();w.current=y,v.useImperativeHandle(e,()=>_.current);var[N,k]=v.useState({containerWidth:r.width,containerHeight:r.height}),S=v.useCallback((R,M)=>{k(P=>{var C=Math.round(R),D=Math.round(M);return P.containerWidth===C&&P.containerHeight===D?P:{containerWidth:C,containerHeight:D}})},[]);v.useEffect(()=>{var R=D=>{var $,{width:F,height:U}=D[0].contentRect;S(F,U),($=w.current)===null||$===void 0||$.call(w,F,U)};h>0&&(R=iDe(R,h,{trailing:!0,leading:!1}));var M=new ResizeObserver(R),{width:P,height:C}=_.current.getBoundingClientRect();return S(P,C),M.observe(_.current),()=>{M.disconnect()}},[S,h]);var O=v.useMemo(()=>{var{containerWidth:R,containerHeight:M}=N;if(R<0||M<0)return null;Gg(Nd(s)||Nd(i),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,i),Gg(!n||n>0,"The aspect(%s) must be greater than zero.",n);var P=Nd(s)?R:s,C=Nd(i)?M:i;return n&&n>0&&(P?C=P/n:C&&(P=C*n),c&&C>c&&(C=c)),Gg(P>0||C>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,P,C,s,i,a,o,n),v.Children.map(d,D=>v.cloneElement(D,{width:P,height:C,style:eT({width:P,height:C},D.props.style)}))},[n,d,i,c,o,a,N,s]);return v.createElement("div",{id:p?"".concat(p):void 0,className:Et("recharts-responsive-container",m),style:eT(eT({},x),{},{width:s,height:i,minWidth:a,minHeight:o,maxHeight:c}),ref:_},v.createElement("div",{style:{width:0,height:0,overflow:"visible"}},O))}),pu=t=>null;pu.displayName="Cell";function cDe(t,e,n){return(e=uDe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uDe(t){var e=dDe(t,"string");return typeof e=="symbol"?e:e+""}function dDe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class hDe{constructor(e){cDe(this,"cache",new Map),this.maxSize=e}get(e){var n=this.cache.get(e);return n!==void 0&&(this.cache.delete(e),this.cache.set(e,n)),n}set(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function G6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function fDe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?G6(Object(n),!0).forEach(function(r){pDe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):G6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function pDe(t,e,n){return(e=mDe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mDe(t){var e=gDe(t,"string");return typeof e=="symbol"?e:e+""}function gDe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var yDe={cacheSize:2e3,enableCache:!0},lG=fDe({},yDe),Q6=new hDe(lG.cacheSize),vDe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},X6="recharts_measurement_span";function xDe(t,e){var n=e.fontSize||"",r=e.fontFamily||"",s=e.fontWeight||"",i=e.fontStyle||"",a=e.letterSpacing||"",o=e.textTransform||"";return"".concat(t,"|").concat(n,"|").concat(r,"|").concat(s,"|").concat(i,"|").concat(a,"|").concat(o)}var J6=(t,e)=>{try{var n=document.getElementById(X6);n||(n=document.createElement("span"),n.setAttribute("id",X6),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,vDe,e),n.textContent="".concat(t);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},Qg=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Nu.isSsr)return{width:0,height:0};if(!lG.enableCache)return J6(e,n);var r=xDe(e,n),s=Q6.get(r);if(s)return s;var i=J6(e,n);return Q6.set(r,i),i},Z6=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,eV=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,bDe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,wDe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,cG={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},_De=Object.keys(cG),Af="NaN";function EDe(t,e){return t*cG[e]}class ti{static parse(e){var n,[,r,s]=(n=wDe.exec(e))!==null&&n!==void 0?n:[];return new ti(parseFloat(r),s??"")}constructor(e,n){this.num=e,this.unit=n,this.num=e,this.unit=n,Bi(e)&&(this.unit=""),n!==""&&!bDe.test(n)&&(this.num=NaN,this.unit=""),_De.includes(n)&&(this.num=EDe(e,n),this.unit="px")}add(e){return this.unit!==e.unit?new ti(NaN,""):new ti(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new ti(NaN,""):new ti(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new ti(NaN,""):new ti(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new ti(NaN,""):new ti(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Bi(this.num)}}function uG(t){if(t.includes(Af))return Af;for(var e=t;e.includes("*")||e.includes("/");){var n,[,r,s,i]=(n=Z6.exec(e))!==null&&n!==void 0?n:[],a=ti.parse(r??""),o=ti.parse(i??""),c=s==="*"?a.multiply(o):a.divide(o);if(c.isNaN())return Af;e=e.replace(Z6,c.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var d,[,h,p,m]=(d=eV.exec(e))!==null&&d!==void 0?d:[],y=ti.parse(h??""),x=ti.parse(m??""),_=p==="+"?y.add(x):y.subtract(x);if(_.isNaN())return Af;e=e.replace(eV,_.toString())}return e}var tV=/\(([^()]*)\)/;function NDe(t){for(var e=t,n;(n=tV.exec(e))!=null;){var[,r]=n;e=e.replace(tV,uG(r))}return e}function SDe(t){var e=t.replace(/\s+/g,"");return e=NDe(e),e=uG(e),e}function kDe(t){try{return SDe(t)}catch{return Af}}function tT(t){var e=kDe(t.slice(5,-1));return e===Af?"":e}var TDe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],CDe=["dx","dy","angle","className","breakAll"];function kj(){return kj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kj.apply(null,arguments)}function nV(t,e){if(t==null)return{};var n,r,s=jDe(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function jDe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var dG=/[ \f\n\r\t\v\u2028\u2029]+/,hG=t=>{var{children:e,breakAll:n,style:r}=t;try{var s=[];Un(e)||(n?s=e.toString().split(""):s=e.toString().split(dG));var i=s.map(o=>({word:o,width:Qg(o,r).width})),a=n?0:Qg(" ",r).width;return{wordsWithComputedWidth:i,spaceWidth:a}}catch{return null}},PDe=(t,e,n,r,s)=>{var{maxLines:i,children:a,style:o,breakAll:c}=t,d=dt(i),h=a,p=function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return F.reduce((U,I)=>{var{word:z,width:Q}=I,ne=U[U.length-1];if(ne&&(r==null||s||ne.width+Q+n<Number(r)))ne.words.push(z),ne.width+=Q+n;else{var W={words:[z],width:Q};U.push(W)}return U},[])},m=p(e),y=$=>$.reduce((F,U)=>F.width>U.width?F:U);if(!d||s)return m;var x=m.length>i||y(m).width>Number(r);if(!x)return m;for(var _="…",w=$=>{var F=h.slice(0,$),U=hG({breakAll:c,style:o,children:F+_}).wordsWithComputedWidth,I=p(U),z=I.length>i||y(I).width>Number(r);return[z,I]},N=0,k=h.length-1,S=0,O;N<=k&&S<=h.length-1;){var R=Math.floor((N+k)/2),M=R-1,[P,C]=w(M),[D]=w(R);if(!P&&!D&&(N=R+1),P&&D&&(k=R-1),!P&&D){O=C;break}S++}return O||m},rV=t=>{var e=Un(t)?[]:t.toString().split(dG);return[{words:e}]},ADe=t=>{var{width:e,scaleToFit:n,children:r,style:s,breakAll:i,maxLines:a}=t;if((e||n)&&!Nu.isSsr){var o,c,d=hG({breakAll:i,children:r,style:s});if(d){var{wordsWithComputedWidth:h,spaceWidth:p}=d;o=h,c=p}else return rV(r);return PDe({breakAll:i,children:r,maxLines:a,style:s},o,c,e,n)}return rV(r)},sV="#808080",J_=v.forwardRef((t,e)=>{var{x:n=0,y:r=0,lineHeight:s="1em",capHeight:i="0.71em",scaleToFit:a=!1,textAnchor:o="start",verticalAnchor:c="end",fill:d=sV}=t,h=nV(t,TDe),p=v.useMemo(()=>ADe({breakAll:h.breakAll,children:h.children,maxLines:h.maxLines,scaleToFit:a,style:h.style,width:h.width}),[h.breakAll,h.children,h.maxLines,a,h.style,h.width]),{dx:m,dy:y,angle:x,className:_,breakAll:w}=h,N=nV(h,CDe);if(!$o(n)||!$o(r)||p.length===0)return null;var k=n+(dt(m)?m:0),S=r+(dt(y)?y:0),O;switch(c){case"start":O=tT("calc(".concat(i,")"));break;case"middle":O=tT("calc(".concat((p.length-1)/2," * -").concat(s," + (").concat(i," / 2))"));break;default:O=tT("calc(".concat(p.length-1," * -").concat(s,")"));break}var R=[];if(a){var M=p[0].width,{width:P}=h;R.push("scale(".concat(dt(P)?P/M:1,")"))}return x&&R.push("rotate(".concat(x,", ").concat(k,", ").concat(S,")")),R.length&&(N.transform=R.join(" ")),v.createElement("text",kj({},Qn(N,!0),{ref:e,x:k,y:S,className:Et("recharts-text",_),textAnchor:o,fill:d.includes("url")?sV:d}),p.map((C,D)=>{var $=C.words.join(w?"":" ");return v.createElement("tspan",{x:k,dy:D===0?O:s,key:"".concat($,"-").concat(D)},$)}))});J_.displayName="Text";var IDe=["labelRef"];function DDe(t,e){if(t==null)return{};var n,r,s=RDe(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function RDe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function iV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function lr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iV(Object(n),!0).forEach(function(r){ODe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ODe(t,e,n){return(e=MDe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function MDe(t){var e=LDe(t,"string");return typeof e=="symbol"?e:e+""}function LDe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fl(){return fl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fl.apply(null,arguments)}var fG=v.createContext(null),FDe=t=>{var{x:e,y:n,width:r,height:s,children:i}=t,a=v.useMemo(()=>({x:e,y:n,width:r,height:s}),[e,n,r,s]);return v.createElement(fG.Provider,{value:a},i)},pG=()=>{var t=v.useContext(fG),e=FA();return t||e},$De=v.createContext(null),VDe=()=>{var t=v.useContext($De),e=st(rY);return t||e},BDe=t=>{var{value:e,formatter:n}=t,r=Un(t.children)?e:t.children;return typeof n=="function"?n(r):r},qI=t=>t!=null&&typeof t=="function",UDe=(t,e)=>{var n=Xr(e-t),r=Math.min(Math.abs(e-t),360);return n*r},zDe=(t,e,n,r,s)=>{var{offset:i,className:a}=t,{cx:o,cy:c,innerRadius:d,outerRadius:h,startAngle:p,endAngle:m,clockWise:y}=s,x=(d+h)/2,_=UDe(p,m),w=_>=0?1:-1,N,k;switch(e){case"insideStart":N=p+w*i,k=y;break;case"insideEnd":N=m-w*i,k=!y;break;case"end":N=m+w*i,k=y;break;default:throw new Error("Unsupported position ".concat(e))}k=_<=0?k:!k;var S=Er(o,c,x,N),O=Er(o,c,x,N+(k?1:-1)*359),R="M".concat(S.x,",").concat(S.y,`
    A`).concat(x,",").concat(x,",0,1,").concat(k?0:1,`,
    `).concat(O.x,",").concat(O.y),M=Un(t.id)?T0("recharts-radial-line-"):t.id;return v.createElement("text",fl({},r,{dominantBaseline:"central",className:Et("recharts-radial-bar-label",a)}),v.createElement("defs",null,v.createElement("path",{id:M,d:R})),v.createElement("textPath",{xlinkHref:"#".concat(M)},n))},WDe=(t,e,n)=>{var{cx:r,cy:s,innerRadius:i,outerRadius:a,startAngle:o,endAngle:c}=t,d=(o+c)/2;if(n==="outside"){var{x:h,y:p}=Er(r,s,a+e,d);return{x:h,y:p,textAnchor:h>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:s,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:s,textAnchor:"middle",verticalAnchor:"end"};var m=(i+a)/2,{x:y,y:x}=Er(r,s,m,d);return{x:y,y:x,textAnchor:"middle",verticalAnchor:"middle"}},mG=t=>"cx"in t&&dt(t.cx),HDe=(t,e)=>{var{parentViewBox:n,offset:r,position:s}=t,i;n!=null&&!mG(n)&&(i=n);var{x:a,y:o,width:c,height:d}=e,h=d>=0?1:-1,p=h*r,m=h>0?"end":"start",y=h>0?"start":"end",x=c>=0?1:-1,_=x*r,w=x>0?"end":"start",N=x>0?"start":"end";if(s==="top"){var k={x:a+c/2,y:o-h*r,textAnchor:"middle",verticalAnchor:m};return lr(lr({},k),i?{height:Math.max(o-i.y,0),width:c}:{})}if(s==="bottom"){var S={x:a+c/2,y:o+d+p,textAnchor:"middle",verticalAnchor:y};return lr(lr({},S),i?{height:Math.max(i.y+i.height-(o+d),0),width:c}:{})}if(s==="left"){var O={x:a-_,y:o+d/2,textAnchor:w,verticalAnchor:"middle"};return lr(lr({},O),i?{width:Math.max(O.x-i.x,0),height:d}:{})}if(s==="right"){var R={x:a+c+_,y:o+d/2,textAnchor:N,verticalAnchor:"middle"};return lr(lr({},R),i?{width:Math.max(i.x+i.width-R.x,0),height:d}:{})}var M=i?{width:c,height:d}:{};return s==="insideLeft"?lr({x:a+_,y:o+d/2,textAnchor:N,verticalAnchor:"middle"},M):s==="insideRight"?lr({x:a+c-_,y:o+d/2,textAnchor:w,verticalAnchor:"middle"},M):s==="insideTop"?lr({x:a+c/2,y:o+p,textAnchor:"middle",verticalAnchor:y},M):s==="insideBottom"?lr({x:a+c/2,y:o+d-p,textAnchor:"middle",verticalAnchor:m},M):s==="insideTopLeft"?lr({x:a+_,y:o+p,textAnchor:N,verticalAnchor:y},M):s==="insideTopRight"?lr({x:a+c-_,y:o+p,textAnchor:w,verticalAnchor:y},M):s==="insideBottomLeft"?lr({x:a+_,y:o+d-p,textAnchor:N,verticalAnchor:m},M):s==="insideBottomRight"?lr({x:a+c-_,y:o+d-p,textAnchor:w,verticalAnchor:m},M):s&&typeof s=="object"&&(dt(s.x)||Nd(s.x))&&(dt(s.y)||Nd(s.y))?lr({x:a+Is(s.x,c),y:o+Is(s.y,d),textAnchor:"end",verticalAnchor:"end"},M):lr({x:a+c/2,y:o+d/2,textAnchor:"middle",verticalAnchor:"middle"},M)},qDe={offset:5};function Lc(t){var e=ps(t,qDe),{viewBox:n,position:r,value:s,children:i,content:a,className:o="",textBreakAll:c,labelRef:d}=e,h=VDe(),p=pG(),m=r==="center"?p:h??p,y=n||m;if(!y||Un(s)&&Un(i)&&!v.isValidElement(a)&&typeof a!="function")return null;var x=lr(lr({},e),{},{viewBox:y});if(v.isValidElement(a)){var{labelRef:_}=x,w=DDe(x,IDe);return v.cloneElement(a,w)}var N;if(typeof a=="function"){if(N=v.createElement(a,x),v.isValidElement(N))return N}else N=BDe(e);var k=mG(y),S=Qn(e,!0);if(k&&(r==="insideStart"||r==="insideEnd"||r==="end"))return zDe(e,r,N,S,y);var O=k?WDe(y,e.offset,e.position):HDe(e,y);return v.createElement(J_,fl({ref:d,className:Et("recharts-label",o)},S,O,{breakAll:c}),N)}Lc.displayName="Label";var KDe=(t,e,n)=>{if(!t)return null;var r={viewBox:e,labelRef:n};return t===!0?v.createElement(Lc,fl({key:"label-implicit"},r)):$o(t)?v.createElement(Lc,fl({key:"label-implicit",value:t},r)):v.isValidElement(t)?t.type===Lc?v.cloneElement(t,lr({key:"label-implicit"},r)):v.createElement(Lc,fl({key:"label-implicit",content:t},r)):qI(t)?v.createElement(Lc,fl({key:"label-implicit",content:t},r)):t&&typeof t=="object"?v.createElement(Lc,fl({},t,{key:"label-implicit"},r)):null};function YDe(t){var{label:e}=t,n=pG();return KDe(e,n)||null}var nT={},rT={},aV;function GDe(){return aV||(aV=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n[n.length-1]}t.last=e})(rT)),rT}var sT={},oV;function QDe(){return oV||(oV=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Array.isArray(n)?n:Array.from(n)}t.toArray=e})(sT)),sT}var lV;function XDe(){return lV||(lV=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=GDe(),n=QDe(),r=jA();function s(i){if(r.isArrayLike(i))return e.last(n.toArray(i))}t.last=s})(nT)),nT}var iT,cV;function JDe(){return cV||(cV=1,iT=XDe().last),iT}var ZDe=JDe();const eRe=Xa(ZDe);var tRe=["valueAccessor"],nRe=["dataKey","clockWise","id","textBreakAll"];function i1(){return i1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i1.apply(null,arguments)}function uV(t,e){if(t==null)return{};var n,r,s=rRe(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function rRe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var sRe=t=>Array.isArray(t.value)?eRe(t.value):t.value,gG=v.createContext(void 0),yG=gG.Provider,vG=v.createContext(void 0),iRe=vG.Provider;function aRe(){return v.useContext(gG)}function oRe(){return v.useContext(vG)}function hb(t){var{valueAccessor:e=sRe}=t,n=uV(t,tRe),{dataKey:r,clockWise:s,id:i,textBreakAll:a}=n,o=uV(n,nRe),c=aRe(),d=oRe(),h=c||d;return!h||!h.length?null:v.createElement(hs,{className:"recharts-label-list"},h.map((p,m)=>{var y,x=Un(r)?e(p,m):Sn(p&&p.payload,r),_=Un(i)?{}:{id:"".concat(i,"-").concat(m)};return v.createElement(Lc,i1({},Qn(p,!0),o,_,{fill:(y=n.fill)!==null&&y!==void 0?y:p.fill,parentViewBox:p.parentViewBox,value:x,textBreakAll:a,viewBox:p.viewBox,key:"label-".concat(m),index:m}))}))}hb.displayName="LabelList";function KI(t){var{label:e}=t;return e?e===!0?v.createElement(hb,{key:"labelList-implicit"}):v.isValidElement(e)||qI(e)?v.createElement(hb,{key:"labelList-implicit",content:e}):typeof e=="object"?v.createElement(hb,i1({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}function Tj(){return Tj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Tj.apply(null,arguments)}var xG=t=>{var{cx:e,cy:n,r,className:s}=t,i=Et("recharts-dot",s);return e===+e&&n===+n&&r===+r?v.createElement("circle",Tj({},Wo(t),NA(t),{className:i,cx:e,cy:n,r})):null},bG=t=>t.graphicalItems.polarItems,lRe=ye([zn,jy],bI),YI=ye([bG,mr,lRe],wI),cRe=ye([YI],_I),GI=ye([cRe,cI],EI),uRe=ye([GI,mr,YI],SI),dRe=ye([GI,mr,YI],(t,e,n)=>n.length>0?t.flatMap(r=>n.flatMap(s=>{var i,a=Sn(r,(i=e.dataKey)!==null&&i!==void 0?i:s.dataKey);return{value:a,errorDomain:[]}})).filter(Boolean):e?.dataKey!=null?t.map(r=>({value:Sn(r,e.dataKey),errorDomain:[]})):t.map(r=>({value:r,errorDomain:[]}))),dV=()=>{},hRe=ye([mr,EY,dV,dRe,dV,Yt,zn],TI),wG=ye([mr,Yt,GI,uRe,Cy,zn,hRe],CI),fRe=ye([wG,mr,um],AI);ye([mr,wG,fRe,zn],DI);var pRe={radiusAxis:{},angleAxis:{}},_G=Wi({name:"polarAxis",initialState:pRe,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:G5e,removeRadiusAxis:Q5e,addAngleAxis:X5e,removeAngleAxis:J5e}=_G.actions,mRe=_G.reducer;function hV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function fV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hV(Object(n),!0).forEach(function(r){gRe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gRe(t,e,n){return(e=yRe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yRe(t){var e=vRe(t,"string");return typeof e=="symbol"?e:e+""}function vRe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var xRe=(t,e)=>e,QI=ye([bG,xRe],(t,e)=>t.filter(n=>n.type==="pie").find(n=>n.id===e)),bRe=[],XI=(t,e,n)=>n?.length===0?bRe:n,EG=ye([cI,QI,XI],(t,e,n)=>{var{chartData:r}=t;if(e!=null){var s;if(e?.data!=null&&e.data.length>0?s=e.data:s=r,(!s||!s.length)&&n!=null&&(s=n.map(i=>fV(fV({},e.presentationProps),i.props))),s!=null)return s}}),wRe=ye([EG,QI,XI],(t,e,n)=>{if(!(t==null||e==null))return t.map((r,s)=>{var i,a=Sn(r,e.nameKey,e.name),o;return n!=null&&(i=n[s])!==null&&i!==void 0&&(i=i.props)!==null&&i!==void 0&&i.fill?o=n[s].props.fill:typeof r=="object"&&r!=null&&"fill"in r?o=r.fill:o=e.fill,{value:sm(a,e.dataKey),color:o,payload:r,type:e.legendType}})}),_Re=ye([EG,QI,XI,Mr],(t,e,n,r)=>{if(!(e==null||t==null))return xOe({offset:r,pieSettings:e,displayedData:t,cells:n})}),aT={},pV;function ERe(){return pV||(pV=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const s=n[Symbol.toStringTag];return s==null||!Object.getOwnPropertyDescriptor(n,Symbol.toStringTag)?.writable?!1:n.toString()===`[object ${s}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}t.isPlainObject=e})(aT)),aT}var oT,mV;function NRe(){return mV||(mV=1,oT=ERe().isPlainObject),oT}var SRe=NRe();const kRe=Xa(SRe);function gV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function yV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gV(Object(n),!0).forEach(function(r){TRe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function TRe(t,e,n){return(e=CRe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function CRe(t){var e=jRe(t,"string");return typeof e=="symbol"?e:e+""}function jRe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function a1(){return a1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a1.apply(null,arguments)}var vV=(t,e,n,r,s)=>{var i=n-r,a;return a="M ".concat(t,",").concat(e),a+="L ".concat(t+n,",").concat(e),a+="L ".concat(t+n-i/2,",").concat(e+s),a+="L ".concat(t+n-i/2-r,",").concat(e+s),a+="L ".concat(t,",").concat(e," Z"),a},PRe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},ARe=t=>{var e=ps(t,PRe),{x:n,y:r,upperWidth:s,lowerWidth:i,height:a,className:o}=e,{animationEasing:c,animationDuration:d,animationBegin:h,isUpdateAnimationActive:p}=e,m=v.useRef(),[y,x]=v.useState(-1),_=v.useRef(s),w=v.useRef(i),N=v.useRef(a),k=v.useRef(n),S=v.useRef(r),O=Ey(t,"trapezoid-");if(v.useEffect(()=>{if(m.current&&m.current.getTotalLength)try{var z=m.current.getTotalLength();z&&x(z)}catch{}},[]),n!==+n||r!==+r||s!==+s||i!==+i||a!==+a||s===0&&i===0||a===0)return null;var R=Et("recharts-trapezoid",o);if(!p)return v.createElement("g",null,v.createElement("path",a1({},Qn(e,!0),{className:R,d:vV(n,r,s,i,a)})));var M=_.current,P=w.current,C=N.current,D=k.current,$=S.current,F="0px ".concat(y===-1?1:y,"px"),U="".concat(y,"px 0px"),I=Kq(["strokeDasharray"],d,c);return v.createElement(_y,{animationId:O,key:O,canBegin:y>0,duration:d,easing:c,isActive:p,begin:h},z=>{var Q=nr(M,s,z),ne=nr(P,i,z),W=nr(C,a,z),K=nr(D,n,z),Y=nr($,r,z);m.current&&(_.current=Q,w.current=ne,N.current=W,k.current=K,S.current=Y);var G=z>0?{transition:I,strokeDasharray:U}:{strokeDasharray:F};return v.createElement("path",a1({},Qn(e,!0),{className:R,d:vV(K,Y,Q,ne,W),ref:m,style:yV(yV({},G),e.style)}))})},IRe=["option","shapeType","propTransformer","activeClassName","isActive"];function DRe(t,e){if(t==null)return{};var n,r,s=RRe(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function RRe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function xV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function o1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xV(Object(n),!0).forEach(function(r){ORe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ORe(t,e,n){return(e=MRe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function MRe(t){var e=LRe(t,"string");return typeof e=="symbol"?e:e+""}function LRe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function FRe(t,e){return o1(o1({},e),t)}function $Re(t,e){return t==="symbols"}function bV(t){var{shapeType:e,elementProps:n}=t;switch(e){case"rectangle":return v.createElement(Xq,n);case"trapezoid":return v.createElement(ARe,n);case"sector":return v.createElement(eK,n);case"symbols":if($Re(e))return v.createElement(QH,n);break;default:return null}}function VRe(t){return v.isValidElement(t)?t.props:t}function NG(t){var{option:e,shapeType:n,propTransformer:r=FRe,activeClassName:s="recharts-active-shape",isActive:i}=t,a=DRe(t,IRe),o;if(v.isValidElement(e))o=v.cloneElement(e,o1(o1({},a),VRe(e)));else if(typeof e=="function")o=e(a);else if(kRe(e)&&typeof e!="boolean"){var c=r(e,a);o=v.createElement(bV,{shapeType:n,elementProps:c})}else{var d=a;o=v.createElement(bV,{shapeType:n,elementProps:d})}return i?v.createElement(hs,{className:s},o):o}var JI=(t,e)=>{var n=pr();return(r,s)=>i=>{t?.(r,s,i),n($Y({activeIndex:String(s),activeDataKey:e,activeCoordinate:r.tooltipPosition}))}},ZI=t=>{var e=pr();return(n,r)=>s=>{t?.(n,r,s),e(_Ae())}},eD=(t,e)=>{var n=pr();return(r,s)=>i=>{t?.(r,s,i),n(EAe({activeIndex:String(s),activeDataKey:e,activeCoordinate:r.tooltipPosition}))}};function tD(t){var{fn:e,args:n}=t,r=pr(),s=yi();return v.useEffect(()=>{if(!s){var i=e(n);return r(xAe(i)),()=>{r(bAe(i))}}},[e,n,r,s]),null}var SG=()=>{};function kG(t){var{legendPayload:e}=t,n=pr(),r=yi();return v.useEffect(()=>r?SG:(n(Wq(e)),()=>{n(Hq(e))}),[n,r,e]),null}function BRe(t){var{legendPayload:e}=t,n=pr(),r=st(Yt);return v.useEffect(()=>r!=="centric"&&r!=="radial"?SG:(n(Wq(e)),()=>{n(Hq(e))}),[n,r,e]),null}var lT,URe=()=>{var[t]=v.useState(()=>T0("uid-"));return t},zRe=(lT=Oj.useId)!==null&&lT!==void 0?lT:URe;function WRe(t,e){var n=zRe();return e||(t?"".concat(t,"-").concat(n):n)}var HRe=v.createContext(void 0),nD=t=>{var{id:e,type:n,children:r}=t,s=WRe("recharts-".concat(n),e);return v.createElement(HRe.Provider,{value:s},r(s))},qRe={cartesianItems:[],polarItems:[]},TG=Wi({name:"graphicalItems",initialState:qRe,reducers:{addCartesianGraphicalItem(t,e){t.cartesianItems.push(e.payload)},replaceCartesianGraphicalItem(t,e){var{prev:n,next:r}=e.payload,s=Dl(t).cartesianItems.indexOf(n);s>-1&&(t.cartesianItems[s]=r)},removeCartesianGraphicalItem(t,e){var n=Dl(t).cartesianItems.indexOf(e.payload);n>-1&&t.cartesianItems.splice(n,1)},addPolarGraphicalItem(t,e){t.polarItems.push(e.payload)},removePolarGraphicalItem(t,e){var n=Dl(t).polarItems.indexOf(e.payload);n>-1&&t.polarItems.splice(n,1)}}}),{addCartesianGraphicalItem:KRe,replaceCartesianGraphicalItem:YRe,removeCartesianGraphicalItem:GRe,addPolarGraphicalItem:QRe,removePolarGraphicalItem:XRe}=TG.actions,JRe=TG.reducer;function CG(t){var e=pr(),n=v.useRef(null);return v.useEffect(()=>{n.current===null?e(KRe(t)):n.current!==t&&e(YRe({prev:n.current,next:t})),n.current=t},[e,t]),v.useEffect(()=>()=>{n.current&&(e(GRe(n.current)),n.current=null)},[e]),null}function ZRe(t){var e=pr();return v.useEffect(()=>(e(QRe(t)),()=>{e(XRe(t))}),[e,t]),null}var eOe=["onMouseEnter","onClick","onMouseLeave"],tOe=["id"],nOe=["id"];function rD(t,e){if(t==null)return{};var n,r,s=rOe(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function rOe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function wV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Ln(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wV(Object(n),!0).forEach(function(r){sOe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function sOe(t,e,n){return(e=iOe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function iOe(t){var e=aOe(t,"string");return typeof e=="symbol"?e:e+""}function aOe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mu(){return mu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mu.apply(null,arguments)}function oOe(t){var e=v.useMemo(()=>SA(t.children,pu),[t.children]),n=st(r=>wRe(r,t.id,e));return n==null?null:v.createElement(BRe,{legendPayload:n})}function lOe(t){var{dataKey:e,nameKey:n,sectors:r,stroke:s,strokeWidth:i,fill:a,name:o,hide:c,tooltipType:d}=t;return{dataDefinedOnItem:r.map(h=>h.tooltipPayload),positions:r.map(h=>h.tooltipPosition),settings:{stroke:s,strokeWidth:i,fill:a,dataKey:e,nameKey:n,name:sm(o,e),hide:c,type:d,color:a,unit:""}}}var cOe=(t,e)=>t>e?"start":t<e?"end":"middle",uOe=(t,e,n)=>Is(typeof e=="function"?e(t):e,n,n*.8),dOe=(t,e,n)=>{var{top:r,left:s,width:i,height:a}=e,o=Dq(i,a),c=s+Is(t.cx,i,i/2),d=r+Is(t.cy,a,a/2),h=Is(t.innerRadius,o,0),p=uOe(n,t.outerRadius,o),m=t.maxRadius||Math.sqrt(i*i+a*a)/2;return{cx:c,cy:d,innerRadius:h,outerRadius:p,maxRadius:m}},hOe=(t,e)=>{var n=Xr(e-t),r=Math.min(Math.abs(e-t),360);return n*r};function fOe(t){return t&&typeof t=="object"&&"className"in t&&typeof t.className=="string"?t.className:""}var pOe=(t,e)=>{if(v.isValidElement(t))return v.cloneElement(t,e);if(typeof t=="function")return t(e);var n=Et("recharts-pie-label-line",typeof t!="boolean"?t.className:"");return v.createElement($A,mu({},e,{type:"linear",className:n}))},mOe=(t,e,n)=>{if(v.isValidElement(t))return v.cloneElement(t,e);var r=n;if(typeof t=="function"&&(r=t(e),v.isValidElement(r)))return r;var s=Et("recharts-pie-label-text",fOe(t));return v.createElement(J_,mu({},e,{alignmentBaseline:"middle",className:s}),r)};function gOe(t){var{sectors:e,props:n,showLabels:r}=t,{label:s,labelLine:i,dataKey:a}=n;if(!r||!s||!e)return null;var o=Wo(n),c=Qn(s,!1),d=Qn(i,!1),h=typeof s=="object"&&"offsetRadius"in s&&typeof s.offsetRadius=="number"&&s.offsetRadius||20,p=e.map((m,y)=>{var x=(m.startAngle+m.endAngle)/2,_=Er(m.cx,m.cy,m.outerRadius+h,x),w=Ln(Ln(Ln(Ln({},o),m),{},{stroke:"none"},c),{},{index:y,textAnchor:cOe(_.x,m.cx)},_),N=Ln(Ln(Ln(Ln({},o),m),{},{fill:"none",stroke:m.fill},d),{},{index:y,points:[Er(m.cx,m.cy,m.outerRadius,x),_],key:"line"});return v.createElement(hs,{key:"label-".concat(m.startAngle,"-").concat(m.endAngle,"-").concat(m.midAngle,"-").concat(y)},i&&pOe(i,N),mOe(s,w,Sn(m,a)))});return v.createElement(hs,{className:"recharts-pie-labels"},p)}function yOe(t){var{sectors:e,props:n,showLabels:r}=t,{label:s}=n;return typeof s=="object"&&s!=null&&"position"in s?v.createElement(KI,{label:s}):v.createElement(gOe,{sectors:e,props:n,showLabels:r})}function vOe(t){var{sectors:e,activeShape:n,inactiveShape:r,allOtherPieProps:s}=t,i=st(fu),{onMouseEnter:a,onClick:o,onMouseLeave:c}=s,d=rD(s,eOe),h=JI(a,s.dataKey),p=ZI(c),m=eD(o,s.dataKey);return e==null||e.length===0?null:v.createElement(v.Fragment,null,e.map((y,x)=>{if(y?.startAngle===0&&y?.endAngle===0&&e.length!==1)return null;var _=n&&String(x)===i,w=i?r:null,N=_?n:w,k=Ln(Ln({},y),{},{stroke:y.stroke,tabIndex:-1,[Fq]:x,[$q]:s.dataKey});return v.createElement(hs,mu({tabIndex:-1,className:"recharts-pie-sector"},b_(d,y,x),{onMouseEnter:h(y,x),onMouseLeave:p(y,x),onClick:m(y,x),key:"sector-".concat(y?.startAngle,"-").concat(y?.endAngle,"-").concat(y.midAngle,"-").concat(x)}),v.createElement(NG,mu({option:N,isActive:_,shapeType:"sector"},k)))}))}function xOe(t){var e,{pieSettings:n,displayedData:r,cells:s,offset:i}=t,{cornerRadius:a,startAngle:o,endAngle:c,dataKey:d,nameKey:h,tooltipType:p}=n,m=Math.abs(n.minAngle),y=hOe(o,c),x=Math.abs(y),_=r.length<=1?0:(e=n.paddingAngle)!==null&&e!==void 0?e:0,w=r.filter(M=>Sn(M,d,0)!==0).length,N=(x>=360?w:w-1)*_,k=x-w*m-N,S=r.reduce((M,P)=>{var C=Sn(P,d,0);return M+(dt(C)?C:0)},0),O;if(S>0){var R;O=r.map((M,P)=>{var C=Sn(M,d,0),D=Sn(M,h,P),$=dOe(n,i,M),F=(dt(C)?C:0)/S,U,I=Ln(Ln({},M),s&&s[P]&&s[P].props);P?U=R.endAngle+Xr(y)*_*(C!==0?1:0):U=o;var z=U+Xr(y)*((C!==0?m:0)+F*k),Q=(U+z)/2,ne=($.innerRadius+$.outerRadius)/2,W=[{name:D,value:C,payload:I,dataKey:d,type:p}],K=Er($.cx,$.cy,ne,Q);return R=Ln(Ln(Ln(Ln({},n.presentationProps),{},{percent:F,cornerRadius:a,name:D,tooltipPayload:W,midAngle:Q,middleRadius:ne,tooltipPosition:K},I),$),{},{value:C,startAngle:U,endAngle:z,payload:I,paddingAngle:Xr(y)*_}),R})}return O}function bOe(t){var{showLabels:e,sectors:n,children:r}=t,s=v.useMemo(()=>!e||!n?[]:n.map(i=>({value:i.value,payload:i.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:i.cx,cy:i.cy,innerRadius:i.innerRadius,outerRadius:i.outerRadius,startAngle:i.startAngle,endAngle:i.endAngle,clockWise:!1},fill:i.fill})),[n,e]);return v.createElement(iRe,{value:e?s:void 0},r)}function wOe(t){var{props:e,previousSectorsRef:n}=t,{sectors:r,isAnimationActive:s,animationBegin:i,animationDuration:a,animationEasing:o,activeShape:c,inactiveShape:d,onAnimationStart:h,onAnimationEnd:p}=e,m=Ey(e,"recharts-pie-"),y=n.current,[x,_]=v.useState(!1),w=v.useCallback(()=>{typeof p=="function"&&p(),_(!1)},[p]),N=v.useCallback(()=>{typeof h=="function"&&h(),_(!0)},[h]);return v.createElement(bOe,{showLabels:!x,sectors:r},v.createElement(_y,{animationId:m,begin:i,duration:a,isActive:s,easing:o,onAnimationStart:N,onAnimationEnd:w,key:m},k=>{var S=[],O=r&&r[0],R=O?.startAngle;return r?.forEach((M,P)=>{var C=y&&y[P],D=P>0?sh(M,"paddingAngle",0):0;if(C){var $=nr(C.endAngle-C.startAngle,M.endAngle-M.startAngle,k),F=Ln(Ln({},M),{},{startAngle:R+D,endAngle:R+$+D});S.push(F),R=F.endAngle}else{var{endAngle:U,startAngle:I}=M,z=nr(0,U-I,k),Q=Ln(Ln({},M),{},{startAngle:R+D,endAngle:R+z+D});S.push(Q),R=Q.endAngle}}),n.current=S,v.createElement(hs,null,v.createElement(vOe,{sectors:S,activeShape:c,inactiveShape:d,allOtherPieProps:e}))}),v.createElement(yOe,{showLabels:!x,sectors:r,props:e}),e.children)}var _Oe={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!Nu.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function EOe(t){var{id:e}=t,n=rD(t,tOe),{hide:r,className:s,rootTabIndex:i}=t,a=v.useMemo(()=>SA(t.children,pu),[t.children]),o=st(h=>_Re(h,e,a)),c=v.useRef(null),d=Et("recharts-pie",s);return r||o==null?(c.current=null,v.createElement(hs,{tabIndex:i,className:d})):v.createElement(v.Fragment,null,v.createElement(tD,{fn:lOe,args:Ln(Ln({},t),{},{sectors:o})}),v.createElement(hs,{tabIndex:i,className:d},v.createElement(wOe,{props:Ln(Ln({},n),{},{sectors:o}),previousSectorsRef:c})))}function Z_(t){var e=ps(t,_Oe),{id:n}=e,r=rD(e,nOe),s=Wo(r);return v.createElement(nD,{id:n,type:"pie"},i=>v.createElement(v.Fragment,null,v.createElement(ZRe,{type:"pie",id:i,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:s,maxRadius:e.maxRadius}),v.createElement(oOe,mu({},r,{id:i})),v.createElement(EOe,mu({},r,{id:i}))))}Z_.displayName="Pie";function _V(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function EV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_V(Object(n),!0).forEach(function(r){NOe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_V(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function NOe(t,e,n){return(e=SOe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function SOe(t){var e=kOe(t,"string");return typeof e=="symbol"?e:e+""}function kOe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var TOe={xAxis:{},yAxis:{},zAxis:{}},jG=Wi({name:"cartesianAxis",initialState:TOe,reducers:{addXAxis(t,e){t.xAxis[e.payload.id]=e.payload},removeXAxis(t,e){delete t.xAxis[e.payload.id]},addYAxis(t,e){t.yAxis[e.payload.id]=e.payload},removeYAxis(t,e){delete t.yAxis[e.payload.id]},addZAxis(t,e){t.zAxis[e.payload.id]=e.payload},removeZAxis(t,e){delete t.zAxis[e.payload.id]},updateYAxisWidth(t,e){var{id:n,width:r}=e.payload;t.yAxis[n]&&(t.yAxis[n]=EV(EV({},t.yAxis[n]),{},{width:r}))}}}),{addXAxis:COe,removeXAxis:jOe,addYAxis:POe,removeYAxis:AOe,addZAxis:Z5e,removeZAxis:eFe,updateYAxisWidth:IOe}=jG.actions,DOe=jG.reducer,ROe=ye([Mr],t=>{if(t)return{top:t.top,bottom:t.bottom,left:t.left,right:t.right}}),OOe=ye([ROe,Xl,Jl],(t,e,n)=>{if(!(!t||e==null||n==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,n-t.top-t.bottom)}}),sD=()=>st(OOe),MOe=()=>st(cIe);function NV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function SV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NV(Object(n),!0).forEach(function(r){LOe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function LOe(t,e,n){return(e=FOe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function FOe(t){var e=$Oe(t,"string");return typeof e=="symbol"?e:e+""}function $Oe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var VOe=t=>{var{point:e,childIndex:n,mainColor:r,activeDot:s,dataKey:i}=t;if(s===!1||e.x==null||e.y==null)return null;var a=SV(SV({index:n,dataKey:i,cx:e.x,cy:e.y,r:4,fill:r??"none",strokeWidth:2,stroke:"#fff",payload:e.payload,value:e.value},Qn(s,!1)),NA(s)),o;return v.isValidElement(s)?o=v.cloneElement(s,a):typeof s=="function"?o=s(a):o=v.createElement(xG,a),v.createElement(hs,{className:"recharts-active-dot"},o)};function BOe(t){var{points:e,mainColor:n,activeDot:r,itemDataKey:s}=t,i=st(fu),a=MOe();if(e==null||a==null)return null;var o=e.find(c=>a.includes(c.payload));return Un(o)?null:VOe({point:o,childIndex:Number(i),mainColor:n,dataKey:s,activeDot:r})}var UOe="Invariant failed";function zOe(t,e){throw new Error(UOe)}var WOe=["x","y"];function Cj(){return Cj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Cj.apply(null,arguments)}function kV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function gg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kV(Object(n),!0).forEach(function(r){HOe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function HOe(t,e,n){return(e=qOe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qOe(t){var e=KOe(t,"string");return typeof e=="symbol"?e:e+""}function KOe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function YOe(t,e){if(t==null)return{};var n,r,s=GOe(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function GOe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function QOe(t,e){var{x:n,y:r}=t,s=YOe(t,WOe),i="".concat(n),a=parseInt(i,10),o="".concat(r),c=parseInt(o,10),d="".concat(e.height||s.height),h=parseInt(d,10),p="".concat(e.width||s.width),m=parseInt(p,10);return gg(gg(gg(gg(gg({},e),s),a?{x:a}:{}),c?{y:c}:{}),{},{height:h,width:m,name:e.name,radius:e.radius})}function iD(t){return v.createElement(NG,Cj({shapeType:"rectangle",propTransformer:QOe,activeClassName:"recharts-active-bar"},t))}var XOe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,s)=>{if(dt(e))return e;var i=dt(r)||Un(r);return i?e(r,s):(i||zOe(),n)}},JOe={},PG=Wi({name:"errorBars",initialState:JOe,reducers:{addErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]||(t[n]=[]),t[n].push(r)},replaceErrorBar:(t,e)=>{var{itemId:n,prev:r,next:s}=e.payload;t[n]&&(t[n]=t[n].map(i=>i.dataKey===r.dataKey&&i.direction===r.direction?s:i))},removeErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]&&(t[n]=t[n].filter(s=>s.dataKey!==r.dataKey||s.direction!==r.direction))}}}),{addErrorBar:tFe,replaceErrorBar:nFe,removeErrorBar:rFe}=PG.actions,ZOe=PG.reducer,e4e=["children"];function t4e(t,e){if(t==null)return{};var n,r,s=n4e(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function n4e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var r4e={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},s4e=v.createContext(r4e);function AG(t){var{children:e}=t,n=t4e(t,e4e);return v.createElement(s4e.Provider,{value:n},e)}function aD(t,e){var n,r,s=st(d=>ec(d,t)),i=st(d=>tc(d,e)),a=(n=s?.allowDataOverflow)!==null&&n!==void 0?n:Ti.allowDataOverflow,o=(r=i?.allowDataOverflow)!==null&&r!==void 0?r:Ci.allowDataOverflow,c=a||o;return{needClip:c,needClipX:a,needClipY:o}}function IG(t){var{xAxisId:e,yAxisId:n,clipPathId:r}=t,s=sD(),{needClipX:i,needClipY:a,needClip:o}=aD(e,n);if(!o)return null;var{x:c,y:d,width:h,height:p}=s;return v.createElement("clipPath",{id:"clipPath-".concat(r)},v.createElement("rect",{x:i?c:c-h/2,y:a?d:d-p/2,width:i?h:h*2,height:a?p:p*2}))}var i4e=["onMouseEnter","onMouseLeave","onClick"],a4e=["value","background","tooltipPosition"],o4e=["id"],l4e=["onMouseEnter","onClick","onMouseLeave"];function gu(){return gu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gu.apply(null,arguments)}function TV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function $s(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TV(Object(n),!0).forEach(function(r){c4e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function c4e(t,e,n){return(e=u4e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u4e(t){var e=d4e(t,"string");return typeof e=="symbol"?e:e+""}function d4e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function l1(t,e){if(t==null)return{};var n,r,s=h4e(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function h4e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var f4e=t=>{var{dataKey:e,name:n,fill:r,legendType:s,hide:i}=t;return[{inactive:i,dataKey:e,type:s,color:r,value:sm(n,e),payload:t}]};function p4e(t){var{dataKey:e,stroke:n,strokeWidth:r,fill:s,name:i,hide:a,unit:o}=t;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:r,fill:s,dataKey:e,nameKey:void 0,name:sm(i,e),hide:a,type:t.tooltipType,color:t.fill,unit:o}}}function m4e(t){var e=st(fu),{data:n,dataKey:r,background:s,allOtherBarProps:i}=t,{onMouseEnter:a,onMouseLeave:o,onClick:c}=i,d=l1(i,i4e),h=JI(a,r),p=ZI(o),m=eD(c,r);if(!s||n==null)return null;var y=Qn(s,!1);return v.createElement(v.Fragment,null,n.map((x,_)=>{var{value:w,background:N,tooltipPosition:k}=x,S=l1(x,a4e);if(!N)return null;var O=h(x,_),R=p(x,_),M=m(x,_),P=$s($s($s($s($s({option:s,isActive:String(_)===e},S),{},{fill:"#eee"},N),y),b_(d,x,_)),{},{onMouseEnter:O,onMouseLeave:R,onClick:M,dataKey:r,index:_,className:"recharts-bar-background-rectangle"});return v.createElement(iD,gu({key:"background-bar-".concat(P.index)},P))}))}function g4e(t){var{showLabels:e,children:n,rects:r}=t,s=r?.map(i=>{var a={x:i.x,y:i.y,width:i.width,height:i.height};return $s($s({},a),{},{value:i.value,payload:i.payload,parentViewBox:i.parentViewBox,viewBox:a,fill:i.fill})});return v.createElement(yG,{value:e?s:void 0},n)}function y4e(t){var{shape:e,activeBar:n,baseProps:r,entry:s,index:i,dataKey:a}=t,o=st(fu),c=st(JY),d=n&&String(i)===o&&(c==null||a===c),h=d?n:e;return v.createElement(iD,gu({},r,s,{isActive:d,option:h,index:i,dataKey:a}))}function v4e(t){var{shape:e,baseProps:n,entry:r,index:s,dataKey:i}=t;return v.createElement(iD,gu({},n,r,{isActive:!1,option:e,index:s,dataKey:i}))}function x4e(t){var{data:e,props:n}=t,r=Wo(n),{id:s}=r,i=l1(r,o4e),{shape:a,dataKey:o,activeBar:c}=n,{onMouseEnter:d,onClick:h,onMouseLeave:p}=n,m=l1(n,l4e),y=JI(d,o),x=ZI(p),_=eD(h,o);return e?v.createElement(v.Fragment,null,e.map((w,N)=>v.createElement(hs,gu({className:"recharts-bar-rectangle"},b_(m,w,N),{onMouseEnter:y(w,N),onMouseLeave:x(w,N),onClick:_(w,N),key:"rectangle-".concat(w?.x,"-").concat(w?.y,"-").concat(w?.value,"-").concat(N)}),c?v.createElement(y4e,{shape:a,activeBar:c,baseProps:i,entry:w,index:N,dataKey:o}):v.createElement(v4e,{shape:a,baseProps:i,entry:w,index:N,dataKey:o})))):null}function b4e(t){var{props:e,previousRectanglesRef:n}=t,{data:r,layout:s,isAnimationActive:i,animationBegin:a,animationDuration:o,animationEasing:c,onAnimationEnd:d,onAnimationStart:h}=e,p=n.current,m=Ey(e,"recharts-bar-"),[y,x]=v.useState(!1),_=!y,w=v.useCallback(()=>{typeof d=="function"&&d(),x(!1)},[d]),N=v.useCallback(()=>{typeof h=="function"&&h(),x(!0)},[h]);return v.createElement(g4e,{showLabels:_,rects:r},v.createElement(_y,{animationId:m,begin:a,duration:o,isActive:i,easing:c,onAnimationEnd:w,onAnimationStart:N,key:m},k=>{var S=k===1?r:r?.map((O,R)=>{var M=p&&p[R];if(M)return $s($s({},O),{},{x:nr(M.x,O.x,k),y:nr(M.y,O.y,k),width:nr(M.width,O.width,k),height:nr(M.height,O.height,k)});if(s==="horizontal"){var P=nr(0,O.height,k);return $s($s({},O),{},{y:O.y+O.height-P,height:P})}var C=nr(0,O.width,k);return $s($s({},O),{},{width:C})});return k>0&&(n.current=S??null),S==null?null:v.createElement(hs,null,v.createElement(x4e,{props:e,data:S}))}),v.createElement(KI,{label:e.label}),e.children)}function w4e(t){var e=v.useRef(null);return v.createElement(b4e,{previousRectanglesRef:e,props:t})}var DG=0,_4e=(t,e)=>{var n=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:n,errorVal:Sn(t,e)}};class E4e extends v.PureComponent{render(){var{hide:e,data:n,dataKey:r,className:s,xAxisId:i,yAxisId:a,needClip:o,background:c,id:d}=this.props;if(e||n==null)return null;var h=Et("recharts-bar",s),p=d;return v.createElement(hs,{className:h,id:d},o&&v.createElement("defs",null,v.createElement(IG,{clipPathId:p,xAxisId:i,yAxisId:a})),v.createElement(hs,{className:"recharts-bar-rectangles",clipPath:o?"url(#clipPath-".concat(p,")"):void 0},v.createElement(m4e,{data:n,dataKey:r,background:c,allOtherBarProps:this.props}),v.createElement(w4e,this.props)))}}var N4e={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!Nu.isSsr,legendType:"rect",minPointSize:DG,xAxisId:0,yAxisId:0};function S4e(t){var{xAxisId:e,yAxisId:n,hide:r,legendType:s,minPointSize:i,activeBar:a,animationBegin:o,animationDuration:c,animationEasing:d,isAnimationActive:h}=t,{needClip:p}=aD(e,n),m=R_(),y=yi(),x=SA(t.children,pu),_=st(k=>Z4e(k,e,n,y,t.id,x));if(m!=="vertical"&&m!=="horizontal")return null;var w,N=_?.[0];return N==null||N.height==null||N.width==null?w=0:w=m==="vertical"?N.height/2:N.width/2,v.createElement(AG,{xAxisId:e,yAxisId:n,data:_,dataPointFormatter:_4e,errorBarOffset:w},v.createElement(E4e,gu({},t,{layout:m,needClip:p,data:_,xAxisId:e,yAxisId:n,hide:r,legendType:s,minPointSize:i,activeBar:a,animationBegin:o,animationDuration:c,animationEasing:d,isAnimationActive:h})))}function k4e(t){var{layout:e,barSettings:{dataKey:n,minPointSize:r},pos:s,bandSize:i,xAxis:a,yAxis:o,xAxisTicks:c,yAxisTicks:d,stackedData:h,displayedData:p,offset:m,cells:y,parentViewBox:x}=t,_=e==="horizontal"?o:a,w=h?_.scale.domain():null,N=Xke({numericAxis:_});return p.map((k,S)=>{var O,R,M,P,C,D;h?O=Hke(h[S],w):(O=Sn(k,n),Array.isArray(O)||(O=[N,O]));var $=XOe(r,DG)(O[1],S);if(e==="horizontal"){var F,[U,I]=[o.scale(O[0]),o.scale(O[1])];R=p$({axis:a,ticks:c,bandSize:i,offset:s.offset,entry:k,index:S}),M=(F=I??U)!==null&&F!==void 0?F:void 0,P=s.size;var z=U-I;if(C=Bi(z)?0:z,D={x:R,y:m.top,width:P,height:m.height},Math.abs($)>0&&Math.abs(C)<Math.abs($)){var Q=Xr(C||$)*(Math.abs($)-Math.abs(C));M-=Q,C+=Q}}else{var[ne,W]=[a.scale(O[0]),a.scale(O[1])];if(R=ne,M=p$({axis:o,ticks:d,bandSize:i,offset:s.offset,entry:k,index:S}),P=W-ne,C=s.size,D={x:m.left,y:M,width:m.width,height:C},Math.abs($)>0&&Math.abs(P)<Math.abs($)){var K=Xr(P||$)*(Math.abs($)-Math.abs(P));P+=K}}if(R==null||M==null||P==null||C==null)return null;var Y=$s($s({},k),{},{x:R,y:M,width:P,height:C,value:h?O:O[1],payload:k,background:D,tooltipPosition:{x:R+P/2,y:M+C/2},parentViewBox:x},y&&y[S]&&y[S].props);return Y}).filter(Boolean)}function T4e(t){var e=ps(t,N4e),n=yi();return v.createElement(nD,{id:e.id,type:"bar"},r=>v.createElement(v.Fragment,null,v.createElement(kG,{legendPayload:f4e(e)}),v.createElement(tD,{fn:p4e,args:e}),v.createElement(CG,{type:"bar",id:r,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:Qke(e.stackId),hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:n}),v.createElement(S4e,gu({},e,{id:r}))))}var RG=v.memo(T4e);RG.displayName="Bar";function CV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Ax(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?CV(Object(n),!0).forEach(function(r){C4e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):CV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function C4e(t,e,n){return(e=j4e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function j4e(t){var e=P4e(t,"string");return typeof e=="symbol"?e:e+""}function P4e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var A4e=(t,e)=>e,I4e=(t,e,n)=>n,D4e=(t,e,n,r)=>r,R4e=(t,e,n,r,s)=>s,Oy=ye([q_,R4e],(t,e)=>t.filter(n=>n.type==="bar").find(n=>n.id===e)),O4e=ye([Oy],t=>t?.maxBarSize),M4e=(t,e,n,r,s,i)=>i,jV=(t,e,n)=>{var r=n??t;if(!Un(r))return Is(r,e,0)},L4e=ye([Yt,q_,A4e,I4e,D4e],(t,e,n,r,s)=>e.filter(i=>t==="horizontal"?i.xAxisId===n:i.yAxisId===r).filter(i=>i.isPanorama===s).filter(i=>i.hide===!1).filter(i=>i.type==="bar")),F4e=(t,e,n,r)=>{var s=Yt(t);return s==="horizontal"?wj(t,"yAxis",n,r):wj(t,"xAxis",e,r)},$4e=(t,e,n)=>{var r=Yt(t);return r==="horizontal"?j6(t,"xAxis",e):j6(t,"yAxis",n)},V4e=(t,e,n)=>{var r={},s=t.filter(H_),i=t.filter(d=>d.stackId==null),a=s.reduce((d,h)=>(d[h.stackId]||(d[h.stackId]=[]),d[h.stackId].push(h),d),r),o=Object.entries(a).map(d=>{var[h,p]=d,m=p.map(x=>x.dataKey),y=jV(e,n,p[0].barSize);return{stackId:h,dataKeys:m,barSize:y}}),c=i.map(d=>{var h=[d.dataKey].filter(m=>m!=null),p=jV(e,n,d.barSize);return{stackId:void 0,dataKeys:h,barSize:p}});return[...o,...c]},B4e=ye([L4e,vPe,$4e],V4e),U4e=(t,e,n,r,s)=>{var i,a,o=Oy(t,e,n,r,s);if(o!=null){var c=Yt(t),d=QK(t),{maxBarSize:h}=o,p=Un(h)?d:h,m,y;return c==="horizontal"?(m=hu(t,"xAxis",e,r),y=du(t,"xAxis",e,r)):(m=hu(t,"yAxis",n,r),y=du(t,"yAxis",n,r)),(i=(a=P0(m,y,!0))!==null&&a!==void 0?a:p)!==null&&i!==void 0?i:0}},OG=(t,e,n,r)=>{var s=Yt(t),i,a;return s==="horizontal"?(i=hu(t,"xAxis",e,r),a=du(t,"xAxis",e,r)):(i=hu(t,"yAxis",n,r),a=du(t,"yAxis",n,r)),P0(i,a)};function z4e(t,e,n,r,s){var i=r.length;if(!(i<1)){var a=Is(t,n,0,!0),o,c=[];if(zi(r[0].barSize)){var d=!1,h=n/i,p=r.reduce((N,k)=>N+(k.barSize||0),0);p+=(i-1)*a,p>=n&&(p-=(i-1)*a,a=0),p>=n&&h>0&&(d=!0,h*=.9,p=i*h);var m=(n-p)/2>>0,y={offset:m-a,size:0};o=r.reduce((N,k)=>{var S,O={stackId:k.stackId,dataKeys:k.dataKeys,position:{offset:y.offset+y.size+a,size:d?h:(S=k.barSize)!==null&&S!==void 0?S:0}},R=[...N,O];return y=R[R.length-1].position,R},c)}else{var x=Is(e,n,0,!0);n-2*x-(i-1)*a<=0&&(a=0);var _=(n-2*x-(i-1)*a)/i;_>1&&(_>>=0);var w=zi(s)?Math.min(_,s):_;o=r.reduce((N,k,S)=>[...N,{stackId:k.stackId,dataKeys:k.dataKeys,position:{offset:x+(_+a)*S+(_-w)/2,size:w}}],c)}return o}}var W4e=(t,e,n,r,s,i,a)=>{var o=Un(a)?e:a,c=z4e(n,r,s!==i?s:i,t,o);return s!==i&&c!=null&&(c=c.map(d=>Ax(Ax({},d),{},{position:Ax(Ax({},d.position),{},{offset:d.position.offset-s/2})}))),c},H4e=ye([B4e,QK,yPe,XK,U4e,OG,O4e],W4e),q4e=(t,e,n,r)=>hu(t,"xAxis",e,r),K4e=(t,e,n,r)=>hu(t,"yAxis",n,r),Y4e=(t,e,n,r)=>du(t,"xAxis",e,r),G4e=(t,e,n,r)=>du(t,"yAxis",n,r),Q4e=ye([H4e,Oy],(t,e)=>{if(!(t==null||e==null)){var n=t.find(r=>r.stackId===e.stackId&&e.dataKey!=null&&r.dataKeys.includes(e.dataKey));if(n!=null)return n.position}}),X4e=(t,e)=>{var n=vI(e);if(!(!t||n==null||e==null)){var{stackId:r}=e;if(r!=null){var s=t[r];if(s){var{stackedData:i}=s;if(i)return i.find(a=>a.key===n)}}}},J4e=ye([F4e,Oy],X4e),Z4e=ye([Mr,LA,q4e,K4e,Y4e,G4e,Q4e,Yt,B_,OG,J4e,Oy,M4e],(t,e,n,r,s,i,a,o,c,d,h,p,m)=>{var{chartData:y,dataStartIndex:x,dataEndIndex:_}=c;if(!(p==null||a==null||e==null||o!=="horizontal"&&o!=="vertical"||n==null||r==null||s==null||i==null||d==null)){var{data:w}=p,N;if(w!=null&&w.length>0?N=w:N=y?.slice(x,_+1),N!=null)return k4e({layout:o,barSettings:p,pos:a,parentViewBox:e,bandSize:d,xAxis:n,yAxis:r,xAxisTicks:s,yAxisTicks:i,stackedData:h,displayedData:N,offset:t,cells:m})}}),MG=t=>{var{chartData:e}=t,n=pr(),r=yi();return v.useEffect(()=>r?()=>{}:(n($6(e)),()=>{n($6(void 0))}),[e,n,r]),null},PV={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},LG=Wi({name:"brush",initialState:PV,reducers:{setBrushSettings(t,e){return e.payload==null?PV:e.payload}}}),{setBrushSettings:sFe}=LG.actions,eMe=LG.reducer;function tMe(t,e,n){return(e=nMe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nMe(t){var e=rMe(t,"string");return typeof e=="symbol"?e:e+""}function rMe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class oD{static create(e){return new oD(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(r)switch(r){case"start":return this.scale(e);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+s}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(e)+i}default:return this.scale(e)}if(n){var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+a}return this.scale(e)}}isInRange(e){var n=this.range(),r=n[0],s=n[n.length-1];return r<=s?e>=r&&e<=s:e>=s&&e<=r}}tMe(oD,"EPS",1e-4);function sMe(t){return(t%180+180)%180}var iMe=function(e){var{width:n,height:r}=e,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=sMe(s),a=i*Math.PI/180,o=Math.atan(r/n),c=a>o&&a<Math.PI-o?r/Math.sin(a):n/Math.cos(a);return Math.abs(c)},aMe={dots:[],areas:[],lines:[]},FG=Wi({name:"referenceElements",initialState:aMe,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var n=Dl(t).dots.findIndex(r=>r===e.payload);n!==-1&&t.dots.splice(n,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var n=Dl(t).areas.findIndex(r=>r===e.payload);n!==-1&&t.areas.splice(n,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var n=Dl(t).lines.findIndex(r=>r===e.payload);n!==-1&&t.lines.splice(n,1)}}}),{addDot:iFe,removeDot:aFe,addArea:oFe,removeArea:lFe,addLine:cFe,removeLine:uFe}=FG.actions,oMe=FG.reducer,lMe=v.createContext(void 0),cMe=t=>{var{children:e}=t,[n]=v.useState("".concat(T0("recharts"),"-clip")),r=sD();if(r==null)return null;var{x:s,y:i,width:a,height:o}=r;return v.createElement(lMe.Provider,{value:n},v.createElement("defs",null,v.createElement("clipPath",{id:n},v.createElement("rect",{x:s,y:i,height:o,width:a}))),e)};function Rp(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function $G(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],s=0;s<t.length;s+=e)r.push(t[s]);return r}function uMe(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return iMe(r,n)}function dMe(t,e,n){var r=n==="width",{x:s,y:i,width:a,height:o}=t;return e===1?{start:r?s:i,end:r?s+a:i+o}:{start:r?s+a:i+o,end:r?s:i}}function c1(t,e,n,r,s){if(t*e<t*r||t*e>t*s)return!1;var i=n();return t*(e-t*i/2-r)>=0&&t*(e+t*i/2-s)<=0}function hMe(t,e){return $G(t,e+1)}function fMe(t,e,n,r,s){for(var i=(r||[]).slice(),{start:a,end:o}=e,c=0,d=1,h=a,p=function(){var x=r?.[c];if(x===void 0)return{v:$G(r,d)};var _=c,w,N=()=>(w===void 0&&(w=n(x,_)),w),k=x.coordinate,S=c===0||c1(t,k,N,h,o);S||(c=0,h=a,d+=1),S&&(h=k+t*(N()/2+s),c+=d)},m;d<=i.length;)if(m=p(),m)return m.v;return[]}function AV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Es(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?AV(Object(n),!0).forEach(function(r){pMe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function pMe(t,e,n){return(e=mMe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mMe(t){var e=gMe(t,"string");return typeof e=="symbol"?e:e+""}function gMe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function yMe(t,e,n,r,s){for(var i=(r||[]).slice(),a=i.length,{start:o}=e,{end:c}=e,d=function(m){var y=i[m],x,_=()=>(x===void 0&&(x=n(y,m)),x);if(m===a-1){var w=t*(y.coordinate+t*_()/2-c);i[m]=y=Es(Es({},y),{},{tickCoord:w>0?y.coordinate-w*t:y.coordinate})}else i[m]=y=Es(Es({},y),{},{tickCoord:y.coordinate});var N=c1(t,y.tickCoord,_,o,c);N&&(c=y.tickCoord-t*(_()/2+s),i[m]=Es(Es({},y),{},{isShow:!0}))},h=a-1;h>=0;h--)d(h);return i}function vMe(t,e,n,r,s,i){var a=(r||[]).slice(),o=a.length,{start:c,end:d}=e;if(i){var h=r[o-1],p=n(h,o-1),m=t*(h.coordinate+t*p/2-d);a[o-1]=h=Es(Es({},h),{},{tickCoord:m>0?h.coordinate-m*t:h.coordinate});var y=c1(t,h.tickCoord,()=>p,c,d);y&&(d=h.tickCoord-t*(p/2+s),a[o-1]=Es(Es({},h),{},{isShow:!0}))}for(var x=i?o-1:o,_=function(k){var S=a[k],O,R=()=>(O===void 0&&(O=n(S,k)),O);if(k===0){var M=t*(S.coordinate-t*R()/2-c);a[k]=S=Es(Es({},S),{},{tickCoord:M<0?S.coordinate-M*t:S.coordinate})}else a[k]=S=Es(Es({},S),{},{tickCoord:S.coordinate});var P=c1(t,S.tickCoord,R,c,d);P&&(c=S.tickCoord+t*(R()/2+s),a[k]=Es(Es({},S),{},{isShow:!0}))},w=0;w<x;w++)_(w);return a}function lD(t,e,n){var{tick:r,ticks:s,viewBox:i,minTickGap:a,orientation:o,interval:c,tickFormatter:d,unit:h,angle:p}=t;if(!s||!s.length||!r)return[];if(dt(c)||Nu.isSsr){var m;return(m=hMe(s,dt(c)?c:0))!==null&&m!==void 0?m:[]}var y=[],x=o==="top"||o==="bottom"?"width":"height",_=h&&x==="width"?Qg(h,{fontSize:e,letterSpacing:n}):{width:0,height:0},w=(S,O)=>{var R=typeof d=="function"?d(S.value,O):S.value;return x==="width"?uMe(Qg(R,{fontSize:e,letterSpacing:n}),_,p):Qg(R,{fontSize:e,letterSpacing:n})[x]},N=s.length>=2?Xr(s[1].coordinate-s[0].coordinate):1,k=dMe(i,N,x);return c==="equidistantPreserveStart"?fMe(N,k,w,s,a):(c==="preserveStart"||c==="preserveStartEnd"?y=vMe(N,k,w,s,a,c==="preserveStartEnd"):y=yMe(N,k,w,s,a),y.filter(S=>S.isShow))}var xMe=t=>{var{ticks:e,label:n,labelGapWithTick:r=5,tickSize:s=0,tickMargin:i=0}=t,a=0;if(e){e.forEach(h=>{if(h){var p=h.getBoundingClientRect();p.width>a&&(a=p.width)}});var o=n?n.getBoundingClientRect().width:0,c=s+i,d=a+c+o+(n?r:0);return Math.round(d)}return 0},bMe=["axisLine","width","height","className","hide","ticks"],wMe=["viewBox"],_Me=["viewBox"];function jj(t,e){if(t==null)return{};var n,r,s=EMe(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function EMe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function lh(){return lh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lh.apply(null,arguments)}function IV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Ar(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?IV(Object(n),!0).forEach(function(r){NMe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):IV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function NMe(t,e,n){return(e=SMe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function SMe(t){var e=kMe(t,"string");return typeof e=="symbol"?e:e+""}function kMe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var cD={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"};function TMe(t){var{x:e,y:n,width:r,height:s,orientation:i,mirror:a,axisLine:o,otherSvgProps:c}=t;if(!o)return null;var d=Ar(Ar(Ar({},c),Qn(o,!1)),{},{fill:"none"});if(i==="top"||i==="bottom"){var h=+(i==="top"&&!a||i==="bottom"&&a);d=Ar(Ar({},d),{},{x1:e,y1:n+h*s,x2:e+r,y2:n+h*s})}else{var p=+(i==="left"&&!a||i==="right"&&a);d=Ar(Ar({},d),{},{x1:e+p*r,y1:n,x2:e+p*r,y2:n+s})}return v.createElement("line",lh({},d,{className:Et("recharts-cartesian-axis-line",sh(o,"className"))}))}function CMe(t,e,n,r,s,i,a,o,c){var d,h,p,m,y,x,_=o?-1:1,w=t.tickSize||a,N=dt(t.tickCoord)?t.tickCoord:t.coordinate;switch(i){case"top":d=h=t.coordinate,m=n+ +!o*s,p=m-_*w,x=p-_*c,y=N;break;case"left":p=m=t.coordinate,h=e+ +!o*r,d=h-_*w,y=d-_*c,x=N;break;case"right":p=m=t.coordinate,h=e+ +o*r,d=h+_*w,y=d+_*c,x=N;break;default:d=h=t.coordinate,m=n+ +o*s,p=m+_*w,x=p+_*c,y=N;break}return{line:{x1:d,y1:p,x2:h,y2:m},tick:{x:y,y:x}}}function jMe(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function PMe(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function AMe(t){var{option:e,tickProps:n,value:r}=t,s,i=Et(n.className,"recharts-cartesian-axis-tick-value");if(v.isValidElement(e))s=v.cloneElement(e,Ar(Ar({},n),{},{className:i}));else if(typeof e=="function")s=e(Ar(Ar({},n),{},{className:i}));else{var a="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(a=Et(a,e?.className)),s=v.createElement(J_,lh({},n,{className:a}),r)}return s}function IMe(t){var{ticks:e=[],tick:n,tickLine:r,stroke:s,tickFormatter:i,unit:a,padding:o,tickTextProps:c,orientation:d,mirror:h,x:p,y:m,width:y,height:x,tickSize:_,tickMargin:w,fontSize:N,letterSpacing:k,getTicksConfig:S,events:O}=t,R=lD(Ar(Ar({},S),{},{ticks:e}),N,k),M=jMe(d,h),P=PMe(d,h),C=Wo(S),D=Qn(n,!1),$=Ar(Ar({},C),{},{fill:"none"},Qn(r,!1)),F=R.map((U,I)=>{var{line:z,tick:Q}=CMe(U,p,m,y,x,d,_,h,w),ne=Ar(Ar(Ar(Ar({textAnchor:M,verticalAnchor:P},C),{},{stroke:"none",fill:s},D),Q),{},{index:I,payload:U,visibleTicksCount:R.length,tickFormatter:i,padding:o},c);return v.createElement(hs,lh({className:"recharts-cartesian-axis-tick",key:"tick-".concat(U.value,"-").concat(U.coordinate,"-").concat(U.tickCoord)},b_(O,U,I)),r&&v.createElement("line",lh({},$,z,{className:Et("recharts-cartesian-axis-tick-line",sh(r,"className"))})),n&&v.createElement(AMe,{option:n,tickProps:ne,value:"".concat(typeof i=="function"?i(U.value,I):U.value).concat(a||"")}))});return F.length>0?v.createElement("g",{className:"recharts-cartesian-axis-ticks"},F):null}var DMe=v.forwardRef((t,e)=>{var{axisLine:n,width:r,height:s,className:i,hide:a,ticks:o}=t,c=jj(t,bMe),[d,h]=v.useState(""),[p,m]=v.useState(""),y=v.useRef([]);v.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var _;return xMe({ticks:y.current,label:(_=t.labelRef)===null||_===void 0?void 0:_.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var x=v.useCallback(_=>{if(_){var w=_.getElementsByClassName("recharts-cartesian-axis-tick-value");y.current=Array.from(w);var N=w[0];if(N){var k=window.getComputedStyle(N),S=k.fontSize,O=k.letterSpacing;(S!==d||O!==p)&&(h(S),m(O))}}},[d,p]);return a||r!=null&&r<=0||s!=null&&s<=0?null:v.createElement(hs,{className:Et("recharts-cartesian-axis",i),ref:x},v.createElement(TMe,{x:t.x,y:t.y,width:r,height:s,orientation:t.orientation,mirror:t.mirror,axisLine:n,otherSvgProps:Wo(t)}),v.createElement(IMe,{ticks:o,tick:t.tick,tickLine:t.tickLine,stroke:t.stroke,tickFormatter:t.tickFormatter,unit:t.unit,padding:t.padding,tickTextProps:t.tickTextProps,orientation:t.orientation,mirror:t.mirror,x:t.x,y:t.y,width:t.width,height:t.height,tickSize:t.tickSize,tickMargin:t.tickMargin,fontSize:d,letterSpacing:p,getTicksConfig:t,events:c}),v.createElement(FDe,{x:t.x,y:t.y,width:t.width,height:t.height},v.createElement(YDe,{label:t.label}),t.children))}),RMe=v.memo(DMe,(t,e)=>{var{viewBox:n}=t,r=jj(t,wMe),{viewBox:s}=e,i=jj(e,_Me);return Rp(n,s)&&Rp(r,i)}),uD=v.forwardRef((t,e)=>{var n=ps(t,cD);return v.createElement(RMe,lh({},n,{ref:e}))});uD.displayName="CartesianAxis";var OMe=["x1","y1","x2","y2","key"],MMe=["offset"],LMe=["xAxisId","yAxisId"],FMe=["xAxisId","yAxisId"];function DV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function ks(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DV(Object(n),!0).forEach(function(r){$Me(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $Me(t,e,n){return(e=VMe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function VMe(t){var e=BMe(t,"string");return typeof e=="symbol"?e:e+""}function BMe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Td(){return Td=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Td.apply(null,arguments)}function u1(t,e){if(t==null)return{};var n,r,s=UMe(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function UMe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var zMe=t=>{var{fill:e}=t;if(!e||e==="none")return null;var{fillOpacity:n,x:r,y:s,width:i,height:a,ry:o}=t;return v.createElement("rect",{x:r,y:s,ry:o,width:i,height:a,stroke:"none",fill:e,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function VG(t,e){var n;if(v.isValidElement(t))n=v.cloneElement(t,e);else if(typeof t=="function")n=t(e);else{var{x1:r,y1:s,x2:i,y2:a,key:o}=e,c=u1(e,OMe),d=Wo(c),{offset:h}=d,p=u1(d,MMe);n=v.createElement("line",Td({},p,{x1:r,y1:s,x2:i,y2:a,fill:"none",key:o}))}return n}function WMe(t){var{x:e,width:n,horizontal:r=!0,horizontalPoints:s}=t;if(!r||!s||!s.length)return null;var{xAxisId:i,yAxisId:a}=t,o=u1(t,LMe),c=s.map((d,h)=>{var p=ks(ks({},o),{},{x1:e,y1:d,x2:e+n,y2:d,key:"line-".concat(h),index:h});return VG(r,p)});return v.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function HMe(t){var{y:e,height:n,vertical:r=!0,verticalPoints:s}=t;if(!r||!s||!s.length)return null;var{xAxisId:i,yAxisId:a}=t,o=u1(t,FMe),c=s.map((d,h)=>{var p=ks(ks({},o),{},{x1:d,y1:e,x2:d,y2:e+n,key:"line-".concat(h),index:h});return VG(r,p)});return v.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function qMe(t){var{horizontalFill:e,fillOpacity:n,x:r,y:s,width:i,height:a,horizontalPoints:o,horizontal:c=!0}=t;if(!c||!e||!e.length)return null;var d=o.map(p=>Math.round(p+s-s)).sort((p,m)=>p-m);s!==d[0]&&d.unshift(0);var h=d.map((p,m)=>{var y=!d[m+1],x=y?s+a-p:d[m+1]-p;if(x<=0)return null;var _=m%e.length;return v.createElement("rect",{key:"react-".concat(m),y:p,x:r,height:x,width:i,stroke:"none",fill:e[_],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return v.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function KMe(t){var{vertical:e=!0,verticalFill:n,fillOpacity:r,x:s,y:i,width:a,height:o,verticalPoints:c}=t;if(!e||!n||!n.length)return null;var d=c.map(p=>Math.round(p+s-s)).sort((p,m)=>p-m);s!==d[0]&&d.unshift(0);var h=d.map((p,m)=>{var y=!d[m+1],x=y?s+a-p:d[m+1]-p;if(x<=0)return null;var _=m%n.length;return v.createElement("rect",{key:"react-".concat(m),x:p,y:i,width:x,height:o,stroke:"none",fill:n[_],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return v.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var YMe=(t,e)=>{var{xAxis:n,width:r,height:s,offset:i}=t;return Oq(lD(ks(ks(ks({},cD),n),{},{ticks:Mq(n),viewBox:{x:0,y:0,width:r,height:s}})),i.left,i.left+i.width,e)},GMe=(t,e)=>{var{yAxis:n,width:r,height:s,offset:i}=t;return Oq(lD(ks(ks(ks({},cD),n),{},{ticks:Mq(n),viewBox:{x:0,y:0,width:r,height:s}})),i.top,i.top+i.height,e)},QMe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function eE(t){var e=Bq(),n=Uq(),r=Vq(),s=ks(ks({},ps(t,QMe)),{},{x:dt(t.x)?t.x:r.left,y:dt(t.y)?t.y:r.top,width:dt(t.width)?t.width:r.width,height:dt(t.height)?t.height:r.height}),{xAxisId:i,yAxisId:a,x:o,y:c,width:d,height:h,syncWithTicks:p,horizontalValues:m,verticalValues:y}=s,x=yi(),_=st(D=>P6(D,"xAxis",i,x)),w=st(D=>P6(D,"yAxis",a,x));if(!dt(d)||d<=0||!dt(h)||h<=0||!dt(o)||o!==+o||!dt(c)||c!==+c)return null;var N=s.verticalCoordinatesGenerator||YMe,k=s.horizontalCoordinatesGenerator||GMe,{horizontalPoints:S,verticalPoints:O}=s;if((!S||!S.length)&&typeof k=="function"){var R=m&&m.length,M=k({yAxis:w?ks(ks({},w),{},{ticks:R?m:w.ticks}):void 0,width:e,height:n,offset:r},R?!0:p);Gg(Array.isArray(M),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof M,"]")),Array.isArray(M)&&(S=M)}if((!O||!O.length)&&typeof N=="function"){var P=y&&y.length,C=N({xAxis:_?ks(ks({},_),{},{ticks:P?y:_.ticks}):void 0,width:e,height:n,offset:r},P?!0:p);Gg(Array.isArray(C),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof C,"]")),Array.isArray(C)&&(O=C)}return v.createElement("g",{className:"recharts-cartesian-grid"},v.createElement(zMe,{fill:s.fill,fillOpacity:s.fillOpacity,x:s.x,y:s.y,width:s.width,height:s.height,ry:s.ry}),v.createElement(qMe,Td({},s,{horizontalPoints:S})),v.createElement(KMe,Td({},s,{verticalPoints:O})),v.createElement(WMe,Td({},s,{offset:r,horizontalPoints:S,xAxis:_,yAxis:w})),v.createElement(HMe,Td({},s,{offset:r,verticalPoints:O,xAxis:_,yAxis:w})))}eE.displayName="CartesianGrid";var BG=(t,e,n,r)=>hu(t,"xAxis",e,r),UG=(t,e,n,r)=>du(t,"xAxis",e,r),zG=(t,e,n,r)=>hu(t,"yAxis",n,r),WG=(t,e,n,r)=>du(t,"yAxis",n,r),XMe=ye([Yt,BG,zG,UG,WG],(t,e,n,r,s)=>Eu(t,"xAxis")?P0(e,r,!1):P0(n,s,!1)),JMe=(t,e,n,r,s)=>s;function ZMe(t){return t.type==="line"}var eLe=ye([q_,JMe],(t,e)=>t.filter(ZMe).find(n=>n.id===e)),tLe=ye([Yt,BG,zG,UG,WG,eLe,XMe,B_],(t,e,n,r,s,i,a,o)=>{var{chartData:c,dataStartIndex:d,dataEndIndex:h}=o;if(!(i==null||e==null||n==null||r==null||s==null||r.length===0||s.length===0||a==null)){var{dataKey:p,data:m}=i,y;if(m!=null&&m.length>0?y=m:y=c?.slice(d,h+1),y!=null)return ELe({layout:t,xAxis:e,yAxis:n,xAxisTicks:r,yAxisTicks:s,dataKey:p,bandSize:a,displayedData:y})}}),nLe=["id"],rLe=["type","layout","connectNulls","needClip"],sLe=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function RV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Ai(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?RV(Object(n),!0).forEach(function(r){iLe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function iLe(t,e,n){return(e=aLe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function aLe(t){var e=oLe(t,"string");return typeof e=="symbol"?e:e+""}function oLe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dD(t,e){if(t==null)return{};var n,r,s=lLe(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function lLe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function ch(){return ch=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ch.apply(null,arguments)}var cLe=t=>{var{dataKey:e,name:n,stroke:r,legendType:s,hide:i}=t;return[{inactive:i,dataKey:e,type:s,color:r,value:sm(n,e),payload:t}]};function uLe(t){var{dataKey:e,data:n,stroke:r,strokeWidth:s,fill:i,name:a,hide:o,unit:c}=t;return{dataDefinedOnItem:n,positions:void 0,settings:{stroke:r,strokeWidth:s,fill:i,dataKey:e,nameKey:void 0,name:sm(a,e),hide:o,type:t.tooltipType,color:t.stroke,unit:c}}}var HG=(t,e)=>"".concat(e,"px ").concat(t-e,"px");function dLe(t,e){for(var n=t.length%2!==0?[...t,0]:t,r=[],s=0;s<e;++s)r=[...r,...n];return r}var hLe=(t,e,n)=>{var r=n.reduce((p,m)=>p+m);if(!r)return HG(e,t);for(var s=Math.floor(t/r),i=t%r,a=e-t,o=[],c=0,d=0;c<n.length;d+=n[c],++c)if(d+n[c]>i){o=[...n.slice(0,c),i-d];break}var h=o.length%2===0?[0,a]:[a];return[...dLe(n,s),...o,...h].map(p=>"".concat(p,"px")).join(", ")};function fLe(t,e){var n;if(v.isValidElement(t))n=v.cloneElement(t,e);else if(typeof t=="function")n=t(e);else{var r=Et("recharts-line-dot",typeof t!="boolean"?t.className:"");n=v.createElement(xG,ch({},e,{className:r}))}return n}function pLe(t,e){return t==null?!1:e?!0:t.length===1}function mLe(t){var{clipPathId:e,points:n,props:r}=t,{dot:s,dataKey:i,needClip:a}=r;if(!pLe(n,s))return null;var{id:o}=r,c=dD(r,nLe),d=AH(s),h=Wo(c),p=Qn(s,!0),m=n.map((x,_)=>{var w=Ai(Ai(Ai({key:"dot-".concat(_),r:3},h),p),{},{index:_,cx:x.x,cy:x.y,dataKey:i,value:x.value,payload:x.payload,points:n});return fLe(s,w)}),y={clipPath:a?"url(#clipPath-".concat(d?"":"dots-").concat(e,")"):void 0};return v.createElement(hs,ch({className:"recharts-line-dots",key:"dots"},y),m)}function gLe(t){var{showLabels:e,children:n,points:r}=t,s=v.useMemo(()=>r?.map(i=>{var a={x:i.x,y:i.y,width:0,height:0};return Ai(Ai({},a),{},{value:i.value,payload:i.payload,viewBox:a,parentViewBox:void 0,fill:void 0})}),[r]);return v.createElement(yG,{value:e?s:null},n)}function OV(t){var{clipPathId:e,pathRef:n,points:r,strokeDasharray:s,props:i}=t,{type:a,layout:o,connectNulls:c,needClip:d}=i,h=dD(i,rLe),p=Ai(Ai({},Qn(h,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:d?"url(#clipPath-".concat(e,")"):void 0,points:r,type:a,layout:o,connectNulls:c,strokeDasharray:s??i.strokeDasharray});return v.createElement(v.Fragment,null,r?.length>1&&v.createElement($A,ch({},p,{pathRef:n})),v.createElement(mLe,{points:r,clipPathId:e,props:i}))}function yLe(t){try{return t&&t.getTotalLength&&t.getTotalLength()||0}catch{return 0}}function vLe(t){var{clipPathId:e,props:n,pathRef:r,previousPointsRef:s,longestAnimatedLengthRef:i}=t,{points:a,strokeDasharray:o,isAnimationActive:c,animationBegin:d,animationDuration:h,animationEasing:p,animateNewValues:m,width:y,height:x,onAnimationEnd:_,onAnimationStart:w}=n,N=s.current,k=Ey(n,"recharts-line-"),[S,O]=v.useState(!1),R=!S,M=v.useCallback(()=>{typeof _=="function"&&_(),O(!1)},[_]),P=v.useCallback(()=>{typeof w=="function"&&w(),O(!0)},[w]),C=yLe(r.current),D=i.current;return v.createElement(gLe,{points:a,showLabels:R},n.children,v.createElement(_y,{animationId:k,begin:d,duration:h,isActive:c,easing:p,onAnimationEnd:M,onAnimationStart:P,key:k},$=>{var F=nr(D,C+D,$),U=Math.min(F,C),I;if(c)if(o){var z="".concat(o).split(/[,\s]+/gim).map(W=>parseFloat(W));I=hLe(U,C,z)}else I=HG(C,U);else I=o==null?void 0:String(o);if(N){var Q=N.length/a.length,ne=$===1?a:a.map((W,K)=>{var Y=Math.floor(K*Q);if(N[Y]){var G=N[Y];return Ai(Ai({},W),{},{x:nr(G.x,W.x,$),y:nr(G.y,W.y,$)})}return m?Ai(Ai({},W),{},{x:nr(y*2,W.x,$),y:nr(x/2,W.y,$)}):Ai(Ai({},W),{},{x:W.x,y:W.y})});return s.current=ne,v.createElement(OV,{props:n,points:ne,clipPathId:e,pathRef:r,strokeDasharray:I})}return $>0&&C>0&&(s.current=a,i.current=U),v.createElement(OV,{props:n,points:a,clipPathId:e,pathRef:r,strokeDasharray:I})}),v.createElement(KI,{label:n.label}))}function xLe(t){var{clipPathId:e,props:n}=t,r=v.useRef(null),s=v.useRef(0),i=v.useRef(null);return v.createElement(vLe,{props:n,clipPathId:e,previousPointsRef:r,longestAnimatedLengthRef:s,pathRef:i})}var bLe=(t,e)=>({x:t.x,y:t.y,value:t.value,errorVal:Sn(t.payload,e)});class wLe extends v.Component{render(){var e,{hide:n,dot:r,points:s,className:i,xAxisId:a,yAxisId:o,top:c,left:d,width:h,height:p,id:m,needClip:y}=this.props;if(n)return null;var x=Et("recharts-line",i),_=m,{r:w=3,strokeWidth:N=2}=(e=Qn(r,!1))!==null&&e!==void 0?e:{r:3,strokeWidth:2},k=AH(r),S=w*2+N;return v.createElement(v.Fragment,null,v.createElement(hs,{className:x},y&&v.createElement("defs",null,v.createElement(IG,{clipPathId:_,xAxisId:a,yAxisId:o}),!k&&v.createElement("clipPath",{id:"clipPath-dots-".concat(_)},v.createElement("rect",{x:d-S/2,y:c-S/2,width:h+S,height:p+S}))),v.createElement(AG,{xAxisId:a,yAxisId:o,data:s,dataPointFormatter:bLe,errorBarOffset:0},v.createElement(xLe,{props:this.props,clipPathId:_}))),v.createElement(BOe,{activeDot:this.props.activeDot,points:s,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var qG={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!Nu.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function _Le(t){var e=ps(t,qG),{activeDot:n,animateNewValues:r,animationBegin:s,animationDuration:i,animationEasing:a,connectNulls:o,dot:c,hide:d,isAnimationActive:h,label:p,legendType:m,xAxisId:y,yAxisId:x,id:_}=e,w=dD(e,sLe),{needClip:N}=aD(y,x),k=sD(),S=R_(),O=yi(),R=st($=>tLe($,y,x,O,_));if(S!=="horizontal"&&S!=="vertical"||R==null||k==null)return null;var{height:M,width:P,x:C,y:D}=k;return v.createElement(wLe,ch({},w,{id:_,connectNulls:o,dot:c,activeDot:n,animateNewValues:r,animationBegin:s,animationDuration:i,animationEasing:a,isAnimationActive:h,hide:d,label:p,legendType:m,xAxisId:y,yAxisId:x,points:R,layout:S,height:M,width:P,left:C,top:D,needClip:N}))}function ELe(t){var{layout:e,xAxis:n,yAxis:r,xAxisTicks:s,yAxisTicks:i,dataKey:a,bandSize:o,displayedData:c}=t;return c.map((d,h)=>{var p=Sn(d,a);if(e==="horizontal"){var m=f$({axis:n,ticks:s,bandSize:o,entry:d,index:h}),y=Un(p)?null:r.scale(p);return{x:m,y,value:p,payload:d}}var x=Un(p)?null:n.scale(p),_=f$({axis:r,ticks:i,bandSize:o,entry:d,index:h});return x==null||_==null?null:{x,y:_,value:p,payload:d}}).filter(Boolean)}function NLe(t){var e=ps(t,qG),n=yi();return v.createElement(nD,{id:e.id,type:"line"},r=>v.createElement(v.Fragment,null,v.createElement(kG,{legendPayload:cLe(e)}),v.createElement(tD,{fn:uLe,args:e}),v.createElement(CG,{type:"line",id:r,data:e.data,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,hide:e.hide,isPanorama:n}),v.createElement(_Le,ch({},e,{id:r}))))}var hD=v.memo(NLe);hD.displayName="Line";var SLe=["dangerouslySetInnerHTML","ticks"],kLe=["id"],TLe=["domain"],CLe=["domain"];function Pj(){return Pj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Pj.apply(null,arguments)}function d1(t,e){if(t==null)return{};var n,r,s=jLe(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function jLe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function PLe(t){var e=pr();return v.useEffect(()=>(e(COe(t)),()=>{e(jOe(t))}),[t,e]),null}var ALe=t=>{var{xAxisId:e,className:n}=t,r=st(LA),s=yi(),i="xAxis",a=st(w=>dm(w,i,e,s)),o=st(w=>DY(w,i,e,s)),c=st(w=>jY(w,e)),d=st(w=>cAe(w,e)),h=st(w=>aY(w,e));if(c==null||d==null||h==null)return null;var{dangerouslySetInnerHTML:p,ticks:m}=t,y=d1(t,SLe),{id:x}=h,_=d1(h,kLe);return v.createElement(uD,Pj({},y,_,{scale:a,x:d.x,y:d.y,width:c.width,height:c.height,className:Et("recharts-".concat(i," ").concat(i),n),viewBox:r,ticks:o}))},ILe={allowDataOverflow:Ti.allowDataOverflow,allowDecimals:Ti.allowDecimals,allowDuplicatedCategory:Ti.allowDuplicatedCategory,height:Ti.height,hide:!1,mirror:Ti.mirror,orientation:Ti.orientation,padding:Ti.padding,reversed:Ti.reversed,scale:Ti.scale,tickCount:Ti.tickCount,type:Ti.type,xAxisId:0},DLe=t=>{var e,n,r,s,i,a=ps(t,ILe);return v.createElement(v.Fragment,null,v.createElement(PLe,{interval:(e=a.interval)!==null&&e!==void 0?e:"preserveEnd",id:a.xAxisId,scale:a.scale,type:a.type,padding:a.padding,allowDataOverflow:a.allowDataOverflow,domain:a.domain,dataKey:a.dataKey,allowDuplicatedCategory:a.allowDuplicatedCategory,allowDecimals:a.allowDecimals,tickCount:a.tickCount,includeHidden:(n=a.includeHidden)!==null&&n!==void 0?n:!1,reversed:a.reversed,ticks:a.ticks,height:a.height,orientation:a.orientation,mirror:a.mirror,hide:a.hide,unit:a.unit,name:a.name,angle:(r=a.angle)!==null&&r!==void 0?r:0,minTickGap:(s=a.minTickGap)!==null&&s!==void 0?s:5,tick:(i=a.tick)!==null&&i!==void 0?i:!0,tickFormatter:a.tickFormatter}),v.createElement(ALe,a))},RLe=(t,e)=>{var{domain:n}=t,r=d1(t,TLe),{domain:s}=e,i=d1(e,CLe);return Rp(r,i)?Array.isArray(n)&&n.length===2&&Array.isArray(s)&&s.length===2?n[0]===s[0]&&n[1]===s[1]:Rp({domain:n},{domain:s}):!1},tE=v.memo(DLe,RLe);tE.displayName="XAxis";var OLe=["dangerouslySetInnerHTML","ticks"],MLe=["id"],LLe=["domain"],FLe=["domain"];function Aj(){return Aj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Aj.apply(null,arguments)}function h1(t,e){if(t==null)return{};var n,r,s=$Le(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function $Le(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function VLe(t){var e=pr();return v.useEffect(()=>(e(POe(t)),()=>{e(AOe(t))}),[t,e]),null}var BLe=t=>{var{yAxisId:e,className:n,width:r,label:s}=t,i=v.useRef(null),a=v.useRef(null),o=st(LA),c=yi(),d=pr(),h="yAxis",p=st(R=>dm(R,h,e,c)),m=st(R=>PY(R,e)),y=st(R=>dAe(R,e)),x=st(R=>DY(R,h,e,c)),_=st(R=>oY(R,e));if(v.useLayoutEffect(()=>{if(!(r!=="auto"||!m||qI(s)||v.isValidElement(s)||_==null)){var R=i.current;if(R){var M=R.getCalculatedWidth();Math.round(m.width)!==Math.round(M)&&d(IOe({id:e,width:M}))}}},[x,m,d,s,e,r,_]),m==null||y==null||_==null)return null;var{dangerouslySetInnerHTML:w,ticks:N}=t,k=h1(t,OLe),{id:S}=_,O=h1(_,MLe);return v.createElement(uD,Aj({},k,O,{ref:i,labelRef:a,scale:p,x:y.x,y:y.y,tickTextProps:r==="auto"?{width:void 0}:{width:r},width:m.width,height:m.height,className:Et("recharts-".concat(h," ").concat(h),n),viewBox:o,ticks:x}))},ULe={allowDataOverflow:Ci.allowDataOverflow,allowDecimals:Ci.allowDecimals,allowDuplicatedCategory:Ci.allowDuplicatedCategory,hide:!1,mirror:Ci.mirror,orientation:Ci.orientation,padding:Ci.padding,reversed:Ci.reversed,scale:Ci.scale,tickCount:Ci.tickCount,type:Ci.type,width:Ci.width,yAxisId:0},zLe=t=>{var e,n,r,s,i,a=ps(t,ULe);return v.createElement(v.Fragment,null,v.createElement(VLe,{interval:(e=a.interval)!==null&&e!==void 0?e:"preserveEnd",id:a.yAxisId,scale:a.scale,type:a.type,domain:a.domain,allowDataOverflow:a.allowDataOverflow,dataKey:a.dataKey,allowDuplicatedCategory:a.allowDuplicatedCategory,allowDecimals:a.allowDecimals,tickCount:a.tickCount,padding:a.padding,includeHidden:(n=a.includeHidden)!==null&&n!==void 0?n:!1,reversed:a.reversed,ticks:a.ticks,width:a.width,orientation:a.orientation,mirror:a.mirror,hide:a.hide,unit:a.unit,name:a.name,angle:(r=a.angle)!==null&&r!==void 0?r:0,minTickGap:(s=a.minTickGap)!==null&&s!==void 0?s:5,tick:(i=a.tick)!==null&&i!==void 0?i:!0,tickFormatter:a.tickFormatter}),v.createElement(BLe,a))},WLe=(t,e)=>{var{domain:n}=t,r=h1(t,LLe),{domain:s}=e,i=h1(e,FLe);return Rp(r,i)?Array.isArray(n)&&n.length===2&&Array.isArray(s)&&s.length===2?n[0]===s[0]&&n[1]===s[1]:Rp({domain:n},{domain:s}):!1},nE=v.memo(zLe,WLe);nE.displayName="YAxis";var cT={exports:{}},uT={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MV;function HLe(){if(MV)return uT;MV=1;var t=Lp();function e(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var n=typeof Object.is=="function"?Object.is:e,r=t.useSyncExternalStore,s=t.useRef,i=t.useEffect,a=t.useMemo,o=t.useDebugValue;return uT.useSyncExternalStoreWithSelector=function(c,d,h,p,m){var y=s(null);if(y.current===null){var x={hasValue:!1,value:null};y.current=x}else x=y.current;y=a(function(){function w(R){if(!N){if(N=!0,k=R,R=p(R),m!==void 0&&x.hasValue){var M=x.value;if(m(M,R))return S=M}return S=R}if(M=S,n(k,R))return M;var P=p(R);return m!==void 0&&m(M,P)?(k=R,M):(k=R,S=P)}var N=!1,k,S,O=h===void 0?null:h;return[function(){return w(d())},O===null?void 0:function(){return w(O())}]},[d,h,p,m]);var _=r(c,y[0],y[1]);return i(function(){x.hasValue=!0,x.value=_},[_]),o(_),_},uT}var LV;function qLe(){return LV||(LV=1,cT.exports=HLe()),cT.exports}qLe();function KLe(t){t()}function YLe(){let t=null,e=null;return{clear(){t=null,e=null},notify(){KLe(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const s=e={callback:n,next:null,prev:e};return s.prev?s.prev.next=s:t=s,function(){!r||t===null||(r=!1,s.next?s.next.prev=s.prev:e=s.prev,s.prev?s.prev.next=s.next:t=s.next)}}}}var FV={notify(){},get:()=>[]};function GLe(t,e){let n,r=FV,s=0,i=!1;function a(_){h();const w=r.subscribe(_);let N=!1;return()=>{N||(N=!0,w(),p())}}function o(){r.notify()}function c(){x.onStateChange&&x.onStateChange()}function d(){return i}function h(){s++,n||(n=t.subscribe(c),r=YLe())}function p(){s--,n&&s===0&&(n(),n=void 0,r.clear(),r=FV)}function m(){i||(i=!0,h())}function y(){i&&(i=!1,p())}const x={addNestedSub:a,notifyNestedSubs:o,handleChangeWrapper:c,isSubscribed:d,trySubscribe:m,tryUnsubscribe:y,getListeners:()=>r};return x}var QLe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",XLe=QLe(),JLe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",ZLe=JLe(),e3e=()=>XLe||ZLe?v.useLayoutEffect:v.useEffect,t3e=e3e(),n3e=Symbol.for("react-redux-context"),r3e=typeof globalThis<"u"?globalThis:{};function s3e(){if(!v.createContext)return{};const t=r3e[n3e]??=new Map;let e=t.get(v.createContext);return e||(e=v.createContext(null),t.set(v.createContext,e)),e}var i3e=s3e();function a3e(t){const{children:e,context:n,serverState:r,store:s}=t,i=v.useMemo(()=>{const c=GLe(s);return{store:s,subscription:c,getServerState:r?()=>r:void 0}},[s,r]),a=v.useMemo(()=>s.getState(),[s]);t3e(()=>{const{subscription:c}=i;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),a!==s.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[i,a]);const o=n||i3e;return v.createElement(o.Provider,{value:i},e)}var o3e=a3e,l3e=(t,e)=>e,fD=ye([l3e,Yt,rY,Fr,YY,nc,gIe,Mr],wIe),pD=t=>{var e=t.currentTarget.getBoundingClientRect(),n=e.width/t.currentTarget.offsetWidth,r=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/n),chartY:Math.round((t.clientY-e.top)/r)}},KG=ma("mouseClick"),YG=by();YG.startListening({actionCreator:KG,effect:(t,e)=>{var n=t.payload,r=fD(e.getState(),pD(n));r?.activeIndex!=null&&e.dispatch(NAe({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var Ij=ma("mouseMove"),GG=by();GG.startListening({actionCreator:Ij,effect:(t,e)=>{var n=t.payload,r=e.getState(),s=MI(r,r.tooltip.settings.shared),i=fD(r,pD(n));s==="axis"&&(i?.activeIndex!=null?e.dispatch(BY({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate})):e.dispatch(VY()))}});var $V={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},QG=Wi({name:"rootProps",initialState:$V,reducers:{updateOptions:(t,e)=>{var n;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(n=e.payload.barGap)!==null&&n!==void 0?n:$V.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className}}}),c3e=QG.reducer,{updateOptions:u3e}=QG.actions,XG=Wi({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:d3e}=XG.actions,h3e=XG.reducer,JG=ma("keyDown"),ZG=ma("focus"),mD=by();mD.startListening({actionCreator:JG,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:s}=n.tooltip,i=t.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var a=Number(LI(s,fm(n))),o=nc(n);if(i==="Enter"){var c=s1(n,"axis","hover",String(s.index));e.dispatch(Ej({active:!s.active,activeIndex:s.index,activeDataKey:s.dataKey,activeCoordinate:c}));return}var d=mAe(n),h=d==="left-to-right"?1:-1,p=i==="ArrowRight"?1:-1,m=a+p*h;if(!(o==null||m>=o.length||m<0)){var y=s1(n,"axis","hover",String(m));e.dispatch(Ej({active:!0,activeIndex:m.toString(),activeDataKey:void 0,activeCoordinate:y}))}}}}});mD.startListening({actionCreator:ZG,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:s}=n.tooltip;if(!s.active&&s.index==null){var i="0",a=s1(n,"axis","hover",String(i));e.dispatch(Ej({activeDataKey:void 0,active:!0,activeIndex:i,activeCoordinate:a}))}}}});var ra=ma("externalEvent"),eQ=by();eQ.startListening({actionCreator:ra,effect:(t,e)=>{if(t.payload.handler!=null){var n=e.getState(),r={activeCoordinate:aIe(n),activeDataKey:JY(n),activeIndex:fu(n),activeLabel:XY(n),activeTooltipIndex:fu(n),isTooltipActive:oIe(n)};t.payload.handler(r,t.payload.reactEvent)}}});var f3e=ye([hm],t=>t.tooltipItemPayloads),p3e=ye([f3e,Dy,(t,e,n)=>e,(t,e,n)=>n],(t,e,n,r)=>{var s=t.find(o=>o.settings.dataKey===r);if(s!=null){var{positions:i}=s;if(i!=null){var a=e(i,n);return a}}}),tQ=ma("touchMove"),nQ=by();nQ.startListening({actionCreator:tQ,effect:(t,e)=>{var n=t.payload,r=e.getState(),s=MI(r,r.tooltip.settings.shared);if(s==="axis"){var i=fD(r,pD({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));i?.activeIndex!=null&&e.dispatch(BY({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}else if(s==="item"){var a,o=n.touches[0],c=document.elementFromPoint(o.clientX,o.clientY);if(!c||!c.getAttribute)return;var d=c.getAttribute(Fq),h=(a=c.getAttribute($q))!==null&&a!==void 0?a:void 0,p=p3e(e.getState(),d,h);e.dispatch($Y({activeDataKey:h,activeIndex:d,activeCoordinate:p}))}}});var m3e=uq({brush:eMe,cartesianAxis:DOe,chartData:LIe,errorBars:ZOe,graphicalItems:JRe,layout:jke,legend:yTe,options:IIe,polarAxis:mRe,polarOptions:h3e,referenceElements:oMe,rootProps:c3e,tooltip:SAe}),g3e=function(e){return eke({reducer:m3e,preloadedState:e,middleware:n=>n({serializableCheck:!1}).concat([YG.middleware,GG.middleware,mD.middleware,eQ.middleware,nQ.middleware]),devTools:Nu.devToolsEnabled})};function rQ(t){var{preloadedState:e,children:n,reduxStoreName:r}=t,s=yi(),i=v.useRef(null);if(s)return n;i.current==null&&(i.current=g3e(e));var a=AA;return v.createElement(o3e,{context:a,store:i.current},n)}function sQ(t){var{layout:e,width:n,height:r,margin:s}=t,i=pr(),a=yi();return v.useEffect(()=>{a||(i(kke(e)),i(Tke({width:n,height:r})),i(Ske(s)))},[i,a,e,n,r,s]),null}function iQ(t){var e=pr();return v.useEffect(()=>{e(u3e(t))},[e,t]),null}var y3e=["children"];function v3e(t,e){if(t==null)return{};var n,r,s=x3e(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function x3e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function f1(){return f1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},f1.apply(null,arguments)}var b3e={width:"100%",height:"100%"},w3e=v.forwardRef((t,e)=>{var n=Bq(),r=Uq(),s=qq();if(!Tp(n)||!Tp(r))return null;var{children:i,otherAttributes:a,title:o,desc:c}=t,d,h;return typeof a.tabIndex=="number"?d=a.tabIndex:d=s?0:void 0,typeof a.role=="string"?h=a.role:h=s?"application":void 0,v.createElement(IH,f1({},a,{title:o,desc:c,role:h,tabIndex:d,width:n,height:r,style:b3e,ref:e}),i)}),_3e=t=>{var{children:e}=t,n=st(D_);if(!n)return null;var{width:r,height:s,y:i,x:a}=n;return v.createElement(IH,{width:r,height:s,x:a,y:i},e)},VV=v.forwardRef((t,e)=>{var{children:n}=t,r=v3e(t,y3e),s=yi();return s?v.createElement(_3e,null,n):v.createElement(w3e,f1({ref:e},r),n)});function E3e(){var t=pr(),[e,n]=v.useState(null),r=st(sTe);return v.useEffect(()=>{if(e!=null){var s=e.getBoundingClientRect(),i=s.width/e.offsetWidth;zi(i)&&i!==r&&t(Cke(i))}},[e,t,r]),n}function BV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function N3e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BV(Object(n),!0).forEach(function(r){S3e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function S3e(t,e,n){return(e=k3e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function k3e(t){var e=T3e(t,"string");return typeof e=="symbol"?e:e+""}function T3e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var C3e=v.forwardRef((t,e)=>{var{children:n,className:r,height:s,onClick:i,onContextMenu:a,onDoubleClick:o,onMouseDown:c,onMouseEnter:d,onMouseLeave:h,onMouseMove:p,onMouseUp:m,onTouchEnd:y,onTouchMove:x,onTouchStart:_,style:w,width:N}=t,k=pr(),[S,O]=v.useState(null),[R,M]=v.useState(null);qIe();var P=E3e(),C=v.useCallback(Z=>{P(Z),typeof e=="function"&&e(Z),O(Z),M(Z)},[P,e,O,M]),D=v.useCallback(Z=>{k(KG(Z)),k(ra({handler:i,reactEvent:Z}))},[k,i]),$=v.useCallback(Z=>{k(Ij(Z)),k(ra({handler:d,reactEvent:Z}))},[k,d]),F=v.useCallback(Z=>{k(VY()),k(ra({handler:h,reactEvent:Z}))},[k,h]),U=v.useCallback(Z=>{k(Ij(Z)),k(ra({handler:p,reactEvent:Z}))},[k,p]),I=v.useCallback(()=>{k(ZG())},[k]),z=v.useCallback(Z=>{k(JG(Z.key))},[k]),Q=v.useCallback(Z=>{k(ra({handler:a,reactEvent:Z}))},[k,a]),ne=v.useCallback(Z=>{k(ra({handler:o,reactEvent:Z}))},[k,o]),W=v.useCallback(Z=>{k(ra({handler:c,reactEvent:Z}))},[k,c]),K=v.useCallback(Z=>{k(ra({handler:m,reactEvent:Z}))},[k,m]),Y=v.useCallback(Z=>{k(ra({handler:_,reactEvent:Z}))},[k,_]),G=v.useCallback(Z=>{k(tQ(Z)),k(ra({handler:x,reactEvent:Z}))},[k,x]),q=v.useCallback(Z=>{k(ra({handler:y,reactEvent:Z}))},[k,y]);return v.createElement(sG.Provider,{value:S},v.createElement(GEe.Provider,{value:R},v.createElement("div",{className:Et("recharts-wrapper",r),style:N3e({position:"relative",cursor:"default",width:N,height:s},w),onClick:D,onContextMenu:Q,onDoubleClick:ne,onFocus:I,onKeyDown:z,onMouseDown:W,onMouseEnter:$,onMouseLeave:F,onMouseMove:U,onMouseUp:K,onTouchEnd:q,onTouchMove:G,onTouchStart:Y,ref:C},n)))}),j3e=["children","className","width","height","style","compact","title","desc"];function P3e(t,e){if(t==null)return{};var n,r,s=A3e(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function A3e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var aQ=v.forwardRef((t,e)=>{var{children:n,className:r,width:s,height:i,style:a,compact:o,title:c,desc:d}=t,h=P3e(t,j3e),p=Wo(h);return o?v.createElement(VV,{otherAttributes:p,title:c,desc:d},n):v.createElement(C3e,{className:r,style:a,width:s,height:i,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},v.createElement(VV,{otherAttributes:p,title:c,desc:d,ref:e},v.createElement(cMe,null,n)))}),I3e=["width","height"];function Dj(){return Dj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Dj.apply(null,arguments)}function D3e(t,e){if(t==null)return{};var n,r,s=R3e(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function R3e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var O3e={top:5,right:5,bottom:5,left:5},M3e={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:O3e,reverseStackOrder:!1,syncMethod:"index"},oQ=v.forwardRef(function(e,n){var r,s=ps(e.categoricalChartProps,M3e),{width:i,height:a}=s,o=D3e(s,I3e);if(!Tp(i)||!Tp(a))return null;var{chartName:c,defaultTooltipEventType:d,validateTooltipEventTypes:h,tooltipPayloadSearcher:p,categoricalChartProps:m}=e,y={chartName:c,defaultTooltipEventType:d,validateTooltipEventTypes:h,tooltipPayloadSearcher:p,eventEmitter:void 0};return v.createElement(rQ,{preloadedState:{options:y},reduxStoreName:(r=m.id)!==null&&r!==void 0?r:c},v.createElement(MG,{chartData:m.data}),v.createElement(sQ,{width:i,height:a,layout:s.layout,margin:s.margin}),v.createElement(iQ,{accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className}),v.createElement(aQ,Dj({},o,{width:i,height:a,ref:n})))}),L3e=["axis"],lQ=v.forwardRef((t,e)=>v.createElement(oQ,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:L3e,tooltipPayloadSearcher:HI,categoricalChartProps:t,ref:e})),F3e=["axis","item"],$3e=v.forwardRef((t,e)=>v.createElement(oQ,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:F3e,tooltipPayloadSearcher:HI,categoricalChartProps:t,ref:e}));function V3e(t){var e=pr();return v.useEffect(()=>{e(d3e(t))},[e,t]),null}var B3e=["width","height","layout"];function Rj(){return Rj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Rj.apply(null,arguments)}function U3e(t,e){if(t==null)return{};var n,r,s=z3e(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function z3e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var W3e={top:5,right:5,bottom:5,left:5},H3e={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:W3e,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},q3e=v.forwardRef(function(e,n){var r,s=ps(e.categoricalChartProps,H3e),{width:i,height:a,layout:o}=s,c=U3e(s,B3e);if(!Tp(i)||!Tp(a))return null;var{chartName:d,defaultTooltipEventType:h,validateTooltipEventTypes:p,tooltipPayloadSearcher:m}=e,y={chartName:d,defaultTooltipEventType:h,validateTooltipEventTypes:p,tooltipPayloadSearcher:m,eventEmitter:void 0};return v.createElement(rQ,{preloadedState:{options:y},reduxStoreName:(r=s.id)!==null&&r!==void 0?r:d},v.createElement(MG,{chartData:s.data}),v.createElement(sQ,{width:i,height:a,layout:o,margin:s.margin}),v.createElement(iQ,{accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className}),v.createElement(V3e,{cx:s.cx,cy:s.cy,startAngle:s.startAngle,endAngle:s.endAngle,innerRadius:s.innerRadius,outerRadius:s.outerRadius}),v.createElement(aQ,Rj({width:i,height:a},c,{ref:n})))}),K3e=["item"],Y3e={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},gD=v.forwardRef((t,e)=>{var n=ps(t,Y3e);return v.createElement(q3e,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:K3e,tooltipPayloadSearcher:HI,categoricalChartProps:n,ref:e})});const G3e=({facilities:t,globalTaskCounts:e,className:n="",isDarkMode:r=!1})=>{const s=t.map(p=>{const m=p.avgUtilization;return{name:p.name.length>15?p.name.substring(0,15)+"...":p.name,fullName:p.name,utilization:m,members:p.membersCount,fill:m>=90?r?"#F87171":"#EF4444":m>=70?r?"#FBBF24":"#F59E0B":r?"#34D399":"#10B981"}}),i=e?{completed:e.completed,ongoing:e.inProgress,total:e.total}:{completed:0,ongoing:0,total:0},a=e?e.pending:i.total-i.completed-i.ongoing,o=[{name:"Completed",value:i.completed,color:r?"#34D399":"#10B981",fullName:"Completed Tasks"},{name:"In Progress",value:i.ongoing,color:r?"#60A5FA":"#3B82F6",fullName:"In Progress Tasks"},{name:"Pending",value:Math.max(0,a),color:r?"#FBBF24":"#F59E0B",fullName:"Pending Tasks"}].filter(p=>p.value>0),c=o.length>0,d=({active:p,payload:m,label:y})=>{if(p&&m&&m.length){const x=m[0].payload;return l.jsxs("div",{className:`p-3 border rounded-lg shadow-lg ${r?"bg-gray-800 border-gray-600":"bg-white border-gray-200"}`,children:[l.jsx("p",{className:`font-medium ${r?"text-white":"text-gray-900"}`,children:x.fullName}),l.jsxs("p",{className:`text-sm ${r?"text-gray-200":"text-gray-900"}`,children:[l.jsx("span",{className:r?"text-gray-400":"text-gray-600",children:"Utilization:"})," ",l.jsxs("span",{className:"font-medium",children:[x.utilization.toFixed(1),"%"]})]}),l.jsxs("p",{className:`text-sm ${r?"text-gray-200":"text-gray-900"}`,children:[l.jsx("span",{className:r?"text-gray-400":"text-gray-600",children:"Members:"})," ",l.jsx("span",{className:"font-medium",children:x.members})]})]})}return null},h=({active:p,payload:m})=>{if(p&&m&&m.length){const y=m[0],x=i.total;return l.jsxs("div",{className:`p-3 border rounded-lg shadow-lg ${r?"bg-gray-800 border-gray-600":"bg-white border-gray-200"}`,children:[l.jsx("p",{className:`font-medium ${r?"text-white":"text-gray-900"}`,children:y.fullName}),l.jsxs("p",{className:`text-sm ${r?"text-gray-200":"text-gray-900"}`,children:[l.jsx("span",{className:r?"text-gray-400":"text-gray-600",children:"Tasks:"})," ",l.jsx("span",{className:"font-medium",children:y.value})]}),l.jsxs("p",{className:`text-sm ${r?"text-gray-200":"text-gray-900"}`,children:[l.jsx("span",{className:r?"text-gray-400":"text-gray-600",children:"Percentage:"})," ",l.jsxs("span",{className:"font-medium",children:[x>0?(y.value/x*100).toFixed(1):0,"%"]})]})]})}return null};return l.jsxs("div",{className:`grid grid-cols-1 lg:grid-cols-2 gap-6 ${n}`,children:[l.jsxs(ds,{className:"p-6",isDarkMode:r,children:[l.jsx(pi,{label:"FACILITY PERFORMANCE",title:"Utilization by Accessible Facilities",isDarkMode:r}),l.jsx("div",{className:"mt-6 h-80",children:s.length>0?l.jsx(Dp,{width:"100%",height:"100%",children:l.jsxs($3e,{data:s,margin:{top:20,right:30,left:20,bottom:60},children:[l.jsx(eE,{strokeDasharray:"3 3",stroke:r?"#374151":"#E5E7EB"}),l.jsx(tE,{dataKey:"name",tick:{fontSize:12,fill:r?"#9CA3AF":"#6B7280"},stroke:r?"#9CA3AF":"#6B7280",angle:-45,textAnchor:"end",height:60}),l.jsx(nE,{tick:{fontSize:12,fill:r?"#9CA3AF":"#6B7280"},stroke:r?"#9CA3AF":"#6B7280",domain:[0,100]}),l.jsx(Ip,{content:l.jsx(d,{})}),l.jsx(RG,{dataKey:"utilization",radius:[4,4,0,0],children:s.map((p,m)=>l.jsx(pu,{fill:p.fill},`cell-${m}`))})]})}):l.jsx("div",{className:"flex items-center justify-center h-full",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:`mb-2 ${r?"text-gray-500":"text-gray-400"}`,children:l.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),l.jsx("p",{className:`text-sm ${r?"text-gray-400":"text-gray-500"}`,children:"No facility data available"})]})})})]}),l.jsxs(ds,{className:"p-6",isDarkMode:r,children:[l.jsx(pi,{label:"TASK STATUS",title:"Work Progress Overview",isDarkMode:r}),l.jsx("div",{className:"mt-6 h-80",children:c?l.jsx(Dp,{width:"100%",height:"100%",children:l.jsxs(gD,{children:[l.jsx(Z_,{data:o,cx:"50%",cy:"50%",labelLine:!1,label:({name:p,percent:m})=>`${p} ${(m*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:o.map((p,m)=>l.jsx(pu,{fill:p.color},`cell-${m}`))}),l.jsx(Ip,{content:l.jsx(h,{})})]})}):l.jsx("div",{className:"flex items-center justify-center h-full",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:`mb-2 ${r?"text-gray-500":"text-gray-400"}`,children:l.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),l.jsx("p",{className:`text-sm ${r?"text-gray-400":"text-gray-500"}`,children:"No task data available"})]})})}),l.jsx("div",{className:"mt-4 flex flex-wrap justify-center gap-4",children:o.map((p,m)=>l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:p.color}}),l.jsxs("span",{className:`text-sm ${r?"text-gray-200":"text-gray-900"}`,children:[p.fullName," (",p.value,")"]})]},m))})]})]})};function cQ({data:t,columns:e,onRowClick:n,className:r="",loading:s=!1,emptyMessage:i="No data available",isDarkMode:a=!1}){const[o,c]=v.useState(null),[d,h]=v.useState(null),p=x=>{o===x?d==="asc"?h("desc"):d==="desc"?(h(null),c(null)):h("asc"):(c(x),h("asc"))},m=oe.useMemo(()=>!o||!d?t:[...t].sort((x,_)=>{const w=x[o],N=_[o];return w<N?d==="asc"?-1:1:w>N?d==="asc"?1:-1:0}),[t,o,d]),y=x=>o!==x?l.jsx("svg",{className:"w-4 h-4 ml-1 opacity-30",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{d:"M5 12l5-5 5 5H5z"})}):d==="asc"?l.jsx("svg",{className:"w-4 h-4 ml-1",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{d:"M5 8l5 5 5-5H5z"})}):d==="desc"?l.jsx("svg",{className:"w-4 h-4 ml-1",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{d:"M5 12l5-5 5 5H5z"})}):null;return s?l.jsx("div",{className:`animate-pulse ${r}`,children:l.jsx("div",{className:"space-y-3",children:[...Array(5)].map((x,_)=>l.jsx("div",{className:`h-4 rounded ${a?"bg-gray-700":"bg-gray-200"}`},_))})}):t.length===0?l.jsx("div",{className:`text-center py-8 ${r} ${a?"text-gray-400":"text-gray-600"}`,children:i}):l.jsx("div",{className:`overflow-hidden ${r}`,children:l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{children:l.jsx("tr",{className:`border-b ${a?"border-gray-700":"border-gray-200"}`,children:e.map(x=>l.jsx("th",{className:`
                    px-4 py-3 text-left font-medium
                    ${x.sortable?`cursor-pointer ${a?"hover:bg-gray-700":"hover:bg-gray-50"}`:""}
                    ${x.className||""}
                  `,onClick:()=>x.sortable&&p(x.key),style:{...vt.small,color:a?"#E5E7EB":"#374151",backgroundColor:x.sortable?"transparent":void 0},tabIndex:x.sortable?0:void 0,onKeyDown:_=>{x.sortable&&(_.key==="Enter"||_.key===" ")&&(_.preventDefault(),p(x.key))},"aria-sort":o===x.key?d==="asc"?"ascending":d==="desc"?"descending":"none":x.sortable?"none":void 0,children:l.jsxs("div",{className:"flex items-center",children:[x.label,x.sortable&&y(x.key)]})},String(x.key)))})}),l.jsx("tbody",{children:m.map((x,_)=>l.jsx("tr",{className:`
                  border-b transition-colors duration-150
                  ${a?"hover:bg-gray-700":"hover:bg-gray-50"}
                  ${n?"cursor-pointer":""}
                `,style:{borderColor:a?"#374151":"#E5E7EB"},onClick:()=>n?.(x),onKeyDown:w=>{n&&(w.key==="Enter"||w.key===" ")&&(w.preventDefault(),n(x))},tabIndex:n?0:void 0,children:e.map(w=>l.jsx("td",{className:`px-4 py-3 ${w.className||""}`,style:{...vt.small,color:a?"#E5E7EB":"#374151"},children:w.render?w.render(x[w.key],x):String(x[w.key]||"")},String(w.key)))},_))})]})})})}const uQ=({value:t,max:e=100,label:n,showPercentage:r=!0,size:s="md",color:i="auto",className:a="",isDarkMode:o=!1})=>{const c=Math.min(Math.max(t/e*100,0),100),d={sm:"h-2",md:"h-3",lg:"h-4"},h=()=>i!=="auto"?je[i]:c>=90?je.danger:c>=70?je.warning:je.success,p=()=>c>=90?je.status.overloaded:c>=70?je.status.caution:je.status.balanced;return l.jsxs("div",{className:`w-full ${a}`,children:[(n||r)&&l.jsxs("div",{className:"flex justify-between items-center mb-1",children:[n&&l.jsx("span",{className:`text-sm font-medium ${o?"text-gray-200":"text-gray-900"}`,children:n}),r&&l.jsxs("span",{className:`text-sm font-medium ${o?"text-gray-400":"text-gray-600"}`,children:[c.toFixed(1),"%"]})]}),l.jsx("div",{className:`w-full rounded-full overflow-hidden ${d[s]} ${o?"bg-gray-700":"bg-gray-200"}`,role:"progressbar","aria-valuenow":t,"aria-valuemin":0,"aria-valuemax":e,"aria-label":n||`Progress: ${c.toFixed(1)}%`,children:l.jsx("div",{className:"h-full transition-all duration-300 ease-out rounded-full",style:{width:`${c}%`,background:i==="auto"&&c>=70?`linear-gradient(90deg, ${p()} 0%, ${p()}dd 100%)`:i==="auto"?p():h()}})})]})},Q3e=({facilities:t,onFacilityClick:e,className:n="",isDarkMode:r=!1})=>{const s=[{key:"name",label:"Facility",sortable:!0,render:(i,a)=>{const o=`Click to view detailed analytics for ${i||"Unknown Facility"}
Members: ${a.membersCount}
Utilization: ${a.avgUtilization.toFixed(1)}%`;return l.jsx(Pr,{content:o,position:"right",delay:300,children:l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center text-sm font-bold ${r?"bg-gray-700":"bg-gray-200"}`,children:l.jsx("span",{className:r?"text-gray-200":"text-gray-900",children:(i||"F").charAt(0).toUpperCase()})}),l.jsxs("div",{children:[l.jsx("button",{onClick:()=>e(a.id),className:`text-sm font-medium hover:underline transition-colors duration-150 ${r?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-700"}`,children:i||"Unknown Facility"}),l.jsxs("p",{className:`text-xs ${r?"text-gray-400":"text-gray-600"}`,children:[a.membersCount," members"]})]})]})})}},{key:"membersCount",label:"Members",sortable:!0,render:i=>l.jsxs("div",{className:"text-sm",children:[l.jsx("div",{className:`font-medium ${r?"text-white":"text-gray-900"}`,children:Ha(i||0)}),l.jsx("div",{className:`text-xs ${r?"text-gray-400":"text-gray-600"}`,children:"active members"})]})},{key:"avgUtilization",label:"Avg Utilization",sortable:!0,render:(i,a)=>{const o=a.avgUtilization,c=`Utilization: ${o.toFixed(1)}%
Members: ${a.membersCount}
Status: ${o>=90?"Overloaded":o>=70?"Caution":"Balanced"}`;return l.jsx("div",{className:"w-32",children:l.jsx(Pr,{content:c,position:"top",delay:300,className:"w-full",children:l.jsx(uQ,{value:o,max:100,size:"sm",color:"auto",showPercentage:!0,isDarkMode:r})})})}},{key:"statusDistribution",label:"Status Distribution",sortable:!1,render:i=>{const a=(i?.balanced||0)+(i?.caution||0)+(i?.overloaded||0),o=`Task Status Distribution:
• Balanced: ${i?.balanced||0} tasks
• Caution: ${i?.caution||0} tasks
• Overloaded: ${i?.overloaded||0} tasks
Total: ${a} tasks`;return l.jsx(Pr,{content:o,position:"top",delay:300,children:l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),l.jsx("span",{className:`text-xs ${r?"text-gray-400":"text-gray-600"}`,children:i?.balanced||0})]}),l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx("div",{className:"w-2 h-2 rounded-full bg-orange-500"}),l.jsx("span",{className:`text-xs ${r?"text-gray-400":"text-gray-600"}`,children:i?.caution||0})]}),l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500"}),l.jsx("span",{className:`text-xs ${r?"text-gray-400":"text-gray-600"}`,children:i?.overloaded||0})]})]})})}}];return l.jsxs(ds,{className:`p-6 ${n}`,isDarkMode:r,children:[l.jsx(pi,{label:"FACILITY OVERVIEW",title:"Facility Analytics",isDarkMode:r,action:{label:"View All",onClick:()=>{}}}),l.jsx("div",{className:"mt-6",children:l.jsx(cQ,{data:t,columns:s,onRowClick:i=>e(i.id),emptyMessage:"No facility data available",isDarkMode:r})})]})},X3e=({insights:t,className:e="",isDarkMode:n=!1})=>{const r=a=>{const o="w-5 h-5";switch(a){case"danger":return l.jsx("svg",{className:o,fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})});case"warning":return l.jsx("svg",{className:o,fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})});case"info":return l.jsx("svg",{className:o,fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})});case"success":return l.jsx("svg",{className:o,fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})});default:return l.jsx("svg",{className:o,fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}},s=a=>{if(n)switch(a){case"danger":return{backgroundColor:"#1F1B1B",borderColor:"#EF4444",iconColor:"#EF4444"};case"warning":return{backgroundColor:"#1F1B0F",borderColor:"#F59E0B",iconColor:"#F59E0B"};case"info":return{backgroundColor:"#0F1419",borderColor:"#3B82F6",iconColor:"#3B82F6"};case"success":return{backgroundColor:"#0F1B0F",borderColor:"#10B981",iconColor:"#10B981"};default:return{backgroundColor:"#1F1F1F",borderColor:"#6B7280",iconColor:"#6B7280"}}else switch(a){case"danger":return{backgroundColor:"#FEF2F2",borderColor:"#EF4444",iconColor:"#EF4444"};case"warning":return{backgroundColor:"#FFFBEB",borderColor:"#F59E0B",iconColor:"#F59E0B"};case"info":return{backgroundColor:"#EFF6FF",borderColor:"#3B82F6",iconColor:"#3B82F6"};case"success":return{backgroundColor:"#F0FDF4",borderColor:"#10B981",iconColor:"#10B981"};default:return{backgroundColor:"#F8FAFC",borderColor:"#6B7280",iconColor:"#6B7280"}}},i=a=>{const o=n?{critical:{bg:"#1F1B1B",text:"#FCA5A5",label:"Critical"},high:{bg:"#1F1B0F",text:"#FCD34D",label:"High"},medium:{bg:"#0F1419",text:"#93C5FD",label:"Medium"},low:{bg:"#0F1B0F",text:"#86EFAC",label:"Low"}}:{critical:{bg:"#FEE2E2",text:"#991B1B",label:"Critical"},high:{bg:"#FEF3C7",text:"#92400E",label:"High"},medium:{bg:"#EFF6FF",text:"#1E40AF",label:"Medium"},low:{bg:"#F0FDF4",text:"#065F46",label:"Low"}},c=o[a]||o.low;return l.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium",style:{backgroundColor:c.bg,color:c.text,borderRadius:`${jr.sm}px`},children:c.label})};return l.jsxs(ds,{className:`${e}`,padding:"lg",isDarkMode:n,children:[l.jsx(pi,{label:"INSIGHTS & RECOMMENDATIONS",title:"Analytics Insights",isDarkMode:n}),l.jsx("div",{className:"space-y-4",style:{marginTop:`${ht.md}px`},children:t.length===0?l.jsxs("div",{className:"text-center py-8",style:{color:je.mutedText,paddingTop:`${ht.lg}px`,paddingBottom:`${ht.lg}px`},children:[l.jsx("svg",{className:"w-12 h-12 mx-auto mb-4 opacity-50",fill:"currentColor",viewBox:"0 0 20 20",style:{marginBottom:`${ht.sm}px`},children:l.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),l.jsx("p",{className:"text-sm",style:{fontSize:vt.small.fontSize,color:je.mutedText},children:"No insights available at this time."})]}):t.map((a,o)=>{const c=s(a.type);return l.jsxs("div",{className:"flex items-start rounded-lg border-l-4 transition-all duration-200 hover:shadow-md",style:{backgroundColor:c.backgroundColor,borderLeftColor:c.borderColor,padding:`${ht.sm}px`,borderRadius:`${jr.base}px`,borderLeftWidth:"4px",marginBottom:`${ht.sm}px`},children:[l.jsx("div",{className:"flex-shrink-0",style:{color:c.iconColor,marginTop:"1px",marginRight:`${ht.sm}px`},children:r(a.type)}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",style:{marginBottom:`${ht.xs}px`},children:[l.jsxs("h4",{className:"font-medium",style:{fontSize:vt.small.fontSize,fontWeight:vt.small.fontWeight,color:n?"white":je.neutralText},children:[a.type.charAt(0).toUpperCase()+a.type.slice(1)," Alert"]}),i(a.severity)]}),l.jsx("p",{className:"mb-3 leading-relaxed",style:{fontSize:vt.small.fontSize,lineHeight:vt.small.lineHeight,marginBottom:`${ht.xs}px`,color:n?"#E5E7EB":je.neutralText},children:a.message}),a.action&&l.jsxs("div",{className:"rounded-md p-3",style:{backgroundColor:n?"#374151":"#F3F4F6",padding:`${ht.xs}px`,borderRadius:`${jr.sm}px`,marginTop:`${ht.xs}px`},children:[l.jsx("p",{className:"font-medium mb-1",style:{fontSize:vt.caption.fontSize,fontWeight:vt.caption.fontWeight,textTransform:vt.caption.textTransform,letterSpacing:vt.caption.letterSpacing,marginBottom:`${ht.xs/4}px`,color:n?"#9CA3AF":je.mutedText},children:"RECOMMENDED ACTION:"}),l.jsx("p",{className:"leading-relaxed",style:{fontSize:vt.caption.fontSize,lineHeight:vt.caption.lineHeight,color:n?"#E5E7EB":je.neutralText},children:a.action})]})]})]},a.id||o)})})]})},J3e=[{value:"1w",label:"1 Week"},{value:"2w",label:"2 Weeks"},{value:"4w",label:"4 Weeks"},{value:"8w",label:"8 Weeks"},{value:"12w",label:"12 Weeks"}],yD=({timeRange:t,onTimeRangeChange:e,className:n="",isDarkMode:r=!1})=>l.jsx("div",{className:`flex items-center space-x-4 ${n}`,children:l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("label",{className:`text-sm font-medium ${r?"text-gray-200":"text-gray-900"}`,children:"Time Range:"}),l.jsx("select",{value:t,onChange:s=>e(s.target.value),className:`px-3 py-1.5 text-sm border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${r?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,children:J3e.map(s=>l.jsx("option",{value:s.value,children:s.label},s.value))})]})}),vD=({onExport:t,className:e="",variant:n="primary",size:r="md",isDarkMode:s=!1})=>{const[i,a]=v.useState(!1),[o,c]=v.useState(0),d=async()=>{a(!0),c(0);try{const m=setInterval(()=>{c(y=>Math.min(y+10,90))},200);await t(),clearInterval(m),c(100),setTimeout(()=>{a(!1),c(0)},1e3)}catch(m){console.error("Export failed:",m),a(!1),c(0)}},h={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"},p={primary:"bg-green-600 hover:bg-green-700 text-white",secondary:s?"bg-gray-700 hover:bg-gray-600 text-gray-200":"bg-gray-100 hover:bg-gray-200 text-gray-700"};return l.jsx("button",{onClick:d,disabled:i,className:`
        inline-flex items-center justify-center
        ${h[r]}
        ${p[n]}
        rounded-lg font-medium
        transition-all duration-200
        disabled:opacity-50 disabled:cursor-not-allowed
        ${e}
      `,style:n==="secondary"?{backgroundColor:je.border,color:je.neutralText}:void 0,children:i?l.jsxs(l.Fragment,{children:[l.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Exporting... ",o,"%"]}):l.jsxs(l.Fragment,{children:[l.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export PDF"]})})},pl=({className:t="",lines:e=1,height:n="h-4",isDarkMode:r=!1})=>l.jsx("div",{className:`animate-pulse ${t}`,children:Array.from({length:e}).map((s,i)=>l.jsx("div",{className:`${n} rounded mb-2 ${i===e-1?"mb-0":""} ${r?"bg-gray-700":"bg-gray-200"}`},i))}),xD=({isDarkMode:t=!1})=>l.jsxs("div",{className:`p-6 rounded-lg border ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[l.jsx(pl,{lines:1,height:"h-3",className:"mb-2 w-1/3",isDarkMode:t}),l.jsx(pl,{lines:1,height:"h-8",className:"mb-2 w-1/2",isDarkMode:t}),l.jsx(pl,{lines:1,height:"h-3",className:"w-1/4",isDarkMode:t})]}),Op=({isDarkMode:t=!1})=>l.jsxs("div",{className:`p-6 rounded-lg border ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[l.jsx(pl,{lines:1,height:"h-6",className:"mb-4 w-1/3",isDarkMode:t}),l.jsx("div",{className:`h-64 rounded ${t?"bg-gray-700":"bg-gray-100"}`})]}),Mp=({isDarkMode:t=!1})=>l.jsxs("div",{className:`rounded-lg border overflow-hidden ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[l.jsx("div",{className:`p-4 border-b ${t?"border-gray-700":"border-gray-200"}`,children:l.jsx(pl,{lines:1,height:"h-5",className:"w-1/4",isDarkMode:t})}),l.jsx("div",{className:"p-4 space-y-3",children:Array.from({length:5}).map((e,n)=>l.jsxs("div",{className:"flex space-x-4",children:[l.jsx(pl,{lines:1,height:"h-4",className:"w-1/4",isDarkMode:t}),l.jsx(pl,{lines:1,height:"h-4",className:"w-1/3",isDarkMode:t}),l.jsx(pl,{lines:1,height:"h-4",className:"w-1/6",isDarkMode:t}),l.jsx(pl,{lines:1,height:"h-4",className:"w-1/5",isDarkMode:t})]},n))})]});class Z3e{async request(e,n={}){try{return(await Ie.get(`/analytics${e}`,n)).data}catch(r){throw console.error("Analytics API error:",r.response?.data||r.message),new Error(`Analytics API error: ${r.response?.status||"Unknown"} ${r.response?.statusText||r.message}`)}}async getGlobalAnalytics(e="4w",n=!1){const r={range:e};return n&&(r._t=Date.now().toString()),this.request("/global",{params:r})}async getFacilityAnalytics(e,n="4w"){return this.request(`/facility/${e}`,{params:{range:n}})}async getMemberAnalytics(e,n="4w"){return this.request(`/member/${e}`,{params:{range:n}})}async exportGlobalAnalytics(e="4w"){return this.request("/export/global",{params:{range:e}})}async exportFacilityAnalytics(e,n="4w"){return this.request(`/export/facility/${e}`,{params:{range:n}})}async exportMemberAnalytics(e,n="4w"){return this.request(`/export/member/${e}`,{params:{range:n}})}async downloadExport(e,n){try{const r=await fetch(e);if(!r.ok)throw new Error("Failed to download export file");const s=await r.blob(),i=window.URL.createObjectURL(s),a=document.createElement("a");a.href=i,a.download=n,document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(i)}catch(r){throw console.error("Download failed:",r),r}}async checkHealth(){return this.request("/health")}}const wo=new Z3e;class e5e{async exportGlobalAnalytics(e="4w"){try{const n=await wo.exportGlobalAnalytics(e);await wo.downloadExport(n.downloadUrl,n.filename)}catch(n){throw console.error("Global analytics export failed:",n),new Error("Failed to export global analytics")}}async exportFacilityAnalytics(e,n="4w"){try{const r=await wo.exportFacilityAnalytics(e,n);await wo.downloadExport(r.downloadUrl,r.filename)}catch(r){throw console.error("Facility analytics export failed:",r),new Error("Failed to export facility analytics")}}async exportMemberAnalytics(e,n="4w"){try{const r=await wo.exportMemberAnalytics(e,n);await wo.downloadExport(r.downloadUrl,r.filename)}catch(r){throw console.error("Member analytics export failed:",r),new Error("Failed to export member analytics")}}generateFilename(e,n,r){const s=new Date().toISOString().split("T")[0],i=n.replace(/[^a-zA-Z0-9]/g,"-").toLowerCase();return`nexora-analytics-${e}-${i}-${r}-${s}.pdf`}formatExportSummary(e,n){const r=new Date().toLocaleString();switch(n){case"global":return`Global Analytics Report
Generated: ${r}

Overall utilization: ${e.kpis.avgUtilization}%
Active members: ${e.kpis.activeMembers}
Total facilities: ${e.kpis.totalFacilities}`;case"facility":return`Facility Analytics Report
Generated: ${r}

Facility: ${e.facility.name}
Average utilization: ${e.kpis.avgUtilization}%
Active members: ${e.kpis.activeMembers}`;case"member":return`Member Analytics Report
Generated: ${r}

Member: ${e.member.name}
Utilization: ${e.kpis.utilization}%
Total tasks: ${e.kpis.totalTasks}`;default:return`Analytics Report
Generated: ${r}`}}}const bD=new e5e,t5e=({className:t=""})=>{const e=eo(),{token:n,user:r}=gi(),[s,i]=v.useState(null),[a,o]=v.useState([]),[c,d]=v.useState(!0),[h,p]=v.useState(null),[m,y]=v.useState("4w"),[x,_]=v.useState(()=>typeof window<"u"?document.documentElement.classList.contains("dark"):!1),w=async R=>{if(!n){d(!1);return}try{d(!0),p(null);const M=await wo.getGlobalAnalytics(R,!0);if(i(M),M.insights&&M.insights.length>0){const P=M.insights.map((C,D)=>{let $="info",F="medium";return C.includes("over capacity")||C.includes("burnout")||C.includes("critical")?($="danger",F="critical"):C.includes("approaching")||C.includes("high")||C.includes("overload")?($="warning",F="high"):C.includes("excellent")||C.includes("smoothly")||C.includes("well")?($="success",F="low"):(C.includes("low")||C.includes("available")||C.includes("opportunity"))&&($="info",F="medium"),{id:`server-insight-${D}`,type:$,severity:F,message:C,action:"Review the data and take appropriate action."}});o(P)}else o([])}catch(M){console.error("Failed to fetch global analytics:",M),p("Failed to load analytics data. Please try again.")}finally{d(!1)}};v.useEffect(()=>{n?w(m):d(!1)},[m,n]),v.useEffect(()=>{const R=new MutationObserver(()=>{_(document.documentElement.classList.contains("dark"))});return R.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>R.disconnect()},[]);const N=R=>{y(R)},k=R=>{e(`/resources/analytics/facility/${R}`)},S=async()=>{try{await bD.exportGlobalAnalytics(m)}catch(R){console.error("Export failed:",R)}},O=()=>"Comprehensive overview of all facilities, projects, and tasks across your organization";return c?l.jsxs("div",{className:`space-y-6 p-6 ${t}`,children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h1",{className:`text-2xl font-bold ${x?"text-white":"text-gray-900"}`,children:"Global Analytics"}),l.jsx("p",{className:`${x?"text-gray-400":"text-gray-600"}`,children:"Resource utilization and performance overview"})]}),l.jsx("div",{className:`w-32 h-10 rounded animate-pulse ${x?"bg-gray-700":"bg-gray-200"}`})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(4)].map((R,M)=>l.jsx(xD,{isDarkMode:x},M))}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.jsx(Op,{isDarkMode:x}),l.jsx(Op,{isDarkMode:x})]}),l.jsx(Mp,{isDarkMode:x}),l.jsx(Mp,{isDarkMode:x})]}):h?l.jsx("div",{className:`text-center py-12 p-6 ${t}`,children:l.jsxs("div",{className:"text-red-600 mb-4",children:[l.jsx("svg",{className:"w-16 h-16 mx-auto mb-4",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),l.jsx("h3",{className:`text-lg font-medium mb-2 ${x?"text-white":"text-gray-900"}`,children:"Error Loading Analytics"}),l.jsx("p",{className:`mb-4 ${x?"text-gray-400":"text-gray-600"}`,children:h}),l.jsx("button",{onClick:()=>w(m),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Try Again"})]})}):s?l.jsxs("div",{className:`space-y-6 p-6 ${t}`,children:[l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[l.jsxs("div",{children:[l.jsx("h1",{className:`text-2xl font-bold ${x?"text-white":"text-gray-900"}`,children:"Global Analytics"}),l.jsx("p",{className:`${x?"text-gray-400":"text-gray-600"}`,children:O()})]}),l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx(yD,{timeRange:m,onTimeRangeChange:N,isDarkMode:x}),l.jsx(vD,{onExport:S,isDarkMode:x})]})]}),l.jsx(PEe,{kpis:s.kpis,facilities:s.facilities,isDarkMode:x}),l.jsx(G3e,{facilities:s.facilities,globalTaskCounts:s.globalTaskCounts,isDarkMode:x}),l.jsx(Q3e,{facilities:s.facilities,onFacilityClick:k,isDarkMode:x}),l.jsx(X3e,{insights:a,isDarkMode:x})]}):l.jsx("div",{className:`text-center py-12 p-6 ${t}`,children:l.jsx("p",{className:`${x?"text-gray-400":"text-gray-600"}`,children:"No data available"})})},n5e=()=>{const[t,e]=v.useState(()=>typeof window<"u"?document.documentElement.classList.contains("dark"):!1);return v.useEffect(()=>{const n=new MutationObserver(()=>{e(document.documentElement.classList.contains("dark"))});return n.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>n.disconnect()},[]),l.jsx("div",{className:`min-h-screen ${t?"bg-gray-900":"bg-gray-50"}`,children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsx(t5e,{})})})},r5e=({kpis:t,className:e="",isDarkMode:n=!1})=>{const[r,s]=v.useState(null),[i,a]=v.useState({top:0,left:0}),[o,c]=v.useState(!1);v.useRef({});const d=v.useRef(null),h=(x,_)=>{if(d.current&&(clearTimeout(d.current),d.current=null),!_.currentTarget)return;const w=_.currentTarget.getBoundingClientRect(),N=window.innerHeight,k=window.innerWidth,S=300,O=320;let R=w.top-S-20;R<20&&(R=w.bottom+20),R+S>N-20&&(R=N-S-20);let M=w.left+w.width/2;M+O/2>k-20&&(M=k-O/2-20),M-O/2<20&&(M=O/2+20),a({top:R,left:M}),s(x),c(!0)},p=()=>{d.current&&(clearTimeout(d.current),d.current=null),s(null),c(!1)};v.useEffect(()=>()=>{d.current&&clearTimeout(d.current)},[]);const m=({cardType:x,children:_})=>{if(r!==x||!o)return l.jsx(l.Fragment,{children:_});const w=x==="pending",N=i.top<window.innerHeight/2;return l.jsxs(l.Fragment,{children:[_,l.jsxs("div",{className:`fixed z-[9999] rounded-lg shadow-xl border p-4 max-w-sm w-80 pointer-events-auto ${n?"bg-gray-800 border-gray-600":"bg-white border-gray-200"}`,style:{top:`${i.top}px`,left:`${i.left}px`,transform:N?"translateX(-50%) translateY(-100%)":"translateX(-50%)"},onMouseLeave:p,children:[l.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[l.jsx("div",{className:`p-2 rounded-lg ${w?t.pendingTasks>10?"bg-orange-100 text-orange-600":"bg-green-100 text-green-600":t.overdueTasks>0?"bg-red-100 text-red-600":"bg-green-100 text-green-600"}`,children:w?l.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M10 2L3 7v11a1 1 0 001 1h12a1 1 0 001-1V7l-7-5zM8 15V9h4v6H8z",clipRule:"evenodd"})}):l.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"})})}),l.jsxs("div",{children:[l.jsx("h3",{className:`font-semibold ${n?"text-white":"text-gray-900"}`,children:w?"Pending Tasks":"Overdue Tasks"}),l.jsxs("p",{className:`text-sm ${n?"text-gray-400":"text-gray-600"}`,children:[w?t.pendingTasks:t.overdueTasks," tasks"]})]})]}),l.jsx("div",{className:`mb-3 p-2 rounded-lg ${w?t.pendingTasks>10?"bg-orange-50 border border-orange-200":"bg-green-50 border border-green-200":t.overdueTasks>0?"bg-red-50 border border-red-200":"bg-green-50 border border-green-200"}`,children:l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:`w-2 h-2 rounded-full ${w?t.pendingTasks>10?"bg-orange-500":"bg-green-500":t.overdueTasks>0?"bg-red-500":"bg-green-500"}`}),l.jsx("span",{className:`text-sm font-medium ${w?t.pendingTasks>10?"text-orange-800":"text-green-800":t.overdueTasks>0?"text-red-800":"text-green-800"}`,children:w?t.pendingTasks>10?"High Volume":"Normal Level":t.overdueTasks>0?"Urgent Action Required":"All On Track"})]})}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("h4",{className:`font-medium ${n?"text-white":"text-gray-900"}`,children:w?"Pending Tasks":"Overdue Tasks"}),l.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:w?t.pendingTasksList&&t.pendingTasksList.length>0?l.jsxs("div",{className:`text-sm ${n?"text-gray-400":"text-gray-600"}`,children:[l.jsx("p",{className:"mb-2 font-medium",children:"Pending Tasks:"}),l.jsxs("div",{className:"space-y-1",children:[t.pendingTasksList.slice(0,5).map((k,S)=>l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full flex-shrink-0"}),l.jsx("span",{className:"truncate",title:k.name,children:k.name})]},k.id)),t.pendingTasksList.length>5&&l.jsxs("div",{className:"text-xs pl-4 text-gray-500",children:["+",t.pendingTasksList.length-5," more tasks"]})]})]}):l.jsx("p",{className:"text-sm text-green-600",children:"No pending tasks"}):t.overdueTasksList&&t.overdueTasksList.length>0?l.jsxs("div",{className:`text-sm ${n?"text-gray-400":"text-gray-600"}`,children:[l.jsx("p",{className:"mb-2 font-medium",children:"Overdue Tasks:"}),l.jsxs("div",{className:"space-y-1",children:[t.overdueTasksList.slice(0,5).map((k,S)=>l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full flex-shrink-0"}),l.jsx("span",{className:"truncate",title:k.name,children:k.name})]},k.id)),t.overdueTasksList.length>5&&l.jsxs("div",{className:"text-xs pl-4 text-gray-500",children:["+",t.overdueTasksList.length-5," more tasks"]})]})]}):l.jsx("p",{className:"text-sm text-green-600",children:"No overdue tasks"})})]}),l.jsx("div",{className:`absolute left-1/2 transform -translate-x-1/2 ${N?"top-full":"bottom-full"}`,children:l.jsx("div",{className:`w-3 h-3 border-r border-b transform ${n?"bg-gray-800 border-gray-600":"bg-white border-gray-200"} ${N?"rotate-45":"-rotate-45"}`})})]})]})},y=[{label:"Active Members",value:Ha(t.activeMembers),color:je.primary,icon:l.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{d:"M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"})})},{label:"Pending Tasks",value:Ha(t.pendingTasks),color:t.pendingTasks>10?je.warning:je.success,icon:l.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M10 2L3 7v11a1 1 0 001 1h12a1 1 0 001-1V7l-7-5zM8 15V9h4v6H8z",clipRule:"evenodd"})})},{label:"Overdue Tasks",value:Ha(t.overdueTasks),color:t.overdueTasks>0?je.danger:je.success,icon:l.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"})})},{label:"Avg Utilization",value:bA(t.avgUtilization),color:t.avgUtilization>=90?je.danger:t.avgUtilization>=70?je.warning:je.success,icon:l.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M3 3a1 1 0 000 2v8a2 2 0 002 2h2.586l-1.293 1.293a1 1 0 101.414 1.414L10 15.414l2.293 2.293a1 1 0 001.414-1.414L12.414 15H15a2 2 0 002-2V5a1 1 0 100-2H3zm11.707 4.707a1 1 0 00-1.414-1.414L10 9.586 8.707 8.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}];return l.jsx("div",{className:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 ${e}`,children:y.map((x,_)=>{const w=x.label==="Pending Tasks",N=x.label==="Overdue Tasks",k=l.jsx("div",{onMouseEnter:w||N?S=>h(w?"pending":"overdue",S):void 0,onMouseLeave:w||N?p:void 0,children:l.jsx(ds,{className:"p-6",isDarkMode:n,children:l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"p-2 rounded-lg",style:{backgroundColor:x.color+"20"},children:l.jsx("div",{style:{color:x.color},children:x.icon})}),l.jsxs("div",{children:[l.jsx("p",{className:`text-sm font-medium ${n?"text-gray-400":"text-gray-600"}`,children:x.label}),l.jsx("p",{className:"text-2xl font-bold",style:{color:x.color},children:x.value})]})]})})})},_);return w||N?l.jsx(m,{cardType:w?"pending":"overdue",children:k},_):k})})},s5e=({charts:t,className:e="",isDarkMode:n=!1})=>{const r=[{name:"Balanced",value:t.distribution.balanced,color:je.status.balanced},{name:"Caution",value:t.distribution.caution,color:je.status.caution},{name:"Overloaded",value:t.distribution.overloaded,color:je.status.overloaded}].filter(o=>o.value>0),s=t.distribution.balanced+t.distribution.caution+t.distribution.overloaded,i=({active:o,payload:c})=>{if(o&&c&&c.length){const d=c[0];return l.jsxs("div",{className:`p-3 border rounded-lg shadow-lg ${n?"bg-gray-800 border-gray-600":"bg-white border-gray-200"}`,children:[l.jsx("p",{className:`font-medium ${n?"text-white":"text-gray-900"}`,children:d.name}),l.jsxs("p",{className:`text-sm ${n?"text-gray-400":"text-gray-600"}`,children:[l.jsx("span",{children:"Members:"})," ",l.jsx("span",{className:"font-medium",children:d.value})]}),l.jsxs("p",{className:`text-sm ${n?"text-gray-400":"text-gray-600"}`,children:[l.jsx("span",{children:"Percentage:"})," ",l.jsxs("span",{className:"font-medium",children:[s>0?(d.value/s*100).toFixed(1):0,"%"]})]})]})}return null},a=({active:o,payload:c,label:d})=>o&&c&&c.length?l.jsxs("div",{className:`p-3 border rounded-lg shadow-lg ${n?"bg-gray-800 border-gray-600":"bg-white border-gray-200"}`,children:[l.jsxs("p",{className:`font-medium ${n?"text-white":"text-gray-900"}`,children:["Week of ",d]}),l.jsxs("p",{className:`text-sm ${n?"text-gray-400":"text-gray-600"}`,children:[l.jsx("span",{children:"Utilization:"})," ",l.jsxs("span",{className:"font-medium",children:[c[0].value.toFixed(1),"%"]})]})]}):null;return l.jsxs("div",{className:`grid grid-cols-1 lg:grid-cols-2 gap-6 ${e}`,children:[l.jsxs(ds,{className:"p-6",isDarkMode:n,children:[l.jsx(pi,{label:"MEMBER STATUS",title:"Workload Distribution",isDarkMode:n}),l.jsx("div",{className:"mt-6 h-80",children:s>0?l.jsx(Dp,{width:"100%",height:"100%",children:l.jsxs(gD,{children:[l.jsx(Z_,{data:r,cx:"50%",cy:"50%",labelLine:!1,label:({name:o,percent:c})=>`${o} ${(c*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:r.map((o,c)=>l.jsx(pu,{fill:o.color},`cell-${c}`))}),l.jsx(Ip,{content:l.jsx(i,{})})]})}):l.jsx("div",{className:"flex items-center justify-center h-full",children:l.jsxs("div",{className:"text-center",children:[l.jsx("svg",{className:`w-16 h-16 mx-auto mb-4 ${n?"text-gray-600":"text-gray-300"}`,fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M3 3a1 1 0 000 2v8a2 2 0 002 2h2.586l-1.293 1.293a1 1 0 101.414 1.414L10 15.414l2.293 2.293a1 1 0 001.414-1.414L12.414 15H15a2 2 0 002-2V5a1 1 0 100-2H3zm11.707 4.707a1 1 0 00-1.414-1.414L10 9.586 8.707 8.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),l.jsx("p",{className:n?"text-gray-400":"text-gray-500",children:"No member data available"})]})})}),s>0&&l.jsx("div",{className:"mt-4 flex justify-center space-x-6",children:r.map((o,c)=>l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:o.color}}),l.jsxs("span",{className:`text-sm ${n?"text-gray-300":"text-gray-700"}`,children:[o.name," (",o.value,")"]})]},c))})]}),l.jsxs(ds,{className:"p-6",isDarkMode:n,children:[l.jsx(pi,{label:"UTILIZATION TREND",title:"Weekly Performance",isDarkMode:n}),l.jsx("div",{className:"mt-6 h-80",children:t.utilizationSeries.length>0?l.jsx(Dp,{width:"100%",height:"100%",children:l.jsxs(lQ,{data:t.utilizationSeries,margin:{top:20,right:30,left:20,bottom:5},children:[l.jsx(eE,{strokeDasharray:"3 3",stroke:n?"#374151":"#E5E7EB"}),l.jsx(tE,{dataKey:"week",tick:{fontSize:12,fill:n?"#9CA3AF":"#6B7280"},stroke:n?"#9CA3AF":"#6B7280",tickFormatter:o=>{const c=new Date(o);return`${c.getMonth()+1}/${c.getDate()}`}}),l.jsx(nE,{tick:{fontSize:12,fill:n?"#9CA3AF":"#6B7280"},stroke:n?"#9CA3AF":"#6B7280",domain:[0,100]}),l.jsx(Ip,{content:l.jsx(a,{})}),l.jsx(hD,{type:"monotone",dataKey:"utilization",stroke:"#10B981",strokeWidth:3,dot:{fill:"#10B981",strokeWidth:2,r:4},activeDot:{r:6,stroke:"#10B981",strokeWidth:2}})]})}):l.jsx("div",{className:"flex items-center justify-center h-full",children:l.jsxs("div",{className:"text-center",children:[l.jsx("svg",{className:`w-16 h-16 mx-auto mb-4 ${n?"text-gray-600":"text-gray-300"}`,fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M3 3a1 1 0 000 2v8a2 2 0 002 2h2.586l-1.293 1.293a1 1 0 101.414 1.414L10 15.414l2.293 2.293a1 1 0 001.414-1.414L12.414 15H15a2 2 0 002-2V5a1 1 0 100-2H3zm11.707 4.707a1 1 0 00-1.414-1.414L10 9.586 8.707 8.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),l.jsx("p",{className:n?"text-gray-400":"text-gray-500",children:"No utilization data available"})]})})})]})]})},i5e=({facilityId:t,className:e="",isDarkMode:n=!1,onDateSelect:r})=>{const[s,i]=v.useState(new Map),[a,o]=v.useState({}),[c,d]=v.useState(new Date().getMonth()),[h,p]=v.useState(new Date().getFullYear()),[m,y]=v.useState(!1);v.useEffect(()=>{t&&x()},[t]);const x=async()=>{if(t)try{y(!0);const P=await wo.getFacilityAnalytics(t,"4w"),C=new Map;P.kpis?.dailyTaskData&&(Object.entries(P.kpis.dailyTaskData).forEach(([D,$])=>{C.set(D,$.workload)}),o(P.kpis.dailyTaskData)),i(C)}catch(P){console.error("Failed to fetch workload data:",P),i(new Map)}finally{y(!1)}},_=()=>{const P=h,C=c,D=new Date(Date.UTC(P,C,1)),F=new Date(Date.UTC(P,C+1,0)).getUTCDate(),U=D.getUTCDay(),z=new Date().toISOString().split("T")[0],Q=[];for(let ne=0;ne<U;ne++)Q.push(null);for(let ne=1;ne<=F;ne++){const K=new Date(Date.UTC(P,C,ne)).toISOString().split("T")[0],Y=s.get(K)||0,G=Y>=80?"high":Y>=50?"medium":"low",q=K===z,ge=a[K]?.totalTasks||0;Q.push({day:ne,date:K,workload:Math.round(Y*10)/10,originalWorkload:Y,density:G,isToday:q,taskCount:ge})}return Q},w=new Date;w.toISOString().split("T")[0];const N=_(),k=["January","February","March","April","May","June","July","August","September","October","November","December"],S=(P,C)=>{if(C===0)return"bg-gray-400";switch(P){case"high":return"bg-red-500";case"medium":return"bg-yellow-500";case"low":return"bg-green-500";default:return"bg-gray-200"}},O=()=>{c===0?(d(11),p(h-1)):d(c-1)},R=()=>{c===11?(d(0),p(h+1)):d(c+1)},M=()=>{const P=new Date;d(P.getMonth()),p(P.getFullYear())};return m?l.jsxs(ds,{className:`p-6 ${e}`,children:[l.jsx(pi,{label:"WORKLOAD DENSITY",title:`${k[w.getMonth()]} ${w.getFullYear()}`}),l.jsx("div",{className:"mt-6 flex items-center justify-center h-64",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),l.jsx("p",{className:"text-sm",style:{color:je.mutedText},children:"Loading workload data..."})]})})]}):l.jsxs(ds,{className:e,padding:"lg",isDarkMode:n,children:[l.jsx(pi,{label:"WORKLOAD DENSITY",title:"Task Distribution Calendar",isDarkMode:n}),l.jsxs("div",{className:"flex items-center justify-between",style:{marginTop:ht.md,marginBottom:ht.md},children:[l.jsxs("h3",{className:"font-bold whitespace-nowrap",style:{color:n?"#E5E7EB":je.neutralText,fontSize:vt.small.fontSize,fontWeight:700},children:[k[c]," ",h]}),l.jsxs("div",{className:"flex items-center",style:{gap:ht.xs},children:[l.jsx("button",{onClick:O,className:`p-1 rounded transition-colors ${n?"hover:bg-gray-700":"hover:bg-gray-100"}`,style:{borderRadius:`${jr.sm}px`,transition:mx.fast},title:"Previous month",children:l.jsx("svg",{className:"w-4 h-4",style:{color:n?"#9CA3AF":je.mutedText},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),l.jsx("button",{onClick:M,className:"px-2 py-1 text-xs text-white rounded hover:opacity-90 transition-colors",style:{backgroundColor:je.success,borderRadius:`${jr.sm}px`,transition:mx.fast,fontSize:vt.caption.fontSize},title:"Go to current month",children:"TODAY"}),l.jsx("button",{onClick:R,className:`p-1 rounded transition-colors ${n?"hover:bg-gray-700":"hover:bg-gray-100"}`,style:{borderRadius:`${jr.sm}px`,transition:mx.fast},title:"Next month",children:l.jsx("svg",{className:"w-4 h-4",style:{color:n?"#9CA3AF":je.mutedText},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]}),l.jsxs("div",{className:"grid grid-cols-7",style:{gap:ht.xs/2,marginBottom:ht.sm},children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(P=>l.jsx("div",{className:"text-center font-medium",style:{color:n?"#9CA3AF":je.mutedText,fontSize:vt.caption.fontSize,fontWeight:vt.caption.fontWeight,paddingTop:ht.xs/2,paddingBottom:ht.xs/2},children:P},P)),N.map((P,C)=>{if(!P)return l.jsx("div",{className:"h-8"},C);const D=P;return l.jsxs("div",{className:"w-full font-medium flex flex-col items-center justify-center",style:{height:ht.lg,borderRadius:`${jr.sm}px`,backgroundColor:D.isToday?je.success+"20":"transparent",color:D.isToday?je.success:n?"#E5E7EB":je.neutralText,border:D.isToday?`1px solid ${je.success}`:"none",transition:mx.fast,fontSize:vt.caption.fontSize,fontWeight:vt.caption.fontWeight},title:`${D.date}: ${D.originalWorkload.toFixed(1)}% workload${D.taskCount?`, ${D.taskCount} tasks`:""} (${D.density} density)`,children:[l.jsx("span",{children:D.day}),l.jsx("div",{className:`w-2 h-1 rounded-full ${S(D.density,D.originalWorkload)}`,style:{opacity:.7,marginTop:ht.xs/4,borderRadius:`${jr.sm/2}px`}})]},C)})]}),l.jsx("div",{className:"flex items-center justify-between",style:{marginTop:ht.sm},children:l.jsxs("div",{className:"flex items-center",style:{gap:ht.sm},children:[l.jsxs("div",{className:"flex items-center",style:{gap:ht.xs/2},children:[l.jsx("div",{className:"rounded-full opacity-70",style:{width:12,height:8,backgroundColor:je.mutedText,borderRadius:`${jr.sm/2}px`}}),l.jsx("span",{style:{color:n?"#9CA3AF":je.mutedText,fontSize:vt.caption.fontSize,fontWeight:vt.caption.fontWeight},children:"No tasks (0%)"})]}),l.jsxs("div",{className:"flex items-center",style:{gap:ht.xs/2},children:[l.jsx("div",{className:"rounded-full opacity-70",style:{width:12,height:8,backgroundColor:je.status.balanced,borderRadius:`${jr.sm/2}px`}}),l.jsx("span",{style:{color:n?"#9CA3AF":je.mutedText,fontSize:vt.caption.fontSize,fontWeight:vt.caption.fontWeight},children:"Low (1-49%)"})]}),l.jsxs("div",{className:"flex items-center",style:{gap:ht.xs/2},children:[l.jsx("div",{className:"rounded-full opacity-70",style:{width:12,height:8,backgroundColor:je.status.caution,borderRadius:`${jr.sm/2}px`}}),l.jsx("span",{style:{color:n?"#9CA3AF":je.mutedText,fontSize:vt.caption.fontSize,fontWeight:vt.caption.fontWeight},children:"Medium (50-79%)"})]}),l.jsxs("div",{className:"flex items-center",style:{gap:ht.xs/2},children:[l.jsx("div",{className:"rounded-full opacity-70",style:{width:12,height:8,backgroundColor:je.status.overloaded,borderRadius:`${jr.sm/2}px`}}),l.jsx("span",{style:{color:n?"#9CA3AF":je.mutedText,fontSize:vt.caption.fontSize,fontWeight:vt.caption.fontWeight},children:"High (80%+)"})]})]})})]})},a5e=({members:t,onMemberClick:e,className:n="",isDarkMode:r=!1})=>{const s=[{key:"name",label:"Member",sortable:!0,render:(i,a)=>{const o=`Click to view detailed analytics for ${a.name}
Role: ${a.role}
Utilization: ${a.utilization.toFixed(1)}%
Tasks: ${a.tasks?.total||0} total`;return l.jsx(Pr,{content:o,position:"right",delay:300,className:"w-full",children:l.jsxs("div",{className:"flex items-center space-x-3 text-left",children:[l.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium flex-shrink-0 ${r?"bg-gray-700":"bg-gray-200"}`,children:a.avatarUrl?l.jsx("img",{src:a.avatarUrl,alt:a.name,className:"w-full h-full rounded-full object-cover"}):l.jsx("span",{className:r?"text-gray-300":"text-gray-700",children:(a.name||"U").split(" ").map(c=>c[0]).join("").toUpperCase()})}),l.jsxs("div",{className:"min-w-0 flex-1",children:[l.jsx("button",{onClick:()=>e(a.id),className:"text-sm font-medium hover:underline transition-colors duration-150 text-left block",style:{color:je.primary},children:a.name}),l.jsx("p",{className:`text-xs text-left ${r?"text-gray-400":"text-gray-600"}`,children:a.role})]})]})})}},{key:"tasks",label:"Tasks",sortable:!0,render:i=>l.jsxs("div",{className:"text-sm",children:[l.jsx("div",{className:"font-medium",children:Ha(i?.total||0)}),l.jsxs("div",{className:`text-xs ${r?"text-gray-400":"text-gray-600"}`,children:[i?.ongoing||0," ongoing, ",i?.completed||0," completed"]})]})},{key:"utilization",label:"Utilization",sortable:!0,render:(i,a)=>{const o=`Utilization: ${(i||0).toFixed(1)}%
Status: ${i>=90?"Overloaded":i>=70?"Caution":"Balanced"}
Member: ${a.name}`;return l.jsx("div",{className:"w-24",children:l.jsx(Pr,{content:o,position:"top",delay:300,className:"w-full",children:l.jsx(uQ,{value:i||0,max:100,size:"sm",color:"auto",showPercentage:!0,isDarkMode:r})})})}},{key:"status",label:"Status",sortable:!0,render:i=>l.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium capitalize",style:{backgroundColor:jw(i||"balanced")+"20",color:jw(i||"balanced")},children:i||"balanced"})},{key:"trend",label:"Trend",sortable:!0,render:i=>l.jsx("div",{className:"flex items-center space-x-1",children:(i||0)>0?l.jsxs(l.Fragment,{children:[l.jsx("svg",{className:"w-4 h-4 text-green-500",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z",clipRule:"evenodd"})}),l.jsxs("span",{className:"text-sm text-green-600 font-medium",children:["+",i,"%"]})]}):(i||0)<0?l.jsxs(l.Fragment,{children:[l.jsx("svg",{className:"w-4 h-4 text-red-500",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M16.707 10.293a1 1 0 010 1.414l-6 6a1 1 0 01-1.414 0l-6-6a1 1 0 111.414-1.414L9 14.586V3a1 1 0 012 0v11.586l4.293-4.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),l.jsxs("span",{className:"text-sm text-red-600 font-medium",children:[i,"%"]})]}):l.jsx("span",{className:`text-sm ${r?"text-gray-400":"text-gray-600"}`,children:"—"})})}];return l.jsxs(ds,{className:`p-6 ${n}`,isDarkMode:r,children:[l.jsx(pi,{label:"TEAM MEMBERS",title:"Member Performance",action:{label:"View All",onClick:()=>{}},isDarkMode:r}),l.jsx("div",{className:"mt-6",children:l.jsx(cQ,{data:t,columns:s,onRowClick:i=>e(i.id),emptyMessage:"No member data available",isDarkMode:r})})]})},o5e=({insights:t,className:e="",isDarkMode:n=!1})=>{const r=a=>{const o="w-5 h-5";switch(a){case"danger":return l.jsx("svg",{className:o,fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})});case"warning":return l.jsx("svg",{className:o,fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})});case"info":return l.jsx("svg",{className:o,fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})});case"success":return l.jsx("svg",{className:o,fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})});default:return l.jsx("svg",{className:o,fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}},s=a=>{if(n)switch(a){case"danger":return{backgroundColor:"#1F1B1B",borderColor:"#EF4444",iconColor:"#EF4444"};case"warning":return{backgroundColor:"#1F1B0F",borderColor:"#F59E0B",iconColor:"#F59E0B"};case"info":return{backgroundColor:"#0F1419",borderColor:"#3B82F6",iconColor:"#3B82F6"};case"success":return{backgroundColor:"#0F1B0F",borderColor:"#10B981",iconColor:"#10B981"};default:return{backgroundColor:"#1F1F1F",borderColor:"#6B7280",iconColor:"#6B7280"}}else switch(a){case"danger":return{backgroundColor:"#FEF2F2",borderColor:"#EF4444",iconColor:"#EF4444"};case"warning":return{backgroundColor:"#FFFBEB",borderColor:"#F59E0B",iconColor:"#F59E0B"};case"info":return{backgroundColor:"#EFF6FF",borderColor:"#3B82F6",iconColor:"#3B82F6"};case"success":return{backgroundColor:"#F0FDF4",borderColor:"#10B981",iconColor:"#10B981"};default:return{backgroundColor:"#F8FAFC",borderColor:"#6B7280",iconColor:"#6B7280"}}},i=a=>{const o=n?{critical:{bg:"#1F1B1B",text:"#FCA5A5",label:"Critical"},high:{bg:"#1F1B0F",text:"#FCD34D",label:"High"},medium:{bg:"#0F1419",text:"#93C5FD",label:"Medium"},low:{bg:"#0F1B0F",text:"#86EFAC",label:"Low"}}:{critical:{bg:"#FEE2E2",text:"#991B1B",label:"Critical"},high:{bg:"#FEF3C7",text:"#92400E",label:"High"},medium:{bg:"#EFF6FF",text:"#1E40AF",label:"Medium"},low:{bg:"#F0FDF4",text:"#065F46",label:"Low"}},c=o[a]||o.low;return l.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium",style:{backgroundColor:c.bg,color:c.text,borderRadius:`${jr.sm}px`},children:c.label})};return l.jsxs(ds,{className:`${e}`,padding:"lg",isDarkMode:n,children:[l.jsx(pi,{label:"FACILITY INSIGHTS",title:"Performance Analysis",isDarkMode:n}),l.jsx("div",{className:"space-y-4",style:{marginTop:`${ht.md}px`},children:t.length===0?l.jsxs("div",{className:"text-center py-8",style:{color:je.mutedText,paddingTop:`${ht.lg}px`,paddingBottom:`${ht.lg}px`},children:[l.jsx("svg",{className:"w-12 h-12 mx-auto mb-4 opacity-50",fill:"currentColor",viewBox:"0 0 20 20",style:{marginBottom:`${ht.sm}px`},children:l.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),l.jsx("p",{className:"text-sm",style:{fontSize:vt.small.fontSize,color:je.mutedText},children:"No insights available for this facility."})]}):t.map((a,o)=>{const c=s(a.type);return l.jsxs("div",{className:"flex items-start rounded-lg border-l-4 transition-all duration-200 hover:shadow-md",style:{backgroundColor:c.backgroundColor,borderLeftColor:c.borderColor,padding:`${ht.sm}px`,borderRadius:`${jr.base}px`,borderLeftWidth:"4px",marginBottom:`${ht.sm}px`},children:[l.jsx("div",{className:"flex-shrink-0",style:{color:c.iconColor,marginTop:"1px",marginRight:`${ht.sm}px`},children:r(a.type)}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",style:{marginBottom:`${ht.xs}px`},children:[l.jsxs("h4",{className:"font-medium",style:{fontSize:vt.small.fontSize,fontWeight:vt.small.fontWeight,color:n?"white":je.neutralText},children:[a.type.charAt(0).toUpperCase()+a.type.slice(1)," Alert"]}),i(a.severity)]}),l.jsx("p",{className:"mb-3 leading-relaxed",style:{fontSize:vt.small.fontSize,lineHeight:vt.small.lineHeight,marginBottom:`${ht.xs}px`,color:n?"#E5E7EB":je.neutralText},children:a.message}),a.action&&l.jsxs("div",{className:"rounded-md p-3",style:{backgroundColor:n?"#374151":"#F3F4F6",padding:`${ht.xs}px`,borderRadius:`${jr.sm}px`,marginTop:`${ht.xs}px`},children:[l.jsx("p",{className:"font-medium mb-1",style:{fontSize:vt.caption.fontSize,fontWeight:vt.caption.fontWeight,textTransform:vt.caption.textTransform,letterSpacing:vt.caption.letterSpacing,marginBottom:`${ht.xs/4}px`,color:n?"#9CA3AF":je.mutedText},children:"RECOMMENDED ACTION:"}),l.jsx("p",{className:"leading-relaxed",style:{fontSize:vt.caption.fontSize,lineHeight:vt.caption.lineHeight,color:n?"#E5E7EB":je.neutralText},children:a.action})]})]})]},a.id||o)})})]})},l5e=({className:t=""})=>{const e=eo(),{facilityId:n}=uh(),{token:r}=gi(),[s,i]=v.useState(null),[a,o]=v.useState([]),[c,d]=v.useState(!0),[h,p]=v.useState(null),[m,y]=v.useState("4w"),[x,_]=v.useState(null),[w,N]=v.useState(()=>typeof window<"u"?document.documentElement.classList.contains("dark"):!1),k=async C=>{if(!r){d(!1);return}if(!n){p("Facility ID is required"),d(!1);return}try{d(!0),p(null);const D=await wo.getFacilityAnalytics(n,C);if(i(D),D.insights&&D.insights.length>0){const $=D.insights.map((F,U)=>{let I="info",z="medium";return F.includes("over capacity")||F.includes("burnout")||F.includes("critical")?(I="danger",z="critical"):F.includes("approaching")||F.includes("high")||F.includes("overload")?(I="warning",z="high"):F.includes("excellent")||F.includes("smoothly")||F.includes("well")?(I="success",z="low"):(F.includes("low")||F.includes("available")||F.includes("opportunity"))&&(I="info",z="medium"),{id:`server-insight-${U}`,type:I,severity:z,message:F,action:"Review the data and take appropriate action."}});o($)}else o([])}catch(D){console.error("Failed to fetch facility analytics:",D),p("Failed to load facility analytics. Please try again.")}finally{d(!1)}};v.useEffect(()=>{r?k(m):d(!1)},[m,n,r]),v.useEffect(()=>{const C=new MutationObserver(()=>{N(document.documentElement.classList.contains("dark"))});return C.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>C.disconnect()},[]);const S=C=>{y(C)},O=C=>{e(`/resources/analytics/member/${C}`)},R=C=>{_(C)},M=async()=>{if(n)try{await bD.exportFacilityAnalytics(n,m)}catch(C){console.error("Export failed:",C)}},P=()=>{e("/resources/analytics/global")};return c?l.jsxs("div",{className:`space-y-6 ${t}`,children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("div",{className:"flex items-center space-x-2 mb-2",children:l.jsx("button",{onClick:P,className:`text-sm hover:underline transition-colors ${w?"text-green-400 hover:text-green-300":"text-green-600 hover:text-green-700"}`,children:"← Back to Global Analytics"})}),l.jsx("h1",{className:`text-2xl font-bold ${w?"text-white":"text-gray-900"}`,children:"Facility Analytics"}),l.jsx("p",{className:w?"text-gray-400":"text-gray-600",children:"Loading facility data..."})]}),l.jsx("div",{className:`w-32 h-10 rounded animate-pulse ${w?"bg-gray-700":"bg-gray-200"}`})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[...Array(3)].map((C,D)=>l.jsx(xD,{isDarkMode:w},D))}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.jsx(Op,{isDarkMode:w}),l.jsx(Op,{isDarkMode:w})]}),l.jsx(Mp,{isDarkMode:w}),l.jsx(Mp,{isDarkMode:w})]}):h?l.jsx("div",{className:`text-center py-12 ${t}`,children:l.jsxs("div",{className:`mb-4 ${w?"text-red-400":"text-red-600"}`,children:[l.jsx("svg",{className:"w-16 h-16 mx-auto mb-4",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),l.jsx("h3",{className:`text-lg font-medium mb-2 ${w?"text-white":"text-gray-900"}`,children:"Error Loading Facility Analytics"}),l.jsx("p",{className:`mb-4 ${w?"text-gray-400":"text-gray-600"}`,children:h}),l.jsxs("div",{className:"space-x-4",children:[l.jsx("button",{onClick:()=>k(m),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Try Again"}),l.jsx("button",{onClick:P,className:`px-4 py-2 rounded-lg transition-colors ${w?"bg-gray-700 text-gray-200 hover:bg-gray-600":"bg-gray-600 text-white hover:bg-gray-700"}`,children:"Back to Global"})]})]})}):s?l.jsxs("div",{className:`space-y-6 ${t}`,children:[l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[l.jsx("button",{onClick:P,className:`text-sm hover:underline transition-colors ${w?"text-green-400 hover:text-green-300":"text-green-600 hover:text-green-700"}`,children:"← Back to Global Analytics"}),l.jsx("span",{className:`text-sm ${w?"text-gray-500":"text-gray-400"}`,children:"/"}),l.jsx("span",{className:`text-sm ${w?"text-gray-400":"text-gray-600"}`,children:"Facility Analytics"})]}),l.jsx("h1",{className:`text-2xl font-bold ${w?"text-white":"text-gray-900"}`,children:s.facility.name}),l.jsx("p",{className:w?"text-gray-400":"text-gray-600",children:"Project and task level analytics for this facility"})]}),l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx(yD,{timeRange:m,onTimeRangeChange:S,isDarkMode:w}),l.jsx(vD,{onExport:M,isDarkMode:w})]})]}),l.jsx(r5e,{kpis:s.kpis,isDarkMode:w}),l.jsx(s5e,{charts:s.charts,isDarkMode:w}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsx("div",{className:"lg:col-span-1",children:l.jsx(i5e,{facilityId:n,onDateSelect:R,isDarkMode:w})}),l.jsx("div",{className:"lg:col-span-2",children:l.jsx(a5e,{members:s.members,onMemberClick:O,isDarkMode:w})})]}),l.jsx(o5e,{insights:a,isDarkMode:w})]}):l.jsxs("div",{className:`text-center py-12 ${t}`,children:[l.jsx("p",{className:w?"text-gray-400":"text-gray-600",children:"No facility data available"}),l.jsx("button",{onClick:P,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Back to Global Analytics"})]})},c5e=()=>{const{facilityId:t}=uh();return t?l.jsx("div",{className:"min-h-screen bg-gray-50",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsx(l5e,{})})}):l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Facility Not Found"}),l.jsx("p",{className:"text-gray-600",children:"The requested facility could not be found."})]})})},u5e=({kpis:t,className:e=""})=>{const n=[{label:"Total Tasks",value:Ha(t.totalTasks),color:je.primary,icon:l.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M10 2L3 7v11a1 1 0 001 1h12a1 1 0 001-1V7l-7-5zM8 15V9h4v6H8z",clipRule:"evenodd"})})},{label:"Ongoing",value:Ha(t.ongoing),color:je.warning,icon:l.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"})})},{label:"Completed",value:Ha(t.completed),color:je.success,icon:l.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})},{label:"Utilization",value:bA(t.utilization),color:t.utilization>=100?je.danger:t.utilization>=80?je.warning:je.success,icon:l.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M3 3a1 1 0 000 2v8a2 2 0 002 2h2.586l-1.293 1.293a1 1 0 101.414 1.414L10 15.414l2.293 2.293a1 1 0 001.414-1.414L12.414 15H15a2 2 0 002-2V5a1 1 0 100-2H3zm11.707 4.707a1 1 0 00-1.414-1.414L10 9.586 8.707 8.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})},{label:"Trend",value:t.trend>0?`+${H5(t.trend)}`:t.trend<0?H5(t.trend):"—",color:t.trend>0?je.danger:t.trend<0?je.success:je.mutedText,icon:t.trend>0?l.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z",clipRule:"evenodd"})}):t.trend<0?l.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M16.707 10.293a1 1 0 010 1.414l-6 6a1 1 0 01-1.414 0l-6-6a1 1 0 111.414-1.414L9 14.586V3a1 1 0 012 0v11.586l4.293-4.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):l.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})})}];return l.jsx("div",{className:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6 ${e}`,children:n.map((r,s)=>l.jsx(ds,{className:"p-6",children:l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"p-2 rounded-lg",style:{backgroundColor:r.color+"20"},children:l.jsx("div",{style:{color:r.color},children:r.icon})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium",style:{color:je.mutedText},children:r.label}),l.jsx("p",{className:"text-2xl font-bold",style:{color:r.color},children:r.value})]})]})})},s))})},d5e=({charts:t,className:e=""})=>{const n=[{name:"Completed",value:t.taskDistribution.completed,color:je.success},{name:"Ongoing",value:t.taskDistribution.ongoing,color:je.warning},{name:"Pending",value:t.taskDistribution.pending,color:je.mutedText}].filter(a=>a.value>0),r=t.taskDistribution.completed+t.taskDistribution.ongoing+t.taskDistribution.pending,s=({active:a,payload:o})=>{if(a&&o&&o.length){const c=o[0];return l.jsxs("div",{className:"bg-white p-3 border rounded-lg shadow-lg",style:{borderColor:je.border},children:[l.jsx("p",{className:"font-medium",children:c.name}),l.jsxs("p",{className:"text-sm",children:[l.jsx("span",{style:{color:je.mutedText},children:"Tasks:"})," ",l.jsx("span",{className:"font-medium",children:c.value})]}),l.jsxs("p",{className:"text-sm",children:[l.jsx("span",{style:{color:je.mutedText},children:"Percentage:"})," ",l.jsxs("span",{className:"font-medium",children:[r>0?(c.value/r*100).toFixed(1):0,"%"]})]})]})}return null},i=({active:a,payload:o,label:c})=>a&&o&&o.length?l.jsxs("div",{className:"bg-white p-3 border rounded-lg shadow-lg",style:{borderColor:je.border},children:[l.jsx("p",{className:"font-medium",children:new Date(c).toLocaleDateString()}),l.jsxs("p",{className:"text-sm",children:[l.jsx("span",{style:{color:je.mutedText},children:"Utilization:"})," ",l.jsxs("span",{className:"font-medium",children:[o[0].value.toFixed(1),"%"]})]})]}):null;return l.jsxs("div",{className:`grid grid-cols-1 lg:grid-cols-2 gap-6 ${e}`,children:[l.jsxs(ds,{className:"p-6",children:[l.jsx(pi,{label:"TASK DISTRIBUTION",title:"Work Breakdown"}),l.jsx("div",{className:"mt-6 h-80",children:r>0?l.jsx(Dp,{width:"100%",height:"100%",children:l.jsxs(gD,{children:[l.jsx(Z_,{data:n,cx:"50%",cy:"50%",labelLine:!1,label:({name:a,percent:o})=>`${a} ${(o*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:n.map((a,o)=>l.jsx(pu,{fill:a.color},`cell-${o}`))}),l.jsx(Ip,{content:l.jsx(s,{})})]})}):l.jsx("div",{className:"flex items-center justify-center h-full",children:l.jsxs("div",{className:"text-center",children:[l.jsx("svg",{className:"w-16 h-16 mx-auto mb-4 text-gray-300",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M10 2L3 7v11a1 1 0 001 1h12a1 1 0 001-1V7l-7-5zM8 15V9h4v6H8z",clipRule:"evenodd"})}),l.jsx("p",{className:"text-gray-500",children:"No task data available"})]})})}),r>0&&l.jsx("div",{className:"mt-4 flex justify-center space-x-6",children:n.map((a,o)=>l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:a.color}}),l.jsxs("span",{className:"text-sm",style:{color:je.neutralText},children:[a.name," (",a.value,")"]})]},o))})]}),l.jsxs(ds,{className:"p-6",children:[l.jsx(pi,{label:"UTILIZATION TREND",title:"Daily Performance"}),l.jsx("div",{className:"mt-6 h-80",children:t.utilizationSeries.length>0?l.jsx(Dp,{width:"100%",height:"100%",children:l.jsxs(lQ,{data:t.utilizationSeries,margin:{top:20,right:30,left:20,bottom:5},children:[l.jsx(eE,{strokeDasharray:"3 3",stroke:je.border}),l.jsx(tE,{dataKey:"date",tick:{fontSize:12},stroke:je.mutedText,tickFormatter:a=>{const o=new Date(a);return`${o.getMonth()+1}/${o.getDate()}`}}),l.jsx(nE,{tick:{fontSize:12},stroke:je.mutedText,domain:[0,100]}),l.jsx(Ip,{content:l.jsx(i,{})}),l.jsx(hD,{type:"monotone",dataKey:"utilization",stroke:je.primary,strokeWidth:3,dot:{fill:je.primary,strokeWidth:2,r:4},activeDot:{r:6,stroke:je.primary,strokeWidth:2}})]})}):l.jsx("div",{className:"flex items-center justify-center h-full",children:l.jsxs("div",{className:"text-center",children:[l.jsx("svg",{className:"w-16 h-16 mx-auto mb-4 text-gray-300",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M3 3a1 1 0 000 2v8a2 2 0 002 2h2.586l-1.293 1.293a1 1 0 101.414 1.414L10 15.414l2.293 2.293a1 1 0 001.414-1.414L12.414 15H15a2 2 0 002-2V5a1 1 0 100-2H3zm11.707 4.707a1 1 0 00-1.414-1.414L10 9.586 8.707 8.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),l.jsx("p",{className:"text-gray-500",children:"No utilization data available"})]})})})]})]})},UV=t=>new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),h5e=({timeline:t,onTaskClick:e,className:n=""})=>{const r=a=>{switch(a){case"completed":return l.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})});case"ongoing":return l.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"})});case"pending":return l.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"})});default:return l.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}},s=a=>{const o={completed:{bg:"#F0FDF4",text:"#065F46",label:"Completed"},ongoing:{bg:"#EFF6FF",text:"#1E40AF",label:"Ongoing"},pending:{bg:"#F8FAFC",text:"#6B7280",label:"Pending"}},c=o[a]||o.pending;return l.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium",style:{backgroundColor:c.bg,color:c.text},children:c.label})},i=(a,o)=>{const c=new Date(a),d=new Date(o),h=Math.abs(d.getTime()-c.getTime());return Math.ceil(h/(1e3*60*60*24))};return l.jsxs(ds,{className:`p-6 ${n}`,children:[l.jsx(pi,{label:"RECENT ACTIVITY",title:"Task Timeline",action:{label:"View All Tasks",onClick:()=>{}}}),l.jsx("div",{className:"mt-6",children:t.length===0?l.jsxs("div",{className:"text-center py-8",style:{color:je.mutedText},children:[l.jsx("svg",{className:"w-12 h-12 mx-auto mb-4 opacity-50",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M10 2L3 7v11a1 1 0 001 1h12a1 1 0 001-1V7l-7-5zM8 15V9h4v6H8z",clipRule:"evenodd"})}),l.jsx("p",{children:"No recent activity found"})]}):l.jsx("div",{className:"space-y-4",children:t.map((a,o)=>l.jsxs("div",{className:"flex items-start space-x-4 p-4 rounded-lg border hover:bg-gray-50 transition-colors duration-150",style:{borderColor:je.border},children:[l.jsx("div",{className:"flex-shrink-0 p-2 rounded-full",style:{backgroundColor:jw(a.status)+"20",color:jw(a.status)},children:r(a.status)}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("button",{onClick:()=>e?.(a.taskId),className:"text-sm font-medium hover:underline transition-colors duration-150",style:{color:je.primary},children:["Task #",a.taskId]}),s(a.status)]}),l.jsx("p",{className:"text-sm font-medium mb-1",style:{color:je.neutralText},children:a.project}),l.jsxs("div",{className:"flex items-center space-x-4 text-xs",style:{color:je.mutedText},children:[l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z",clipRule:"evenodd"})}),l.jsxs("span",{children:["Started: ",UV(a.start)]})]}),l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z",clipRule:"evenodd"})}),l.jsxs("span",{children:["Due: ",UV(a.end)]})]}),l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"})}),l.jsxs("span",{children:["Duration: ",i(a.start,a.end)," days"]})]})]})]})]},a.taskId))})})]})},f5e=({insights:t,className:e="",isDarkMode:n=!1})=>{const r=a=>{const o="w-5 h-5";switch(a){case"danger":return l.jsx("svg",{className:o,fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})});case"warning":return l.jsx("svg",{className:o,fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})});case"info":return l.jsx("svg",{className:o,fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})});case"success":return l.jsx("svg",{className:o,fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})});default:return l.jsx("svg",{className:o,fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}},s=a=>{if(n)switch(a){case"danger":return{backgroundColor:"#1F1B1B",borderColor:"#EF4444",iconColor:"#EF4444"};case"warning":return{backgroundColor:"#1F1B0F",borderColor:"#F59E0B",iconColor:"#F59E0B"};case"info":return{backgroundColor:"#0F1419",borderColor:"#3B82F6",iconColor:"#3B82F6"};case"success":return{backgroundColor:"#0F1B0F",borderColor:"#10B981",iconColor:"#10B981"};default:return{backgroundColor:"#1F1F1F",borderColor:"#6B7280",iconColor:"#6B7280"}}else switch(a){case"danger":return{backgroundColor:"#FEF2F2",borderColor:"#EF4444",iconColor:"#EF4444"};case"warning":return{backgroundColor:"#FFFBEB",borderColor:"#F59E0B",iconColor:"#F59E0B"};case"info":return{backgroundColor:"#EFF6FF",borderColor:"#3B82F6",iconColor:"#3B82F6"};case"success":return{backgroundColor:"#F0FDF4",borderColor:"#10B981",iconColor:"#10B981"};default:return{backgroundColor:"#F8FAFC",borderColor:"#6B7280",iconColor:"#6B7280"}}},i=a=>{const o=n?{critical:{bg:"#1F1B1B",text:"#FCA5A5",label:"Critical"},high:{bg:"#1F1B0F",text:"#FCD34D",label:"High"},medium:{bg:"#0F1419",text:"#93C5FD",label:"Medium"},low:{bg:"#0F1B0F",text:"#86EFAC",label:"Low"}}:{critical:{bg:"#FEE2E2",text:"#991B1B",label:"Critical"},high:{bg:"#FEF3C7",text:"#92400E",label:"High"},medium:{bg:"#EFF6FF",text:"#1E40AF",label:"Medium"},low:{bg:"#F0FDF4",text:"#065F46",label:"Low"}},c=o[a]||o.low;return l.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium",style:{backgroundColor:c.bg,color:c.text,borderRadius:`${jr.sm}px`},children:c.label})};return l.jsxs(ds,{className:`${e}`,padding:"lg",isDarkMode:n,children:[l.jsx(pi,{label:"PERFORMANCE INSIGHTS",title:"Member Analysis",isDarkMode:n}),l.jsx("div",{className:"space-y-4",style:{marginTop:`${ht.md}px`},children:t.length===0?l.jsxs("div",{className:"text-center py-8",style:{color:je.mutedText,paddingTop:`${ht.lg}px`,paddingBottom:`${ht.lg}px`},children:[l.jsx("svg",{className:"w-12 h-12 mx-auto mb-4 opacity-50",fill:"currentColor",viewBox:"0 0 20 20",style:{marginBottom:`${ht.sm}px`},children:l.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),l.jsx("p",{className:"text-sm",style:{fontSize:vt.small.fontSize,color:je.mutedText},children:"No insights available for this member."})]}):t.map((a,o)=>{const c=s(a.type);return l.jsxs("div",{className:"flex items-start rounded-lg border-l-4 transition-all duration-200 hover:shadow-md",style:{backgroundColor:c.backgroundColor,borderLeftColor:c.borderColor,padding:`${ht.sm}px`,borderRadius:`${jr.base}px`,borderLeftWidth:"4px",marginBottom:`${ht.sm}px`},children:[l.jsx("div",{className:"flex-shrink-0",style:{color:c.iconColor,marginTop:"1px",marginRight:`${ht.sm}px`},children:r(a.type)}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",style:{marginBottom:`${ht.xs}px`},children:[l.jsxs("h4",{className:"font-medium",style:{fontSize:vt.small.fontSize,fontWeight:vt.small.fontWeight,color:n?"white":je.neutralText},children:[a.type.charAt(0).toUpperCase()+a.type.slice(1)," Alert"]}),i(a.severity)]}),l.jsx("p",{className:"mb-3 leading-relaxed",style:{fontSize:vt.small.fontSize,lineHeight:vt.small.lineHeight,marginBottom:`${ht.xs}px`,color:n?"#E5E7EB":je.neutralText},children:a.message}),a.action&&l.jsxs("div",{className:"rounded-md p-3",style:{backgroundColor:n?"#374151":"#F3F4F6",padding:`${ht.xs}px`,borderRadius:`${jr.sm}px`,marginTop:`${ht.xs}px`},children:[l.jsx("p",{className:"font-medium mb-1",style:{fontSize:vt.caption.fontSize,fontWeight:vt.caption.fontWeight,textTransform:vt.caption.textTransform,letterSpacing:vt.caption.letterSpacing,marginBottom:`${ht.xs/4}px`,color:n?"#9CA3AF":je.mutedText},children:"RECOMMENDED ACTION:"}),l.jsx("p",{className:"leading-relaxed",style:{fontSize:vt.caption.fontSize,lineHeight:vt.caption.lineHeight,color:n?"#E5E7EB":je.neutralText},children:a.action})]})]})]},a.id||o)})})]})};class p5e{static generateGlobalInsights(e){const n=[],{kpis:r,facilities:s,members:i}=e,a=i.filter(p=>p.utilization>=100);if(a.length>0){const p=a.filter(m=>m.trend>0);p.length>0&&n.push({id:"persistent-overload",type:"warning",severity:"high",message:`Persistent overload detected for ${p.length} member(s): ${p.map(m=>m.name).join(", ")} over capacity.`,action:"Consider redistributing tasks or increasing capacity."})}const o=s.filter(p=>p.avgUtilization>=90);o.length>0&&n.push({id:"critical-facility",type:"danger",severity:"critical",message:`Facility ${o[0].name} at critical utilization (${o[0].avgUtilization}%) — recommend immediate capacity review.`,action:"Review resource allocation and consider adding capacity."});const c=s.filter(p=>p.avgUtilization<40);c.length>0&&n.push({id:"low-utilization",type:"info",severity:"medium",message:`Low utilization in ${c[0].name} (${c[0].avgUtilization}%) suggests available capacity for redistribution.`,action:"Consider reallocating resources to overloaded facilities."});const d=i.filter(p=>p.status==="overloaded").length,h=i.filter(p=>p.utilization<60).length;return d>0&&h>0&&n.push({id:"rebalancing-opportunity",type:"info",severity:"medium",message:`Potential to rebalance tasks: ${d} overloaded vs ${h} underutilized members.`,action:"Review task distribution across team members."}),r.delta.avgUtilization&&r.delta.avgUtilization>5&&n.push({id:"increasing-utilization",type:"warning",severity:"medium",message:`Overall utilization increased by ${r.delta.avgUtilization}% this period.`,action:"Monitor trends and prepare for capacity planning."}),n.length===0&&n.push({id:"stable-operations",type:"success",severity:"low",message:"Operations are running smoothly with balanced utilization across facilities.",action:"Continue monitoring and maintain current resource allocation."}),n.slice(0,4)}static generateFacilityInsights(e){const n=[],{kpis:r,facility:s,members:i}=e,a=i.filter(d=>d.utilization>=100);a.length>0&&n.push({id:"facility-overload",type:"warning",severity:"high",message:`${a.length} member(s) in ${s.name} are over capacity.`,action:"Redistribute tasks or request additional resources."}),r.avgUtilization>=90?n.push({id:"high-facility-util",type:"danger",severity:"critical",message:`${s.name} utilization at ${r.avgUtilization}% - approaching capacity limits.`,action:"Immediate capacity review and resource planning required."}):r.avgUtilization<40&&n.push({id:"low-facility-util",type:"info",severity:"medium",message:`${s.name} utilization at ${r.avgUtilization}% - capacity available for additional work.`,action:"Consider taking on additional projects or supporting other facilities."});const o=i.reduce((d,h)=>d+h.tasks.total,0),c=i.reduce((d,h)=>d+(h.tasks.total-h.tasks.completed-h.tasks.ongoing),0);return c>o*.3&&n.push({id:"high-pending-tasks",type:"warning",severity:"medium",message:`${c} pending tasks (${Math.round(c/o*100)}% of total) in ${s.name}.`,action:"Review task prioritization and resource allocation."}),n.slice(0,4)}static generateMemberInsights(e){const n=[],{kpis:r,member:s}=e;r.utilization>=100?n.push({id:"member-overload",type:"danger",severity:"critical",message:`${s.name} is at ${r.utilization}% utilization - risk of burnout.`,action:"Immediately redistribute tasks or reduce workload."}):r.utilization>=90&&n.push({id:"member-high-util",type:"warning",severity:"high",message:`${s.name} utilization at ${r.utilization}% - approaching capacity limits.`,action:"Monitor workload and consider task redistribution."}),r.trend>10?n.push({id:"increasing-workload",type:"warning",severity:"medium",message:`${s.name}'s workload increased by ${r.trend}% this period.`,action:"Review recent task assignments and workload distribution."}):r.trend<-10&&n.push({id:"decreasing-workload",type:"info",severity:"low",message:`${s.name}'s workload decreased by ${Math.abs(r.trend)}% this period.`,action:"Consider assigning additional tasks to maintain productivity."});const i=r.completed/r.totalTasks*100;return i>=90?n.push({id:"high-completion-rate",type:"success",severity:"low",message:`${s.name} has excellent task completion rate (${i.toFixed(1)}%).`,action:"Consider for additional responsibilities or leadership opportunities."}):i<60&&n.push({id:"low-completion-rate",type:"warning",severity:"medium",message:`${s.name} has low task completion rate (${i.toFixed(1)}%).`,action:"Review task complexity and provide additional support or training."}),n.length===0&&n.push({id:"stable-performance",type:"success",severity:"low",message:`${s.name} is performing well with balanced workload and good task completion.`,action:"Continue current task allocation and monitor performance."}),n.slice(0,4)}static getInsightIcon(e){switch(e){case"danger":return"⚠️";case"warning":return"⚠️";case"info":return"ℹ️";case"success":return"✅";default:return"ℹ️"}}static getInsightColor(e){switch(e){case"danger":return"#EF4444";case"warning":return"#F59E0B";case"info":return"#3B82F6";case"success":return"#10B981";default:return"#6B7280"}}}const m5e=({className:t=""})=>{const e=eo(),{memberId:n}=uh(),{token:r}=gi(),[s,i]=v.useState(null),[a,o]=v.useState([]),[c,d]=v.useState(!0),[h,p]=v.useState(null),[m,y]=v.useState("4w"),x=async S=>{if(!r){d(!1);return}if(!n){p("Invalid member ID"),d(!1);return}try{d(!0),p(null);const O=await wo.getMemberAnalytics(n,S);i(O);const R=p5e.generateMemberInsights(O);o(R)}catch(O){console.error("Failed to fetch member analytics:",O),p("Failed to load member analytics. Please try again.")}finally{d(!1)}};v.useEffect(()=>{r?x(m):d(!1)},[m,n,r]);const _=S=>{y(S)},w=S=>{e(`/tasks/${S}`)},N=async()=>{if(n)try{await bD.exportMemberAnalytics(n,m)}catch(S){console.error("Export failed:",S)}},k=()=>{s?.member.facilityId?e(`/resources/analytics/facility/${s.member.facilityId}`):e("/resources/analytics/global")};return c?l.jsxs("div",{className:`space-y-6 ${t}`,children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("div",{className:"flex items-center space-x-2 mb-2",children:l.jsx("button",{onClick:k,className:"text-sm text-green-600 hover:text-green-700 hover:underline transition-colors",children:"← Back to Facility Analytics"})}),l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Member Analytics"}),l.jsx("p",{className:"text-gray-600",children:"Loading member data..."})]}),l.jsx("div",{className:"w-32 h-10 bg-gray-200 rounded animate-pulse"})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[...Array(5)].map((S,O)=>l.jsx(xD,{},O))}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.jsx(Op,{}),l.jsx(Op,{})]}),l.jsx(Mp,{}),l.jsx(Mp,{})]}):h?l.jsx("div",{className:`text-center py-12 ${t}`,children:l.jsxs("div",{className:"text-red-600 mb-4",children:[l.jsx("svg",{className:"w-16 h-16 mx-auto mb-4",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),l.jsx("h3",{className:"text-lg font-medium mb-2",children:"Error Loading Member Analytics"}),l.jsx("p",{className:"text-gray-600 mb-4",children:h}),l.jsxs("div",{className:"space-x-4",children:[l.jsx("button",{onClick:()=>x(m),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Try Again"}),l.jsx("button",{onClick:k,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Back to Facility"})]})]})}):s?l.jsxs("div",{className:`space-y-6 ${t}`,children:[l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[l.jsx("button",{onClick:k,className:"text-sm text-green-600 hover:text-green-700 hover:underline transition-colors",children:"← Back to Facility Analytics"}),l.jsx("span",{className:"text-sm text-gray-400",children:"/"}),l.jsx("span",{className:"text-sm text-gray-600",children:"Member Analytics"})]}),l.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[l.jsx("div",{className:"w-16 h-16 rounded-full bg-gray-200 flex items-center justify-center text-xl font-bold",style:{backgroundColor:je.border},children:s.member.avatarUrl?l.jsx("img",{src:s.member.avatarUrl,alt:s.member.name,className:"w-full h-full rounded-full object-cover"}):l.jsx("span",{style:{color:je.neutralText},children:(s.member.name||"U").split(" ").map(S=>S[0]).join("").toUpperCase()})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:s.member.name||"Unknown User"}),l.jsxs("p",{className:"text-gray-600",children:[s.member.role," • Capacity: ",s.member.capacity," hours/week • Individual performance analytics"]})]})]})]}),l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx(yD,{timeRange:m,onTimeRangeChange:_}),l.jsx(vD,{onExport:N})]})]}),l.jsx(u5e,{kpis:s.kpis}),l.jsx(d5e,{charts:s.charts}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.jsx(h5e,{timeline:s.timeline,onTaskClick:w}),l.jsx(f5e,{insights:a})]})]}):l.jsxs("div",{className:`text-center py-12 ${t}`,children:[l.jsx("p",{className:"text-gray-600",children:"No member data available"}),l.jsx("button",{onClick:k,className:"mt-4 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Back to Facility Analytics"})]})},g5e=()=>{const{memberId:t}=uh();return t?l.jsx("div",{className:"min-h-screen bg-gray-50",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsx(m5e,{})})}):l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Member Not Found"}),l.jsx("p",{className:"text-gray-600",children:"The requested member could not be found."})]})})},y5e=({isCollapsed:t,isDarkMode:e})=>{const{facilities:n,loading:r,refreshFacilities:s}=Z1(),[i,a]=v.useState(!1),[o,c]=v.useState(""),[d,h]=v.useState(new Set(["facilities"])),[p,m]=v.useState({}),y=n.slice(0,5);n.length<=3;const x=async R=>{try{await Gr.create(R),await s()}catch(M){throw console.error("Error creating facility:",M),M}},_=R=>{h(M=>{const P=new Set(M);return P.has(R)?P.delete(R):P.add(R),P})},w=R=>o?R.filter(M=>M.name.toLowerCase().includes(o.toLowerCase())):R,N=R=>{const M=p[R.id];return M?M.overdueCount>0?{status:"overdue",badge:M.overdueCount}:M.taskCount>0?{status:"active",badge:M.taskCount}:{status:"empty",badge:null}:{status:"active",badge:null}},k=R=>{const M=t?"w-5 h-5":"w-3 h-3",P=t?"w-5 h-5":"w-4 h-4";switch(R){case"overdue":return l.jsx(em,{className:`${M} text-red-500`});case"active":return l.jsx(Mi,{className:`${M} text-green-500`});case"empty":return l.jsx(sr,{className:`${M} text-gray-400`});default:return l.jsx(Ya,{className:`${P}`})}},S=(R,M=!1,P=!0)=>{const{status:C,badge:D}=N(R);return l.jsx(ll,{to:`/facility/${R.id}`,className:({isActive:$})=>`flex items-center px-2 py-1.5 rounded-md transition-colors duration-200 group ${t?"justify-center":""} ${$||M?"bg-brand text-white":e?"text-gray-300 hover:bg-gray-800 hover:text-white":"text-gray-600 hover:bg-gray-100 hover:text-brand"}`,title:t?R.name:void 0,children:t?l.jsx("div",{className:"flex items-center justify-center",children:k(C)}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[k(C),l.jsx("span",{className:"ml-2 text-xs truncate font-medium",children:R.name})]}),P&&D&&l.jsx("span",{className:`ml-2 px-1.5 py-0.5 text-xs rounded-full flex-shrink-0 ${C==="overdue"?"bg-red-100 text-red-700 dark:bg-red-900/20 dark:text-red-400":"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-300"}`,children:D})]})},R.id)},O=()=>{const R=d.has("facilities"),M=w(n),P=w(y);return M.length===0&&!o?null:l.jsxs("div",{className:"mb-2",children:[!t&&l.jsxs("button",{onClick:()=>_("facilities"),className:`flex items-center justify-between w-full px-2 py-1 text-xs font-semibold uppercase tracking-wider transition-colors ${e?"text-gray-300 hover:text-gray-200":"text-gray-600 hover:text-gray-700"}`,children:[l.jsx("span",{children:"Facilities"}),l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx("span",{className:`px-1.5 py-0.5 text-xs rounded-full ${e?"bg-gray-700 text-gray-300":"bg-gray-200 text-gray-600"}`,children:M.length}),R?l.jsx(Va,{className:"w-3 h-3"}):l.jsx(HP,{className:"w-3 h-3"})]})]}),!t&&R&&l.jsx("div",{className:"px-2 mb-2",children:l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsxs("div",{className:"relative flex-1",children:[l.jsx(mh,{className:"w-3 h-3 absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-400"}),l.jsx("input",{type:"text",placeholder:"Search facilities...",value:o,onChange:C=>c(C.target.value),className:`w-full pl-7 pr-2 py-1.5 text-xs border-0 rounded-md ${e?"bg-gray-700 text-white placeholder-gray-400":"bg-gray-100 text-gray-900 placeholder-gray-500"} focus:outline-none focus:ring-1 focus:ring-brand`}),o&&l.jsx("button",{onClick:()=>c(""),className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:l.jsx(yn,{className:"w-3 h-3"})})]}),l.jsx("button",{onClick:()=>a(!0),className:"p-1.5 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors flex-shrink-0",title:"Add Facility",children:l.jsx(Ps,{className:"w-4 h-4 text-brand"})})]})}),!t&&R&&l.jsx("div",{className:"space-y-1 ml-2",children:M.length===0?l.jsx("div",{className:"px-2 py-1 text-xs text-gray-500 dark:text-gray-400",children:o?"No facilities found":"No facilities yet"}):l.jsxs(l.Fragment,{children:[!o&&P.length>0&&P.length<M.length&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"px-2 py-1 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Recent"}),l.jsx("div",{className:"space-y-0.5 ml-2",children:P.map(C=>S(C,!1,!0))}),l.jsx("div",{className:"px-2 py-1 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"All Facilities"}),l.jsx("div",{className:"space-y-0.5 ml-2",children:M.filter(C=>!P.some(D=>D.id===C.id)).map(C=>S(C,!1,!0))})]}),(!P.length||P.length===M.length||o)&&l.jsx("div",{className:"space-y-0.5",children:M.map(C=>S(C,!1,!0))})]})})]})};return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"mb-3",children:[t&&l.jsxs(ll,{to:"/Facilities",className:({isActive:R})=>`flex items-center px-2 py-1.5 rounded-md transition-colors duration-200 justify-center ${R?"bg-brand text-white":e?"text-gray-300 hover:bg-gray-800 hover:text-white":"text-gray-600 hover:bg-gray-100 hover:text-brand"}`,title:"Facilities",children:[l.jsx(Ya,{className:"w-5 h-5 flex-shrink-0"}),n.length>0&&l.jsx("span",{className:"ml-1 text-xs font-medium",children:n.length})]}),r&&!t&&l.jsx("div",{className:"px-2 py-1 text-xs text-gray-500 dark:text-gray-400",children:"Loading..."}),!r&&O(),!r&&n.length===0&&!t&&l.jsx("div",{className:"px-2 py-1 text-xs text-gray-500 dark:text-gray-400",children:"No facilities yet"})]}),l.jsx(vW,{isOpen:i,onClose:()=>a(!1),onCreate:x,isDarkMode:e})]})},v5e=({isCollapsed:t,onToggle:e,isDarkMode:n})=>{const{user:r,logout:s}=gi(),[i,a]=v.useState(!1);return l.jsx(l.Fragment,{children:l.jsxs("div",{className:`sidebar-container fixed left-0 top-0 flex flex-col transition-all duration-300 ${t?"w-16":"w-64"} h-screen rounded-r-lg ${n?"bg-gray-900 text-white border-r border-gray-700":"bg-white text-gray-900 border-r border-gray-200"} z-40`,children:[l.jsx("div",{className:`px-4 py-3 border-b ${n?"border-gray-700 bg-gray-900":"border-gray-200 bg-white"} flex items-center ${t?"justify-center":"justify-between"} h-14`,children:t?l.jsx("button",{onClick:e,className:"flex items-center justify-center p-2 rounded-md transition-colors hover:bg-gray-100 dark:hover:bg-gray-800",title:"Expand sidebar",children:l.jsx("img",{src:"/images/nexora.png",alt:"Nexora Logo",className:"w-6 h-6 rounded-full object-cover flex-shrink-0"})}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[l.jsx("img",{src:"/images/nexora.png",alt:"PMSNexora Logo",className:"w-6 h-6 rounded-full object-cover flex-shrink-0"}),l.jsx("h1",{className:"text-lg font-semibold text-brand truncate",children:"Nexora"})]}),l.jsx("button",{onClick:e,className:`p-1.5 rounded-md transition-colors flex-shrink-0 ${n?"hover:bg-gray-800 text-gray-400 hover:text-gray-200":"hover:bg-gray-100 text-gray-500 hover:text-gray-700"}`,title:"Collapse sidebar",children:l.jsx(yn,{className:"w-4 h-4"})})]})}),l.jsxs("nav",{className:"flex-1 flex flex-col overflow-y-auto overflow-x-visible",children:[l.jsx("div",{className:"px-3 py-2 overflow-visible",children:l.jsxs("div",{className:"flex flex-col space-y-1 overflow-visible",children:[l.jsx(Pr,{content:"Resource Analytics",position:"right",disabled:!t,children:l.jsxs(ll,{to:"/resources/analytics/global",className:({isActive:o})=>`flex items-center px-2 py-1.5 rounded-md transition-all duration-200 ${t?"justify-center":"justify-start"} ${o?"bg-brand text-white shadow-sm":n?"text-gray-300 hover:bg-gray-800 hover:text-white":"text-gray-700 hover:bg-gray-100 hover:text-brand"}`,children:[l.jsx(dW,{className:`${t?"w-5 h-5":"w-4 h-4"} flex-shrink-0`}),!t&&l.jsx("span",{className:"ml-2 text-sm leading-none",children:"Dashboard Analytics"})]})}),l.jsx(Pr,{content:"Time Log",position:"right",disabled:!t,children:l.jsxs(ll,{to:"/time-log",className:({isActive:o})=>`flex items-center px-2 py-1.5 rounded-md transition-all duration-200 ${t?"justify-center":"justify-start"} ${o?"bg-brand text-white shadow-sm":n?"text-gray-300 hover:bg-gray-800 hover:text-white":"text-gray-700 hover:bg-gray-100 hover:text-brand"}`,children:[l.jsx(sr,{className:`${t?"w-5 h-5":"w-4 h-4"} flex-shrink-0`}),!t&&l.jsx("span",{className:"ml-2 text-sm leading-none",children:"Time Log"})]})}),l.jsx(Pr,{content:"Notes",position:"right",disabled:!t,children:l.jsxs(ll,{to:"/notes",className:({isActive:o})=>`flex items-center px-2 py-1.5 rounded-md transition-all duration-200 ${t?"justify-center":"justify-start"} ${o?"bg-brand text-white shadow-sm":n?"text-gray-300 hover:bg-gray-800 hover:text-white":"text-gray-700 hover:bg-gray-100 hover:text-brand"}`,children:[l.jsx(s_,{className:`${t?"w-5 h-5":"w-4 h-4"} flex-shrink-0`}),!t&&l.jsx("span",{className:"ml-2 text-sm leading-none",children:"Notes"})]})}),l.jsx(Pr,{content:"Meetings",position:"right",disabled:!t,children:l.jsxs(ll,{to:"/meetings",className:({isActive:o})=>`flex items-center px-2 py-1.5 rounded-md transition-all duration-200 ${t?"justify-center":"justify-start"} ${o?"bg-brand text-white shadow-sm":n?"text-gray-300 hover:bg-gray-800 hover:text-white":"text-gray-700 hover:bg-gray-100 hover:text-brand"}`,children:[l.jsx(Qc,{className:`${t?"w-5 h-5":"w-4 h-4"} flex-shrink-0`}),!t&&l.jsx("span",{className:"ml-2 text-sm leading-none",children:"Meetings"})]})}),l.jsx(Pr,{content:"Users",position:"right",disabled:!t,children:l.jsxs(ll,{to:"/users",className:({isActive:o})=>`flex items-center px-2 py-1.5 rounded-md transition-all duration-200 ${t?"justify-center":"justify-start"} ${o?"bg-brand text-white shadow-sm":n?"text-gray-300 hover:bg-gray-800 hover:text-white":"text-gray-700 hover:bg-gray-100 hover:text-brand"}`,children:[l.jsx(_0,{className:`${t?"w-5 h-5":"w-4 h-4"} flex-shrink-0`}),!t&&l.jsx("span",{className:"ml-2 text-sm leading-none",children:"Users"})]})}),l.jsx(Pr,{content:"Settings",position:"right",disabled:!t,children:l.jsxs(ll,{to:"/menu-settings",className:({isActive:o})=>`flex items-center px-2 py-1.5 rounded-md transition-all duration-200 ${t?"justify-center":"justify-start"} ${o?"bg-brand text-white shadow-sm":n?"text-gray-300 hover:bg-gray-800 hover:text-white":"text-gray-700 hover:bg-gray-100 hover:text-brand"}`,children:[l.jsx(QP,{className:`${t?"w-5 h-5":"w-4 h-4"} flex-shrink-0`}),!t&&l.jsx("span",{className:"ml-2 text-sm leading-none",children:"Settings"})]})})]})}),l.jsx("div",{className:`border-t ${n?"border-gray-700":"border-gray-200"}`}),l.jsx("div",{className:"px-3 py-2 overflow-visible",children:l.jsx(y5e,{isCollapsed:t,isDarkMode:n})})]}),l.jsx("div",{className:`px-4 py-3 border-t ${n?"border-gray-700 bg-gray-900":"border-gray-200 bg-white"}`,children:t?l.jsx("div",{className:"flex justify-center",children:r&&r.photoURL?l.jsx("img",{src:r.photoURL,alt:"Profile",className:"w-7 h-7 rounded-full object-cover"}):l.jsx("div",{className:"w-7 h-7 rounded-full bg-brand flex items-center justify-center",children:l.jsx(As,{className:"w-3.5 h-3.5 text-white"})})}):l.jsxs("div",{className:"relative",children:[l.jsxs("button",{onClick:()=>a(!i),className:`w-full flex items-center space-x-3 p-2 rounded-md transition-colors ${n?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:[r&&r.photoURL?l.jsx("img",{src:r.photoURL,alt:"Profile",className:"w-7 h-7 rounded-full object-cover"}):l.jsx("div",{className:"w-7 h-7 rounded-full bg-brand flex items-center justify-center",children:l.jsx(As,{className:"w-3.5 h-3.5 text-white"})}),l.jsxs("div",{className:"flex-1 text-left min-w-0",children:[l.jsx("p",{className:`text-sm font-medium truncate ${n?"text-white":"text-gray-900"}`,children:r&&r.displayName?r.displayName:"User"}),l.jsx("p",{className:`text-xs truncate ${n?"text-gray-400":"text-gray-500"}`,children:r&&r.email?r.email:"user@example.com"})]}),l.jsx(Va,{className:`w-3.5 h-3.5 transition-transform flex-shrink-0 ${i?"rotate-180":""} ${n?"text-gray-400":"text-gray-500"}`})]}),i&&l.jsx("div",{className:`absolute bottom-full left-3 right-3 mb-2 rounded-md shadow-lg border ${n?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:l.jsxs("div",{className:"py-1",children:[l.jsxs("button",{className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-700 ${n?"text-gray-300":"text-gray-700"}`,children:[l.jsx(As,{className:"w-3.5 h-3.5 inline mr-2"}),"Profile Settings"]}),l.jsxs("button",{className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-700 ${n?"text-gray-300":"text-gray-700"}`,children:[l.jsx(bge,{className:"w-3.5 h-3.5 inline mr-2"}),"Help & Support"]}),l.jsx("hr",{className:`my-1 ${n?"border-gray-700":"border-gray-200"}`}),l.jsxs("button",{onClick:s,className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-700 text-red-600 dark:text-red-400",children:[l.jsx(t0e,{className:"w-3.5 h-3.5 inline mr-2"}),"Sign Out"]})]})})]})}),l.jsx("div",{className:"px-4 py-2",children:!t&&l.jsx("p",{className:"text-xs text-gray-500",children:"© 2024 PMSNexora. All rights reserved."})})]})})},mo=({children:t})=>{const{user:e}=gi(),n=Bo(),r=eo(),{currentFacilityName:s}=SU(),[i,a]=v.useState(!1),[o,c]=v.useState(()=>typeof window<"u"?document.documentElement.classList.contains("dark"):!1),d=m=>{const y={"/Facilities":"Facilities Management","/time-log":"Time Log","/users":"Users Management","/menu-settings":"Settings","/notes":"Notes","/meetings":"Meetings","/resources/analytics/global":"Dashboard Analytics"};return m.startsWith("/facility/")?"Facility View":y[m]||"Dashboard Analytics"},h=()=>{a(!i)},p=()=>{const m=document.documentElement;m.classList.contains("dark")?(m.classList.remove("dark"),c(!1)):(m.classList.add("dark"),c(!0))};return v.useEffect(()=>{const m=document.documentElement;c(m.classList.contains("dark"))},[]),l.jsxs("div",{className:`h-screen overflow-hidden ${o?"bg-neutral-dark":"bg-neutral-light"}`,children:[l.jsxs("header",{className:`fixed top-0 ${i?"left-16":"left-64"} right-0 z-30 shadow-sm border-b h-14 flex items-center justify-between px-6 ${o?"bg-gray-900 border-gray-700":"bg-white border-gray-200"}`,style:{margin:0},children:[l.jsx("div",{className:"flex items-center space-x-5",children:l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("button",{onClick:()=>r("/Facilities"),className:`text-sm font-medium hover:underline transition-colors ml-3 ${o?"text-gray-400 hover:text-gray-300":"text-gray-500 hover:text-gray-600"}`,children:d(n.pathname)}),s&&n.pathname.startsWith("/facility/")&&l.jsx(HP,{className:"w-4 h-4 text-green-500 ml-3"})]}),s&&n.pathname.startsWith("/facility/")&&l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Ya,{className:"w-4 h-4 text-gray-500"}),l.jsx("span",{className:`text-base font-bold ${o?"text-white":"text-gray-900"}`,children:s})]})]})}),l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsxs("button",{"aria-label":"Notifications",className:`p-1.5 rounded-lg transition-colors relative ${o?"text-gray-300 hover:text-white hover:bg-gray-700":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"}`,children:[l.jsx(cW,{className:"w-4 h-4"}),l.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full border-2 border-white"})]}),l.jsx("button",{onClick:p,"aria-label":"Toggle dark mode",className:`p-1.5 rounded-lg transition-colors ${o?"text-yellow-400 hover:text-yellow-300 hover:bg-gray-700":"text-gray-600 hover:text-gray-800 hover:bg-gray-100"}`,children:o?l.jsx(O0e,{className:"w-4 h-4"}):l.jsx(u0e,{className:"w-4 h-4"})}),l.jsxs("div",{className:"flex items-center space-x-2",children:[e&&e.photoURL?l.jsx("img",{src:e.photoURL,alt:"Profile",className:"w-8 h-8 rounded-full object-cover"}):l.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center bg-brand",children:l.jsx(As,{className:"w-4 h-4 text-white"})}),l.jsx("span",{className:`text-xs font-medium ${o?"text-white":"text-gray-700"}`,children:e&&e.displayName?e.displayName:"User"})]})]})]}),l.jsx(v5e,{isCollapsed:i,onToggle:h,isDarkMode:o}),l.jsx("main",{className:`${i?"ml-16":"ml-64"} mt-14 h-[calc(100vh-3.5rem)] ${n.pathname.startsWith("/facility/")?"overflow-hidden":"overflow-y-auto p-4"}`,children:t})]})},go=({children:t})=>{const{user:e,loading:n}=gi(),r=Bo();return n?l.jsx("div",{className:"min-h-screen flex items-center justify-center",children:l.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-green-600"})}):e?l.jsx(l.Fragment,{children:t}):l.jsx(ZV,{to:"/login",state:{from:r},replace:!0})};function x5e(){return l.jsx(Gue,{children:l.jsx(Xue,{children:l.jsx(Jue,{children:l.jsx(ede,{children:l.jsx(b5e,{})})})})})}function b5e(){const{user:t,loading:e}=gi();return e?l.jsx(xW,{}):l.jsxs(fJ,{children:[l.jsx(Ls,{path:"/",element:l.jsx(Bme,{})}),l.jsx(Ls,{path:"/login",element:t?l.jsx(ZV,{to:"/resources/analytics/global",replace:!0}):l.jsx(Ume,{})}),l.jsx(Ls,{path:"/accept-invitation/:token",element:l.jsx(uye,{})}),l.jsx(Ls,{path:"/join-facility/:linkId",element:l.jsx(dye,{})}),l.jsx(Ls,{path:"/Facilities",element:l.jsx(go,{children:l.jsx(mo,{children:l.jsx(mye,{})})})}),l.jsx(Ls,{path:"/facility/:id",element:l.jsx(go,{children:l.jsx(mo,{children:l.jsx(bEe,{})})})}),l.jsx(Ls,{path:"/time-log",element:l.jsx(go,{children:l.jsx(mo,{children:l.jsx(_Ee,{})})})}),l.jsx(Ls,{path:"/users",element:l.jsx(go,{children:l.jsx(mo,{children:l.jsx(SEe,{})})})}),l.jsx(Ls,{path:"/menu-settings",element:l.jsx(go,{children:l.jsx(mo,{children:l.jsx(TEe,{})})})}),l.jsx(Ls,{path:"/notes",element:l.jsx(go,{children:l.jsx(mo,{children:l.jsx(CEe,{})})})}),l.jsx(Ls,{path:"/meetings",element:l.jsx(go,{children:l.jsx(mo,{children:l.jsx(jEe,{})})})}),l.jsx(Ls,{path:"/resources/analytics/global",element:l.jsx(go,{children:l.jsx(mo,{children:l.jsx(n5e,{})})})}),l.jsx(Ls,{path:"/resources/analytics/facility/:facilityId",element:l.jsx(go,{children:l.jsx(mo,{children:l.jsx(c5e,{})})})}),l.jsx(Ls,{path:"/resources/analytics/member/:memberId",element:l.jsx(go,{children:l.jsx(mo,{children:l.jsx(g5e,{})})})})]})}EX.createRoot(document.getElementById("root")).render(l.jsx(MJ,{children:l.jsx(Yue,{children:l.jsx(x5e,{})})}));document.addEventListener("click",t=>{const e=t.target;if(e instanceof HTMLAnchorElement&&e.hash&&e.getAttribute("href")?.startsWith("#")){t.preventDefault();const n=document.querySelector(e.hash);n&&n.scrollIntoView({behavior:"smooth",block:"start"})}});
